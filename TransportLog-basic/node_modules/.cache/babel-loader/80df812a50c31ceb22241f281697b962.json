{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nimport { KeyboardEvents, compile, Property, EventHandler, Animation, formatUnit, append, attributes } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, detach, Event, Complex, addClass, removeClass, closest, isUndefined, getValue, NotifyPropertyChanges, Browser } from '@syncfusion/ej2-base';\nimport { FieldSettings } from '../drop-down-base/drop-down-base';\nimport { DropDownBase, dropDownBaseClasses } from '../drop-down-base/drop-down-base';\nimport { DataManager, Query } from '@syncfusion/ej2-data';\nimport { Popup, isCollide, createSpinner, showSpinner, hideSpinner } from '@syncfusion/ej2-popups';\nimport { highlightSearch, revertHighlightSearch } from '../common/highlight-search';\n/**\n * The Mention component is used to list someone or something based on user input in textarea, input,\n * or any other editable element from which the user can select.\n */\n\nvar Mention =\n/** @class */\nfunction (_super) {\n  __extends(Mention, _super);\n  /**\n   * * Constructor for creating the widget\n   *\n   * @param {MentionModel} options - Specifies the MentionComponent model.\n   * @param {string | HTMLElement} element - Specifies the element to render as component.\n   * @private\n   */\n\n\n  function Mention(options, element) {\n    return _super.call(this, options, element) || this;\n  }\n  /**\n   * When property value changes happened, then onPropertyChanged method will execute the respective changes in this component.\n   *\n   * @param {MentionModel} newProp - Returns the dynamic property value of the component.\n   * @param {MentionModel} oldProp - Returns the previous property value of the component.\n   * @private\n   * @returns {void}\n   */\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  Mention.prototype.onPropertyChanged = function (newProp, oldProp) {\n    for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n      var prop = _a[_i];\n\n      switch (prop) {\n        case 'minLength':\n          this.minLength = newProp.minLength;\n          break;\n\n        case 'suffixText':\n          this.suffixText = newProp.suffixText;\n          break;\n\n        case 'allowSpaces':\n          this.allowSpaces = newProp.allowSpaces;\n          break;\n\n        case 'mentionChar':\n          this.mentionChar = newProp.mentionChar;\n          break;\n\n        case 'showMentionChar':\n          this.showMentionChar = newProp.showMentionChar;\n          break;\n\n        case 'cssClass':\n          this.updateCssClass(newProp.cssClass, oldProp.cssClass);\n          break;\n      }\n    }\n  };\n\n  Mention.prototype.updateCssClass = function (newClass, oldClass) {\n    if (!isNullOrUndefined(oldClass)) {\n      oldClass = oldClass.replace(/\\s+/g, ' ').trim();\n    }\n\n    if (!isNullOrUndefined(newClass)) {\n      newClass = newClass.replace(/\\s+/g, ' ').trim();\n    }\n\n    this.setCssClass(newClass, [this.inputElement], oldClass);\n\n    if (this.popupObj) {\n      this.setCssClass(newClass, [this.popupObj.element], oldClass);\n    }\n  };\n\n  Mention.prototype.setCssClass = function (cssClass, elements, oldClass) {\n    if (!isNullOrUndefined(oldClass) && oldClass !== '') {\n      removeClass(elements, oldClass.split(' '));\n    }\n\n    if (!isNullOrUndefined(cssClass) && cssClass !== '') {\n      addClass(elements, cssClass.split(' '));\n    }\n  };\n\n  Mention.prototype.initializeData = function () {\n    this.isSelected = false;\n    this.isFiltered = false;\n    this.beforePopupOpen = false;\n    this.initRemoteRender = false;\n    this.isPopupOpen = false;\n    this.isCollided = false;\n    this.lineBreak = false;\n    this.keyConfigure = {\n      tab: 'tab',\n      enter: '13',\n      escape: '27',\n      end: '35',\n      home: '36',\n      down: '40',\n      up: '38',\n      pageUp: '33',\n      pageDown: '34',\n      open: 'alt+40',\n      close: 'shift+tab',\n      hide: 'alt+38',\n      space: '32'\n    };\n  };\n  /**\n   * Execute before render the list items\n   *\n   * @private\n   * @returns {void}\n   */\n\n\n  Mention.prototype.preRender = function () {\n    this.initializeData();\n\n    _super.prototype.preRender.call(this);\n  };\n  /**\n   * To Initialize the control rendering\n   *\n   * @private\n   * @returns {void}\n   */\n\n\n  Mention.prototype.render = function () {\n    this.inputElement = !isNullOrUndefined(this.target) ? typeof this.target === 'string' ? document.querySelector(this.target) : this.target : this.element;\n\n    if (this.isContentEditable(this.inputElement)) {\n      this.inputElement.setAttribute('contenteditable', 'true');\n      addClass([this.inputElement], ['e-mention']);\n\n      if (isNullOrUndefined(this.target)) {\n        addClass([this.inputElement], ['e-editable-element']);\n      }\n    }\n\n    this.queryString = this.elementValue();\n    this.wireEvent();\n  };\n\n  Mention.prototype.wireEvent = function () {\n    EventHandler.add(this.inputElement, 'keyup', this.onKeyUp, this);\n    this.bindCommonEvent();\n  };\n\n  Mention.prototype.unWireEvent = function () {\n    EventHandler.remove(this.inputElement, 'keyup', this.onKeyUp);\n    this.unBindCommonEvent();\n  };\n\n  Mention.prototype.bindCommonEvent = function () {\n    if (!Browser.isDevice) {\n      this.keyboardModule = new KeyboardEvents(this.inputElement, {\n        keyAction: this.keyActionHandler.bind(this),\n        keyConfigs: this.keyConfigure,\n        eventName: 'keydown'\n      });\n    }\n  };\n  /**\n   * Hides the spinner loader.\n   *\n   * @returns {void}\n   */\n\n\n  Mention.prototype.hideSpinner = function () {\n    this.hideWaitingSpinner();\n  };\n\n  Mention.prototype.hideWaitingSpinner = function () {\n    if (!isNullOrUndefined(this.spinnerElement)) {\n      hideSpinner(this.spinnerElement);\n    }\n\n    if (!isNullOrUndefined(this.spinnerTemplate) && !isNullOrUndefined(this.spinnerTemplateElement)) {\n      detach(this.spinnerTemplateElement);\n    }\n  };\n  /**\n   * Shows the spinner loader.\n   *\n   * @returns {void}\n   */\n\n\n  Mention.prototype.showWaitingSpinner = function () {\n    if (!isNullOrUndefined(this.popupObj)) {\n      if (isNullOrUndefined(this.spinnerTemplate) && isNullOrUndefined(this.spinnerElement)) {\n        this.spinnerElement = this.popupObj.element;\n        createSpinner({\n          target: this.spinnerElement,\n          width: Browser.isDevice ? '16px' : '14px'\n        }, this.createElement);\n        showSpinner(this.spinnerElement);\n      }\n\n      if (!isNullOrUndefined(this.spinnerTemplate)) {\n        this.setSpinnerTemplate();\n      }\n    }\n  };\n\n  Mention.prototype.keyActionHandler = function (e) {\n    var isNavigation = e.action === 'down' || e.action === 'up' || e.action === 'pageUp' || e.action === 'pageDown' || e.action === 'home' || e.action === 'end';\n    var isTabAction = e.action === 'tab' || e.action === 'close';\n\n    if (this.list === undefined && !this.isRequested && !isTabAction && e.action !== 'escape') {\n      this.renderList();\n    }\n\n    if (isNullOrUndefined(this.list) || !isNullOrUndefined(this.liCollections) && isNavigation && this.liCollections.length === 0 || this.isRequested) {\n      return;\n    }\n\n    if (e.action === 'escape') {\n      e.preventDefault();\n    }\n\n    this.isSelected = e.action === 'escape' ? false : this.isSelected;\n\n    switch (e.action) {\n      case 'down':\n      case 'up':\n        this.updateUpDownAction(e);\n        break;\n\n      case 'tab':\n        if (this.isPopupOpen) {\n          var li = this.list.querySelector('.' + dropDownBaseClasses.selected);\n\n          if (li) {\n            this.setSelection(li, e);\n          }\n\n          if (this.isPopupOpen) {\n            this.hidePopup(e);\n          }\n        }\n\n        break;\n\n      case 'enter':\n        if (this.isPopupOpen) {\n          e.preventDefault();\n\n          if (this.popupObj && this.popupObj.element.contains(this.selectedLI)) {\n            this.setValue(e);\n          }\n        }\n\n        break;\n\n      case 'escape':\n        if (this.isPopupOpen) {\n          this.hidePopup(e);\n        }\n\n        break;\n    }\n  };\n\n  Mention.prototype.updateUpDownAction = function (e) {\n    var focusEle = this.list.querySelector('.' + dropDownBaseClasses.focus);\n\n    if (this.isSelectFocusItem(focusEle)) {\n      this.setSelection(focusEle, e);\n    } else if (!isNullOrUndefined(this.liCollections)) {\n      var li = this.list.querySelector('.' + dropDownBaseClasses.selected);\n\n      if (!isNullOrUndefined(li)) {\n        var value = this.getFormattedValue(li.getAttribute('data-value'));\n        this.activeIndex = this.getIndexByValue(value);\n      }\n\n      var index = e.action === 'down' ? this.activeIndex + 1 : this.activeIndex - 1;\n      var startIndex = 0;\n      startIndex = e.action === 'down' && isNullOrUndefined(this.activeIndex) ? 0 : this.liCollections.length - 1;\n      index = index < 0 ? this.liCollections.length - 1 : index === this.liCollections.length ? 0 : index;\n      var nextItem = isNullOrUndefined(this.activeIndex) ? this.liCollections[startIndex] : this.liCollections[index];\n\n      if (!isNullOrUndefined(nextItem)) {\n        this.setSelection(nextItem, e);\n      }\n    }\n\n    if (this.isPopupOpen) {\n      e.preventDefault();\n    }\n  };\n\n  Mention.prototype.isSelectFocusItem = function (element) {\n    return !isNullOrUndefined(element);\n  };\n\n  Mention.prototype.unBindCommonEvent = function () {\n    if (!Browser.isDevice) {\n      this.keyboardModule.destroy();\n    }\n  };\n\n  Mention.prototype.onKeyUp = function (e) {\n    var rangetextContent;\n\n    if (this.isContentEditable(this.inputElement)) {\n      this.range = this.getCurrentRange();\n      rangetextContent = this.range.startContainer.textContent.split('');\n    }\n\n    var currentRange = this.getTextRange();\n    var lastWordRange = this.getLastLetter(currentRange);\n    var Regex = new RegExp(this.mentionChar, 'g');\n    var charRegex = new RegExp('[a-zA-Z]', 'g');\n\n    if (e.key === 'Shift' || e.keyCode === 37 || e.keyCode === 39) {\n      return;\n    }\n\n    if (!currentRange || !lastWordRange || e.code === 'Enter' || e.keyCode === 27 || lastWordRange.match(Regex) && lastWordRange.match(Regex).length > 1 || this.isContentEditable(this.inputElement) && this.range.startContainer && this.range.startContainer.previousElementSibling && this.range.startContainer.textContent.split('').length > 0 && (rangetextContent.length === 1 || rangetextContent[rangetextContent.length - 2].indexOf('') === -1 || this.range.startContainer.nodeType === 1)) {\n      if (this.allowSpaces && currentRange && currentRange.trim() !== '' && charRegex.test(currentRange) && currentRange.indexOf(this.mentionChar) !== -1 && !this.isMatchedText() && currentRange.length > 1 && currentRange.replace(/\\u00A0/g, ' ').charAt(currentRange.length - 2) !== ' ' && this.list && this.list.querySelectorAll('ul').length > 0) {\n        this.queryString = currentRange.substring(currentRange.lastIndexOf(this.mentionChar) + 1).replace('\\u00a0', ' ');\n        this.searchLists(e);\n      } else if (this.isPopupOpen && (!this.allowSpaces || !lastWordRange)) {\n        this.hidePopup();\n        this.lineBreak = true;\n      }\n\n      return;\n    }\n\n    this.queryString = lastWordRange.replace(this.mentionChar, '');\n\n    if (this.mentionChar.charCodeAt(0) === lastWordRange.charCodeAt(0) && this.queryString !== '' && e.keyCode !== 38 && e.keyCode !== 40 && !this.lineBreak) {\n      this.searchLists(e);\n\n      if (!this.isPopupOpen && this.queryString.length >= this.minLength) {\n        if (!this.isContentEditable(this.inputElement)) {\n          this.showPopup();\n        } else if (this.isContentEditable(this.inputElement) && this.range && this.range.startContainer !== this.inputElement) {\n          this.showPopup();\n        }\n      }\n    } else if (lastWordRange.indexOf(this.mentionChar) === 0 && !this.isPopupOpen && e.keyCode !== 8 && (!this.popupObj || isNullOrUndefined(this.target) && !document.body.contains(this.popupObj.element) || !isNullOrUndefined(this.target) && document.body.contains(this.popupObj.element))) {\n      if (this.initRemoteRender && this.list && this.list.classList.contains('e-nodata')) {\n        this.searchLists(e);\n      }\n\n      this.resetList(this.dataSource, this.fields);\n\n      if (isNullOrUndefined(this.list)) {\n        this.initValue();\n      }\n\n      if (!this.isPopupOpen && e.keyCode !== 38 && e.keyCode !== 40) {\n        this.showPopup();\n\n        if (this.initRemoteRender && this.list.querySelectorAll('li').length === 0) {\n          this.showWaitingSpinner();\n        }\n\n        this.lineBreak = false;\n      }\n    } else if (this.allowSpaces && this.queryString !== '' && currentRange && currentRange.trim() !== '' && currentRange.replace('\\u00a0', ' ').lastIndexOf(' ') < currentRange.length - 1 && e.keyCode !== 38 && e.keyCode !== 40 && e.keyCode !== 8) {\n      this.queryString = currentRange.substring(currentRange.lastIndexOf(this.mentionChar) + 1).replace('\\u00a0', ' ');\n      this.searchLists(e);\n    } else if (this.queryString === '' && this.isPopupOpen && e.keyCode !== 38 && e.keyCode !== 40) {\n      this.resetList(this.dataSource, this.fields);\n    }\n  };\n\n  Mention.prototype.isMatchedText = function () {\n    var isMatched = false;\n\n    for (var i = 0; i < (this.liCollections && this.liCollections.length); i++) {\n      if (this.getTextRange() && this.getTextRange().substring(this.getTextRange().lastIndexOf(this.mentionChar) + 1).replace('\\u00a0', ' ').trim() === this.liCollections[i].getAttribute('data-value').toLowerCase()) {\n        isMatched = true;\n      }\n    }\n\n    return isMatched;\n  };\n\n  Mention.prototype.getCurrentRange = function () {\n    this.range = this.inputElement.ownerDocument.getSelection().getRangeAt(0);\n    return this.range;\n  };\n\n  Mention.prototype.searchLists = function (e) {\n    var _this = this;\n\n    this.isDataFetched = false;\n\n    if (isNullOrUndefined(this.list)) {\n      _super.prototype.render.call(this);\n\n      this.unWireListEvents();\n      this.wireListEvents();\n    }\n\n    if (e.type !== 'mousedown' && (e.keyCode === 40 || e.keyCode === 38)) {\n      this.queryString = this.queryString === '' ? null : this.queryString;\n      this.beforePopupOpen = true;\n      this.resetList(this.dataSource, this.fields);\n      return;\n    }\n\n    this.isSelected = false;\n    this.activeIndex = null;\n    var eventArgs = {\n      preventDefaultAction: false,\n      text: this.elementValue(),\n      updateData: function (dataSource, query, fields) {\n        if (eventArgs.cancel) {\n          return;\n        }\n\n        _this.isFiltered = true;\n\n        _this.filterAction(dataSource, query, fields);\n      },\n      cancel: false\n    };\n    this.trigger('filtering', eventArgs, function (eventArgs) {\n      if (!eventArgs.cancel && !_this.isFiltered && !eventArgs.preventDefaultAction) {\n        _this.filterAction(_this.dataSource, null, _this.fields);\n      }\n    });\n  };\n\n  Mention.prototype.filterAction = function (dataSource, query, fields) {\n    this.beforePopupOpen = true;\n\n    if (this.queryString !== '' && this.queryString.length >= this.minLength) {\n      this.resetList(dataSource, fields, query);\n    } else {\n      if (this.isPopupOpen) {\n        this.hidePopup();\n      }\n\n      this.beforePopupOpen = false;\n    }\n\n    this.setDataIndex();\n    this.renderReactTemplates();\n  }; // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  Mention.prototype.onActionComplete = function (ulElement, list, e, isUpdated) {\n    _super.prototype.onActionComplete.call(this, ulElement, list, e);\n\n    if (this.isActive) {\n      if (!isNullOrUndefined(ulElement)) {\n        attributes(ulElement, {\n          'id': this.inputElement.id + '_options',\n          'role': 'listbox',\n          'aria-hidden': 'false'\n        });\n      }\n\n      var focusItem = ulElement.querySelector('.' + dropDownBaseClasses.li);\n\n      if (focusItem) {\n        focusItem.classList.add(dropDownBaseClasses.selected);\n        this.selectedLI = focusItem;\n        var value = this.getFormattedValue(focusItem.getAttribute('data-value'));\n        this.selectEventCallback(focusItem, this.getDataByValue(value), value, true);\n      }\n    }\n  };\n\n  Mention.prototype.setDataIndex = function () {\n    for (var i = 0; this.liCollections && i < this.liCollections.length; i++) {\n      this.liCollections[i].setAttribute('data-index', i.toString());\n    }\n  };\n\n  Mention.prototype.listOption = function (dataSource, fieldsSettings) {\n    var _this = this;\n\n    var fields = _super.prototype.listOption.call(this, dataSource, fieldsSettings);\n\n    if (isNullOrUndefined(fields.itemCreated)) {\n      fields.itemCreated = function (e) {\n        if (_this.highlight) {\n          if (_this.inputElement.tagName === _this.getNgDirective() && _this.itemTemplate) {\n            setTimeout(function () {\n              highlightSearch(e.item, _this.queryString, _this.ignoreCase, _this.filterType);\n            }, 0);\n          } else {\n            highlightSearch(e.item, _this.queryString, _this.ignoreCase, _this.filterType);\n          }\n        }\n      };\n    } else {\n      var itemCreated_1 = fields.itemCreated;\n\n      fields.itemCreated = function (e) {\n        if (_this.highlight) {\n          highlightSearch(e.item, _this.queryString, _this.ignoreCase, _this.filterType);\n        }\n\n        itemCreated_1.apply(_this, [e]);\n      };\n    }\n\n    return fields;\n  };\n\n  Mention.prototype.elementValue = function () {\n    if (!this.isContentEditable(this.inputElement)) {\n      return this.inputElement.value.replace(this.mentionChar, '');\n    } else {\n      return this.inputElement.textContent.replace(this.mentionChar, '');\n    }\n  };\n\n  Mention.prototype.getQuery = function (query) {\n    var filterQuery = query ? query.clone() : this.query ? this.query.clone() : new Query();\n    var filterType = this.queryString === '' && !isNullOrUndefined(this.elementValue()) ? 'equal' : this.filterType;\n    var queryString = this.queryString === '' && !isNullOrUndefined(this.elementValue()) ? this.elementValue() : this.queryString;\n\n    if (this.isFiltered) {\n      return filterQuery;\n    }\n\n    if (this.queryString !== null && this.queryString !== '') {\n      var dataType = this.typeOfData(this.dataSource).typeof;\n\n      if (!(this.dataSource instanceof DataManager) && dataType === 'string' || dataType === 'number') {\n        filterQuery.where('', filterType, queryString, this.ignoreCase, this.ignoreAccent);\n      } else {\n        var mapping = !isNullOrUndefined(this.fields.text) ? this.fields.text : '';\n        filterQuery.where(mapping, filterType, queryString, this.ignoreCase, this.ignoreAccent);\n      }\n    }\n\n    if (!isNullOrUndefined(this.suggestionCount)) {\n      // Since defualt value of suggestioncount is 25, checked the condition\n      if (this.suggestionCount !== 25) {\n        for (var queryElements = 0; queryElements < filterQuery.queries.length; queryElements++) {\n          if (filterQuery.queries[queryElements].fn === 'onTake') {\n            filterQuery.queries.splice(queryElements, 1);\n          }\n        }\n      }\n\n      filterQuery.take(this.suggestionCount);\n    }\n\n    return filterQuery;\n  };\n\n  Mention.prototype.renderHightSearch = function () {\n    if (this.highlight) {\n      for (var i = 0; i < this.liCollections.length; i++) {\n        var isHighlight = this.ulElement.querySelector('.e-active');\n\n        if (!isHighlight) {\n          revertHighlightSearch(this.liCollections[i]);\n          highlightSearch(this.liCollections[i], this.queryString, this.ignoreCase, this.filterType);\n        }\n      }\n    }\n  };\n\n  Mention.prototype.getTextRange = function () {\n    var text;\n\n    if (!this.isContentEditable(this.inputElement)) {\n      var component = this.inputElement;\n\n      if (!isNullOrUndefined(component)) {\n        var startPos = component.selectionStart;\n\n        if (component.value && startPos >= 0) {\n          text = component.value.substring(0, startPos);\n        }\n      }\n    } else {\n      var selectedElem = this.range.startContainer;\n\n      if (!isNullOrUndefined(selectedElem)) {\n        var workingNodeContent = selectedElem.textContent;\n        var selectStartOffset = this.range.startOffset;\n\n        if (workingNodeContent && selectStartOffset >= 0) {\n          text = workingNodeContent.substring(0, selectStartOffset);\n        }\n      }\n    }\n\n    return text;\n  };\n\n  Mention.prototype.getLastLetter = function (text) {\n    if (isNullOrUndefined(text)) {\n      return '';\n    }\n\n    var textValue = text.replace(/\\u00A0/g, ' ');\n    var words = textValue.split(/\\s+/);\n    var wordCnt = words.length - 1;\n    return words[wordCnt].trim();\n  };\n\n  Mention.prototype.isContentEditable = function (element) {\n    return element && element.nodeName !== 'INPUT' && element.nodeName !== 'TEXTAREA';\n  };\n  /**\n   * Opens the popup that displays the list of items.\n   *\n   * @returns {void}\n   */\n\n\n  Mention.prototype.showPopup = function () {\n    this.renderPopup();\n    attributes(this.inputElement, {\n      'aria-activedescendant': this.selectedElementID\n    });\n\n    if (this.selectedElementID == null) {\n      this.inputElement.removeAttribute('aria-activedescendant');\n    }\n  };\n  /* eslint-disable valid-jsdoc, jsdoc/require-param */\n\n  /**\n   * Hides the popup if it is in an open state.\n   *\n   * @returns {void}\n   */\n\n\n  Mention.prototype.hidePopup = function (e) {\n    this.removeSelection();\n    this.closePopup(0, e);\n  };\n\n  Mention.prototype.closePopup = function (delay, e) {\n    var _this = this;\n\n    if (!(this.popupObj && document.body.contains(this.popupObj.element) && this.beforePopupOpen)) {\n      return;\n    }\n\n    EventHandler.remove(document, 'mousedown', this.onDocumentClick);\n    this.inputElement.removeAttribute('aria-owns');\n    this.inputElement.removeAttribute('aria-activedescendant');\n    this.beforePopupOpen = false;\n    var animModel = {\n      name: 'FadeOut',\n      duration: 100,\n      delay: delay ? delay : 0\n    };\n    var popupInstance = this.popupObj;\n    var eventArgs = {\n      popup: popupInstance,\n      cancel: false,\n      animation: animModel,\n      event: e || null\n    };\n    this.trigger('closed', eventArgs, function (eventArgs) {\n      if (!eventArgs.cancel && _this.popupObj) {\n        if (_this.isPopupOpen) {\n          _this.popupObj.hide(new Animation(eventArgs.animation));\n        } else {\n          _this.destroyPopup();\n        }\n      }\n    });\n  };\n\n  Mention.prototype.renderPopup = function () {\n    var _this = this;\n\n    var args = {\n      cancel: false\n    };\n    this.trigger('beforeOpen', args, function (args) {\n      if (!args.cancel) {\n        var popupEle_1 = isNullOrUndefined(_this.target) ? _this.createElement('div', {\n          id: _this.inputElement.id + '_popup',\n          className: 'e-mention e-popup ' + (_this.cssClass != null ? _this.cssClass : '')\n        }) : _this.element;\n\n        if (!isNullOrUndefined(_this.target)) {\n          popupEle_1.id = _this.inputElement.id + '_popup';\n          addClass([popupEle_1], ['e-mention', 'e-popup', 'e-popup-close']);\n        }\n\n        _this.listHeight = formatUnit(_this.popupHeight);\n\n        if (!isNullOrUndefined(_this.list.querySelector('li')) && !_this.initRemoteRender) {\n          var li = _this.list.querySelector('.' + dropDownBaseClasses.focus);\n\n          if (!isNullOrUndefined(li)) {\n            _this.selectedLI = li;\n\n            var value = _this.getFormattedValue(li.getAttribute('data-value'));\n\n            _this.selectEventCallback(li, _this.getDataByValue(value), value, true);\n          }\n        }\n\n        append([_this.list], popupEle_1);\n\n        if (!_this.popupObj || !document.body.contains(_this.popupObj.element) || !document.contains(popupEle_1) && isNullOrUndefined(_this.target)) {\n          document.body.appendChild(popupEle_1);\n        }\n\n        var coordinates_1;\n        popupEle_1.style.visibility = 'hidden';\n\n        if (_this.popupHeight !== 'auto') {\n          _this.list.style.maxHeight = (parseInt(_this.listHeight, 10) - 2).toString() + 'px'; // due to box-sizing property\n\n          popupEle_1.style.maxHeight = formatUnit(_this.popupHeight);\n        } else {\n          popupEle_1.style.height = 'auto';\n        }\n\n        var offsetValue = 0;\n        var left = 0;\n\n        _this.initializePopup(popupEle_1, offsetValue, left);\n\n        _this.checkCollision(popupEle_1);\n\n        popupEle_1.style.visibility = 'visible';\n\n        if (!isNullOrUndefined(_this.list)) {\n          _this.unWireListEvents();\n\n          _this.wireListEvents();\n        }\n\n        _this.selectedElementID = _this.selectedLI ? _this.selectedLI.id : null;\n        attributes(_this.inputElement, {\n          'aria-owns': _this.inputElement.id + '_options',\n          'aria-activedescendant': _this.selectedElementID\n        });\n\n        if (_this.selectedElementID == null) {\n          _this.inputElement.removeAttribute('aria-activedescendant');\n        }\n\n        var animModel = {\n          name: 'FadeIn',\n          duration: 100\n        };\n        _this.beforePopupOpen = true;\n        var popupInstance = _this.popupObj;\n        var eventArgs = {\n          popup: popupInstance,\n          cancel: false,\n          animation: animModel\n        };\n\n        _this.trigger('opened', eventArgs, function (eventArgs) {\n          if (!eventArgs.cancel) {\n            _this.renderReactTemplates();\n\n            _this.popupObj.show(new Animation(eventArgs.animation), _this.zIndex === 1000 ? _this.inputElement : null);\n\n            coordinates_1 = _this.getCoordinates(_this.inputElement, _this.getTriggerCharPosition());\n\n            if (!_this.isCollided) {\n              popupEle_1.style.cssText = 'top: '.concat(coordinates_1.top.toString(), 'px;\\n left: ').concat(coordinates_1.left.toString(), 'px;\\nposition: absolute;\\n display: block;');\n            } else {\n              popupEle_1.style.left = formatUnit(coordinates_1.left);\n              _this.isCollided = false;\n            }\n\n            popupEle_1.style.width = _this.popupWidth !== '100%' && !isNullOrUndefined(_this.popupWidth) ? formatUnit(_this.popupWidth) : 'auto';\n          } else {\n            _this.beforePopupOpen = false;\n\n            _this.destroyPopup();\n          }\n        });\n      } else {\n        _this.beforePopupOpen = false;\n      }\n    });\n  };\n\n  Mention.prototype.checkCollision = function (popupEle) {\n    if (!Browser.isDevice || Browser.isDevice && !(this.getModuleName() === 'mention')) {\n      var collision = isCollide(popupEle);\n\n      if (collision.length > 0) {\n        popupEle.style.marginTop = -parseInt(getComputedStyle(popupEle).marginTop, 10) + 'px';\n        this.isCollided = true;\n      }\n\n      this.popupObj.resolveCollision();\n    }\n  };\n\n  Mention.prototype.getTriggerCharPosition = function () {\n    var mostRecentTriggerCharPos;\n    var currentRange = this.getTextRange();\n\n    if (currentRange !== undefined && currentRange !== null) {\n      mostRecentTriggerCharPos = 0;\n      var idx = currentRange.lastIndexOf(this.mentionChar);\n\n      if (idx >= mostRecentTriggerCharPos) {\n        mostRecentTriggerCharPos = idx;\n      }\n    }\n\n    return mostRecentTriggerCharPos;\n  };\n\n  Mention.prototype.initializePopup = function (element, offsetValue, left) {\n    var _this = this;\n\n    this.popupObj = new Popup(element, {\n      width: this.setWidth(),\n      targetType: 'relative',\n      relateTo: this.inputElement,\n      collision: {\n        X: 'flip',\n        Y: 'flip'\n      },\n      offsetY: offsetValue,\n      enableRtl: this.enableRtl,\n      offsetX: left,\n      position: {\n        X: 'top',\n        Y: 'left'\n      },\n      actionOnScroll: 'hide',\n      zIndex: this.zIndex,\n      close: function () {\n        _this.destroyPopup();\n      },\n      open: function () {\n        EventHandler.add(document, 'mousedown', _this.onDocumentClick, _this);\n        _this.isPopupOpen = true;\n\n        _this.setDataIndex();\n      }\n    });\n  };\n\n  Mention.prototype.setWidth = function () {\n    var width = formatUnit(this.popupWidth);\n\n    if (width.indexOf('%') > -1) {\n      var inputWidth = this.inputElement.offsetWidth * parseFloat(width) / 100;\n      width = inputWidth.toString() + 'px';\n    }\n\n    return width;\n  };\n\n  Mention.prototype.destroyPopup = function () {\n    this.isPopupOpen = false;\n    this.popupObj.destroy();\n\n    if (isNullOrUndefined(this.target)) {\n      detach(this.popupObj.element);\n    } else {\n      this.popupObj.element.innerHTML = '';\n      this.popupObj.element.removeAttribute('style');\n      this.popupObj.element.removeAttribute('aria-disabled');\n    }\n  };\n\n  Mention.prototype.onDocumentClick = function (e) {\n    var target = e.target;\n\n    if (!(!isNullOrUndefined(this.popupObj) && closest(target, '#' + this.popupObj.element.id))) {\n      this.hidePopup(e);\n    }\n  };\n\n  Mention.prototype.getCoordinates = function (element, position) {\n    var properties = ['direction', 'boxSizing', 'width', 'height', 'overflowX', 'overflowY', 'borderTopWidth', 'borderRightWidth', 'borderBottomWidth', 'borderLeftWidth', 'paddingTop', 'paddingRight', 'paddingBottom', 'paddingLeft', 'fontStyle', 'fontVariant', 'fontWeight', 'fontStretch', 'fontSize', 'fontSizeAdjust', 'lineHeight', 'fontFamily', 'textAlign', 'textTransform', 'textIndent', 'textDecoration', 'letterSpacing', 'wordSpacing'];\n    var div;\n    var span;\n    var range;\n    var globalRange;\n    var coordinates;\n    var computed;\n    var rect;\n\n    if (!this.isContentEditable(this.inputElement)) {\n      div = this.createElement('div', {\n        className: 'e-form-mirror-div'\n      });\n      document.body.appendChild(div);\n      computed = getComputedStyle(element);\n      div.style.position = 'absolute';\n      div.style.visibility = 'hidden';\n      properties.forEach(function (prop) {\n        div.style[prop] = computed[prop];\n      });\n      div.textContent = element.value.substring(0, position);\n\n      if (this.inputElement.nodeName === 'INPUT') {\n        div.textContent = div.textContent.replace(/\\s/g, '\\u00a0');\n      }\n\n      span = this.createElement('span');\n      span.textContent = element.value.substring(position) || '.';\n      div.appendChild(span);\n      rect = element.getBoundingClientRect();\n    } else {\n      var selectedNodePosition = this.getTriggerCharPosition();\n      globalRange = this.range;\n      range = document.createRange();\n      range.setStart(globalRange.startContainer, selectedNodePosition);\n      range.setEnd(globalRange.startContainer, selectedNodePosition);\n      range.collapse(false);\n      rect = range.getBoundingClientRect();\n    }\n\n    var doc = document.documentElement;\n    var windowLeft = (window.pageXOffset || doc.scrollLeft) - (doc.clientLeft || 0);\n    var windowTop = (window.pageYOffset || doc.scrollTop) - (doc.clientTop || 0);\n\n    if (!this.isContentEditable(this.inputElement)) {\n      coordinates = {\n        top: rect.top + windowTop + span.offsetTop + parseInt(computed.borderTopWidth, 10) + parseInt(computed.fontSize, 10) + 3 - element.scrollTop,\n        left: rect.left + windowLeft + span.offsetLeft + parseInt(computed.borderLeftWidth, 10)\n      };\n      document.body.removeChild(div);\n    } else {\n      coordinates = {\n        top: rect.top + windowTop + parseInt(getComputedStyle(this.inputElement).fontSize),\n        left: rect.left + windowLeft\n      };\n    }\n\n    return coordinates;\n  };\n\n  ;\n\n  Mention.prototype.initValue = function () {\n    this.renderList();\n\n    if (this.dataSource instanceof DataManager) {\n      this.initRemoteRender = true;\n    } else {\n      this.updateValues();\n    }\n  };\n\n  Mention.prototype.updateValues = function () {\n    var li = this.list.querySelector('.' + dropDownBaseClasses.focus);\n\n    if (!isNullOrUndefined(li)) {\n      this.setSelection(li, null);\n    }\n  };\n\n  Mention.prototype.renderList = function () {\n    _super.prototype.render.call(this);\n\n    this.unWireListEvents();\n    this.wireListEvents();\n  };\n  /**\n   * Event binding for list\n   *\n   * @returns {void}\n   */\n\n\n  Mention.prototype.wireListEvents = function () {\n    EventHandler.add(this.list, 'click', this.onMouseClick, this);\n    EventHandler.add(this.list, 'mouseover', this.onMouseOver, this);\n    EventHandler.add(this.list, 'mouseout', this.onMouseLeave, this);\n  };\n  /**\n   * Event un binding for list items.\n   *\n   * @returns {void}\n   */\n\n\n  Mention.prototype.unWireListEvents = function () {\n    EventHandler.remove(this.list, 'click', this.onMouseClick);\n    EventHandler.remove(this.list, 'mouseover', this.onMouseOver);\n    EventHandler.remove(this.list, 'mouseout', this.onMouseLeave);\n  };\n\n  Mention.prototype.onMouseClick = function (e) {\n    var target = e.target;\n    var li = closest(target, '.' + dropDownBaseClasses.li);\n\n    if (!this.isValidLI(li)) {\n      return;\n    }\n\n    this.setSelection(li, e);\n    var delay = 100;\n    this.closePopup(delay, e);\n    this.inputElement.focus();\n  };\n\n  Mention.prototype.updateSelectedItem = function (li, e, preventSelect, isSelection) {\n    var _this = this;\n\n    this.removeSelection();\n    li.classList.add(dropDownBaseClasses.selected);\n    this.removeHover();\n    var value = this.getFormattedValue(li.getAttribute('data-value'));\n    var selectedData = this.getDataByValue(value);\n\n    if (!preventSelect && !isNullOrUndefined(e)) {\n      var items = this.detachChanges(selectedData);\n      this.isSelected = true;\n      var eventArgs = {\n        e: e,\n        item: li,\n        itemData: items,\n        isInteracted: e ? true : false,\n        cancel: false\n      };\n      this.trigger('select', eventArgs, function (eventArgs) {\n        if (eventArgs.cancel) {\n          li.classList.remove(dropDownBaseClasses.selected);\n        } else {\n          _this.selectEventCallback(li, selectedData, value);\n\n          if (isSelection) {\n            _this.setSelectOptions(li, e);\n          }\n        }\n      });\n    } else {\n      this.selectEventCallback(li, selectedData, value);\n\n      if (isSelection) {\n        this.setSelectOptions(li, e);\n      }\n    }\n  };\n\n  Mention.prototype.setSelection = function (li, e) {\n    if (this.isValidLI(li) && (!li.classList.contains(dropDownBaseClasses.selected) || this.isPopupOpen && this.isSelected && li.classList.contains(dropDownBaseClasses.selected))) {\n      this.updateSelectedItem(li, e, false, true);\n    } else {\n      this.setSelectOptions(li, e);\n    }\n  };\n\n  Mention.prototype.setSelectOptions = function (li, e) {\n    if (this.list) {\n      this.removeHover();\n    }\n\n    this.previousSelectedLI = !isNullOrUndefined(this.selectedLI) ? this.selectedLI : null;\n    this.selectedLI = li;\n\n    if (this.isPopupOpen && !isNullOrUndefined(this.selectedLI)) {\n      this.setScrollPosition(e);\n    }\n\n    if (e && (e.keyCode === 38 || e.keyCode === 40)) {\n      return;\n    }\n\n    if (isNullOrUndefined(e) || this.setValue(e)) {\n      return;\n    }\n  };\n\n  Mention.prototype.setScrollPosition = function (e) {\n    if (!isNullOrUndefined(e)) {\n      switch (e.action) {\n        case 'pageDown':\n        case 'down':\n        case 'end':\n          this.scrollBottom();\n          break;\n\n        default:\n          this.scrollTop();\n          break;\n      }\n    } else {\n      this.scrollBottom(true);\n    }\n  };\n\n  Mention.prototype.scrollBottom = function (isInitial) {\n    if (!isNullOrUndefined(this.selectedLI)) {\n      var currentOffset = this.list.offsetHeight;\n      var nextBottom = this.selectedLI.offsetTop + this.selectedLI.offsetHeight - this.list.scrollTop;\n      var nextOffset = this.list.scrollTop + nextBottom - currentOffset;\n      nextOffset = isInitial ? nextOffset + parseInt(getComputedStyle(this.list).paddingTop, 10) * 2 : nextOffset;\n      var boxRange = this.selectedLI.offsetTop + this.selectedLI.offsetHeight - this.list.scrollTop;\n\n      if (this.activeIndex === 0) {\n        this.list.scrollTop = 0;\n      } else if (nextBottom > currentOffset || !(boxRange > 0 && this.list.offsetHeight > boxRange)) {\n        this.list.scrollTop = nextOffset;\n      }\n    }\n  };\n\n  Mention.prototype.scrollTop = function () {\n    if (!isNullOrUndefined(this.selectedLI)) {\n      var nextOffset = this.selectedLI.offsetTop - this.list.scrollTop;\n      nextOffset = this.fields.groupBy && nextOffset;\n      var boxRange = this.selectedLI.offsetTop + this.selectedLI.offsetHeight - this.list.scrollTop;\n\n      if (this.activeIndex === 0) {\n        this.list.scrollTop = 0;\n      } else if (nextOffset < 0) {\n        this.list.scrollTop = this.list.scrollTop + nextOffset;\n      } else if (!(boxRange > 0 && this.list.offsetHeight > boxRange)) {\n        this.list.scrollTop = this.selectedLI.offsetTop;\n      }\n    }\n  };\n\n  Mention.prototype.selectEventCallback = function (li, selectedData, value, selectLi) {\n    this.previousItemData = !isNullOrUndefined(this.itemData) ? this.itemData : null;\n    this.item = li;\n    this.itemData = selectedData;\n    var focusedItem = this.list.querySelector('.' + dropDownBaseClasses.focus);\n\n    if (focusedItem) {\n      removeClass([focusedItem], dropDownBaseClasses.focus);\n    }\n\n    if (selectLi) {\n      addClass([li], dropDownBaseClasses.selected);\n    }\n\n    li.setAttribute('aria-selected', 'true');\n    this.activeIndex = this.getIndexByValue(value);\n  };\n\n  Mention.prototype.detachChanges = function (value) {\n    var items;\n\n    if (typeof value === 'string' || typeof value === 'boolean' || typeof value === 'number') {\n      items = Object.defineProperties({}, {\n        value: {\n          value: value,\n          enumerable: true\n        },\n        text: {\n          value: value,\n          enumerable: true\n        }\n      });\n    } else {\n      items = value;\n    }\n\n    return items;\n  }; // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  Mention.prototype.setValue = function (e) {\n    if (!this.isReact) {\n      if (!isNullOrUndefined(this.displayTemplate)) {\n        this.setDisplayTemplate();\n      }\n\n      this.updateMentionValue(e);\n      return true;\n    } else {\n      if (!isNullOrUndefined(this.displayTemplate)) {\n        this.setDisplayTemplate(e);\n      } else {\n        this.updateMentionValue(e);\n      }\n\n      return true;\n    }\n  };\n\n  Mention.prototype.updateMentionValue = function (e) {\n    var dataItem = this.getItemData();\n    var textSuffix;\n    var value;\n    var endPos;\n    var range;\n    var globalRange;\n    var selection = this.inputElement.ownerDocument.getSelection();\n    var startPos = this.getTriggerCharPosition();\n    textSuffix = typeof this.suffixText === 'string' ? this.suffixText : '';\n\n    if (dataItem.value !== null) {\n      value = this.mentionVal(dataItem.text);\n    }\n\n    if (!this.isContentEditable(this.inputElement)) {\n      var myField = this.inputElement;\n      var currentTriggerSnippet = this.getTextRange().substring(startPos + this.mentionChar.length, this.getTextRange().length);\n      value += textSuffix;\n      endPos = startPos + this.mentionChar.length;\n      endPos += currentTriggerSnippet.length;\n      myField.value = myField.value.substring(0, startPos) + value + myField.value.substring(endPos, myField.value.length);\n      myField.selectionStart = startPos + value.length;\n      myField.selectionEnd = startPos + value.length;\n\n      if (this.isPopupOpen) {\n        this.hidePopup();\n      }\n\n      this.onChangeEvent(e);\n    } else {\n      endPos = this.getTriggerCharPosition() + this.mentionChar.length;\n\n      if (this.range && this.range.startContainer.textContent.trim() !== this.mentionChar) {\n        endPos = this.range.endOffset;\n      }\n\n      globalRange = this.range;\n      range = document.createRange();\n      range.setStart(globalRange.startContainer, startPos);\n      range.setEnd(globalRange.startContainer, endPos);\n      range.deleteContents();\n      var element = this.createElement('div');\n      element.innerHTML = value;\n      var frag = document.createDocumentFragment();\n      var node = void 0;\n      var lastNode = void 0;\n\n      while (node = element.firstChild) {\n        lastNode = frag.appendChild(node);\n      }\n\n      range.insertNode(frag);\n\n      if (lastNode) {\n        range = range.cloneRange();\n        range.setStartAfter(lastNode);\n        range.collapse(true);\n        selection.removeAllRanges();\n        selection.addRange(range);\n      }\n\n      if (this.isPopupOpen) {\n        this.hidePopup();\n      }\n\n      this.onChangeEvent(e);\n    }\n  };\n\n  Mention.prototype.mentionVal = function (value) {\n    var showChar = this.showMentionChar ? this.mentionChar : '';\n\n    if (!isNullOrUndefined(this.displayTemplate) && !isNullOrUndefined(this.displayTempElement)) {\n      value = this.displayTempElement.innerHTML;\n    }\n\n    if (this.isContentEditable(this.inputElement)) {\n      return '<span contenteditable=\"false\" class=\"e-mention-chip\">' + showChar + value + '</span>'.concat(typeof this.suffixText === 'string' ? this.suffixText : ' ');\n    } else {\n      return showChar + value;\n    }\n  };\n\n  Mention.prototype.setDisplayTemplate = function (e) {\n    var _this = this;\n\n    var compiledString; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n    if (this.isReact) {\n      this.clearTemplate(['displayTemplate']);\n\n      if (this.displayTempElement) {\n        detach(this.displayTempElement);\n        this.displayTempElement = null;\n      }\n    }\n\n    if (!this.displayTempElement) {\n      this.displayTempElement = this.createElement('div');\n    } // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n    if (!this.isReact) {\n      this.displayTempElement.innerHTML = '';\n    }\n\n    compiledString = compile(this.displayTemplate); // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n    var displayCompTemp = compiledString(this.itemData, this, 'displayTemplate', this.displayTemplateId, this.isStringTemplate, null, this.displayTempElement);\n\n    if (displayCompTemp && displayCompTemp.length > 0) {\n      for (var i = 0; i < displayCompTemp.length; i++) {\n        this.displayTempElement.appendChild(displayCompTemp[i]);\n      }\n    }\n\n    if (!this.isReact) {\n      this.renderTemplates();\n    } else {\n      this.renderTemplates(function () {\n        _this.updateMentionValue(e);\n      });\n    }\n  };\n\n  Mention.prototype.renderTemplates = function (callBack) {\n    this.renderReactTemplates(callBack);\n  };\n\n  Mention.prototype.setSpinnerTemplate = function () {\n    var _this = this;\n\n    var compiledString; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n    if (this.isReact) {\n      this.clearTemplate(['spinnerTemplate']);\n\n      if (this.spinnerTemplateElement) {\n        detach(this.spinnerTemplateElement);\n        this.spinnerTemplateElement = null;\n      }\n    }\n\n    if (!this.spinnerTemplateElement) {\n      this.spinnerTemplateElement = this.createElement('div');\n    } // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n    if (!this.isReact) {\n      this.spinnerTemplateElement.innerHTML = '';\n    }\n\n    compiledString = compile(this.spinnerTemplate); // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n    var spinnerCompTemp = compiledString(null, this, 'spinnerTemplate', this.spinnerTemplateId, this.isStringTemplate, null, this.spinnerTemplateElement);\n\n    if (spinnerCompTemp && spinnerCompTemp.length > 0) {\n      for (var i = 0; i < spinnerCompTemp.length; i++) {\n        this.spinnerTemplateElement.appendChild(spinnerCompTemp[i]);\n      }\n    }\n\n    if (!this.isReact) {\n      this.renderTemplates();\n      this.popupObj.element.appendChild(this.spinnerTemplateElement);\n    } else {\n      this.renderTemplates(function () {\n        _this.popupObj.element.appendChild(_this.spinnerTemplateElement);\n      });\n    }\n  };\n\n  Mention.prototype.onChangeEvent = function (eve) {\n    this.isSelected = false;\n    var items = this.detachMentionChanges(this.itemData);\n    var preItems;\n\n    if (typeof this.previousItemData === 'string' || typeof this.previousItemData === 'boolean' || typeof this.previousItemData === 'number') {\n      preItems = Object.defineProperties({}, {\n        value: {\n          value: this.previousItemData,\n          enumerable: true\n        },\n        text: {\n          value: this.previousItemData,\n          enumerable: true\n        }\n      });\n    } else {\n      preItems = this.previousItemData;\n    }\n\n    var eventArgs = {\n      e: eve,\n      item: this.item,\n      itemData: items,\n      previousItem: this.previousSelectedLI,\n      previousItemData: preItems,\n      isInteracted: eve ? true : false,\n      value: this.item.innerHTML,\n      element: this.inputElement\n    };\n    this.trigger('change', eventArgs);\n  };\n\n  Mention.prototype.detachMentionChanges = function (value) {\n    var items;\n\n    if (typeof value === 'string' || typeof value === 'boolean' || typeof value === 'number') {\n      items = Object.defineProperties({}, {\n        value: {\n          value: value,\n          enumerable: true\n        },\n        text: {\n          value: value,\n          enumerable: true\n        }\n      });\n    } else {\n      items = value;\n    }\n\n    return items;\n  };\n\n  Mention.prototype.getItemData = function () {\n    var fields = this.fields;\n    var dataItem = null;\n    dataItem = this.itemData;\n    var dataValue;\n    var dataText;\n\n    if (!isNullOrUndefined(dataItem)) {\n      dataValue = getValue(fields.value, dataItem);\n      dataText = getValue(fields.text, dataItem);\n    }\n\n    var value = !isNullOrUndefined(dataItem) && !isUndefined(dataValue) ? dataValue : dataItem;\n    var text = !isNullOrUndefined(dataItem) && !isUndefined(dataValue) ? dataText : dataItem;\n    return {\n      value: value,\n      text: text\n    };\n  };\n\n  Mention.prototype.removeSelection = function () {\n    if (this.list) {\n      var selectedItems = this.list.querySelectorAll('.' + dropDownBaseClasses.selected);\n\n      if (selectedItems.length) {\n        removeClass(selectedItems, dropDownBaseClasses.selected);\n        selectedItems[0].removeAttribute('aria-selected');\n      }\n    }\n  };\n\n  Mention.prototype.onMouseOver = function (e) {\n    var currentLi = closest(e.target, '.' + dropDownBaseClasses.li);\n    this.setHover(currentLi);\n  };\n\n  Mention.prototype.setHover = function (li) {\n    if (this.enabled && this.isValidLI(li) && !li.classList.contains(dropDownBaseClasses.hover)) {\n      this.removeHover();\n      addClass([li], dropDownBaseClasses.hover);\n    }\n  };\n\n  Mention.prototype.removeHover = function () {\n    if (this.list) {\n      var hoveredItem = this.list.querySelectorAll('.' + dropDownBaseClasses.hover);\n\n      if (hoveredItem && hoveredItem.length) {\n        removeClass(hoveredItem, dropDownBaseClasses.hover);\n      }\n    }\n  };\n\n  Mention.prototype.isValidLI = function (li) {\n    return li && li.hasAttribute('role') && li.getAttribute('role') === 'option';\n  };\n\n  Mention.prototype.onMouseLeave = function () {\n    this.removeHover();\n  };\n  /**\n   * Search the entered text and show it in the suggestion list if available.\n   *\n   * @returns {void}\n   */\n\n\n  Mention.prototype.search = function (text, positionX, positionY) {\n    if (this.ignoreCase && (text === this.elementValue() || text === this.elementValue().toLowerCase()) || !this.ignoreCase && text === this.elementValue()) {\n      this.resetList(this.dataSource, this.fields);\n    } else {\n      if (this.isPopupOpen) {\n        this.hidePopup();\n      }\n\n      return;\n    }\n\n    if (isNullOrUndefined(this.list)) {\n      this.renderList();\n      this.renderPopup();\n    } else {\n      this.showPopup();\n    }\n\n    this.popupObj.element.style.left = formatUnit(positionX);\n    this.popupObj.element.style.top = formatUnit(positionY);\n  };\n  /**\n   * Removes the component from the DOM and detaches all its related event handlers. Also it removes the attributes and classes.\n   *\n   * @method destroy\n   * @returns {void}\n   */\n\n\n  Mention.prototype.destroy = function () {\n    this.hidePopup();\n    this.unWireEvent();\n\n    if (this.list) {\n      this.unWireListEvents();\n    }\n\n    if (this.inputElement && !this.inputElement.classList.contains('e-' + this.getModuleName())) {\n      return;\n    }\n\n    _super.prototype.destroy.call(this);\n  };\n\n  Mention.prototype.getLocaleName = function () {\n    return 'mention';\n  };\n\n  Mention.prototype.getNgDirective = function () {\n    return 'EJS-MENTION';\n  };\n  /**\n   * Return the module name of this component.\n   *\n   * @private\n   * @returns {string} Return the module name of this component.\n   */\n\n\n  Mention.prototype.getModuleName = function () {\n    return 'mention';\n  };\n\n  __decorate([Property(null)], Mention.prototype, \"cssClass\", void 0);\n\n  __decorate([Property('@')], Mention.prototype, \"mentionChar\", void 0);\n\n  __decorate([Property(false)], Mention.prototype, \"showMentionChar\", void 0);\n\n  __decorate([Property(false)], Mention.prototype, \"allowSpaces\", void 0);\n\n  __decorate([Property(null)], Mention.prototype, \"suffixText\", void 0);\n\n  __decorate([Property(25)], Mention.prototype, \"suggestionCount\", void 0);\n\n  __decorate([Property(0)], Mention.prototype, \"minLength\", void 0);\n\n  __decorate([Property('None')], Mention.prototype, \"sortOrder\", void 0);\n\n  __decorate([Property(true)], Mention.prototype, \"ignoreCase\", void 0);\n\n  __decorate([Property(false)], Mention.prototype, \"highlight\", void 0);\n\n  __decorate([Property()], Mention.prototype, \"locale\", void 0);\n\n  __decorate([Property('auto')], Mention.prototype, \"popupWidth\", void 0);\n\n  __decorate([Property('300px')], Mention.prototype, \"popupHeight\", void 0);\n\n  __decorate([Property(null)], Mention.prototype, \"displayTemplate\", void 0);\n\n  __decorate([Property(null)], Mention.prototype, \"itemTemplate\", void 0);\n\n  __decorate([Property('No records found')], Mention.prototype, \"noRecordsTemplate\", void 0);\n\n  __decorate([Property(null)], Mention.prototype, \"spinnerTemplate\", void 0);\n\n  __decorate([Property()], Mention.prototype, \"target\", void 0);\n\n  __decorate([Property([])], Mention.prototype, \"dataSource\", void 0);\n\n  __decorate([Property(null)], Mention.prototype, \"query\", void 0);\n\n  __decorate([Property('Contains')], Mention.prototype, \"filterType\", void 0);\n\n  __decorate([Complex({\n    text: null,\n    value: null,\n    iconCss: null,\n    groupBy: null\n  }, FieldSettings)], Mention.prototype, \"fields\", void 0);\n\n  __decorate([Event()], Mention.prototype, \"actionBegin\", void 0);\n\n  __decorate([Event()], Mention.prototype, \"actionComplete\", void 0);\n\n  __decorate([Event()], Mention.prototype, \"actionFailure\", void 0);\n\n  __decorate([Event()], Mention.prototype, \"change\", void 0);\n\n  __decorate([Event()], Mention.prototype, \"beforeOpen\", void 0);\n\n  __decorate([Event()], Mention.prototype, \"opened\", void 0);\n\n  __decorate([Event()], Mention.prototype, \"closed\", void 0);\n\n  __decorate([Event()], Mention.prototype, \"select\", void 0);\n\n  __decorate([Event()], Mention.prototype, \"filtering\", void 0);\n\n  __decorate([Event()], Mention.prototype, \"created\", void 0);\n\n  __decorate([Event()], Mention.prototype, \"destroyed\", void 0);\n\n  Mention = __decorate([NotifyPropertyChanges], Mention);\n  return Mention;\n}(DropDownBase);\n\nexport { Mention };","map":{"version":3,"sources":["C:/Users/Zoran/source/repos/TransportApp/TransportLog-basic/node_modules/@syncfusion/ej2-dropdowns/src/mention/mention.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__decorate","decorators","target","key","desc","c","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","KeyboardEvents","compile","Property","EventHandler","Animation","formatUnit","append","attributes","isNullOrUndefined","detach","Event","Complex","addClass","removeClass","closest","isUndefined","getValue","NotifyPropertyChanges","Browser","FieldSettings","DropDownBase","dropDownBaseClasses","DataManager","Query","Popup","isCollide","createSpinner","showSpinner","hideSpinner","highlightSearch","revertHighlightSearch","Mention","_super","options","element","call","onPropertyChanged","newProp","oldProp","_i","_a","keys","prop","minLength","suffixText","allowSpaces","mentionChar","showMentionChar","updateCssClass","cssClass","newClass","oldClass","replace","trim","setCssClass","inputElement","popupObj","elements","split","initializeData","isSelected","isFiltered","beforePopupOpen","initRemoteRender","isPopupOpen","isCollided","lineBreak","keyConfigure","tab","enter","escape","end","home","down","up","pageUp","pageDown","open","close","hide","space","preRender","render","document","querySelector","isContentEditable","setAttribute","queryString","elementValue","wireEvent","add","onKeyUp","bindCommonEvent","unWireEvent","remove","unBindCommonEvent","isDevice","keyboardModule","keyAction","keyActionHandler","bind","keyConfigs","eventName","hideWaitingSpinner","spinnerElement","spinnerTemplate","spinnerTemplateElement","showWaitingSpinner","width","createElement","setSpinnerTemplate","e","isNavigation","action","isTabAction","list","undefined","isRequested","renderList","liCollections","preventDefault","updateUpDownAction","li","selected","setSelection","hidePopup","contains","selectedLI","setValue","focusEle","focus","isSelectFocusItem","value","getFormattedValue","getAttribute","activeIndex","getIndexByValue","index","startIndex","nextItem","destroy","rangetextContent","range","getCurrentRange","startContainer","textContent","currentRange","getTextRange","lastWordRange","getLastLetter","Regex","RegExp","charRegex","keyCode","code","match","previousElementSibling","indexOf","nodeType","test","isMatchedText","charAt","querySelectorAll","substring","lastIndexOf","searchLists","charCodeAt","showPopup","body","classList","resetList","dataSource","fields","initValue","isMatched","toLowerCase","ownerDocument","getSelection","getRangeAt","_this","isDataFetched","unWireListEvents","wireListEvents","type","eventArgs","preventDefaultAction","text","updateData","query","cancel","filterAction","trigger","setDataIndex","renderReactTemplates","onActionComplete","ulElement","isUpdated","isActive","id","focusItem","selectEventCallback","getDataByValue","toString","listOption","fieldsSettings","itemCreated","highlight","tagName","getNgDirective","itemTemplate","setTimeout","item","ignoreCase","filterType","itemCreated_1","apply","getQuery","filterQuery","clone","dataType","typeOfData","typeof","where","ignoreAccent","mapping","suggestionCount","queryElements","queries","fn","splice","take","renderHightSearch","isHighlight","component","startPos","selectionStart","selectedElem","workingNodeContent","selectStartOffset","startOffset","textValue","words","wordCnt","nodeName","renderPopup","selectedElementID","removeAttribute","removeSelection","closePopup","delay","onDocumentClick","animModel","name","duration","popupInstance","popup","animation","event","destroyPopup","args","popupEle_1","className","listHeight","popupHeight","appendChild","coordinates_1","style","visibility","maxHeight","parseInt","height","offsetValue","left","initializePopup","checkCollision","show","zIndex","getCoordinates","getTriggerCharPosition","cssText","concat","top","popupWidth","popupEle","getModuleName","collision","marginTop","getComputedStyle","resolveCollision","mostRecentTriggerCharPos","idx","setWidth","targetType","relateTo","X","Y","offsetY","enableRtl","offsetX","position","actionOnScroll","inputWidth","offsetWidth","parseFloat","innerHTML","properties","div","span","globalRange","coordinates","computed","rect","forEach","getBoundingClientRect","selectedNodePosition","createRange","setStart","setEnd","collapse","doc","documentElement","windowLeft","window","pageXOffset","scrollLeft","clientLeft","windowTop","pageYOffset","scrollTop","clientTop","offsetTop","borderTopWidth","fontSize","offsetLeft","borderLeftWidth","removeChild","updateValues","onMouseClick","onMouseOver","onMouseLeave","isValidLI","updateSelectedItem","preventSelect","isSelection","removeHover","selectedData","items","detachChanges","itemData","isInteracted","setSelectOptions","previousSelectedLI","setScrollPosition","scrollBottom","isInitial","currentOffset","offsetHeight","nextBottom","nextOffset","paddingTop","boxRange","groupBy","selectLi","previousItemData","focusedItem","defineProperties","enumerable","isReact","displayTemplate","setDisplayTemplate","updateMentionValue","dataItem","getItemData","textSuffix","endPos","selection","mentionVal","myField","currentTriggerSnippet","selectionEnd","onChangeEvent","endOffset","deleteContents","frag","createDocumentFragment","node","lastNode","firstChild","insertNode","cloneRange","setStartAfter","removeAllRanges","addRange","showChar","displayTempElement","compiledString","clearTemplate","displayCompTemp","displayTemplateId","isStringTemplate","renderTemplates","callBack","spinnerCompTemp","spinnerTemplateId","eve","detachMentionChanges","preItems","previousItem","dataValue","dataText","selectedItems","currentLi","setHover","enabled","hover","hoveredItem","hasAttribute","search","positionX","positionY","getLocaleName","iconCss"],"mappings":"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","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { KeyboardEvents, compile, Property, EventHandler, Animation, formatUnit, append, attributes } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, detach, Event, Complex, addClass, removeClass, closest, isUndefined, getValue, NotifyPropertyChanges, Browser } from '@syncfusion/ej2-base';\nimport { FieldSettings } from '../drop-down-base/drop-down-base';\nimport { DropDownBase, dropDownBaseClasses } from '../drop-down-base/drop-down-base';\nimport { DataManager, Query } from '@syncfusion/ej2-data';\nimport { Popup, isCollide, createSpinner, showSpinner, hideSpinner } from '@syncfusion/ej2-popups';\nimport { highlightSearch, revertHighlightSearch } from '../common/highlight-search';\n/**\n * The Mention component is used to list someone or something based on user input in textarea, input,\n * or any other editable element from which the user can select.\n */\nvar Mention = /** @class */ (function (_super) {\n    __extends(Mention, _super);\n    /**\n     * * Constructor for creating the widget\n     *\n     * @param {MentionModel} options - Specifies the MentionComponent model.\n     * @param {string | HTMLElement} element - Specifies the element to render as component.\n     * @private\n     */\n    function Mention(options, element) {\n        return _super.call(this, options, element) || this;\n    }\n    /**\n     * When property value changes happened, then onPropertyChanged method will execute the respective changes in this component.\n     *\n     * @param {MentionModel} newProp - Returns the dynamic property value of the component.\n     * @param {MentionModel} oldProp - Returns the previous property value of the component.\n     * @private\n     * @returns {void}\n     */\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    Mention.prototype.onPropertyChanged = function (newProp, oldProp) {\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'minLength':\n                    this.minLength = newProp.minLength;\n                    break;\n                case 'suffixText':\n                    this.suffixText = newProp.suffixText;\n                    break;\n                case 'allowSpaces':\n                    this.allowSpaces = newProp.allowSpaces;\n                    break;\n                case 'mentionChar':\n                    this.mentionChar = newProp.mentionChar;\n                    break;\n                case 'showMentionChar':\n                    this.showMentionChar = newProp.showMentionChar;\n                    break;\n                case 'cssClass':\n                    this.updateCssClass(newProp.cssClass, oldProp.cssClass);\n                    break;\n            }\n        }\n    };\n    Mention.prototype.updateCssClass = function (newClass, oldClass) {\n        if (!isNullOrUndefined(oldClass)) {\n            oldClass = (oldClass.replace(/\\s+/g, ' ')).trim();\n        }\n        if (!isNullOrUndefined(newClass)) {\n            newClass = (newClass.replace(/\\s+/g, ' ')).trim();\n        }\n        this.setCssClass(newClass, [this.inputElement], oldClass);\n        if (this.popupObj) {\n            this.setCssClass(newClass, [this.popupObj.element], oldClass);\n        }\n    };\n    Mention.prototype.setCssClass = function (cssClass, elements, oldClass) {\n        if (!isNullOrUndefined(oldClass) && oldClass !== '') {\n            removeClass(elements, oldClass.split(' '));\n        }\n        if (!isNullOrUndefined(cssClass) && cssClass !== '') {\n            addClass(elements, cssClass.split(' '));\n        }\n    };\n    Mention.prototype.initializeData = function () {\n        this.isSelected = false;\n        this.isFiltered = false;\n        this.beforePopupOpen = false;\n        this.initRemoteRender = false;\n        this.isPopupOpen = false;\n        this.isCollided = false;\n        this.lineBreak = false;\n        this.keyConfigure = {\n            tab: 'tab',\n            enter: '13',\n            escape: '27',\n            end: '35',\n            home: '36',\n            down: '40',\n            up: '38',\n            pageUp: '33',\n            pageDown: '34',\n            open: 'alt+40',\n            close: 'shift+tab',\n            hide: 'alt+38',\n            space: '32'\n        };\n    };\n    /**\n     * Execute before render the list items\n     *\n     * @private\n     * @returns {void}\n     */\n    Mention.prototype.preRender = function () {\n        this.initializeData();\n        _super.prototype.preRender.call(this);\n    };\n    /**\n     * To Initialize the control rendering\n     *\n     * @private\n     * @returns {void}\n     */\n    Mention.prototype.render = function () {\n        this.inputElement = !isNullOrUndefined(this.target) ? ((typeof this.target) === 'string') ?\n            document.querySelector(this.target) : this.target : this.element;\n        if (this.isContentEditable(this.inputElement)) {\n            this.inputElement.setAttribute('contenteditable', 'true');\n            addClass([this.inputElement], ['e-mention']);\n            if (isNullOrUndefined(this.target)) {\n                addClass([this.inputElement], ['e-editable-element']);\n            }\n        }\n        this.queryString = this.elementValue();\n        this.wireEvent();\n    };\n    Mention.prototype.wireEvent = function () {\n        EventHandler.add(this.inputElement, 'keyup', this.onKeyUp, this);\n        this.bindCommonEvent();\n    };\n    Mention.prototype.unWireEvent = function () {\n        EventHandler.remove(this.inputElement, 'keyup', this.onKeyUp);\n        this.unBindCommonEvent();\n    };\n    Mention.prototype.bindCommonEvent = function () {\n        if (!Browser.isDevice) {\n            this.keyboardModule = new KeyboardEvents(this.inputElement, {\n                keyAction: this.keyActionHandler.bind(this), keyConfigs: this.keyConfigure, eventName: 'keydown'\n            });\n        }\n    };\n    /**\n     * Hides the spinner loader.\n     *\n     * @returns {void}\n     */\n    Mention.prototype.hideSpinner = function () {\n        this.hideWaitingSpinner();\n    };\n    Mention.prototype.hideWaitingSpinner = function () {\n        if (!isNullOrUndefined(this.spinnerElement)) {\n            hideSpinner(this.spinnerElement);\n        }\n        if (!isNullOrUndefined(this.spinnerTemplate) && !isNullOrUndefined(this.spinnerTemplateElement)) {\n            detach(this.spinnerTemplateElement);\n        }\n    };\n    /**\n     * Shows the spinner loader.\n     *\n     * @returns {void}\n     */\n    Mention.prototype.showWaitingSpinner = function () {\n        if (!isNullOrUndefined(this.popupObj)) {\n            if (isNullOrUndefined(this.spinnerTemplate) && isNullOrUndefined(this.spinnerElement)) {\n                this.spinnerElement = this.popupObj.element;\n                createSpinner({\n                    target: this.spinnerElement,\n                    width: Browser.isDevice ? '16px' : '14px'\n                }, this.createElement);\n                showSpinner(this.spinnerElement);\n            }\n            if (!isNullOrUndefined(this.spinnerTemplate)) {\n                this.setSpinnerTemplate();\n            }\n        }\n    };\n    Mention.prototype.keyActionHandler = function (e) {\n        var isNavigation = (e.action === 'down' || e.action === 'up' || e.action === 'pageUp' || e.action === 'pageDown'\n            || e.action === 'home' || e.action === 'end');\n        var isTabAction = e.action === 'tab' || e.action === 'close';\n        if (this.list === undefined && !this.isRequested && !isTabAction && e.action !== 'escape') {\n            this.renderList();\n        }\n        if (isNullOrUndefined(this.list) || (!isNullOrUndefined(this.liCollections) &&\n            isNavigation && this.liCollections.length === 0) || this.isRequested) {\n            return;\n        }\n        if (e.action === 'escape') {\n            e.preventDefault();\n        }\n        this.isSelected = e.action === 'escape' ? false : this.isSelected;\n        switch (e.action) {\n            case 'down':\n            case 'up':\n                this.updateUpDownAction(e);\n                break;\n            case 'tab':\n                if (this.isPopupOpen) {\n                    var li = this.list.querySelector('.' + dropDownBaseClasses.selected);\n                    if (li) {\n                        this.setSelection(li, e);\n                    }\n                    if (this.isPopupOpen) {\n                        this.hidePopup(e);\n                    }\n                }\n                break;\n            case 'enter':\n                if (this.isPopupOpen) {\n                    e.preventDefault();\n                    if (this.popupObj && this.popupObj.element.contains(this.selectedLI)) {\n                        this.setValue(e);\n                    }\n                }\n                break;\n            case 'escape':\n                if (this.isPopupOpen) {\n                    this.hidePopup(e);\n                }\n                break;\n        }\n    };\n    Mention.prototype.updateUpDownAction = function (e) {\n        var focusEle = this.list.querySelector('.' + dropDownBaseClasses.focus);\n        if (this.isSelectFocusItem(focusEle)) {\n            this.setSelection(focusEle, e);\n        }\n        else if (!isNullOrUndefined(this.liCollections)) {\n            var li = this.list.querySelector('.' + dropDownBaseClasses.selected);\n            if (!isNullOrUndefined(li)) {\n                var value = this.getFormattedValue(li.getAttribute('data-value'));\n                this.activeIndex = this.getIndexByValue(value);\n            }\n            var index = e.action === 'down' ? this.activeIndex + 1 : this.activeIndex - 1;\n            var startIndex = 0;\n            startIndex = e.action === 'down' && isNullOrUndefined(this.activeIndex) ? 0 : this.liCollections.length - 1;\n            index = index < 0 ? this.liCollections.length - 1 : index === this.liCollections.length ? 0 : index;\n            var nextItem = isNullOrUndefined(this.activeIndex) ? this.liCollections[startIndex] : this.liCollections[index];\n            if (!isNullOrUndefined(nextItem)) {\n                this.setSelection(nextItem, e);\n            }\n        }\n        if (this.isPopupOpen) {\n            e.preventDefault();\n        }\n    };\n    Mention.prototype.isSelectFocusItem = function (element) {\n        return !isNullOrUndefined(element);\n    };\n    Mention.prototype.unBindCommonEvent = function () {\n        if (!Browser.isDevice) {\n            this.keyboardModule.destroy();\n        }\n    };\n    Mention.prototype.onKeyUp = function (e) {\n        var rangetextContent;\n        if (this.isContentEditable(this.inputElement)) {\n            this.range = this.getCurrentRange();\n            rangetextContent = this.range.startContainer.textContent.split('');\n        }\n        var currentRange = this.getTextRange();\n        var lastWordRange = this.getLastLetter(currentRange);\n        var Regex = new RegExp(this.mentionChar, 'g');\n        var charRegex = new RegExp('[a-zA-Z]', 'g');\n        if (e.key === 'Shift' || e.keyCode === 37 || e.keyCode === 39) {\n            return;\n        }\n        if ((!currentRange || !lastWordRange) || e.code === 'Enter' || e.keyCode === 27 ||\n            (lastWordRange.match(Regex) && lastWordRange.match(Regex).length > 1) ||\n            (this.isContentEditable(this.inputElement) && this.range.startContainer &&\n                this.range.startContainer.previousElementSibling && this.range.startContainer.textContent.split('').length > 0 &&\n                (rangetextContent.length === 1 || rangetextContent[rangetextContent.length - 2].indexOf('') === -1 ||\n                    this.range.startContainer.nodeType === 1))) {\n            if (this.allowSpaces && currentRange && currentRange.trim() !== '' && charRegex.test(currentRange) && currentRange.indexOf(this.mentionChar) !== -1\n                && !this.isMatchedText() && (currentRange.length > 1 && currentRange.replace(/\\u00A0/g, ' ').charAt(currentRange.length - 2) !== ' ') &&\n                (this.list && this.list.querySelectorAll('ul').length > 0)) {\n                this.queryString = currentRange.substring(currentRange.lastIndexOf(this.mentionChar) + 1).replace('\\u00a0', ' ');\n                this.searchLists(e);\n            }\n            else if (this.isPopupOpen && (!this.allowSpaces || !lastWordRange)) {\n                this.hidePopup();\n                this.lineBreak = true;\n            }\n            return;\n        }\n        this.queryString = lastWordRange.replace(this.mentionChar, '');\n        if (this.mentionChar.charCodeAt(0) === lastWordRange.charCodeAt(0) &&\n            this.queryString !== '' && e.keyCode !== 38 && e.keyCode !== 40 && !this.lineBreak) {\n            this.searchLists(e);\n            if (!this.isPopupOpen && this.queryString.length >= this.minLength) {\n                if (!this.isContentEditable(this.inputElement)) {\n                    this.showPopup();\n                }\n                else if (this.isContentEditable(this.inputElement) && this.range && this.range.startContainer !== this.inputElement) {\n                    this.showPopup();\n                }\n            }\n        }\n        else if (lastWordRange.indexOf(this.mentionChar) === 0 && !this.isPopupOpen && e.keyCode !== 8 && (!this.popupObj ||\n            (isNullOrUndefined(this.target) && !document.body.contains(this.popupObj.element) ||\n                !isNullOrUndefined(this.target) && document.body.contains(this.popupObj.element)))) {\n            if (this.initRemoteRender && this.list && this.list.classList.contains('e-nodata')) {\n                this.searchLists(e);\n            }\n            this.resetList(this.dataSource, this.fields);\n            if (isNullOrUndefined(this.list)) {\n                this.initValue();\n            }\n            if (!this.isPopupOpen && e.keyCode !== 38 && e.keyCode !== 40) {\n                this.showPopup();\n                if (this.initRemoteRender && this.list.querySelectorAll('li').length === 0) {\n                    this.showWaitingSpinner();\n                }\n                this.lineBreak = false;\n            }\n        }\n        else if (this.allowSpaces && this.queryString !== '' && currentRange && currentRange.trim() !== '' && currentRange.replace('\\u00a0', ' ').lastIndexOf(' ') < currentRange.length - 1 &&\n            e.keyCode !== 38 && e.keyCode !== 40 && e.keyCode !== 8) {\n            this.queryString = currentRange.substring(currentRange.lastIndexOf(this.mentionChar) + 1).replace('\\u00a0', ' ');\n            this.searchLists(e);\n        }\n        else if (this.queryString === '' && this.isPopupOpen && e.keyCode !== 38 && e.keyCode !== 40) {\n            this.resetList(this.dataSource, this.fields);\n        }\n    };\n    Mention.prototype.isMatchedText = function () {\n        var isMatched = false;\n        for (var i = 0; i < (this.liCollections && this.liCollections.length); i++) {\n            if (this.getTextRange() &&\n                this.getTextRange().substring(this.getTextRange().lastIndexOf(this.mentionChar) + 1).replace('\\u00a0', ' ').trim() === this.liCollections[i].getAttribute('data-value').toLowerCase()) {\n                isMatched = true;\n            }\n        }\n        return isMatched;\n    };\n    Mention.prototype.getCurrentRange = function () {\n        this.range = this.inputElement.ownerDocument.getSelection().getRangeAt(0);\n        return this.range;\n    };\n    Mention.prototype.searchLists = function (e) {\n        var _this = this;\n        this.isDataFetched = false;\n        if (isNullOrUndefined(this.list)) {\n            _super.prototype.render.call(this);\n            this.unWireListEvents();\n            this.wireListEvents();\n        }\n        if (e.type !== 'mousedown' && (e.keyCode === 40 || e.keyCode === 38)) {\n            this.queryString = this.queryString === '' ? null : this.queryString;\n            this.beforePopupOpen = true;\n            this.resetList(this.dataSource, this.fields);\n            return;\n        }\n        this.isSelected = false;\n        this.activeIndex = null;\n        var eventArgs = {\n            preventDefaultAction: false,\n            text: this.elementValue(),\n            updateData: function (dataSource, query, fields) {\n                if (eventArgs.cancel) {\n                    return;\n                }\n                _this.isFiltered = true;\n                _this.filterAction(dataSource, query, fields);\n            },\n            cancel: false\n        };\n        this.trigger('filtering', eventArgs, function (eventArgs) {\n            if (!eventArgs.cancel && !_this.isFiltered && !eventArgs.preventDefaultAction) {\n                _this.filterAction(_this.dataSource, null, _this.fields);\n            }\n        });\n    };\n    Mention.prototype.filterAction = function (dataSource, query, fields) {\n        this.beforePopupOpen = true;\n        if (this.queryString !== '' && (this.queryString.length >= this.minLength)) {\n            this.resetList(dataSource, fields, query);\n        }\n        else {\n            if (this.isPopupOpen) {\n                this.hidePopup();\n            }\n            this.beforePopupOpen = false;\n        }\n        this.setDataIndex();\n        this.renderReactTemplates();\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    Mention.prototype.onActionComplete = function (ulElement, list, e, isUpdated) {\n        _super.prototype.onActionComplete.call(this, ulElement, list, e);\n        if (this.isActive) {\n            if (!isNullOrUndefined(ulElement)) {\n                attributes(ulElement, { 'id': this.inputElement.id + '_options', 'role': 'listbox', 'aria-hidden': 'false' });\n            }\n            var focusItem = ulElement.querySelector('.' + dropDownBaseClasses.li);\n            if (focusItem) {\n                focusItem.classList.add(dropDownBaseClasses.selected);\n                this.selectedLI = focusItem;\n                var value = this.getFormattedValue(focusItem.getAttribute('data-value'));\n                this.selectEventCallback(focusItem, this.getDataByValue(value), value, true);\n            }\n        }\n    };\n    Mention.prototype.setDataIndex = function () {\n        for (var i = 0; this.liCollections && i < this.liCollections.length; i++) {\n            this.liCollections[i].setAttribute('data-index', i.toString());\n        }\n    };\n    Mention.prototype.listOption = function (dataSource, fieldsSettings) {\n        var _this = this;\n        var fields = _super.prototype.listOption.call(this, dataSource, fieldsSettings);\n        if (isNullOrUndefined(fields.itemCreated)) {\n            fields.itemCreated = function (e) {\n                if (_this.highlight) {\n                    if (_this.inputElement.tagName === _this.getNgDirective() && _this.itemTemplate) {\n                        setTimeout(function () {\n                            highlightSearch(e.item, _this.queryString, _this.ignoreCase, _this.filterType);\n                        }, 0);\n                    }\n                    else {\n                        highlightSearch(e.item, _this.queryString, _this.ignoreCase, _this.filterType);\n                    }\n                }\n            };\n        }\n        else {\n            var itemCreated_1 = fields.itemCreated;\n            fields.itemCreated = function (e) {\n                if (_this.highlight) {\n                    highlightSearch(e.item, _this.queryString, _this.ignoreCase, _this.filterType);\n                }\n                itemCreated_1.apply(_this, [e]);\n            };\n        }\n        return fields;\n    };\n    Mention.prototype.elementValue = function () {\n        if (!this.isContentEditable(this.inputElement)) {\n            return this.inputElement.value.replace(this.mentionChar, '');\n        }\n        else {\n            return this.inputElement.textContent.replace(this.mentionChar, '');\n        }\n    };\n    Mention.prototype.getQuery = function (query) {\n        var filterQuery = query ? query.clone() : this.query ? this.query.clone() : new Query();\n        var filterType = (this.queryString === '' && !isNullOrUndefined(this.elementValue())) ? 'equal' : this.filterType;\n        var queryString = (this.queryString === '' && !isNullOrUndefined(this.elementValue())) ?\n            this.elementValue() : this.queryString;\n        if (this.isFiltered) {\n            return filterQuery;\n        }\n        if (this.queryString !== null && this.queryString !== '') {\n            var dataType = this.typeOfData(this.dataSource).typeof;\n            if (!(this.dataSource instanceof DataManager) && dataType === 'string' || dataType === 'number') {\n                filterQuery.where('', filterType, queryString, this.ignoreCase, this.ignoreAccent);\n            }\n            else {\n                var mapping = !isNullOrUndefined(this.fields.text) ? this.fields.text : '';\n                filterQuery.where(mapping, filterType, queryString, this.ignoreCase, this.ignoreAccent);\n            }\n        }\n        if (!isNullOrUndefined(this.suggestionCount)) {\n            // Since defualt value of suggestioncount is 25, checked the condition\n            if (this.suggestionCount !== 25) {\n                for (var queryElements = 0; queryElements < filterQuery.queries.length; queryElements++) {\n                    if (filterQuery.queries[queryElements].fn === 'onTake') {\n                        filterQuery.queries.splice(queryElements, 1);\n                    }\n                }\n            }\n            filterQuery.take(this.suggestionCount);\n        }\n        return filterQuery;\n    };\n    Mention.prototype.renderHightSearch = function () {\n        if (this.highlight) {\n            for (var i = 0; i < this.liCollections.length; i++) {\n                var isHighlight = this.ulElement.querySelector('.e-active');\n                if (!isHighlight) {\n                    revertHighlightSearch(this.liCollections[i]);\n                    highlightSearch(this.liCollections[i], this.queryString, this.ignoreCase, this.filterType);\n                }\n            }\n        }\n    };\n    Mention.prototype.getTextRange = function () {\n        var text;\n        if (!this.isContentEditable(this.inputElement)) {\n            var component = this.inputElement;\n            if (!isNullOrUndefined(component)) {\n                var startPos = component.selectionStart;\n                if (component.value && startPos >= 0) {\n                    text = component.value.substring(0, startPos);\n                }\n            }\n        }\n        else {\n            var selectedElem = this.range.startContainer;\n            if (!isNullOrUndefined(selectedElem)) {\n                var workingNodeContent = selectedElem.textContent;\n                var selectStartOffset = this.range.startOffset;\n                if (workingNodeContent && selectStartOffset >= 0) {\n                    text = workingNodeContent.substring(0, selectStartOffset);\n                }\n            }\n        }\n        return text;\n    };\n    Mention.prototype.getLastLetter = function (text) {\n        if (isNullOrUndefined(text)) {\n            return '';\n        }\n        var textValue = text.replace(/\\u00A0/g, ' ');\n        var words = textValue.split(/\\s+/);\n        var wordCnt = words.length - 1;\n        return words[wordCnt].trim();\n    };\n    Mention.prototype.isContentEditable = function (element) {\n        return element && element.nodeName !== 'INPUT' && element.nodeName !== 'TEXTAREA';\n    };\n    /**\n     * Opens the popup that displays the list of items.\n     *\n     * @returns {void}\n     */\n    Mention.prototype.showPopup = function () {\n        this.renderPopup();\n        attributes(this.inputElement, { 'aria-activedescendant': this.selectedElementID });\n        if (this.selectedElementID == null) {\n            this.inputElement.removeAttribute('aria-activedescendant');\n        }\n    };\n    /* eslint-disable valid-jsdoc, jsdoc/require-param */\n    /**\n     * Hides the popup if it is in an open state.\n     *\n     * @returns {void}\n     */\n    Mention.prototype.hidePopup = function (e) {\n        this.removeSelection();\n        this.closePopup(0, e);\n    };\n    Mention.prototype.closePopup = function (delay, e) {\n        var _this = this;\n        if (!(this.popupObj && document.body.contains(this.popupObj.element) && this.beforePopupOpen)) {\n            return;\n        }\n        EventHandler.remove(document, 'mousedown', this.onDocumentClick);\n        this.inputElement.removeAttribute('aria-owns');\n        this.inputElement.removeAttribute('aria-activedescendant');\n        this.beforePopupOpen = false;\n        var animModel = {\n            name: 'FadeOut',\n            duration: 100,\n            delay: delay ? delay : 0\n        };\n        var popupInstance = this.popupObj;\n        var eventArgs = { popup: popupInstance, cancel: false, animation: animModel, event: e || null };\n        this.trigger('closed', eventArgs, function (eventArgs) {\n            if (!eventArgs.cancel && _this.popupObj) {\n                if (_this.isPopupOpen) {\n                    _this.popupObj.hide(new Animation(eventArgs.animation));\n                }\n                else {\n                    _this.destroyPopup();\n                }\n            }\n        });\n    };\n    Mention.prototype.renderPopup = function () {\n        var _this = this;\n        var args = { cancel: false };\n        this.trigger('beforeOpen', args, function (args) {\n            if (!args.cancel) {\n                var popupEle_1 = isNullOrUndefined(_this.target) ? _this.createElement('div', {\n                    id: _this.inputElement.id + '_popup', className: 'e-mention e-popup ' + (_this.cssClass != null ? _this.cssClass : '')\n                }) : _this.element;\n                if (!isNullOrUndefined(_this.target)) {\n                    popupEle_1.id = _this.inputElement.id + '_popup';\n                    addClass([popupEle_1], ['e-mention', 'e-popup', 'e-popup-close']);\n                }\n                _this.listHeight = formatUnit(_this.popupHeight);\n                if (!isNullOrUndefined(_this.list.querySelector('li')) && !_this.initRemoteRender) {\n                    var li = _this.list.querySelector('.' + dropDownBaseClasses.focus);\n                    if (!isNullOrUndefined(li)) {\n                        _this.selectedLI = li;\n                        var value = _this.getFormattedValue(li.getAttribute('data-value'));\n                        _this.selectEventCallback(li, _this.getDataByValue(value), value, true);\n                    }\n                }\n                append([_this.list], popupEle_1);\n                if ((!_this.popupObj || !document.body.contains(_this.popupObj.element)) || !document.contains(popupEle_1) && isNullOrUndefined(_this.target)) {\n                    document.body.appendChild(popupEle_1);\n                }\n                var coordinates_1;\n                popupEle_1.style.visibility = 'hidden';\n                if (_this.popupHeight !== 'auto') {\n                    _this.list.style.maxHeight = (parseInt(_this.listHeight, 10) - 2).toString() + 'px'; // due to box-sizing property\n                    popupEle_1.style.maxHeight = formatUnit(_this.popupHeight);\n                }\n                else {\n                    popupEle_1.style.height = 'auto';\n                }\n                var offsetValue = 0;\n                var left = 0;\n                _this.initializePopup(popupEle_1, offsetValue, left);\n                _this.checkCollision(popupEle_1);\n                popupEle_1.style.visibility = 'visible';\n                if (!isNullOrUndefined(_this.list)) {\n                    _this.unWireListEvents();\n                    _this.wireListEvents();\n                }\n                _this.selectedElementID = _this.selectedLI ? _this.selectedLI.id : null;\n                attributes(_this.inputElement, { 'aria-owns': _this.inputElement.id + '_options', 'aria-activedescendant': _this.selectedElementID });\n                if (_this.selectedElementID == null) {\n                    _this.inputElement.removeAttribute('aria-activedescendant');\n                }\n                var animModel = { name: 'FadeIn', duration: 100 };\n                _this.beforePopupOpen = true;\n                var popupInstance = _this.popupObj;\n                var eventArgs = { popup: popupInstance, cancel: false, animation: animModel };\n                _this.trigger('opened', eventArgs, function (eventArgs) {\n                    if (!eventArgs.cancel) {\n                        _this.renderReactTemplates();\n                        _this.popupObj.show(new Animation(eventArgs.animation), (_this.zIndex === 1000) ? _this.inputElement : null);\n                        coordinates_1 = _this.getCoordinates(_this.inputElement, _this.getTriggerCharPosition());\n                        if (!_this.isCollided) {\n                            popupEle_1.style.cssText = 'top: '.concat(coordinates_1.top.toString(), 'px;\\n left: ').concat(coordinates_1.left.toString(), 'px;\\nposition: absolute;\\n display: block;');\n                        }\n                        else {\n                            popupEle_1.style.left = formatUnit(coordinates_1.left);\n                            _this.isCollided = false;\n                        }\n                        popupEle_1.style.width = _this.popupWidth !== '100%' && !isNullOrUndefined(_this.popupWidth) ? formatUnit(_this.popupWidth) : 'auto';\n                    }\n                    else {\n                        _this.beforePopupOpen = false;\n                        _this.destroyPopup();\n                    }\n                });\n            }\n            else {\n                _this.beforePopupOpen = false;\n            }\n        });\n    };\n    Mention.prototype.checkCollision = function (popupEle) {\n        if (!Browser.isDevice || (Browser.isDevice && !(this.getModuleName() === 'mention'))) {\n            var collision = isCollide(popupEle);\n            if (collision.length > 0) {\n                popupEle.style.marginTop = -parseInt(getComputedStyle(popupEle).marginTop, 10) + 'px';\n                this.isCollided = true;\n            }\n            this.popupObj.resolveCollision();\n        }\n    };\n    Mention.prototype.getTriggerCharPosition = function () {\n        var mostRecentTriggerCharPos;\n        var currentRange = this.getTextRange();\n        if (currentRange !== undefined && currentRange !== null) {\n            mostRecentTriggerCharPos = 0;\n            var idx = currentRange.lastIndexOf(this.mentionChar);\n            if (idx >= mostRecentTriggerCharPos) {\n                mostRecentTriggerCharPos = idx;\n            }\n        }\n        return mostRecentTriggerCharPos;\n    };\n    Mention.prototype.initializePopup = function (element, offsetValue, left) {\n        var _this = this;\n        this.popupObj = new Popup(element, {\n            width: this.setWidth(), targetType: 'relative',\n            relateTo: this.inputElement, collision: { X: 'flip', Y: 'flip' }, offsetY: offsetValue,\n            enableRtl: this.enableRtl, offsetX: left, position: { X: 'top', Y: 'left' }, actionOnScroll: 'hide',\n            zIndex: this.zIndex,\n            close: function () {\n                _this.destroyPopup();\n            },\n            open: function () {\n                EventHandler.add(document, 'mousedown', _this.onDocumentClick, _this);\n                _this.isPopupOpen = true;\n                _this.setDataIndex();\n            }\n        });\n    };\n    Mention.prototype.setWidth = function () {\n        var width = formatUnit(this.popupWidth);\n        if (width.indexOf('%') > -1) {\n            var inputWidth = this.inputElement.offsetWidth * parseFloat(width) / 100;\n            width = inputWidth.toString() + 'px';\n        }\n        return width;\n    };\n    Mention.prototype.destroyPopup = function () {\n        this.isPopupOpen = false;\n        this.popupObj.destroy();\n        if (isNullOrUndefined(this.target)) {\n            detach(this.popupObj.element);\n        }\n        else {\n            this.popupObj.element.innerHTML = '';\n            this.popupObj.element.removeAttribute('style');\n            this.popupObj.element.removeAttribute('aria-disabled');\n        }\n    };\n    Mention.prototype.onDocumentClick = function (e) {\n        var target = e.target;\n        if (!(!isNullOrUndefined(this.popupObj) && closest(target, '#' + this.popupObj.element.id))) {\n            this.hidePopup(e);\n        }\n    };\n    Mention.prototype.getCoordinates = function (element, position) {\n        var properties = ['direction', 'boxSizing', 'width', 'height', 'overflowX', 'overflowY', 'borderTopWidth', 'borderRightWidth', 'borderBottomWidth', 'borderLeftWidth', 'paddingTop', 'paddingRight', 'paddingBottom', 'paddingLeft', 'fontStyle', 'fontVariant', 'fontWeight', 'fontStretch', 'fontSize', 'fontSizeAdjust', 'lineHeight', 'fontFamily', 'textAlign', 'textTransform', 'textIndent', 'textDecoration', 'letterSpacing', 'wordSpacing'];\n        var div;\n        var span;\n        var range;\n        var globalRange;\n        var coordinates;\n        var computed;\n        var rect;\n        if (!this.isContentEditable(this.inputElement)) {\n            div = this.createElement('div', { className: 'e-form-mirror-div' });\n            document.body.appendChild(div);\n            computed = getComputedStyle(element);\n            div.style.position = 'absolute';\n            div.style.visibility = 'hidden';\n            properties.forEach(function (prop) {\n                div.style[prop] = computed[prop];\n            });\n            div.textContent = element.value.substring(0, position);\n            if (this.inputElement.nodeName === 'INPUT') {\n                div.textContent = div.textContent.replace(/\\s/g, '\\u00a0');\n            }\n            span = this.createElement('span');\n            span.textContent = element.value.substring(position) || '.';\n            div.appendChild(span);\n            rect = element.getBoundingClientRect();\n        }\n        else {\n            var selectedNodePosition = this.getTriggerCharPosition();\n            globalRange = this.range;\n            range = document.createRange();\n            range.setStart(globalRange.startContainer, selectedNodePosition);\n            range.setEnd(globalRange.startContainer, selectedNodePosition);\n            range.collapse(false);\n            rect = range.getBoundingClientRect();\n        }\n        var doc = document.documentElement;\n        var windowLeft = (window.pageXOffset || doc.scrollLeft) - (doc.clientLeft || 0);\n        var windowTop = (window.pageYOffset || doc.scrollTop) - (doc.clientTop || 0);\n        if (!this.isContentEditable(this.inputElement)) {\n            coordinates = {\n                top: rect.top + windowTop + span.offsetTop + parseInt(computed.borderTopWidth, 10) +\n                    parseInt(computed.fontSize, 10) + 3 - element.scrollTop,\n                left: rect.left + windowLeft + span.offsetLeft + parseInt(computed.borderLeftWidth, 10)\n            };\n            document.body.removeChild(div);\n        }\n        else {\n            coordinates = {\n                top: rect.top + windowTop + parseInt(getComputedStyle(this.inputElement).fontSize),\n                left: rect.left + windowLeft\n            };\n        }\n        return coordinates;\n    };\n    ;\n    Mention.prototype.initValue = function () {\n        this.renderList();\n        if (this.dataSource instanceof DataManager) {\n            this.initRemoteRender = true;\n        }\n        else {\n            this.updateValues();\n        }\n    };\n    Mention.prototype.updateValues = function () {\n        var li = this.list.querySelector('.' + dropDownBaseClasses.focus);\n        if (!isNullOrUndefined(li)) {\n            this.setSelection(li, null);\n        }\n    };\n    Mention.prototype.renderList = function () {\n        _super.prototype.render.call(this);\n        this.unWireListEvents();\n        this.wireListEvents();\n    };\n    /**\n     * Event binding for list\n     *\n     * @returns {void}\n     */\n    Mention.prototype.wireListEvents = function () {\n        EventHandler.add(this.list, 'click', this.onMouseClick, this);\n        EventHandler.add(this.list, 'mouseover', this.onMouseOver, this);\n        EventHandler.add(this.list, 'mouseout', this.onMouseLeave, this);\n    };\n    /**\n     * Event un binding for list items.\n     *\n     * @returns {void}\n     */\n    Mention.prototype.unWireListEvents = function () {\n        EventHandler.remove(this.list, 'click', this.onMouseClick);\n        EventHandler.remove(this.list, 'mouseover', this.onMouseOver);\n        EventHandler.remove(this.list, 'mouseout', this.onMouseLeave);\n    };\n    Mention.prototype.onMouseClick = function (e) {\n        var target = e.target;\n        var li = closest(target, '.' + dropDownBaseClasses.li);\n        if (!this.isValidLI(li)) {\n            return;\n        }\n        this.setSelection(li, e);\n        var delay = 100;\n        this.closePopup(delay, e);\n        this.inputElement.focus();\n    };\n    Mention.prototype.updateSelectedItem = function (li, e, preventSelect, isSelection) {\n        var _this = this;\n        this.removeSelection();\n        li.classList.add(dropDownBaseClasses.selected);\n        this.removeHover();\n        var value = this.getFormattedValue(li.getAttribute('data-value'));\n        var selectedData = this.getDataByValue(value);\n        if (!preventSelect && !isNullOrUndefined(e)) {\n            var items = this.detachChanges(selectedData);\n            this.isSelected = true;\n            var eventArgs = {\n                e: e,\n                item: li,\n                itemData: items,\n                isInteracted: e ? true : false,\n                cancel: false\n            };\n            this.trigger('select', eventArgs, function (eventArgs) {\n                if (eventArgs.cancel) {\n                    li.classList.remove(dropDownBaseClasses.selected);\n                }\n                else {\n                    _this.selectEventCallback(li, selectedData, value);\n                    if (isSelection) {\n                        _this.setSelectOptions(li, e);\n                    }\n                }\n            });\n        }\n        else {\n            this.selectEventCallback(li, selectedData, value);\n            if (isSelection) {\n                this.setSelectOptions(li, e);\n            }\n        }\n    };\n    Mention.prototype.setSelection = function (li, e) {\n        if (this.isValidLI(li) && (!li.classList.contains(dropDownBaseClasses.selected) || (this.isPopupOpen && this.isSelected\n            && li.classList.contains(dropDownBaseClasses.selected)))) {\n            this.updateSelectedItem(li, e, false, true);\n        }\n        else {\n            this.setSelectOptions(li, e);\n        }\n    };\n    Mention.prototype.setSelectOptions = function (li, e) {\n        if (this.list) {\n            this.removeHover();\n        }\n        this.previousSelectedLI = (!isNullOrUndefined(this.selectedLI)) ? this.selectedLI : null;\n        this.selectedLI = li;\n        if (this.isPopupOpen && !isNullOrUndefined(this.selectedLI)) {\n            this.setScrollPosition(e);\n        }\n        if (e && (e.keyCode === 38 || e.keyCode === 40)) {\n            return;\n        }\n        if (isNullOrUndefined(e) || this.setValue(e)) {\n            return;\n        }\n    };\n    Mention.prototype.setScrollPosition = function (e) {\n        if (!isNullOrUndefined(e)) {\n            switch (e.action) {\n                case 'pageDown':\n                case 'down':\n                case 'end':\n                    this.scrollBottom();\n                    break;\n                default:\n                    this.scrollTop();\n                    break;\n            }\n        }\n        else {\n            this.scrollBottom(true);\n        }\n    };\n    Mention.prototype.scrollBottom = function (isInitial) {\n        if (!isNullOrUndefined(this.selectedLI)) {\n            var currentOffset = this.list.offsetHeight;\n            var nextBottom = this.selectedLI.offsetTop + this.selectedLI.offsetHeight - this.list.scrollTop;\n            var nextOffset = this.list.scrollTop + nextBottom - currentOffset;\n            nextOffset = isInitial ? nextOffset + parseInt(getComputedStyle(this.list).paddingTop, 10) * 2 : nextOffset;\n            var boxRange = this.selectedLI.offsetTop + this.selectedLI.offsetHeight - this.list.scrollTop;\n            if (this.activeIndex === 0) {\n                this.list.scrollTop = 0;\n            }\n            else if (nextBottom > currentOffset || !(boxRange > 0 && this.list.offsetHeight > boxRange)) {\n                this.list.scrollTop = nextOffset;\n            }\n        }\n    };\n    Mention.prototype.scrollTop = function () {\n        if (!isNullOrUndefined(this.selectedLI)) {\n            var nextOffset = this.selectedLI.offsetTop - this.list.scrollTop;\n            nextOffset = this.fields.groupBy && nextOffset;\n            var boxRange = (this.selectedLI.offsetTop + this.selectedLI.offsetHeight - this.list.scrollTop);\n            if (this.activeIndex === 0) {\n                this.list.scrollTop = 0;\n            }\n            else if (nextOffset < 0) {\n                this.list.scrollTop = this.list.scrollTop + nextOffset;\n            }\n            else if (!(boxRange > 0 && this.list.offsetHeight > boxRange)) {\n                this.list.scrollTop = this.selectedLI.offsetTop;\n            }\n        }\n    };\n    Mention.prototype.selectEventCallback = function (li, selectedData, value, selectLi) {\n        this.previousItemData = (!isNullOrUndefined(this.itemData)) ? this.itemData : null;\n        this.item = li;\n        this.itemData = selectedData;\n        var focusedItem = this.list.querySelector('.' + dropDownBaseClasses.focus);\n        if (focusedItem) {\n            removeClass([focusedItem], dropDownBaseClasses.focus);\n        }\n        if (selectLi) {\n            addClass([li], dropDownBaseClasses.selected);\n        }\n        li.setAttribute('aria-selected', 'true');\n        this.activeIndex = this.getIndexByValue(value);\n    };\n    Mention.prototype.detachChanges = function (value) {\n        var items;\n        if (typeof value === 'string' ||\n            typeof value === 'boolean' ||\n            typeof value === 'number') {\n            items = Object.defineProperties({}, {\n                value: {\n                    value: value,\n                    enumerable: true\n                },\n                text: {\n                    value: value,\n                    enumerable: true\n                }\n            });\n        }\n        else {\n            items = value;\n        }\n        return items;\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    Mention.prototype.setValue = function (e) {\n        if (!this.isReact) {\n            if (!isNullOrUndefined(this.displayTemplate)) {\n                this.setDisplayTemplate();\n            }\n            this.updateMentionValue(e);\n            return true;\n        }\n        else {\n            if (!isNullOrUndefined(this.displayTemplate)) {\n                this.setDisplayTemplate(e);\n            }\n            else {\n                this.updateMentionValue(e);\n            }\n            return true;\n        }\n    };\n    Mention.prototype.updateMentionValue = function (e) {\n        var dataItem = this.getItemData();\n        var textSuffix;\n        var value;\n        var endPos;\n        var range;\n        var globalRange;\n        var selection = this.inputElement.ownerDocument.getSelection();\n        var startPos = this.getTriggerCharPosition();\n        textSuffix = typeof this.suffixText === 'string' ? this.suffixText : '';\n        if (dataItem.value !== null) {\n            value = this.mentionVal(dataItem.text);\n        }\n        if (!this.isContentEditable(this.inputElement)) {\n            var myField = this.inputElement;\n            var currentTriggerSnippet = this.getTextRange().substring(startPos + this.mentionChar.length, this.getTextRange().length);\n            value += textSuffix;\n            endPos = startPos + this.mentionChar.length;\n            endPos += currentTriggerSnippet.length;\n            myField.value = myField.value.substring(0, startPos) + value + myField.value.substring(endPos, myField.value.length);\n            myField.selectionStart = startPos + value.length;\n            myField.selectionEnd = startPos + value.length;\n            if (this.isPopupOpen) {\n                this.hidePopup();\n            }\n            this.onChangeEvent(e);\n        }\n        else {\n            endPos = this.getTriggerCharPosition() + this.mentionChar.length;\n            if (this.range && (this.range.startContainer.textContent.trim() !== this.mentionChar)) {\n                endPos = this.range.endOffset;\n            }\n            globalRange = this.range;\n            range = document.createRange();\n            range.setStart(globalRange.startContainer, startPos);\n            range.setEnd(globalRange.startContainer, endPos);\n            range.deleteContents();\n            var element = this.createElement('div');\n            element.innerHTML = value;\n            var frag = document.createDocumentFragment();\n            var node = void 0;\n            var lastNode = void 0;\n            while (node = element.firstChild) {\n                lastNode = frag.appendChild(node);\n            }\n            range.insertNode(frag);\n            if (lastNode) {\n                range = range.cloneRange();\n                range.setStartAfter(lastNode);\n                range.collapse(true);\n                selection.removeAllRanges();\n                selection.addRange(range);\n            }\n            if (this.isPopupOpen) {\n                this.hidePopup();\n            }\n            this.onChangeEvent(e);\n        }\n    };\n    Mention.prototype.mentionVal = function (value) {\n        var showChar = this.showMentionChar ? this.mentionChar : '';\n        if (!isNullOrUndefined(this.displayTemplate) && !isNullOrUndefined(this.displayTempElement)) {\n            value = this.displayTempElement.innerHTML;\n        }\n        if (this.isContentEditable(this.inputElement)) {\n            return '<span contenteditable=\"false\" class=\"e-mention-chip\">' + showChar + value + '</span>'.concat(typeof this.suffixText === 'string' ? this.suffixText : ' ');\n        }\n        else {\n            return showChar + value;\n        }\n    };\n    Mention.prototype.setDisplayTemplate = function (e) {\n        var _this = this;\n        var compiledString;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        if (this.isReact) {\n            this.clearTemplate(['displayTemplate']);\n            if (this.displayTempElement) {\n                detach(this.displayTempElement);\n                this.displayTempElement = null;\n            }\n        }\n        if (!this.displayTempElement) {\n            this.displayTempElement = this.createElement('div');\n        }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        if (!this.isReact) {\n            this.displayTempElement.innerHTML = '';\n        }\n        compiledString = compile(this.displayTemplate);\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var displayCompTemp = compiledString(this.itemData, this, 'displayTemplate', this.displayTemplateId, this.isStringTemplate, null, this.displayTempElement);\n        if (displayCompTemp && displayCompTemp.length > 0) {\n            for (var i = 0; i < displayCompTemp.length; i++) {\n                this.displayTempElement.appendChild(displayCompTemp[i]);\n            }\n        }\n        if (!this.isReact) {\n            this.renderTemplates();\n        }\n        else {\n            this.renderTemplates(function () {\n                _this.updateMentionValue(e);\n            });\n        }\n    };\n    Mention.prototype.renderTemplates = function (callBack) {\n        this.renderReactTemplates(callBack);\n    };\n    Mention.prototype.setSpinnerTemplate = function () {\n        var _this = this;\n        var compiledString;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        if (this.isReact) {\n            this.clearTemplate(['spinnerTemplate']);\n            if (this.spinnerTemplateElement) {\n                detach(this.spinnerTemplateElement);\n                this.spinnerTemplateElement = null;\n            }\n        }\n        if (!this.spinnerTemplateElement) {\n            this.spinnerTemplateElement = this.createElement('div');\n        }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        if (!this.isReact) {\n            this.spinnerTemplateElement.innerHTML = '';\n        }\n        compiledString = compile(this.spinnerTemplate);\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var spinnerCompTemp = compiledString(null, this, 'spinnerTemplate', this.spinnerTemplateId, this.isStringTemplate, null, this.spinnerTemplateElement);\n        if (spinnerCompTemp && spinnerCompTemp.length > 0) {\n            for (var i = 0; i < spinnerCompTemp.length; i++) {\n                this.spinnerTemplateElement.appendChild(spinnerCompTemp[i]);\n            }\n        }\n        if (!this.isReact) {\n            this.renderTemplates();\n            this.popupObj.element.appendChild(this.spinnerTemplateElement);\n        }\n        else {\n            this.renderTemplates(function () {\n                _this.popupObj.element.appendChild(_this.spinnerTemplateElement);\n            });\n        }\n    };\n    Mention.prototype.onChangeEvent = function (eve) {\n        this.isSelected = false;\n        var items = this.detachMentionChanges(this.itemData);\n        var preItems;\n        if (typeof this.previousItemData === 'string' ||\n            typeof this.previousItemData === 'boolean' ||\n            typeof this.previousItemData === 'number') {\n            preItems = Object.defineProperties({}, {\n                value: {\n                    value: this.previousItemData,\n                    enumerable: true\n                },\n                text: {\n                    value: this.previousItemData,\n                    enumerable: true\n                }\n            });\n        }\n        else {\n            preItems = this.previousItemData;\n        }\n        var eventArgs = {\n            e: eve,\n            item: this.item,\n            itemData: items,\n            previousItem: this.previousSelectedLI,\n            previousItemData: preItems,\n            isInteracted: eve ? true : false,\n            value: this.item.innerHTML,\n            element: this.inputElement\n        };\n        this.trigger('change', eventArgs);\n    };\n    Mention.prototype.detachMentionChanges = function (value) {\n        var items;\n        if (typeof value === 'string' ||\n            typeof value === 'boolean' ||\n            typeof value === 'number') {\n            items = Object.defineProperties({}, {\n                value: {\n                    value: value,\n                    enumerable: true\n                },\n                text: {\n                    value: value,\n                    enumerable: true\n                }\n            });\n        }\n        else {\n            items = value;\n        }\n        return items;\n    };\n    Mention.prototype.getItemData = function () {\n        var fields = this.fields;\n        var dataItem = null;\n        dataItem = this.itemData;\n        var dataValue;\n        var dataText;\n        if (!isNullOrUndefined(dataItem)) {\n            dataValue = getValue(fields.value, dataItem);\n            dataText = getValue(fields.text, dataItem);\n        }\n        var value = (!isNullOrUndefined(dataItem) &&\n            !isUndefined(dataValue) ? dataValue : dataItem);\n        var text = (!isNullOrUndefined(dataItem) &&\n            !isUndefined(dataValue) ? dataText : dataItem);\n        return { value: value, text: text };\n    };\n    Mention.prototype.removeSelection = function () {\n        if (this.list) {\n            var selectedItems = this.list.querySelectorAll('.' + dropDownBaseClasses.selected);\n            if (selectedItems.length) {\n                removeClass(selectedItems, dropDownBaseClasses.selected);\n                selectedItems[0].removeAttribute('aria-selected');\n            }\n        }\n    };\n    Mention.prototype.onMouseOver = function (e) {\n        var currentLi = closest(e.target, '.' + dropDownBaseClasses.li);\n        this.setHover(currentLi);\n    };\n    Mention.prototype.setHover = function (li) {\n        if (this.enabled && this.isValidLI(li) && !li.classList.contains(dropDownBaseClasses.hover)) {\n            this.removeHover();\n            addClass([li], dropDownBaseClasses.hover);\n        }\n    };\n    Mention.prototype.removeHover = function () {\n        if (this.list) {\n            var hoveredItem = this.list.querySelectorAll('.' + dropDownBaseClasses.hover);\n            if (hoveredItem && hoveredItem.length) {\n                removeClass(hoveredItem, dropDownBaseClasses.hover);\n            }\n        }\n    };\n    Mention.prototype.isValidLI = function (li) {\n        return (li && li.hasAttribute('role') && li.getAttribute('role') === 'option');\n    };\n    Mention.prototype.onMouseLeave = function () {\n        this.removeHover();\n    };\n    /**\n     * Search the entered text and show it in the suggestion list if available.\n     *\n     * @returns {void}\n     */\n    Mention.prototype.search = function (text, positionX, positionY) {\n        if ((this.ignoreCase && (text === this.elementValue() || text === this.elementValue().toLowerCase()))\n            || !this.ignoreCase && text === this.elementValue()) {\n            this.resetList(this.dataSource, this.fields);\n        }\n        else {\n            if (this.isPopupOpen) {\n                this.hidePopup();\n            }\n            return;\n        }\n        if (isNullOrUndefined(this.list)) {\n            this.renderList();\n            this.renderPopup();\n        }\n        else {\n            this.showPopup();\n        }\n        this.popupObj.element.style.left = formatUnit(positionX);\n        this.popupObj.element.style.top = formatUnit(positionY);\n    };\n    /**\n     * Removes the component from the DOM and detaches all its related event handlers. Also it removes the attributes and classes.\n     *\n     * @method destroy\n     * @returns {void}\n     */\n    Mention.prototype.destroy = function () {\n        this.hidePopup();\n        this.unWireEvent();\n        if (this.list) {\n            this.unWireListEvents();\n        }\n        if (this.inputElement && !this.inputElement.classList.contains('e-' + this.getModuleName())) {\n            return;\n        }\n        _super.prototype.destroy.call(this);\n    };\n    Mention.prototype.getLocaleName = function () {\n        return 'mention';\n    };\n    Mention.prototype.getNgDirective = function () {\n        return 'EJS-MENTION';\n    };\n    /**\n     * Return the module name of this component.\n     *\n     * @private\n     * @returns {string} Return the module name of this component.\n     */\n    Mention.prototype.getModuleName = function () {\n        return 'mention';\n    };\n    __decorate([\n        Property(null)\n    ], Mention.prototype, \"cssClass\", void 0);\n    __decorate([\n        Property('@')\n    ], Mention.prototype, \"mentionChar\", void 0);\n    __decorate([\n        Property(false)\n    ], Mention.prototype, \"showMentionChar\", void 0);\n    __decorate([\n        Property(false)\n    ], Mention.prototype, \"allowSpaces\", void 0);\n    __decorate([\n        Property(null)\n    ], Mention.prototype, \"suffixText\", void 0);\n    __decorate([\n        Property(25)\n    ], Mention.prototype, \"suggestionCount\", void 0);\n    __decorate([\n        Property(0)\n    ], Mention.prototype, \"minLength\", void 0);\n    __decorate([\n        Property('None')\n    ], Mention.prototype, \"sortOrder\", void 0);\n    __decorate([\n        Property(true)\n    ], Mention.prototype, \"ignoreCase\", void 0);\n    __decorate([\n        Property(false)\n    ], Mention.prototype, \"highlight\", void 0);\n    __decorate([\n        Property()\n    ], Mention.prototype, \"locale\", void 0);\n    __decorate([\n        Property('auto')\n    ], Mention.prototype, \"popupWidth\", void 0);\n    __decorate([\n        Property('300px')\n    ], Mention.prototype, \"popupHeight\", void 0);\n    __decorate([\n        Property(null)\n    ], Mention.prototype, \"displayTemplate\", void 0);\n    __decorate([\n        Property(null)\n    ], Mention.prototype, \"itemTemplate\", void 0);\n    __decorate([\n        Property('No records found')\n    ], Mention.prototype, \"noRecordsTemplate\", void 0);\n    __decorate([\n        Property(null)\n    ], Mention.prototype, \"spinnerTemplate\", void 0);\n    __decorate([\n        Property()\n    ], Mention.prototype, \"target\", void 0);\n    __decorate([\n        Property([])\n    ], Mention.prototype, \"dataSource\", void 0);\n    __decorate([\n        Property(null)\n    ], Mention.prototype, \"query\", void 0);\n    __decorate([\n        Property('Contains')\n    ], Mention.prototype, \"filterType\", void 0);\n    __decorate([\n        Complex({ text: null, value: null, iconCss: null, groupBy: null }, FieldSettings)\n    ], Mention.prototype, \"fields\", void 0);\n    __decorate([\n        Event()\n    ], Mention.prototype, \"actionBegin\", void 0);\n    __decorate([\n        Event()\n    ], Mention.prototype, \"actionComplete\", void 0);\n    __decorate([\n        Event()\n    ], Mention.prototype, \"actionFailure\", void 0);\n    __decorate([\n        Event()\n    ], Mention.prototype, \"change\", void 0);\n    __decorate([\n        Event()\n    ], Mention.prototype, \"beforeOpen\", void 0);\n    __decorate([\n        Event()\n    ], Mention.prototype, \"opened\", void 0);\n    __decorate([\n        Event()\n    ], Mention.prototype, \"closed\", void 0);\n    __decorate([\n        Event()\n    ], Mention.prototype, \"select\", void 0);\n    __decorate([\n        Event()\n    ], Mention.prototype, \"filtering\", void 0);\n    __decorate([\n        Event()\n    ], Mention.prototype, \"created\", void 0);\n    __decorate([\n        Event()\n    ], Mention.prototype, \"destroyed\", void 0);\n    Mention = __decorate([\n        NotifyPropertyChanges\n    ], Mention);\n    return Mention;\n}(DropDownBase));\nexport { Mention };\n"]},"metadata":{},"sourceType":"module"}