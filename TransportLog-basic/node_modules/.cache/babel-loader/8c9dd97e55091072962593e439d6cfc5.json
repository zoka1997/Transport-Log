{"ast":null,"code":"/**\r\n * DevExtreme (esm/ui/scheduler/workspaces/ui.scheduler.work_space.js)\r\n * Version: 22.1.6\r\n * Build date: Tue Oct 18 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport { setWidth, getOuterHeight, getOuterWidth, setOuterHeight, getHeight, getWidth } from \"../../../core/utils/size\";\nimport $ from \"../../../core/renderer\";\nimport domAdapter from \"../../../core/dom_adapter\";\nimport eventsEngine from \"../../../events/core/events_engine\";\nimport dateUtils from \"../../../core/utils/date\";\nimport { getWindow, hasWindow } from \"../../../core/utils/window\";\nimport { getPublicElement } from \"../../../core/element\";\nimport { extend } from \"../../../core/utils/extend\";\nimport { getBoundingRect } from \"../../../core/utils/position\";\nimport messageLocalization from \"../../../localization/message\";\nimport { noop } from \"../../../core/utils/common\";\nimport { isDefined } from \"../../../core/utils/type\";\nimport { addNamespace, isMouseEvent } from \"../../../events/utils/index\";\nimport pointerEvents from \"../../../events/pointer\";\nimport errors from \"../../widget/ui.errors\";\nimport { name as clickEventName } from \"../../../events/click\";\nimport { name as contextMenuEventName } from \"../../../events/contextmenu\";\nimport { enter as dragEventEnter, leave as dragEventLeave, drop as dragEventDrop } from \"../../../events/drag\";\nimport Scrollable from \"../../scroll_view/ui.scrollable\";\nimport HorizontalGroupedStrategy from \"./ui.scheduler.work_space.grouped.strategy.horizontal\";\nimport VerticalGroupedStrategy from \"./ui.scheduler.work_space.grouped.strategy.vertical\";\nimport tableCreatorModule from \"../table_creator\";\nvar {\n  tableCreator: tableCreator\n} = tableCreatorModule;\nimport VerticalShader from \"../shaders/ui.scheduler.current_time_shader.vertical\";\nimport AppointmentDragBehavior from \"../appointmentDragBehavior\";\nimport { APPOINTMENT_SETTINGS_KEY } from \"../constants\";\nimport { FIXED_CONTAINER_CLASS, VIRTUAL_CELL_CLASS, TIME_PANEL_CLASS, DATE_TABLE_CLASS, DATE_TABLE_ROW_CLASS, GROUP_ROW_CLASS, GROUP_HEADER_CONTENT_CLASS, VERTICAL_GROUP_COUNT_CLASSES } from \"../classes\";\nimport WidgetObserver from \"../base/widgetObserver\";\nimport { resetPosition, locate } from \"../../../animation/translator\";\nimport { VirtualScrollingDispatcher, VirtualScrollingRenderer } from \"./ui.scheduler.virtual_scrolling\";\nimport ViewDataProvider from \"./view_model/view_data_provider\";\nimport dxrDateTableLayout from \"../../../renovation/ui/scheduler/workspaces/base/date_table/layout.j\";\nimport dxrAllDayPanelTable from \"../../../renovation/ui/scheduler/workspaces/base/date_table/all_day_panel/table.j\";\nimport dxrAllDayPanelTitle from \"../../../renovation/ui/scheduler/workspaces/base/date_table/all_day_panel/title.j\";\nimport dxrTimePanelTableLayout from \"../../../renovation/ui/scheduler/workspaces/base/time_panel/layout.j\";\nimport dxrGroupPanel from \"../../../renovation/ui/scheduler/workspaces/base/group_panel/group_panel.j\";\nimport dxrDateHeader from \"../../../renovation/ui/scheduler/workspaces/base/header_panel/layout.j\";\nimport CellsSelectionState from \"./cells_selection_state\";\nimport { Cache } from \"./cache\";\nimport { CellsSelectionController } from \"./cells_selection_controller\";\nimport { calculateViewStartDate, getViewStartByOptions, validateDayHours, getStartViewDateTimeOffset, isDateAndTimeView, calculateIsGroupedAllDayPanel, getCellDuration } from \"../../../renovation/ui/scheduler/view_model/to_test/views/utils/base\";\nimport { createResourcesTree, getCellGroups, getGroupsObjectFromGroupsArray, getGroupCount } from \"../resources/utils\";\nimport { ScrollSemaphore } from \"../../../renovation/ui/scheduler/utils/semaphore/scrollSemaphore\";\nimport { getCellWidth, getCellHeight, getAllDayHeight, getMaxAllowedPosition, PositionHelper } from \"./helpers/positionHelper\";\nimport { utils } from \"../utils\";\nimport { compileGetter } from \"../../../core/utils/data\";\nvar abstract = WidgetObserver.abstract;\nvar toMs = dateUtils.dateToMilliseconds;\nvar COMPONENT_CLASS = \"dx-scheduler-work-space\";\nvar GROUPED_WORKSPACE_CLASS = \"dx-scheduler-work-space-grouped\";\nvar VERTICAL_GROUPED_WORKSPACE_CLASS = \"dx-scheduler-work-space-vertical-grouped\";\nvar WORKSPACE_VERTICAL_GROUP_TABLE_CLASS = \"dx-scheduler-work-space-vertical-group-table\";\nvar WORKSPACE_WITH_BOTH_SCROLLS_CLASS = \"dx-scheduler-work-space-both-scrollbar\";\nvar WORKSPACE_WITH_COUNT_CLASS = \"dx-scheduler-work-space-count\";\nvar WORKSPACE_WITH_GROUP_BY_DATE_CLASS = \"dx-scheduler-work-space-group-by-date\";\nvar WORKSPACE_WITH_ODD_CELLS_CLASS = \"dx-scheduler-work-space-odd-cells\";\nvar TIME_PANEL_CELL_CLASS = \"dx-scheduler-time-panel-cell\";\nvar TIME_PANEL_ROW_CLASS = \"dx-scheduler-time-panel-row\";\nvar ALL_DAY_PANEL_CLASS = \"dx-scheduler-all-day-panel\";\nvar ALL_DAY_TABLE_CLASS = \"dx-scheduler-all-day-table\";\nvar ALL_DAY_CONTAINER_CLASS = \"dx-scheduler-all-day-appointments\";\nvar ALL_DAY_TITLE_CLASS = \"dx-scheduler-all-day-title\";\nvar ALL_DAY_TABLE_CELL_CLASS = \"dx-scheduler-all-day-table-cell\";\nvar ALL_DAY_TABLE_ROW_CLASS = \"dx-scheduler-all-day-table-row\";\nvar WORKSPACE_WITH_ALL_DAY_CLASS = \"dx-scheduler-work-space-all-day\";\nvar WORKSPACE_WITH_COLLAPSED_ALL_DAY_CLASS = \"dx-scheduler-work-space-all-day-collapsed\";\nvar WORKSPACE_WITH_MOUSE_SELECTION_CLASS = \"dx-scheduler-work-space-mouse-selection\";\nvar HORIZONTAL_SIZES_CLASS = \"dx-scheduler-cell-sizes-horizontal\";\nvar VERTICAL_SIZES_CLASS = \"dx-scheduler-cell-sizes-vertical\";\nvar HEADER_PANEL_CLASS = \"dx-scheduler-header-panel\";\nvar HEADER_PANEL_CELL_CLASS = \"dx-scheduler-header-panel-cell\";\nvar HEADER_ROW_CLASS = \"dx-scheduler-header-row\";\nvar GROUP_HEADER_CLASS = \"dx-scheduler-group-header\";\nvar DATE_TABLE_CELL_CLASS = \"dx-scheduler-date-table-cell\";\nvar DATE_TABLE_FOCUSED_CELL_CLASS = \"dx-scheduler-focused-cell\";\nvar VIRTUAL_ROW_CLASS = \"dx-scheduler-virtual-row\";\nvar DATE_TABLE_DROPPABLE_CELL_CLASS = \"dx-scheduler-date-table-droppable-cell\";\nvar SCHEDULER_HEADER_SCROLLABLE_CLASS = \"dx-scheduler-header-scrollable\";\nvar SCHEDULER_SIDEBAR_SCROLLABLE_CLASS = \"dx-scheduler-sidebar-scrollable\";\nvar SCHEDULER_DATE_TABLE_SCROLLABLE_CLASS = \"dx-scheduler-date-table-scrollable\";\nvar SCHEDULER_WORKSPACE_DXPOINTERDOWN_EVENT_NAME = addNamespace(pointerEvents.down, \"dxSchedulerWorkSpace\");\nvar DragEventNames = {\n  ENTER: addNamespace(dragEventEnter, \"dxSchedulerDateTable\"),\n  DROP: addNamespace(dragEventDrop, \"dxSchedulerDateTable\"),\n  LEAVE: addNamespace(dragEventLeave, \"dxSchedulerDateTable\")\n};\nvar SCHEDULER_CELL_DXCLICK_EVENT_NAME = addNamespace(clickEventName, \"dxSchedulerDateTable\");\nvar SCHEDULER_CELL_DXPOINTERDOWN_EVENT_NAME = addNamespace(pointerEvents.down, \"dxSchedulerDateTable\");\nvar SCHEDULER_CELL_DXPOINTERUP_EVENT_NAME = addNamespace(pointerEvents.up, \"dxSchedulerDateTable\");\nvar SCHEDULER_CELL_DXPOINTERMOVE_EVENT_NAME = addNamespace(pointerEvents.move, \"dxSchedulerDateTable\");\nvar CELL_DATA = \"dxCellData\";\nvar DATE_TABLE_MIN_CELL_WIDTH = 75;\nvar DAY_MS = toMs(\"day\");\nvar HOUR_MS = toMs(\"hour\");\nvar DRAG_AND_DROP_SELECTOR = \".\".concat(DATE_TABLE_CLASS, \" td, .\").concat(ALL_DAY_TABLE_CLASS, \" td\");\nvar CELL_SELECTOR = \".\".concat(DATE_TABLE_CELL_CLASS, \", .\").concat(ALL_DAY_TABLE_CELL_CLASS);\nvar CELL_INDEX_CALCULATION_EPSILON = .05;\n\nclass SchedulerWorkSpace extends WidgetObserver {\n  get viewDataProvider() {\n    if (!this._viewDataProvider) {\n      this._viewDataProvider = new ViewDataProvider(this.type);\n    }\n\n    return this._viewDataProvider;\n  }\n\n  get cache() {\n    if (!this._cache) {\n      this._cache = new Cache();\n    }\n\n    return this._cache;\n  }\n\n  get cellsSelectionState() {\n    if (!this._cellsSelectionState) {\n      this._cellsSelectionState = new CellsSelectionState(this.viewDataProvider);\n      var selectedCellsOption = this.option(\"selectedCellData\");\n\n      if ((null === selectedCellsOption || void 0 === selectedCellsOption ? void 0 : selectedCellsOption.length) > 0) {\n        var validSelectedCells = selectedCellsOption.map(selectedCell => {\n          var groups = selectedCell.groups;\n\n          if (!groups || 0 === this._getGroupCount()) {\n            return _extends({}, selectedCell, {\n              groupIndex: 0\n            });\n          }\n\n          var groupIndex = this._getGroupIndexByResourceId(groups);\n\n          return _extends({}, selectedCell, {\n            groupIndex: groupIndex\n          });\n        });\n\n        this._cellsSelectionState.setSelectedCellsByData(validSelectedCells);\n      }\n    }\n\n    return this._cellsSelectionState;\n  }\n\n  get cellsSelectionController() {\n    if (!this._cellsSelectionController) {\n      this._cellsSelectionController = new CellsSelectionController();\n    }\n\n    return this._cellsSelectionController;\n  }\n\n  get isAllDayPanelVisible() {\n    return this._isShowAllDayPanel() && this.supportAllDayRow();\n  }\n\n  get verticalGroupTableClass() {\n    return WORKSPACE_VERTICAL_GROUP_TABLE_CLASS;\n  }\n\n  get viewDirection() {\n    return \"vertical\";\n  }\n\n  get renovatedHeaderPanelComponent() {\n    return dxrDateHeader;\n  }\n\n  get timeZoneCalculator() {\n    return this.option(\"timeZoneCalculator\");\n  }\n\n  get isDefaultDraggingMode() {\n    return \"default\" === this.option(\"draggingMode\");\n  }\n\n  _supportedKeys() {\n    var clickHandler = function (e) {\n      e.preventDefault();\n      e.stopPropagation();\n      var selectedCells = this.cellsSelectionState.getSelectedCells();\n\n      if (null !== selectedCells && void 0 !== selectedCells && selectedCells.length) {\n        var selectedCellsElement = selectedCells.map(cellData => this._getCellByData(cellData)).filter(cell => !!cell);\n        e.target = selectedCellsElement;\n        this._showPopup = true;\n\n        this._cellClickAction({\n          event: e,\n          cellElement: $(selectedCellsElement),\n          cellData: selectedCells[0]\n        });\n      }\n    };\n\n    var onArrowPressed = (e, key) => {\n      var _this$cellsSelectionS;\n\n      e.preventDefault();\n      e.stopPropagation();\n      var focusedCellData = null === (_this$cellsSelectionS = this.cellsSelectionState.focusedCell) || void 0 === _this$cellsSelectionS ? void 0 : _this$cellsSelectionS.cellData;\n\n      if (focusedCellData) {\n        var isAllDayPanelCell = focusedCellData.allDay && !this._isVerticalGroupedWorkSpace();\n        var isMultiSelection = e.shiftKey;\n        var isMultiSelectionAllowed = this.option(\"allowMultipleCellSelection\");\n\n        var isRTL = this._isRTL();\n\n        var groupCount = this._getGroupCount();\n\n        var isGroupedByDate = this.isGroupedByDate();\n\n        var isHorizontalGrouping = this._isHorizontalGroupedWorkSpace();\n\n        var focusedCellPosition = this.viewDataProvider.findCellPositionInMap(_extends({}, focusedCellData, {\n          isAllDay: focusedCellData.allDay\n        }));\n        var edgeIndices = isHorizontalGrouping && isMultiSelection && !isGroupedByDate ? this.viewDataProvider.getGroupEdgeIndices(focusedCellData.groupIndex, isAllDayPanelCell) : this.viewDataProvider.getViewEdgeIndices(isAllDayPanelCell);\n        var nextCellData = this.cellsSelectionController.handleArrowClick({\n          focusedCellPosition: focusedCellPosition,\n          edgeIndices: edgeIndices,\n          isRTL: isRTL,\n          isGroupedByDate: isGroupedByDate,\n          groupCount: groupCount,\n          isMultiSelection: isMultiSelection,\n          isMultiSelectionAllowed: isMultiSelectionAllowed,\n          viewType: this.type,\n          key: key,\n          getCellDataByPosition: this.viewDataProvider.getCellData.bind(this.viewDataProvider),\n          isAllDayPanelCell: isAllDayPanelCell,\n          focusedCellData: focusedCellData\n        });\n\n        this._processNextSelectedCell(nextCellData, focusedCellData, isMultiSelection && isMultiSelectionAllowed);\n      }\n    };\n\n    return extend(super._supportedKeys(), {\n      enter: clickHandler,\n      space: clickHandler,\n      downArrow: e => {\n        onArrowPressed(e, \"down\");\n      },\n      upArrow: e => {\n        onArrowPressed(e, \"up\");\n      },\n      rightArrow: e => {\n        onArrowPressed(e, \"right\");\n      },\n      leftArrow: e => {\n        onArrowPressed(e, \"left\");\n      }\n    });\n  }\n\n  _isRTL() {\n    return this.option(\"rtlEnabled\");\n  }\n\n  _moveToCell($cell, isMultiSelection) {\n    if (!isDefined($cell) || !$cell.length) {\n      return;\n    }\n\n    var isMultiSelectionAllowed = this.option(\"allowMultipleCellSelection\");\n\n    var currentCellData = this._getFullCellData($cell);\n\n    var focusedCellData = this.cellsSelectionState.focusedCell.cellData;\n    var nextFocusedCellData = this.cellsSelectionController.moveToCell({\n      isMultiSelection: isMultiSelection,\n      isMultiSelectionAllowed: isMultiSelectionAllowed,\n      currentCellData: currentCellData,\n      focusedCellData: focusedCellData,\n      isVirtualCell: $cell.hasClass(VIRTUAL_CELL_CLASS)\n    });\n\n    this._processNextSelectedCell(nextFocusedCellData, focusedCellData, isMultiSelectionAllowed && isMultiSelection);\n  }\n\n  _processNextSelectedCell(nextCellData, focusedCellData, isMultiSelection) {\n    var nextCellPosition = this.viewDataProvider.findCellPositionInMap({\n      startDate: nextCellData.startDate,\n      groupIndex: nextCellData.groupIndex,\n      isAllDay: nextCellData.allDay,\n      index: nextCellData.index\n    });\n\n    if (!this.viewDataProvider.isSameCell(focusedCellData, nextCellData)) {\n      var $cell = nextCellData.allDay && !this._isVerticalGroupedWorkSpace() ? this._dom_getAllDayPanelCell(nextCellPosition.columnIndex) : this._dom_getDateCell(nextCellPosition);\n      var isNextCellAllDay = nextCellData.allDay;\n\n      this._setSelectedCellsStateAndUpdateSelection(isNextCellAllDay, nextCellPosition, isMultiSelection, $cell);\n\n      this._dateTableScrollable.scrollToElement($cell);\n    }\n  }\n\n  _setSelectedCellsStateAndUpdateSelection(isAllDay, cellPosition, isMultiSelection, $nextFocusedCell) {\n    var nextCellCoordinates = {\n      rowIndex: cellPosition.rowIndex,\n      columnIndex: cellPosition.columnIndex,\n      allDay: isAllDay\n    };\n    this.cellsSelectionState.setFocusedCell(nextCellCoordinates.rowIndex, nextCellCoordinates.columnIndex, isAllDay);\n\n    if (isMultiSelection) {\n      this.cellsSelectionState.setSelectedCells(nextCellCoordinates);\n    } else {\n      this.cellsSelectionState.setSelectedCells(nextCellCoordinates, nextCellCoordinates);\n    }\n\n    this.updateCellsSelection();\n\n    this._updateSelectedCellDataOption(this.cellsSelectionState.getSelectedCells(), $nextFocusedCell);\n  }\n\n  _hasAllDayClass($cell) {\n    return $cell.hasClass(ALL_DAY_TABLE_CELL_CLASS);\n  }\n\n  _focusInHandler(e) {\n    if ($(e.target).is(this._focusTarget()) && false !== this._isCellClick) {\n      delete this._isCellClick;\n      delete this._contextMenuHandled;\n\n      super._focusInHandler.apply(this, arguments);\n\n      this.cellsSelectionState.restoreSelectedAndFocusedCells();\n\n      if (!this.cellsSelectionState.focusedCell) {\n        var cellCoordinates = {\n          columnIndex: 0,\n          rowIndex: 0,\n          allDay: this._isVerticalGroupedWorkSpace() && this.isAllDayPanelVisible\n        };\n        this.cellsSelectionState.setFocusedCell(cellCoordinates.rowIndex, cellCoordinates.columnIndex, cellCoordinates.allDay);\n        this.cellsSelectionState.setSelectedCells(cellCoordinates, cellCoordinates);\n      }\n\n      this.updateCellsSelection();\n\n      this._updateSelectedCellDataOption(this.cellsSelectionState.getSelectedCells());\n    }\n  }\n\n  _focusOutHandler() {\n    super._focusOutHandler.apply(this, arguments);\n\n    if (!this._contextMenuHandled && !this._disposed) {\n      this.cellsSelectionState.releaseSelectedAndFocusedCells();\n      this.viewDataProvider.updateViewData(this.generateRenderOptions());\n      this.updateCellsSelection();\n    }\n  }\n\n  _focusTarget() {\n    return this.$element();\n  }\n\n  _isVerticalGroupedWorkSpace() {\n    return !!this.option(\"groups\").length && \"vertical\" === this.option(\"groupOrientation\");\n  }\n\n  _isHorizontalGroupedWorkSpace() {\n    return !!this.option(\"groups\").length && \"horizontal\" === this.option(\"groupOrientation\");\n  }\n\n  _isWorkSpaceWithCount() {\n    return this.option(\"intervalCount\") > 1;\n  }\n\n  _isWorkspaceWithOddCells() {\n    return .5 === this.option(\"hoursInterval\") && !this.isVirtualScrolling();\n  }\n\n  _getRealGroupOrientation() {\n    return this._isVerticalGroupedWorkSpace() ? \"vertical\" : \"horizontal\";\n  }\n\n  createRAllDayPanelElements() {\n    this._$allDayPanel = $(\"<div>\").addClass(ALL_DAY_PANEL_CLASS);\n    this._$allDayTitle = $(\"<div>\").appendTo(this._$headerPanelEmptyCell);\n  }\n\n  _dateTableScrollableConfig() {\n    var config = {\n      useKeyboard: false,\n      bounceEnabled: false,\n      updateManually: true,\n      onScroll: () => {\n        var _this$_groupedStrateg;\n\n        null === (_this$_groupedStrateg = this._groupedStrategy.cache) || void 0 === _this$_groupedStrateg ? void 0 : _this$_groupedStrateg.clear();\n      }\n    };\n\n    if (this._needCreateCrossScrolling()) {\n      config = extend(config, this._createCrossScrollingConfig(config));\n    }\n\n    if (this.isVirtualScrolling() && (this.virtualScrollingDispatcher.horizontalScrollingAllowed || this.virtualScrollingDispatcher.height)) {\n      var currentOnScroll = config.onScroll;\n      config = _extends({}, config, {\n        onScroll: e => {\n          null === currentOnScroll || void 0 === currentOnScroll ? void 0 : currentOnScroll(e);\n          this.virtualScrollingDispatcher.handleOnScrollEvent(null === e || void 0 === e ? void 0 : e.scrollOffset);\n        }\n      });\n    }\n\n    return config;\n  }\n\n  _createCrossScrollingConfig(currentConfig) {\n    var config = {};\n    config.direction = \"both\";\n    var currentOnScroll = currentConfig.onScroll;\n\n    config.onScroll = e => {\n      currentOnScroll();\n\n      this._dataTableSemaphore.take(e.scrollOffset);\n\n      if (this._sideBarSemaphore.isFree(e.scrollOffset)) {\n        var _this$_sidebarScrolla;\n\n        null === (_this$_sidebarScrolla = this._sidebarScrollable) || void 0 === _this$_sidebarScrolla ? void 0 : _this$_sidebarScrolla.scrollTo({\n          top: e.scrollOffset.top\n        });\n      }\n\n      if (this._headerSemaphore.isFree(e.scrollOffset)) {\n        var _this$_headerScrollab;\n\n        null === (_this$_headerScrollab = this._headerScrollable) || void 0 === _this$_headerScrollab ? void 0 : _this$_headerScrollab.scrollTo({\n          left: e.scrollOffset.left\n        });\n      }\n\n      this._dataTableSemaphore.release();\n    };\n\n    config.onEnd = () => {\n      this.option(\"onScrollEnd\")();\n    };\n\n    return config;\n  }\n\n  _headerScrollableConfig() {\n    var config = {\n      useKeyboard: false,\n      showScrollbar: \"never\",\n      direction: \"horizontal\",\n      useNative: false,\n      updateManually: true,\n      bounceEnabled: false,\n      onScroll: e => {\n        this._headerSemaphore.take(e.scrollOffset);\n\n        this._dataTableSemaphore.isFree(e.scrollOffset) && this._dateTableScrollable.scrollTo({\n          left: e.scrollOffset.left\n        });\n\n        this._headerSemaphore.release();\n      }\n    };\n    return config;\n  }\n\n  _visibilityChanged(visible) {\n    this.cache.clear();\n\n    if (visible) {\n      this._updateGroupTableHeight();\n    }\n\n    if (visible && this._needCreateCrossScrolling()) {\n      this._setTableSizes();\n    }\n  }\n\n  _setTableSizes() {\n    this.cache.clear();\n\n    this._attachTableClasses();\n\n    var cellWidth = this.getCellWidth();\n\n    if (cellWidth < this.getCellMinWidth()) {\n      cellWidth = this.getCellMinWidth();\n    }\n\n    var minWidth = this.getWorkSpaceMinWidth();\n\n    var groupCount = this._getGroupCount();\n\n    var totalCellCount = this._getTotalCellCount(groupCount);\n\n    var width = cellWidth * totalCellCount;\n\n    if (width < minWidth) {\n      width = minWidth;\n    }\n\n    setWidth(this._$headerPanel, width);\n    setWidth(this._$dateTable, width);\n\n    if (this._$allDayTable) {\n      setWidth(this._$allDayTable, width);\n    }\n\n    this._attachHeaderTableClasses();\n\n    this._updateGroupTableHeight();\n\n    this._updateScrollable();\n  }\n\n  getWorkSpaceMinWidth() {\n    return this._groupedStrategy.getWorkSpaceMinWidth();\n  }\n\n  _dimensionChanged() {\n    if (!this._isVisible()) {\n      return;\n    }\n\n    if (this.option(\"crossScrollingEnabled\")) {\n      this._setTableSizes();\n    }\n\n    this.updateHeaderEmptyCellWidth();\n\n    this._updateScrollable();\n\n    this.cache.clear();\n  }\n\n  _needCreateCrossScrolling() {\n    return this.option(\"crossScrollingEnabled\");\n  }\n\n  _getElementClass() {\n    return noop();\n  }\n\n  _getRowCount() {\n    return this.viewDataProvider.getRowCount({\n      intervalCount: this.option(\"intervalCount\"),\n      currentDate: this.option(\"currentDate\"),\n      viewType: this.type,\n      hoursInterval: this.option(\"hoursInterval\"),\n      startDayHour: this.option(\"startDayHour\"),\n      endDayHour: this.option(\"endDayHour\")\n    });\n  }\n\n  _getCellCount() {\n    return this.viewDataProvider.getCellCount({\n      intervalCount: this.option(\"intervalCount\"),\n      currentDate: this.option(\"currentDate\"),\n      viewType: this.type,\n      hoursInterval: this.option(\"hoursInterval\"),\n      startDayHour: this.option(\"startDayHour\"),\n      endDayHour: this.option(\"endDayHour\")\n    });\n  }\n\n  isRenovatedRender() {\n    return this.renovatedRenderSupported() && this.option(\"renovateRender\");\n  }\n\n  _isVirtualModeOn() {\n    return \"virtual\" === this.option(\"scrolling.mode\");\n  }\n\n  isVirtualScrolling() {\n    return this.isRenovatedRender() && this._isVirtualModeOn();\n  }\n\n  _initVirtualScrolling() {\n    if (this.virtualScrollingDispatcher) {\n      this.virtualScrollingDispatcher.dispose();\n      this.virtualScrollingDispatcher = null;\n    }\n\n    this.virtualScrollingDispatcher = new VirtualScrollingDispatcher(this._getVirtualScrollingDispatcherOptions());\n    this.virtualScrollingDispatcher.attachScrollableEvents();\n    this.renderer = new VirtualScrollingRenderer(this);\n  }\n\n  onDataSourceChanged() {}\n\n  isGroupedAllDayPanel() {\n    return calculateIsGroupedAllDayPanel(this.option(\"groups\"), this.option(\"groupOrientation\"), this.isAllDayPanelVisible);\n  }\n\n  generateRenderOptions(isProvideVirtualCellsWidth) {\n    var _this$_getToday;\n\n    var groupCount = this._getGroupCount();\n\n    var groupOrientation = groupCount > 0 ? this.option(\"groupOrientation\") : this._getDefaultGroupStrategy();\n\n    var options = _extends({\n      groupByDate: this.option(\"groupByDate\"),\n      startRowIndex: 0,\n      startCellIndex: 0,\n      groupOrientation: groupOrientation,\n      today: null === (_this$_getToday = this._getToday) || void 0 === _this$_getToday ? void 0 : _this$_getToday.call(this),\n      groups: this.option(\"groups\"),\n      isProvideVirtualCellsWidth: isProvideVirtualCellsWidth,\n      isAllDayPanelVisible: this.isAllDayPanelVisible,\n      selectedCells: this.cellsSelectionState.getSelectedCells(),\n      focusedCell: this.cellsSelectionState.focusedCell,\n      headerCellTextFormat: this._getFormat(),\n      getDateForHeaderText: (_, date) => date,\n      startDayHour: this.option(\"startDayHour\"),\n      endDayHour: this.option(\"endDayHour\"),\n      cellDuration: this.getCellDuration(),\n      viewType: this.type,\n      intervalCount: this.option(\"intervalCount\"),\n      hoursInterval: this.option(\"hoursInterval\"),\n      currentDate: this.option(\"currentDate\"),\n      startDate: this.option(\"startDate\"),\n      firstDayOfWeek: this.option(\"firstDayOfWeek\")\n    }, this.virtualScrollingDispatcher.getRenderState());\n\n    return options;\n  }\n\n  renovatedRenderSupported() {\n    return true;\n  }\n\n  _updateGroupTableHeight() {\n    if (this._isVerticalGroupedWorkSpace() && hasWindow()) {\n      this._setHorizontalGroupHeaderCellsHeight();\n    }\n  }\n\n  updateHeaderEmptyCellWidth() {\n    if (hasWindow() && this._isRenderHeaderPanelEmptyCell()) {\n      var timePanelWidth = this.getTimePanelWidth();\n      var groupPanelWidth = this.getGroupTableWidth();\n\n      this._$headerPanelEmptyCell.css(\"width\", timePanelWidth + groupPanelWidth);\n    }\n  }\n\n  _isGroupsSpecified(resources) {\n    return this.option(\"groups\").length && resources;\n  }\n\n  _getGroupIndexByResourceId(id) {\n    var groups = this.option(\"groups\");\n    var resourceTree = createResourcesTree(groups);\n\n    if (!resourceTree.length) {\n      return 0;\n    }\n\n    return this._getGroupIndexRecursively(resourceTree, id);\n  }\n\n  _getGroupIndexRecursively(resourceTree, id) {\n    var currentKey = resourceTree[0].name;\n    var currentValue = id[currentKey];\n    return resourceTree.reduce((prevIndex, _ref) => {\n      var {\n        leafIndex: leafIndex,\n        value: value,\n        children: children\n      } = _ref;\n      var areValuesEqual = currentValue === value;\n\n      if (areValuesEqual && void 0 !== leafIndex) {\n        return leafIndex;\n      }\n\n      if (areValuesEqual) {\n        return this._getGroupIndexRecursively(children, id);\n      }\n\n      return prevIndex;\n    }, 0);\n  }\n\n  _getViewStartByOptions() {\n    return getViewStartByOptions(this.option(\"startDate\"), this.option(\"currentDate\"), this._getIntervalDuration(), this.option(\"startDate\") ? this._calculateViewStartDate() : void 0);\n  }\n\n  _getIntervalDuration() {\n    return this.viewDataProvider.getIntervalDuration(this.option(\"intervalCount\"));\n  }\n\n  _getHeaderDate() {\n    return this.getStartViewDate();\n  }\n\n  _calculateViewStartDate() {\n    return calculateViewStartDate(this.option(\"startDate\"));\n  }\n\n  _firstDayOfWeek() {\n    return this.viewDataProvider.getFirstDayOfWeek(this.option(\"firstDayOfWeek\"));\n  }\n\n  _attachEvents() {\n    this._createSelectionChangedAction();\n\n    this._attachClickEvent();\n\n    this._attachContextMenuEvent();\n  }\n\n  _attachClickEvent() {\n    var that = this;\n\n    var pointerDownAction = this._createAction(function (e) {\n      that._pointerDownHandler(e.event);\n    });\n\n    this._createCellClickAction();\n\n    var cellSelector = \".\" + DATE_TABLE_CELL_CLASS + \",.\" + ALL_DAY_TABLE_CELL_CLASS;\n    var $element = this.$element();\n    eventsEngine.off($element, SCHEDULER_WORKSPACE_DXPOINTERDOWN_EVENT_NAME);\n    eventsEngine.off($element, SCHEDULER_CELL_DXCLICK_EVENT_NAME);\n    eventsEngine.on($element, SCHEDULER_WORKSPACE_DXPOINTERDOWN_EVENT_NAME, function (e) {\n      if (isMouseEvent(e) && e.which > 1) {\n        e.preventDefault();\n        return;\n      }\n\n      pointerDownAction({\n        event: e\n      });\n    });\n    eventsEngine.on($element, SCHEDULER_CELL_DXCLICK_EVENT_NAME, cellSelector, function (e) {\n      var $cell = $(e.target);\n\n      that._cellClickAction({\n        event: e,\n        cellElement: getPublicElement($cell),\n        cellData: that.getCellData($cell)\n      });\n    });\n  }\n\n  _createCellClickAction() {\n    this._cellClickAction = this._createActionByOption(\"onCellClick\", {\n      afterExecute: e => this._cellClickHandler(e.args[0].event)\n    });\n  }\n\n  _createSelectionChangedAction() {\n    this._selectionChangedAction = this._createActionByOption(\"onSelectionChanged\");\n  }\n\n  _cellClickHandler() {\n    if (this._showPopup) {\n      delete this._showPopup;\n\n      this._handleSelectedCellsClick();\n    }\n  }\n\n  _pointerDownHandler(e) {\n    var $target = $(e.target);\n\n    if (!$target.hasClass(DATE_TABLE_CELL_CLASS) && !$target.hasClass(ALL_DAY_TABLE_CELL_CLASS)) {\n      this._isCellClick = false;\n      return;\n    }\n\n    this._isCellClick = true;\n\n    if ($target.hasClass(DATE_TABLE_FOCUSED_CELL_CLASS)) {\n      this._showPopup = true;\n    } else {\n      var cellCoordinates = this._getCoordinatesByCell($target);\n\n      var isAllDayCell = this._hasAllDayClass($target);\n\n      this._setSelectedCellsStateAndUpdateSelection(isAllDayCell, cellCoordinates, false, $target);\n    }\n  }\n\n  _handleSelectedCellsClick() {\n    var selectedCells = this.cellsSelectionState.getSelectedCells();\n    var firstCellData = selectedCells[0];\n    var lastCellData = selectedCells[selectedCells.length - 1];\n    var result = {\n      startDate: firstCellData.startDate,\n      endDate: lastCellData.endDate\n    };\n\n    if (void 0 !== lastCellData.allDay) {\n      result.allDay = lastCellData.allDay;\n    }\n\n    this.option(\"onSelectedCellsClick\")(result, lastCellData.groups);\n  }\n\n  _attachContextMenuEvent() {\n    this._createContextMenuAction();\n\n    var cellSelector = \".\" + DATE_TABLE_CELL_CLASS + \",.\" + ALL_DAY_TABLE_CELL_CLASS;\n    var $element = this.$element();\n    var eventName = addNamespace(contextMenuEventName, this.NAME);\n    eventsEngine.off($element, eventName, cellSelector);\n    eventsEngine.on($element, eventName, cellSelector, this._contextMenuHandler.bind(this));\n  }\n\n  _contextMenuHandler(e) {\n    var $cell = $(e.target);\n\n    this._contextMenuAction({\n      event: e,\n      cellElement: getPublicElement($cell),\n      cellData: this.getCellData($cell)\n    });\n\n    this._contextMenuHandled = true;\n  }\n\n  _createContextMenuAction() {\n    this._contextMenuAction = this._createActionByOption(\"onCellContextMenu\");\n  }\n\n  _getGroupHeaderContainer() {\n    if (this._isVerticalGroupedWorkSpace()) {\n      return this._$groupTable;\n    }\n\n    return this._$thead;\n  }\n\n  _getDateHeaderContainer() {\n    return this._$thead;\n  }\n\n  _getCalculateHeaderCellRepeatCount() {\n    return this._groupedStrategy.calculateHeaderCellRepeatCount();\n  }\n\n  _updateScrollable() {\n    var _this$_headerScrollab2, _this$_sidebarScrolla2;\n\n    this._dateTableScrollable.update();\n\n    null === (_this$_headerScrollab2 = this._headerScrollable) || void 0 === _this$_headerScrollab2 ? void 0 : _this$_headerScrollab2.update();\n    null === (_this$_sidebarScrolla2 = this._sidebarScrollable) || void 0 === _this$_sidebarScrolla2 ? void 0 : _this$_sidebarScrolla2.update();\n  }\n\n  _getTimePanelRowCount() {\n    return this._getCellCountInDay();\n  }\n\n  _getCellCountInDay() {\n    var hoursInterval = this.option(\"hoursInterval\");\n    var startDayHour = this.option(\"startDayHour\");\n    var endDayHour = this.option(\"endDayHour\");\n    return this.viewDataProvider.getCellCountInDay(startDayHour, endDayHour, hoursInterval);\n  }\n\n  _getTotalCellCount(groupCount) {\n    return this._groupedStrategy.getTotalCellCount(groupCount);\n  }\n\n  _getTotalRowCount(groupCount, includeAllDayPanelRows) {\n    var result = this._groupedStrategy.getTotalRowCount(groupCount);\n\n    if (includeAllDayPanelRows && this.isAllDayPanelVisible) {\n      result += groupCount;\n    }\n\n    return result;\n  }\n\n  _getGroupIndex(rowIndex, columnIndex) {\n    return this._groupedStrategy.getGroupIndex(rowIndex, columnIndex);\n  }\n\n  calculateEndDate(startDate) {\n    var viewDataGenerator = this.viewDataProvider.viewDataGenerator;\n    return viewDataGenerator.calculateEndDate(startDate, viewDataGenerator.getInterval(this.option(\"hoursInterval\")), this.option(\"endDayHour\"));\n  }\n\n  _getGroupCount() {\n    return getGroupCount(this.option(\"groups\"));\n  }\n\n  _attachTablesEvents() {\n    var element = this.$element();\n\n    this._attachDragEvents(element);\n\n    this._attachPointerEvents(element);\n  }\n\n  _detachDragEvents(element) {\n    eventsEngine.off(element, DragEventNames.ENTER);\n    eventsEngine.off(element, DragEventNames.LEAVE);\n    eventsEngine.off(element, DragEventNames.DROP);\n  }\n\n  _attachDragEvents(element) {\n    this._detachDragEvents(element);\n\n    eventsEngine.on(element, DragEventNames.ENTER, DRAG_AND_DROP_SELECTOR, {\n      checkDropTarget: (target, event) => !this._isOutsideScrollable(target, event)\n    }, e => {\n      if (!this.preventDefaultDragging) {\n        this.removeDroppableCellClass();\n        $(e.target).addClass(DATE_TABLE_DROPPABLE_CELL_CLASS);\n      }\n    });\n    eventsEngine.on(element, DragEventNames.LEAVE, () => {\n      if (!this.preventDefaultDragging) {\n        this.removeDroppableCellClass();\n      }\n    });\n    eventsEngine.on(element, DragEventNames.DROP, DRAG_AND_DROP_SELECTOR, () => {\n      var _this$dragBehavior, _this$dragBehavior$dr;\n\n      if (!this.dragBehavior) {\n        return;\n      }\n\n      if (!(null !== (_this$dragBehavior = this.dragBehavior) && void 0 !== _this$dragBehavior && _this$dragBehavior.dragBetweenComponentsPromise)) {\n        this.dragBehavior.removeDroppableClasses();\n        return;\n      }\n\n      null === (_this$dragBehavior$dr = this.dragBehavior.dragBetweenComponentsPromise) || void 0 === _this$dragBehavior$dr ? void 0 : _this$dragBehavior$dr.then(() => {\n        this.dragBehavior.removeDroppableClasses();\n      });\n    });\n  }\n\n  _attachPointerEvents(element) {\n    var isPointerDown = false;\n    eventsEngine.off(element, SCHEDULER_CELL_DXPOINTERMOVE_EVENT_NAME);\n    eventsEngine.off(element, SCHEDULER_CELL_DXPOINTERDOWN_EVENT_NAME);\n    eventsEngine.on(element, SCHEDULER_CELL_DXPOINTERDOWN_EVENT_NAME, DRAG_AND_DROP_SELECTOR, e => {\n      if (isMouseEvent(e) && 1 === e.which) {\n        isPointerDown = true;\n        this.$element().addClass(WORKSPACE_WITH_MOUSE_SELECTION_CLASS);\n        eventsEngine.off(domAdapter.getDocument(), SCHEDULER_CELL_DXPOINTERUP_EVENT_NAME);\n        eventsEngine.on(domAdapter.getDocument(), SCHEDULER_CELL_DXPOINTERUP_EVENT_NAME, () => {\n          isPointerDown = false;\n          this.$element().removeClass(WORKSPACE_WITH_MOUSE_SELECTION_CLASS);\n        });\n      }\n    });\n    eventsEngine.on(element, SCHEDULER_CELL_DXPOINTERMOVE_EVENT_NAME, DRAG_AND_DROP_SELECTOR, e => {\n      if (isPointerDown && this._dateTableScrollable && !this._dateTableScrollable.option(\"scrollByContent\")) {\n        e.preventDefault();\n        e.stopPropagation();\n\n        this._moveToCell($(e.target), true);\n      }\n    });\n  }\n\n  _getFormat() {\n    return abstract();\n  }\n\n  getWorkArea() {\n    return this._$dateTableContainer;\n  }\n\n  getScrollable() {\n    return this._dateTableScrollable;\n  }\n\n  getScrollableScrollTop() {\n    return this._dateTableScrollable.scrollTop();\n  }\n\n  getGroupedScrollableScrollTop(allDay) {\n    return this._groupedStrategy.getScrollableScrollTop(allDay);\n  }\n\n  getScrollableScrollLeft() {\n    return this._dateTableScrollable.scrollLeft();\n  }\n\n  getScrollableOuterWidth() {\n    return this._dateTableScrollable.scrollWidth();\n  }\n\n  getScrollableContainer() {\n    return $(this._dateTableScrollable.container());\n  }\n\n  getHeaderPanelHeight() {\n    return this._$headerPanel && getOuterHeight(this._$headerPanel, true);\n  }\n\n  getTimePanelWidth() {\n    return this._$timePanel && getBoundingRect(this._$timePanel.get(0)).width;\n  }\n\n  getGroupTableWidth() {\n    return this._$groupTable ? getOuterWidth(this._$groupTable) : 0;\n  }\n\n  getWorkSpaceLeftOffset() {\n    return this._groupedStrategy.getLeftOffset();\n  }\n\n  _getCellCoordinatesByIndex(index) {\n    var columnIndex = Math.floor(index / this._getRowCount());\n    var rowIndex = index - this._getRowCount() * columnIndex;\n    return {\n      columnIndex: columnIndex,\n      rowIndex: rowIndex\n    };\n  }\n\n  _getDateGenerationOptions() {\n    var _this$viewDataProvide;\n\n    return {\n      startDayHour: this.option(\"startDayHour\"),\n      endDayHour: this.option(\"endDayHour\"),\n      isWorkView: this.viewDataProvider.viewDataGenerator.isWorkView,\n      interval: null === (_this$viewDataProvide = this.viewDataProvider.viewDataGenerator) || void 0 === _this$viewDataProvide ? void 0 : _this$viewDataProvide.getInterval(this.option(\"hoursInterval\")),\n      startViewDate: this.getStartViewDate(),\n      firstDayOfWeek: this._firstDayOfWeek()\n    };\n  }\n\n  _getIntervalBetween(currentDate, allDay) {\n    var firstViewDate = this.getStartViewDate();\n    var startDayTime = this.option(\"startDayHour\") * HOUR_MS;\n    var timeZoneOffset = dateUtils.getTimezonesDifference(firstViewDate, currentDate);\n    var fullInterval = currentDate.getTime() - firstViewDate.getTime() - timeZoneOffset;\n\n    var days = this._getDaysOfInterval(fullInterval, startDayTime);\n\n    var weekendsCount = this._getWeekendsCount(days);\n\n    var result = (days - weekendsCount) * DAY_MS;\n\n    if (!allDay) {\n      var hiddenInterval = this.viewDataProvider.hiddenInterval;\n      var visibleDayDuration = this.getVisibleDayDuration();\n      result = fullInterval - days * hiddenInterval - weekendsCount * visibleDayDuration;\n    }\n\n    return result;\n  }\n\n  _getWeekendsCount() {\n    return 0;\n  }\n\n  _getDaysOfInterval(fullInterval, startDayTime) {\n    return Math.floor((fullInterval + startDayTime) / DAY_MS);\n  }\n\n  _updateIndex(index) {\n    return index * this._getRowCount();\n  }\n\n  _getDroppableCell() {\n    return this._getDateTables().find(\".\" + DATE_TABLE_DROPPABLE_CELL_CLASS);\n  }\n\n  _getWorkSpaceWidth() {\n    return this.cache.get(\"workspaceWidth\", () => {\n      if (this._needCreateCrossScrolling()) {\n        return getBoundingRect(this._$dateTable.get(0)).width;\n      }\n\n      var totalWidth = getBoundingRect(this.$element().get(0)).width;\n      var timePanelWidth = this.getTimePanelWidth();\n      var groupTableWidth = this.getGroupTableWidth();\n      return totalWidth - timePanelWidth - groupTableWidth;\n    });\n  }\n\n  _getCellByCoordinates(cellCoordinates, groupIndex, inAllDayRow) {\n    var indexes = this._groupedStrategy.prepareCellIndexes(cellCoordinates, groupIndex, inAllDayRow);\n\n    return this._dom_getDateCell(indexes);\n  }\n\n  _dom_getDateCell(position) {\n    return this._$dateTable.find(\"tr:not(.\".concat(VIRTUAL_ROW_CLASS, \")\")).eq(position.rowIndex).find(\"td:not(.\".concat(VIRTUAL_CELL_CLASS, \")\")).eq(position.columnIndex);\n  }\n\n  _dom_getAllDayPanelCell(columnIndex) {\n    return this._$allDayPanel.find(\"tr\").eq(0).find(\"td\").eq(columnIndex);\n  }\n\n  _getCells(allDay, direction) {\n    var cellClass = allDay ? ALL_DAY_TABLE_CELL_CLASS : DATE_TABLE_CELL_CLASS;\n\n    if (\"vertical\" === direction) {\n      var result = [];\n\n      for (var i = 1;; i++) {\n        var cells = this.$element().find(\"tr .\".concat(cellClass, \":nth-child(\").concat(i, \")\"));\n\n        if (!cells.length) {\n          break;\n        }\n\n        result = result.concat(cells.toArray());\n      }\n\n      return $(result);\n    } else {\n      return this.$element().find(\".\" + cellClass);\n    }\n  }\n\n  _getFirstAndLastDataTableCell() {\n    var selector = this.isVirtualScrolling() ? \".\".concat(DATE_TABLE_CELL_CLASS, \", .\").concat(VIRTUAL_CELL_CLASS) : \".\".concat(DATE_TABLE_CELL_CLASS);\n    var $cells = this.$element().find(selector);\n    return [$cells[0], $cells[$cells.length - 1]];\n  }\n\n  _getAllCells(allDay) {\n    if (this._isVerticalGroupedWorkSpace()) {\n      return this._$dateTable.find(\"td:not(.\".concat(VIRTUAL_CELL_CLASS, \")\"));\n    }\n\n    var cellClass = allDay && this.supportAllDayRow() ? ALL_DAY_TABLE_CELL_CLASS : DATE_TABLE_CELL_CLASS;\n    return this.$element().find(\".\".concat(cellClass));\n  }\n\n  _setHorizontalGroupHeaderCellsHeight() {\n    var height = getBoundingRect(this._$dateTable.get(0)).height;\n    setOuterHeight(this._$groupTable, height);\n  }\n\n  _getGroupHeaderCells() {\n    return this.$element().find(\".\" + GROUP_HEADER_CLASS);\n  }\n\n  _getScrollCoordinates(hours, minutes, date, groupIndex, allDay) {\n    var currentDate = date || new Date(this.option(\"currentDate\"));\n    var startDayHour = this.option(\"startDayHour\");\n    var endDayHour = this.option(\"endDayHour\");\n\n    if (hours < startDayHour) {\n      hours = startDayHour;\n    }\n\n    if (hours >= endDayHour) {\n      hours = endDayHour - 1;\n    }\n\n    currentDate.setHours(hours, minutes, 0, 0);\n    var cell = this.viewDataProvider.findGlobalCellPosition(currentDate, groupIndex, allDay);\n    var {\n      position: position,\n      cellData: cellData\n    } = cell;\n    return this.virtualScrollingDispatcher.calculateCoordinatesByDataAndPosition(cellData, position, currentDate, isDateAndTimeView(this.type), \"vertical\" === this.viewDirection);\n  }\n\n  _isOutsideScrollable(target, event) {\n    var $dateTableScrollableElement = this._dateTableScrollable.$element();\n\n    var scrollableSize = getBoundingRect($dateTableScrollableElement.get(0));\n    var window = getWindow();\n    var isTargetInAllDayPanel = !$(target).closest($dateTableScrollableElement).length;\n    var isOutsideHorizontalScrollable = event.pageX < scrollableSize.left || event.pageX > scrollableSize.left + scrollableSize.width + (window.scrollX || 0);\n    var isOutsideVerticalScrollable = event.pageY < scrollableSize.top || event.pageY > scrollableSize.top + scrollableSize.height + (window.scrollY || 0);\n\n    if (isTargetInAllDayPanel && !isOutsideHorizontalScrollable) {\n      return false;\n    }\n\n    return isOutsideVerticalScrollable || isOutsideHorizontalScrollable;\n  }\n\n  setCellDataCache(cellCoordinates, groupIndex, $cell) {\n    var key = JSON.stringify({\n      rowIndex: cellCoordinates.rowIndex,\n      columnIndex: cellCoordinates.columnIndex,\n      groupIndex: groupIndex\n    });\n    this.cache.set(key, this.getCellData($cell));\n  }\n\n  setCellDataCacheAlias(appointment, geometry) {\n    var key = JSON.stringify({\n      rowIndex: appointment.rowIndex,\n      columnIndex: appointment.columnIndex,\n      groupIndex: appointment.groupIndex\n    });\n    var aliasKey = JSON.stringify({\n      top: geometry.top,\n      left: geometry.left\n    });\n    this.cache.set(aliasKey, this.cache.get(key));\n  }\n\n  supportAllDayRow() {\n    return true;\n  }\n\n  keepOriginalHours() {\n    return false;\n  }\n\n  _filterCellDataFields(cellData) {\n    return extend(true, {}, {\n      startDate: cellData.startDate,\n      endDate: cellData.endDate,\n      groups: cellData.groups,\n      groupIndex: cellData.groupIndex,\n      allDay: cellData.allDay\n    });\n  }\n\n  getCellData($cell) {\n    var cellData = this._getFullCellData($cell) || {};\n    return this._filterCellDataFields(cellData);\n  }\n\n  _getFullCellData($cell) {\n    var currentCell = $cell[0];\n\n    if (currentCell) {\n      return this._getDataByCell($cell);\n    }\n\n    return;\n  }\n\n  _getVirtualRowOffset() {\n    return this.virtualScrollingDispatcher.virtualRowOffset;\n  }\n\n  _getVirtualCellOffset() {\n    return this.virtualScrollingDispatcher.virtualCellOffset;\n  }\n\n  _getDataByCell($cell) {\n    var rowIndex = $cell.parent().index() - this.virtualScrollingDispatcher.topVirtualRowsCount;\n    var columnIndex = $cell.index() - this.virtualScrollingDispatcher.leftVirtualCellsCount;\n    var {\n      viewDataProvider: viewDataProvider\n    } = this;\n\n    var isAllDayCell = this._hasAllDayClass($cell);\n\n    var cellData = viewDataProvider.getCellData(rowIndex, columnIndex, isAllDayCell);\n    return cellData ? cellData : void 0;\n  }\n\n  isGroupedByDate() {\n    return this.option(\"groupByDate\") && this._isHorizontalGroupedWorkSpace() && this._getGroupCount() > 0;\n  }\n\n  getCellIndexByDate(date, inAllDayRow) {\n    var viewDataGenerator = this.viewDataProvider.viewDataGenerator;\n    var timeInterval = inAllDayRow ? 864e5 : viewDataGenerator.getInterval(this.option(\"hoursInterval\"));\n    var startViewDateOffset = getStartViewDateTimeOffset(this.getStartViewDate(), this.option(\"startDayHour\"));\n    var dateTimeStamp = this._getIntervalBetween(date, inAllDayRow) + startViewDateOffset;\n    var index = Math.floor(dateTimeStamp / timeInterval);\n\n    if (inAllDayRow) {\n      index = this._updateIndex(index);\n    }\n\n    if (index < 0) {\n      index = 0;\n    }\n\n    return index;\n  }\n\n  getDroppableCellIndex() {\n    var $droppableCell = this._getDroppableCell();\n\n    var $row = $droppableCell.parent();\n    var rowIndex = $row.index();\n    return rowIndex * $row.find(\"td\").length + $droppableCell.index();\n  }\n\n  getDataByDroppableCell() {\n    var cellData = this.getCellData($(this._getDroppableCell()));\n    var allDay = cellData.allDay;\n    var startDate = cellData.startDate;\n    var endDate = cellData.endDate;\n    return {\n      startDate: startDate,\n      endDate: endDate,\n      allDay: allDay,\n      groups: cellData.groups\n    };\n  }\n\n  getDateRange() {\n    return [this.getStartViewDate(), this.getEndViewDateByEndDayHour()];\n  }\n\n  getCellMinWidth() {\n    return DATE_TABLE_MIN_CELL_WIDTH;\n  }\n\n  getRoundedCellWidth(groupIndex, startIndex, cellCount) {\n    if (groupIndex < 0 || !hasWindow()) {\n      return 0;\n    }\n\n    var $row = this.$element().find(\".\".concat(DATE_TABLE_ROW_CLASS)).eq(0);\n    var width = 0;\n    var $cells = $row.find(\".\" + DATE_TABLE_CELL_CLASS);\n    var totalCellCount = this._getCellCount() * groupIndex;\n    cellCount = cellCount || this._getCellCount();\n\n    if (!isDefined(startIndex)) {\n      startIndex = totalCellCount;\n    }\n\n    for (var i = startIndex; i < totalCellCount + cellCount; i++) {\n      var element = $($cells).eq(i).get(0);\n      var elementWidth = element ? getBoundingRect(element).width : 0;\n      width += elementWidth;\n    }\n\n    return width / (totalCellCount + cellCount - startIndex);\n  }\n\n  getCellWidth() {\n    return getCellWidth(this.getDOMElementsMetaData());\n  }\n\n  getCellHeight() {\n    return getCellHeight(this.getDOMElementsMetaData());\n  }\n\n  getAllDayHeight() {\n    return getAllDayHeight(this.option(\"showAllDayPanel\"), this._isVerticalGroupedWorkSpace(), this.getDOMElementsMetaData());\n  }\n\n  getMaxAllowedPosition(groupIndex) {\n    return getMaxAllowedPosition(groupIndex, this.viewDataProvider, this.option(\"rtlEnabled\"), this.getDOMElementsMetaData());\n  }\n\n  getAllDayOffset() {\n    return this._groupedStrategy.getAllDayOffset();\n  }\n\n  getCellIndexByCoordinates(coordinates, allDay) {\n    var cellCount = this._getTotalCellCount(this._getGroupCount());\n\n    var cellWidth = this.getCellWidth();\n    var cellHeight = allDay ? this.getAllDayHeight() : this.getCellHeight();\n    var topIndex = Math.floor(Math.floor(coordinates.top) / Math.floor(cellHeight));\n    var leftIndex = coordinates.left / cellWidth;\n    leftIndex = Math.floor(leftIndex + CELL_INDEX_CALCULATION_EPSILON);\n\n    if (this._isRTL()) {\n      leftIndex = cellCount - leftIndex - 1;\n    }\n\n    return cellCount * topIndex + leftIndex;\n  }\n\n  getStartViewDate() {\n    return this.viewDataProvider.getStartViewDate();\n  }\n\n  getEndViewDate() {\n    return this.viewDataProvider.getLastCellEndDate();\n  }\n\n  getEndViewDateByEndDayHour() {\n    return this.viewDataProvider.getLastViewDateByEndDayHour(this.option(\"endDayHour\"));\n  }\n\n  getCellDuration() {\n    return getCellDuration(this.type, this.option(\"startDayHour\"), this.option(\"endDayHour\"), this.option(\"hoursInterval\"));\n  }\n\n  getIntervalDuration(allDay) {\n    return allDay ? toMs(\"day\") : this.getCellDuration();\n  }\n\n  getVisibleDayDuration() {\n    var startDayHour = this.option(\"startDayHour\");\n    var endDayHour = this.option(\"endDayHour\");\n    var hoursInterval = this.option(\"hoursInterval\");\n    return this.viewDataProvider.getVisibleDayDuration(startDayHour, endDayHour, hoursInterval);\n  }\n\n  getGroupBounds(coordinates) {\n    var groupBounds = this._groupedStrategy instanceof VerticalGroupedStrategy ? this.getGroupBoundsVertical(coordinates.groupIndex) : this.getGroupBoundsHorizontal(coordinates);\n    return this._isRTL() ? this.getGroupBoundsRtlCorrection(groupBounds) : groupBounds;\n  }\n\n  getGroupBoundsVertical(groupIndex) {\n    var $firstAndLastCells = this._getFirstAndLastDataTableCell();\n\n    return this._groupedStrategy.getGroupBoundsOffset(groupIndex, $firstAndLastCells);\n  }\n\n  getGroupBoundsHorizontal(coordinates) {\n    var cellCount = this._getCellCount();\n\n    var $cells = this._getCells();\n\n    var cellWidth = this.getCellWidth();\n    var groupedDataMap = this.viewDataProvider.groupedDataMap;\n    return this._groupedStrategy.getGroupBoundsOffset(cellCount, $cells, cellWidth, coordinates, groupedDataMap);\n  }\n\n  getGroupBoundsRtlCorrection(groupBounds) {\n    var cellWidth = this.getCellWidth();\n    return _extends({}, groupBounds, {\n      left: groupBounds.right - 2 * cellWidth,\n      right: groupBounds.left + 2 * cellWidth\n    });\n  }\n\n  needRecalculateResizableArea() {\n    return this._isVerticalGroupedWorkSpace() && 0 !== this.getScrollable().scrollTop();\n  }\n\n  getCellDataByCoordinates(coordinates, allDay) {\n    var key = JSON.stringify({\n      top: coordinates.top,\n      left: coordinates.left\n    });\n    return this.cache.get(key, () => {\n      var $cells = this._getCells(allDay);\n\n      var cellIndex = this.getCellIndexByCoordinates(coordinates, allDay);\n      var $cell = $cells.eq(cellIndex);\n      return this.getCellData($cell);\n    });\n  }\n\n  getVisibleBounds() {\n    var result = {};\n    var $scrollable = this.getScrollable().$element();\n    var cellHeight = this.getCellHeight();\n    var scrolledCellCount = this.getScrollableScrollTop() / cellHeight;\n    var totalCellCount = scrolledCellCount + getHeight($scrollable) / cellHeight;\n    result.top = {\n      hours: Math.floor(scrolledCellCount * this.option(\"hoursInterval\")) + this.option(\"startDayHour\"),\n      minutes: scrolledCellCount % 2 ? 30 : 0\n    };\n    result.bottom = {\n      hours: Math.floor(totalCellCount * this.option(\"hoursInterval\")) + this.option(\"startDayHour\"),\n      minutes: Math.floor(totalCellCount) % 2 ? 30 : 0\n    };\n    return result;\n  }\n\n  updateScrollPosition(date, groups) {\n    var allDay = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : false;\n    var newDate = this.timeZoneCalculator.createDate(date, {\n      path: \"toGrid\"\n    });\n    var inAllDayRow = allDay && this.isAllDayPanelVisible;\n\n    if (this.needUpdateScrollPosition(newDate, groups, inAllDayRow)) {\n      this.scrollTo(newDate, groups, inAllDayRow, false);\n    }\n  }\n\n  needUpdateScrollPosition(date, groups, inAllDayRow) {\n    var cells = this._getCellsInViewport(inAllDayRow);\n\n    var groupIndex = this._isGroupsSpecified(groups) ? this._getGroupIndexByResourceId(groups) : 0;\n    var time = date.getTime();\n    var trimmedTime = dateUtils.trimTime(date).getTime();\n    return cells.reduce((currentResult, cell) => {\n      var {\n        startDate: cellStartDate,\n        endDate: cellEndDate,\n        groupIndex: cellGroupIndex\n      } = this.getCellData(cell);\n      var cellStartTime = cellStartDate.getTime();\n      var cellEndTime = cellEndDate.getTime();\n\n      if ((!inAllDayRow && cellStartTime <= time && time < cellEndTime || inAllDayRow && trimmedTime === cellStartTime) && groupIndex === cellGroupIndex) {\n        return false;\n      }\n\n      return currentResult;\n    }, true);\n  }\n\n  _getCellsInViewport(inAllDayRow) {\n    var $scrollable = this.getScrollable().$element();\n    var cellHeight = this.getCellHeight();\n    var cellWidth = this.getCellWidth();\n\n    var totalColumnCount = this._getTotalCellCount(this._getGroupCount());\n\n    var scrollableScrollTop = this.getScrollableScrollTop();\n    var scrollableScrollLeft = this.getScrollableScrollLeft();\n    var fullScrolledRowCount = scrollableScrollTop / cellHeight - this.virtualScrollingDispatcher.topVirtualRowsCount;\n    var scrolledRowCount = Math.floor(fullScrolledRowCount);\n\n    if (scrollableScrollTop % cellHeight !== 0) {\n      scrolledRowCount += 1;\n    }\n\n    var fullScrolledColumnCount = scrollableScrollLeft / cellWidth;\n    var scrolledColumnCount = Math.floor(fullScrolledColumnCount);\n\n    if (scrollableScrollLeft % cellWidth !== 0) {\n      scrolledColumnCount += 1;\n    }\n\n    var rowCount = Math.floor(fullScrolledRowCount + getHeight($scrollable) / cellHeight);\n    var columnCount = Math.floor(fullScrolledColumnCount + getWidth($scrollable) / cellWidth);\n\n    var $cells = this._getAllCells(inAllDayRow);\n\n    var result = [];\n    $cells.each(function (index) {\n      var $cell = $(this);\n      var columnIndex = index % totalColumnCount;\n      var rowIndex = index / totalColumnCount;\n\n      if (scrolledColumnCount <= columnIndex && columnIndex < columnCount && scrolledRowCount <= rowIndex && rowIndex < rowCount) {\n        result.push($cell);\n      }\n    });\n    return result;\n  }\n\n  scrollToTime(hours, minutes, date) {\n    if (!this._isValidScrollDate(date)) {\n      return;\n    }\n\n    var coordinates = this._getScrollCoordinates(hours, minutes, date);\n\n    var scrollable = this.getScrollable();\n    scrollable.scrollBy({\n      top: coordinates.top - scrollable.scrollTop(),\n      left: 0\n    });\n  }\n\n  scrollTo(date, groups) {\n    var allDay = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : false;\n    var throwWarning = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : true;\n\n    if (!this._isValidScrollDate(date, throwWarning)) {\n      return;\n    }\n\n    var groupIndex = this._getGroupCount() && groups ? this._getGroupIndexByResourceId(groups) : 0;\n    var isScrollToAllDay = allDay && this.isAllDayPanelVisible;\n\n    var coordinates = this._getScrollCoordinates(date.getHours(), date.getMinutes(), date, groupIndex, isScrollToAllDay);\n\n    var scrollable = this.getScrollable();\n    var $scrollable = scrollable.$element();\n    var cellWidth = this.getCellWidth();\n    var offset = this.option(\"rtlEnabled\") ? cellWidth : 0;\n    var scrollableHeight = getHeight($scrollable);\n    var scrollableWidth = getWidth($scrollable);\n    var cellHeight = this.getCellHeight();\n    var xShift = (scrollableWidth - cellWidth) / 2;\n    var yShift = (scrollableHeight - cellHeight) / 2;\n    var left = coordinates.left - scrollable.scrollLeft() - xShift - offset;\n    var top = coordinates.top - scrollable.scrollTop() - yShift;\n\n    if (isScrollToAllDay && !this._isVerticalGroupedWorkSpace()) {\n      top = 0;\n    }\n\n    if (this.option(\"templatesRenderAsynchronously\")) {\n      setTimeout(() => {\n        scrollable.scrollBy({\n          left: left,\n          top: top\n        });\n      });\n    } else {\n      scrollable.scrollBy({\n        left: left,\n        top: top\n      });\n    }\n  }\n\n  _isValidScrollDate(date) {\n    var throwWarning = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : true;\n    var min = this.getStartViewDate();\n    var max = this.getEndViewDate();\n\n    if (date < min || date > max) {\n      throwWarning && errors.log(\"W1008\", date);\n      return false;\n    }\n\n    return true;\n  }\n\n  needApplyCollectorOffset() {\n    return false;\n  }\n\n  removeDroppableCellClass($cellElement) {\n    var $cell = $cellElement || this._getDroppableCell();\n\n    null === $cell || void 0 === $cell ? void 0 : $cell.removeClass(DATE_TABLE_DROPPABLE_CELL_CLASS);\n  }\n\n  _getCoordinatesByCell($cell) {\n    var columnIndex = $cell.index() - this.virtualScrollingDispatcher.leftVirtualCellsCount;\n    var rowIndex = $cell.parent().index();\n\n    var isAllDayCell = this._hasAllDayClass($cell);\n\n    var isVerticalGrouping = this._isVerticalGroupedWorkSpace();\n\n    if (!(isAllDayCell && !isVerticalGrouping)) {\n      rowIndex -= this.virtualScrollingDispatcher.topVirtualRowsCount;\n    }\n\n    return {\n      rowIndex: rowIndex,\n      columnIndex: columnIndex\n    };\n  }\n\n  _isShowAllDayPanel() {\n    return this.option(\"showAllDayPanel\");\n  }\n\n  _getTimePanelCells() {\n    return this.$element().find(\".\".concat(TIME_PANEL_CELL_CLASS));\n  }\n\n  _getRDateTableProps() {\n    return {\n      viewData: this.viewDataProvider.viewData,\n      dataCellTemplate: this.option(\"dataCellTemplate\"),\n      addDateTableClass: !this.option(\"crossScrollingEnabled\") || this.isVirtualScrolling(),\n      groupOrientation: this.option(\"groupOrientation\"),\n      addVerticalSizesClassToRows: false\n    };\n  }\n\n  _updateSelectedCellDataOption(selectedCellData) {\n    var correctedSelectedCellData = selectedCellData.map(_ref2 => {\n      var {\n        startDate: startDate,\n        endDate: endDate,\n        allDay: allDay,\n        groupIndex: groupIndex,\n        groups: groups\n      } = _ref2;\n      return {\n        startDate: startDate,\n        endDate: endDate,\n        allDay: allDay,\n        groupIndex: groupIndex,\n        groups: groups\n      };\n    });\n    this.option(\"selectedCellData\", correctedSelectedCellData);\n\n    this._selectionChangedAction({\n      selectedCellData: correctedSelectedCellData\n    });\n  }\n\n  _getCellByData(cellData) {\n    var {\n      startDate: startDate,\n      groupIndex: groupIndex,\n      allDay: allDay,\n      index: index\n    } = cellData;\n    var position = this.viewDataProvider.findCellPositionInMap({\n      startDate: startDate,\n      groupIndex: groupIndex,\n      isAllDay: allDay,\n      index: index\n    });\n\n    if (!position) {\n      return;\n    }\n\n    return allDay && !this._isVerticalGroupedWorkSpace() ? this._dom_getAllDayPanelCell(position.columnIndex) : this._dom_getDateCell(position);\n  }\n\n  getDOMElementsMetaData() {\n    return this.cache.get(\"cellElementsMeta\", () => ({\n      dateTableCellsMeta: this._getDateTableDOMElementsInfo(),\n      allDayPanelCellsMeta: this._getAllDayPanelDOMElementsInfo()\n    }));\n  }\n\n  _getDateTableDOMElementsInfo() {\n    var dateTableCells = this._getAllCells(false);\n\n    if (!dateTableCells.length || !hasWindow()) {\n      return [[{}]];\n    }\n\n    var dateTable = this._getDateTable();\n\n    var dateTableRect = getBoundingRect(dateTable.get(0));\n    var columnsCount = this.viewDataProvider.getColumnsCount();\n    var result = [];\n    dateTableCells.each((index, cell) => {\n      var rowIndex = Math.floor(index / columnsCount);\n\n      if (result.length === rowIndex) {\n        result.push([]);\n      }\n\n      this._addCellMetaData(result[rowIndex], cell, dateTableRect);\n    });\n    return result;\n  }\n\n  _getAllDayPanelDOMElementsInfo() {\n    var result = [];\n\n    if (this.isAllDayPanelVisible && !this._isVerticalGroupedWorkSpace() && hasWindow()) {\n      var allDayCells = this._getAllCells(true);\n\n      if (!allDayCells.length) {\n        return [{}];\n      }\n\n      var allDayAppointmentContainer = this._$allDayPanel;\n      var allDayPanelRect = getBoundingRect(allDayAppointmentContainer.get(0));\n      allDayCells.each((_, cell) => {\n        this._addCellMetaData(result, cell, allDayPanelRect);\n      });\n    }\n\n    return result;\n  }\n\n  _addCellMetaData(cellMetaDataArray, cell, parentRect) {\n    var cellRect = getBoundingRect(cell);\n    cellMetaDataArray.push({\n      left: cellRect.left - parentRect.left,\n      top: cellRect.top - parentRect.top,\n      width: cellRect.width,\n      height: cellRect.height\n    });\n  }\n\n  _oldRender_getAllDayCellData(groupIndex) {\n    return (cell, rowIndex, columnIndex) => {\n      var validColumnIndex = columnIndex % this._getCellCount();\n\n      var options = this._getDateGenerationOptions(true);\n\n      var startDate = this.viewDataProvider.viewDataGenerator.getDateByCellIndices(options, rowIndex, validColumnIndex, this._getCellCountInDay());\n      startDate = dateUtils.trimTime(startDate);\n      var validGroupIndex = groupIndex || 0;\n\n      if (this.isGroupedByDate()) {\n        validGroupIndex = Math.floor(columnIndex % this._getGroupCount());\n      } else if (this._isHorizontalGroupedWorkSpace()) {\n        validGroupIndex = Math.floor(columnIndex / this._getCellCount());\n      }\n\n      var data = {\n        startDate: startDate,\n        endDate: startDate,\n        allDay: true,\n        groupIndex: validGroupIndex\n      };\n      var groupsArray = getCellGroups(validGroupIndex, this.option(\"groups\"));\n\n      if (groupsArray.length) {\n        data.groups = getGroupsObjectFromGroupsArray(groupsArray);\n      }\n\n      return {\n        key: CELL_DATA,\n        value: data\n      };\n    };\n  }\n\n  renderRWorkSpace(componentsToRender) {\n    var components = null !== componentsToRender && void 0 !== componentsToRender ? componentsToRender : {\n      header: true,\n      timePanel: true,\n      dateTable: true,\n      allDayPanel: true\n    };\n    components.header && this.renderRHeaderPanel();\n    components.timePanel && this.renderRTimeTable();\n    components.dateTable && this.renderRDateTable();\n    components.allDayPanel && this.renderRAllDayPanel();\n  }\n\n  renderRDateTable() {\n    utils.renovation.renderComponent(this, this._$dateTable, dxrDateTableLayout, \"renovatedDateTable\", this._getRDateTableProps());\n  }\n\n  renderRGroupPanel() {\n    var options = {\n      groups: this.option(\"groups\"),\n      groupOrientation: this.option(\"groupOrientation\"),\n      groupByDate: this.isGroupedByDate(),\n      resourceCellTemplate: this.option(\"resourceCellTemplate\"),\n      className: this.verticalGroupTableClass,\n      groupPanelData: this.viewDataProvider.getGroupPanelData(this.generateRenderOptions())\n    };\n\n    if (this.option(\"groups\").length) {\n      this._attachGroupCountClass();\n\n      utils.renovation.renderComponent(this, this._getGroupHeaderContainer(), dxrGroupPanel, \"renovatedGroupPanel\", options);\n    } else {\n      this._detachGroupCountClass();\n    }\n  }\n\n  renderRAllDayPanel() {\n    var visible = this.isAllDayPanelVisible && !this.isGroupedAllDayPanel();\n\n    if (visible) {\n      var _this$virtualScrollin;\n\n      this._toggleAllDayVisibility(false);\n\n      var options = _extends({\n        viewData: this.viewDataProvider.viewData,\n        dataCellTemplate: this.option(\"dataCellTemplate\"),\n        startCellIndex: 0\n      }, (null === (_this$virtualScrollin = this.virtualScrollingDispatcher.horizontalVirtualScrolling) || void 0 === _this$virtualScrollin ? void 0 : _this$virtualScrollin.getRenderState()) || {});\n\n      utils.renovation.renderComponent(this, this._$allDayTable, dxrAllDayPanelTable, \"renovatedAllDayPanel\", options);\n      utils.renovation.renderComponent(this, this._$allDayTitle, dxrAllDayPanelTitle, \"renovatedAllDayPanelTitle\", {});\n    }\n\n    this._toggleAllDayVisibility(true);\n  }\n\n  renderRTimeTable() {\n    utils.renovation.renderComponent(this, this._$timePanel, dxrTimePanelTableLayout, \"renovatedTimePanel\", {\n      timePanelData: this.viewDataProvider.timePanelData,\n      timeCellTemplate: this.option(\"timeCellTemplate\"),\n      groupOrientation: this.option(\"groupOrientation\")\n    });\n  }\n\n  renderRHeaderPanel() {\n    var isRenderDateHeader = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : true;\n\n    if (this.option(\"groups\").length) {\n      this._attachGroupCountClass();\n    } else {\n      this._detachGroupCountClass();\n    }\n\n    utils.renovation.renderComponent(this, this._$thead, this.renovatedHeaderPanelComponent, \"renovatedHeaderPanel\", {\n      dateHeaderData: this.viewDataProvider.dateHeaderData,\n      groupPanelData: this.viewDataProvider.getGroupPanelData(this.generateRenderOptions()),\n      dateCellTemplate: this.option(\"dateCellTemplate\"),\n      timeCellTemplate: this.option(\"timeCellTemplate\"),\n      groups: this.option(\"groups\"),\n      groupByDate: this.isGroupedByDate(),\n      groupOrientation: this.option(\"groupOrientation\"),\n      resourceCellTemplate: this.option(\"resourceCellTemplate\"),\n      isRenderDateHeader: isRenderDateHeader\n    });\n  }\n\n  initDragBehavior(scheduler) {\n    if (!this.dragBehavior && scheduler) {\n      this.dragBehavior = new AppointmentDragBehavior(scheduler);\n\n      this._createDragBehavior(this.getWorkArea());\n\n      this._createDragBehavior(this.getAllDayContainer());\n\n      this._createDragBehavior(this._$allDayPanel);\n    }\n  }\n\n  _createDragBehavior($element) {\n    var options = {\n      getItemData: (itemElement, appointments) => appointments._getItemData(itemElement),\n      getItemSettings: $itemElement => $itemElement.data(APPOINTMENT_SETTINGS_KEY)\n    };\n\n    this._createDragBehaviorBase($element, options);\n  }\n\n  _createDragBehaviorBase($element, options) {\n    var container = this.$element().find(\".\".concat(FIXED_CONTAINER_CLASS));\n    this.dragBehavior.addTo($element, createDragBehaviorConfig(container, this.isDefaultDraggingMode, this.dragBehavior, () => {\n      if (!this.isDefaultDraggingMode) {\n        this.preventDefaultDragging = false;\n      }\n    }, () => {\n      if (!this.isDefaultDraggingMode) {\n        this.preventDefaultDragging = true;\n      }\n    }, () => this._getDroppableCell(), () => this._getDateTables(), () => this.removeDroppableCellClass(), () => this.getCellWidth(), options));\n  }\n\n  _isRenderHeaderPanelEmptyCell() {\n    return this._isVerticalGroupedWorkSpace();\n  }\n\n  _dispose() {\n    super._dispose();\n\n    this.virtualScrollingDispatcher.dispose();\n  }\n\n  _getDefaultOptions() {\n    return extend(super._getDefaultOptions(), {\n      currentDate: new Date(),\n      intervalCount: 1,\n      startDate: null,\n      firstDayOfWeek: void 0,\n      startDayHour: 0,\n      endDayHour: 24,\n      hoursInterval: .5,\n      activeStateEnabled: true,\n      hoverStateEnabled: true,\n      groups: [],\n      showAllDayPanel: true,\n      allDayExpanded: false,\n      onCellClick: null,\n      crossScrollingEnabled: false,\n      dataCellTemplate: null,\n      timeCellTemplate: null,\n      resourceCellTemplate: null,\n      dateCellTemplate: null,\n      allowMultipleCellSelection: true,\n      indicatorTime: new Date(),\n      indicatorUpdateInterval: 5 * toMs(\"minute\"),\n      shadeUntilCurrentTime: true,\n      groupOrientation: \"horizontal\",\n      selectedCellData: [],\n      groupByDate: false,\n      scrolling: {\n        mode: \"standard\"\n      },\n      allDayPanelMode: \"all\",\n      renovateRender: true,\n      height: void 0,\n      draggingMode: \"outlook\",\n      onScrollEnd: () => {},\n      getHeaderHeight: void 0,\n      onRenderAppointments: () => {},\n      onShowAllDayPanel: () => {},\n      onSelectedCellsClick: () => {},\n      timeZoneCalculator: void 0,\n      schedulerHeight: void 0,\n      schedulerWidth: void 0\n    });\n  }\n\n  _optionChanged(args) {\n    switch (args.name) {\n      case \"startDayHour\":\n        validateDayHours(args.value, this.option(\"endDayHour\"));\n\n        this._cleanWorkSpace();\n\n        break;\n\n      case \"endDayHour\":\n        validateDayHours(this.option(\"startDayHour\"), args.value);\n\n        this._cleanWorkSpace();\n\n        break;\n\n      case \"dateCellTemplate\":\n      case \"resourceCellTemplate\":\n      case \"dataCellTemplate\":\n      case \"timeCellTemplate\":\n      case \"hoursInterval\":\n      case \"firstDayOfWeek\":\n      case \"currentDate\":\n      case \"startDate\":\n        this._cleanWorkSpace();\n\n        break;\n\n      case \"groups\":\n        this._cleanView();\n\n        this._removeAllDayElements();\n\n        this._initGrouping();\n\n        this.repaint();\n        break;\n\n      case \"groupOrientation\":\n        this._initGroupedStrategy();\n\n        this._createAllDayPanelElements();\n\n        this._removeAllDayElements();\n\n        this._cleanWorkSpace();\n\n        this._toggleGroupByDateClass();\n\n        break;\n\n      case \"showAllDayPanel\":\n        if (this._isVerticalGroupedWorkSpace()) {\n          this._cleanView();\n\n          this._removeAllDayElements();\n\n          this._initGrouping();\n\n          this.repaint();\n        } else if (!this.isRenovatedRender()) {\n          this._toggleAllDayVisibility(true);\n        } else {\n          this.renderWorkSpace();\n        }\n\n        break;\n\n      case \"allDayExpanded\":\n        this._changeAllDayVisibility();\n\n        this._attachTablesEvents();\n\n        this._updateScrollable();\n\n        break;\n\n      case \"onSelectionChanged\":\n        this._createSelectionChangedAction();\n\n        break;\n\n      case \"onCellClick\":\n        this._createCellClickAction();\n\n        break;\n\n      case \"onCellContextMenu\":\n        this._attachContextMenuEvent();\n\n        break;\n\n      case \"intervalCount\":\n        this._cleanWorkSpace();\n\n        this._toggleWorkSpaceCountClass();\n\n        break;\n\n      case \"groupByDate\":\n        this._cleanWorkSpace();\n\n        this._toggleGroupByDateClass();\n\n        break;\n\n      case \"crossScrollingEnabled\":\n        this._toggleHorizontalScrollClass();\n\n        this._dateTableScrollable.option(this._dateTableScrollableConfig());\n\n        break;\n\n      case \"allDayPanelMode\":\n        this.updateShowAllDayPanel();\n        this.updateAppointments();\n        break;\n\n      case \"width\":\n        super._optionChanged(args);\n\n        this._dimensionChanged();\n\n        break;\n\n      case \"timeZoneCalculator\":\n      case \"allowMultipleCellSelection\":\n      case \"selectedCellData\":\n        break;\n\n      case \"renovateRender\":\n      case \"scrolling\":\n        this.repaint();\n        break;\n\n      case \"schedulerHeight\":\n      case \"schedulerWidth\":\n        this.virtualScrollingDispatcher.updateDimensions(true);\n        break;\n\n      default:\n        super._optionChanged(args);\n\n    }\n  }\n\n  updateShowAllDayPanel() {\n    var isHiddenAllDayPanel = \"hidden\" === this.option(\"allDayPanelMode\");\n    this.option(\"onShowAllDayPanel\")(!isHiddenAllDayPanel);\n  }\n\n  _getVirtualScrollingDispatcherOptions() {\n    return {\n      getCellHeight: this.getCellHeight.bind(this),\n      getCellWidth: this.getCellWidth.bind(this),\n      getCellMinWidth: this.getCellMinWidth.bind(this),\n      isRTL: this._isRTL.bind(this),\n      getSchedulerHeight: () => this.option(\"schedulerHeight\"),\n      getSchedulerWidth: () => this.option(\"schedulerWidth\"),\n      getViewHeight: () => this.$element().height ? this.$element().height() : getHeight(this.$element()),\n      getViewWidth: () => this.$element().width ? this.$element().width() : getWidth(this.$element()),\n      getWindowHeight: () => getWindow().innerHeight,\n      getWindowWidth: () => getWindow().innerWidth,\n      getScrolling: () => this.option(\"scrolling\"),\n      getScrollableOuterWidth: this.getScrollableOuterWidth.bind(this),\n      getScrollable: this.getScrollable.bind(this),\n      createAction: this._createAction.bind(this),\n      updateRender: this.updateRender.bind(this),\n      updateGrid: this.updateGrid.bind(this),\n      getGroupCount: this._getGroupCount.bind(this),\n      isVerticalGrouping: this._isVerticalGroupedWorkSpace.bind(this),\n      getTotalRowCount: this._getTotalRowCount.bind(this),\n      getTotalCellCount: this._getTotalCellCount.bind(this)\n    };\n  }\n\n  _cleanWorkSpace() {\n    this._cleanView();\n\n    this._toggleGroupedClass();\n\n    this._toggleWorkSpaceWithOddCells();\n\n    this.virtualScrollingDispatcher.updateDimensions(true);\n\n    this._renderView();\n\n    this.option(\"crossScrollingEnabled\") && this._setTableSizes();\n    this.cache.clear();\n  }\n\n  _init() {\n    this._headerSemaphore = new ScrollSemaphore();\n    this._sideBarSemaphore = new ScrollSemaphore();\n    this._dataTableSemaphore = new ScrollSemaphore();\n    this._viewDataProvider = null;\n    this._cellsSelectionState = null;\n    this._activeStateUnit = CELL_SELECTOR;\n\n    super._init();\n\n    this._initGrouping();\n\n    this._toggleHorizontalScrollClass();\n\n    this._toggleWorkSpaceCountClass();\n\n    this._toggleGroupByDateClass();\n\n    this._toggleWorkSpaceWithOddCells();\n\n    this.$element().addClass(COMPONENT_CLASS).addClass(this._getElementClass());\n  }\n\n  _initPositionHelper() {\n    this.positionHelper = new PositionHelper({\n      key: this.option(\"key\"),\n      viewDataProvider: this.viewDataProvider,\n      viewStartDayHour: this.option(\"startDayHour\"),\n      viewEndDayHour: this.option(\"endDayHour\"),\n      cellDuration: this.getCellDuration(),\n      groupedStrategy: this._groupedStrategy,\n      isGroupedByDate: this.isGroupedByDate(),\n      rtlEnabled: this.option(\"rtlEnabled\"),\n      startViewDate: this.getStartViewDate(),\n      isVerticalGrouping: this._isVerticalGroupedWorkSpace(),\n      groupCount: this._getGroupCount(),\n      isVirtualScrolling: this.isVirtualScrolling(),\n      getDOMMetaDataCallback: this.getDOMElementsMetaData.bind(this)\n    });\n  }\n\n  _initGrouping() {\n    this._initGroupedStrategy();\n\n    this._toggleGroupingDirectionClass();\n\n    this._toggleGroupByDateClass();\n  }\n\n  isVerticalOrientation() {\n    var orientation = this.option(\"groups\").length ? this.option(\"groupOrientation\") : this._getDefaultGroupStrategy();\n    return \"vertical\" === orientation;\n  }\n\n  _initGroupedStrategy() {\n    var Strategy = this.isVerticalOrientation() ? VerticalGroupedStrategy : HorizontalGroupedStrategy;\n    this._groupedStrategy = new Strategy(this);\n  }\n\n  _getDefaultGroupStrategy() {\n    return \"horizontal\";\n  }\n\n  _toggleHorizontalScrollClass() {\n    this.$element().toggleClass(WORKSPACE_WITH_BOTH_SCROLLS_CLASS, this.option(\"crossScrollingEnabled\"));\n  }\n\n  _toggleGroupByDateClass() {\n    this.$element().toggleClass(WORKSPACE_WITH_GROUP_BY_DATE_CLASS, this.isGroupedByDate());\n  }\n\n  _toggleWorkSpaceCountClass() {\n    this.$element().toggleClass(WORKSPACE_WITH_COUNT_CLASS, this._isWorkSpaceWithCount());\n  }\n\n  _toggleWorkSpaceWithOddCells() {\n    this.$element().toggleClass(WORKSPACE_WITH_ODD_CELLS_CLASS, this._isWorkspaceWithOddCells());\n  }\n\n  _toggleGroupingDirectionClass() {\n    this.$element().toggleClass(VERTICAL_GROUPED_WORKSPACE_CLASS, this._isVerticalGroupedWorkSpace());\n  }\n\n  _getDateTableCellClass(rowIndex, columnIndex) {\n    var cellClass = DATE_TABLE_CELL_CLASS + \" \" + HORIZONTAL_SIZES_CLASS + \" \" + VERTICAL_SIZES_CLASS;\n    return this._groupedStrategy.addAdditionalGroupCellClasses(cellClass, columnIndex + 1, rowIndex, columnIndex);\n  }\n\n  _getGroupHeaderClass(i) {\n    var cellClass = GROUP_HEADER_CLASS;\n    return this._groupedStrategy.addAdditionalGroupCellClasses(cellClass, i + 1);\n  }\n\n  _initWorkSpaceUnits() {\n    this._$headerPanelContainer = $(\"<div>\").addClass(\"dx-scheduler-header-panel-container\");\n    this._$headerTablesContainer = $(\"<div>\").addClass(\"dx-scheduler-header-tables-container\");\n    this._$headerPanel = $(\"<table>\");\n    this._$thead = $(\"<thead>\").appendTo(this._$headerPanel);\n    this._$headerPanelEmptyCell = $(\"<div>\").addClass(\"dx-scheduler-header-panel-empty-cell\");\n    this._$allDayTable = $(\"<table>\");\n    this._$fixedContainer = $(\"<div>\").addClass(FIXED_CONTAINER_CLASS);\n    this._$allDayContainer = $(\"<div>\").addClass(ALL_DAY_CONTAINER_CLASS);\n    this._$dateTableScrollableContent = $(\"<div>\").addClass(\"dx-scheduler-date-table-scrollable-content\");\n    this._$sidebarScrollableContent = $(\"<div>\").addClass(\"dx-scheduler-side-bar-scrollable-content\");\n\n    this._initAllDayPanelElements();\n\n    if (this.isRenovatedRender()) {\n      this.createRAllDayPanelElements();\n    } else {\n      this._createAllDayPanelElements();\n    }\n\n    this._$timePanel = $(\"<table>\").addClass(TIME_PANEL_CLASS);\n    this._$dateTable = $(\"<table>\");\n    this._$dateTableContainer = $(\"<div>\").addClass(\"dx-scheduler-date-table-container\");\n    this._$groupTable = $(\"<div>\").addClass(WORKSPACE_VERTICAL_GROUP_TABLE_CLASS);\n  }\n\n  _initAllDayPanelElements() {\n    this._allDayTitles = [];\n    this._allDayTables = [];\n    this._allDayPanels = [];\n  }\n\n  _initDateTableScrollable() {\n    var $dateTableScrollable = $(\"<div>\").addClass(SCHEDULER_DATE_TABLE_SCROLLABLE_CLASS);\n    this._dateTableScrollable = this._createComponent($dateTableScrollable, Scrollable, this._dateTableScrollableConfig());\n  }\n\n  _createWorkSpaceElements() {\n    if (this.option(\"crossScrollingEnabled\")) {\n      this._createWorkSpaceScrollableElements();\n    } else {\n      this._createWorkSpaceStaticElements();\n    }\n  }\n\n  _createWorkSpaceStaticElements() {\n    this._$dateTableContainer.append(this._$dateTable);\n\n    if (this._isVerticalGroupedWorkSpace()) {\n      this._$dateTableContainer.append(this._$allDayContainer);\n\n      this._$dateTableScrollableContent.append(this._$groupTable, this._$timePanel, this._$dateTableContainer);\n\n      this._dateTableScrollable.$content().append(this._$dateTableScrollableContent);\n\n      this._$headerTablesContainer.append(this._$headerPanel);\n    } else {\n      var _this$_$allDayPanel;\n\n      this._$dateTableScrollableContent.append(this._$timePanel, this._$dateTableContainer);\n\n      this._dateTableScrollable.$content().append(this._$dateTableScrollableContent);\n\n      this._$headerTablesContainer.append(this._$headerPanel, this._$allDayPanel);\n\n      null === (_this$_$allDayPanel = this._$allDayPanel) || void 0 === _this$_$allDayPanel ? void 0 : _this$_$allDayPanel.append(this._$allDayContainer, this._$allDayTable);\n    }\n\n    this._appendHeaderPanelEmptyCellIfNecessary();\n\n    this._$headerPanelContainer.append(this._$headerTablesContainer);\n\n    this.$element().append(this._$fixedContainer, this._$headerPanelContainer, this._dateTableScrollable.$element());\n  }\n\n  _createWorkSpaceScrollableElements() {\n    this.$element().append(this._$fixedContainer);\n    this._$flexContainer = $(\"<div>\").addClass(\"dx-scheduler-work-space-flex-container\");\n\n    this._createHeaderScrollable();\n\n    this._headerScrollable.$content().append(this._$headerPanel);\n\n    this._appendHeaderPanelEmptyCellIfNecessary();\n\n    this._$headerPanelContainer.append(this._$headerTablesContainer);\n\n    this.$element().append(this._$headerPanelContainer);\n    this.$element().append(this._$flexContainer);\n\n    this._createSidebarScrollable();\n\n    this._$flexContainer.append(this._dateTableScrollable.$element());\n\n    this._$dateTableContainer.append(this._$dateTable);\n\n    this._$dateTableScrollableContent.append(this._$dateTableContainer);\n\n    this._dateTableScrollable.$content().append(this._$dateTableScrollableContent);\n\n    if (this._isVerticalGroupedWorkSpace()) {\n      this._$dateTableContainer.append(this._$allDayContainer);\n\n      this._$sidebarScrollableContent.append(this._$groupTable, this._$timePanel);\n    } else {\n      var _this$_$allDayPanel2;\n\n      this._headerScrollable.$content().append(this._$allDayPanel);\n\n      null === (_this$_$allDayPanel2 = this._$allDayPanel) || void 0 === _this$_$allDayPanel2 ? void 0 : _this$_$allDayPanel2.append(this._$allDayContainer, this._$allDayTable);\n\n      this._$sidebarScrollableContent.append(this._$timePanel);\n    }\n\n    this._sidebarScrollable.$content().append(this._$sidebarScrollableContent);\n  }\n\n  _appendHeaderPanelEmptyCellIfNecessary() {\n    this._isRenderHeaderPanelEmptyCell() && this._$headerPanelContainer.append(this._$headerPanelEmptyCell);\n  }\n\n  _createHeaderScrollable() {\n    var $headerScrollable = $(\"<div>\").addClass(SCHEDULER_HEADER_SCROLLABLE_CLASS).appendTo(this._$headerTablesContainer);\n    this._headerScrollable = this._createComponent($headerScrollable, Scrollable, this._headerScrollableConfig());\n  }\n\n  _createSidebarScrollable() {\n    var $timePanelScrollable = $(\"<div>\").addClass(SCHEDULER_SIDEBAR_SCROLLABLE_CLASS).appendTo(this._$flexContainer);\n    this._sidebarScrollable = this._createComponent($timePanelScrollable, Scrollable, {\n      useKeyboard: false,\n      showScrollbar: \"never\",\n      direction: \"vertical\",\n      useNative: false,\n      updateManually: true,\n      bounceEnabled: false,\n      onScroll: e => {\n        this._sideBarSemaphore.take(e.scrollOffset);\n\n        if (this._dataTableSemaphore.isFree(e.scrollOffset)) {\n          this._dateTableScrollable.scrollTo({\n            top: e.scrollOffset.top\n          });\n        }\n\n        this._sideBarSemaphore.release();\n      }\n    });\n  }\n\n  _attachTableClasses() {\n    this._addTableClass(this._$dateTable, DATE_TABLE_CLASS);\n\n    if (this._isVerticalGroupedWorkSpace()) {\n      var groupCount = this._getGroupCount();\n\n      for (var i = 0; i < groupCount; i++) {\n        this._addTableClass(this._allDayTables[i], ALL_DAY_TABLE_CLASS);\n      }\n    } else if (!this.isRenovatedRender()) {\n      this._addTableClass(this._$allDayTable, ALL_DAY_TABLE_CLASS);\n    }\n  }\n\n  _attachHeaderTableClasses() {\n    this._addTableClass(this._$headerPanel, HEADER_PANEL_CLASS);\n  }\n\n  _addTableClass($el, className) {\n    $el && !$el.hasClass(className) && $el.addClass(className);\n  }\n\n  _initMarkup() {\n    this.cache.clear();\n\n    this._initWorkSpaceUnits();\n\n    this._initVirtualScrolling();\n\n    this._initDateTableScrollable();\n\n    this._createWorkSpaceElements();\n\n    super._initMarkup();\n\n    if (!this.option(\"crossScrollingEnabled\")) {\n      this._attachTableClasses();\n\n      this._attachHeaderTableClasses();\n    }\n\n    this._toggleGroupedClass();\n\n    this._renderView();\n\n    this._attachEvents();\n  }\n\n  _render() {\n    super._render();\n\n    this._renderDateTimeIndication();\n\n    this._setIndicationUpdateInterval();\n  }\n\n  _toggleGroupedClass() {\n    this.$element().toggleClass(GROUPED_WORKSPACE_CLASS, this._getGroupCount() > 0);\n  }\n\n  _renderView() {\n    if (this.isRenovatedRender()) {\n      if (this._isVerticalGroupedWorkSpace()) {\n        this.renderRGroupPanel();\n      }\n    } else {\n      this._applyCellTemplates(this._renderGroupHeader());\n    }\n\n    this.renderWorkSpace();\n\n    this._updateGroupTableHeight();\n\n    this.updateHeaderEmptyCellWidth();\n    this._shader = new VerticalShader(this);\n  }\n\n  updateCellsSelection() {\n    var renderOptions = this.generateRenderOptions();\n    this.viewDataProvider.updateViewData(renderOptions);\n    this.renderRWorkSpace({\n      timePanel: true,\n      dateTable: true,\n      allDayPanel: true\n    });\n  }\n\n  _renderDateTimeIndication() {\n    return noop();\n  }\n\n  _setIndicationUpdateInterval() {\n    return noop();\n  }\n\n  _refreshDateTimeIndication() {\n    return noop();\n  }\n\n  _detachGroupCountClass() {\n    [...VERTICAL_GROUP_COUNT_CLASSES].forEach(className => {\n      this.$element().removeClass(className);\n    });\n  }\n\n  _attachGroupCountClass() {\n    var className = this._groupedStrategy.getGroupCountClass(this.option(\"groups\"));\n\n    this.$element().addClass(className);\n  }\n\n  _getDateHeaderTemplate() {\n    return this.option(\"dateCellTemplate\");\n  }\n\n  _toggleAllDayVisibility(isUpdateScrollable) {\n    var showAllDayPanel = this._isShowAllDayPanel();\n\n    this.$element().toggleClass(WORKSPACE_WITH_ALL_DAY_CLASS, showAllDayPanel);\n\n    this._changeAllDayVisibility();\n\n    isUpdateScrollable && this._updateScrollable();\n  }\n\n  _changeAllDayVisibility() {\n    this.cache.clear();\n    this.$element().toggleClass(WORKSPACE_WITH_COLLAPSED_ALL_DAY_CLASS, !this.option(\"allDayExpanded\") && this._isShowAllDayPanel());\n  }\n\n  _getDateTables() {\n    return this._$dateTable.add(this._$allDayTable);\n  }\n\n  _getDateTable() {\n    return this._$dateTable;\n  }\n\n  _removeAllDayElements() {\n    this._$allDayTable && this._$allDayTable.remove();\n    this._$allDayTitle && this._$allDayTitle.remove();\n  }\n\n  _cleanView() {\n    var _this$_shader;\n\n    this.cache.clear();\n\n    this._cleanTableWidths();\n\n    this.cellsSelectionState.clearSelectedAndFocusedCells();\n\n    if (!this.isRenovatedRender()) {\n      var _this$_$allDayTable, _this$_$sidebarTable;\n\n      this._$thead.empty();\n\n      this._$dateTable.empty();\n\n      this._$timePanel.empty();\n\n      this._$groupTable.empty();\n\n      null === (_this$_$allDayTable = this._$allDayTable) || void 0 === _this$_$allDayTable ? void 0 : _this$_$allDayTable.empty();\n      null === (_this$_$sidebarTable = this._$sidebarTable) || void 0 === _this$_$sidebarTable ? void 0 : _this$_$sidebarTable.empty();\n    }\n\n    null === (_this$_shader = this._shader) || void 0 === _this$_shader ? void 0 : _this$_shader.clean();\n    delete this._interval;\n  }\n\n  _clean() {\n    eventsEngine.off(domAdapter.getDocument(), SCHEDULER_CELL_DXPOINTERUP_EVENT_NAME);\n\n    this._disposeRenovatedComponents();\n\n    super._clean();\n  }\n\n  _cleanTableWidths() {\n    this._$headerPanel.css(\"width\", \"\");\n\n    this._$dateTable.css(\"width\", \"\");\n\n    this._$allDayTable && this._$allDayTable.css(\"width\", \"\");\n  }\n\n  _disposeRenovatedComponents() {\n    var _this$renovatedAllDay, _this$renovatedDateTa, _this$renovatedTimePa, _this$renovatedGroupP, _this$renovatedHeader;\n\n    null === (_this$renovatedAllDay = this.renovatedAllDayPanel) || void 0 === _this$renovatedAllDay ? void 0 : _this$renovatedAllDay.dispose();\n    this.renovatedAllDayPanel = void 0;\n    null === (_this$renovatedDateTa = this.renovatedDateTable) || void 0 === _this$renovatedDateTa ? void 0 : _this$renovatedDateTa.dispose();\n    this.renovatedDateTable = void 0;\n    null === (_this$renovatedTimePa = this.renovatedTimePanel) || void 0 === _this$renovatedTimePa ? void 0 : _this$renovatedTimePa.dispose();\n    this.renovatedTimePanel = void 0;\n    null === (_this$renovatedGroupP = this.renovatedGroupPanel) || void 0 === _this$renovatedGroupP ? void 0 : _this$renovatedGroupP.dispose();\n    this.renovatedGroupPanel = void 0;\n    null === (_this$renovatedHeader = this.renovatedHeaderPanel) || void 0 === _this$renovatedHeader ? void 0 : _this$renovatedHeader.dispose();\n    this.renovatedHeaderPanel = void 0;\n  }\n\n  getGroupedStrategy() {\n    return this._groupedStrategy;\n  }\n\n  getFixedContainer() {\n    return this._$fixedContainer;\n  }\n\n  getAllDayContainer() {\n    return this._$allDayContainer;\n  }\n\n  updateRender() {\n    this.renderer.updateRender();\n  }\n\n  updateGrid() {\n    this.renderer._renderGrid();\n  }\n\n  updateAppointments() {\n    var _this$dragBehavior2;\n\n    this.option(\"onRenderAppointments\")();\n    null === (_this$dragBehavior2 = this.dragBehavior) || void 0 === _this$dragBehavior2 ? void 0 : _this$dragBehavior2.updateDragSource();\n  }\n\n  _createAllDayPanelElements() {\n    var groupCount = this._getGroupCount();\n\n    if (this._isVerticalGroupedWorkSpace() && 0 !== groupCount) {\n      for (var i = 0; i < groupCount; i++) {\n        var $allDayTitle = $(\"<div>\").addClass(ALL_DAY_TITLE_CLASS).text(messageLocalization.format(\"dxScheduler-allDay\"));\n\n        this._allDayTitles.push($allDayTitle);\n\n        this._$allDayTable = $(\"<table>\");\n\n        this._allDayTables.push(this._$allDayTable);\n\n        this._$allDayPanel = $(\"<div>\").addClass(ALL_DAY_PANEL_CLASS).append(this._$allDayTable);\n\n        this._allDayPanels.push(this._$allDayPanel);\n      }\n    } else {\n      this._$allDayTitle = $(\"<div>\").addClass(ALL_DAY_TITLE_CLASS).text(messageLocalization.format(\"dxScheduler-allDay\")).appendTo(this.$element());\n      this._$allDayTable = $(\"<table>\");\n      this._$allDayPanel = $(\"<div>\").addClass(ALL_DAY_PANEL_CLASS).append(this._$allDayTable);\n    }\n  }\n\n  renderWorkSpace() {\n    var isGenerateNewViewData = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : true;\n    this.cache.clear();\n    this.viewDataProvider.update(this.generateRenderOptions(), isGenerateNewViewData);\n\n    if (this.isRenovatedRender()) {\n      this.renderRWorkSpace();\n      this.virtualScrollingDispatcher.updateDimensions();\n    } else {\n      this._renderDateHeader();\n\n      this._renderTimePanel();\n\n      this._renderGroupAllDayPanel();\n\n      this._renderDateTable();\n\n      this._renderAllDayPanel();\n    }\n\n    this._initPositionHelper();\n  }\n\n  _renderGroupHeader() {\n    var $container = this._getGroupHeaderContainer();\n\n    var groupCount = this._getGroupCount();\n\n    var cellTemplates = [];\n\n    if (groupCount) {\n      var groupRows = this._makeGroupRows(this.option(\"groups\"), this.option(\"groupByDate\"));\n\n      this._attachGroupCountClass();\n\n      $container.append(groupRows.elements);\n      cellTemplates = groupRows.cellTemplates;\n    } else {\n      this._detachGroupCountClass();\n    }\n\n    return cellTemplates;\n  }\n\n  _applyCellTemplates(templates) {\n    null === templates || void 0 === templates ? void 0 : templates.forEach(function (template) {\n      template();\n    });\n  }\n\n  _makeGroupRows(groups, groupByDate) {\n    var tableCreatorStrategy = this._isVerticalGroupedWorkSpace() ? tableCreator.VERTICAL : tableCreator.HORIZONTAL;\n    return tableCreator.makeGroupedTable(tableCreatorStrategy, groups, {\n      groupHeaderRowClass: GROUP_ROW_CLASS,\n      groupRowClass: GROUP_ROW_CLASS,\n      groupHeaderClass: this._getGroupHeaderClass.bind(this),\n      groupHeaderContentClass: GROUP_HEADER_CONTENT_CLASS\n    }, this._getCellCount() || 1, this.option(\"resourceCellTemplate\"), this._getGroupCount(), groupByDate);\n  }\n\n  _renderDateHeader() {\n    var container = this._getDateHeaderContainer();\n\n    var $headerRow = $(\"<tr>\").addClass(HEADER_ROW_CLASS);\n\n    var count = this._getCellCount();\n\n    var cellTemplate = this._getDateHeaderTemplate();\n\n    var repeatCount = this._getCalculateHeaderCellRepeatCount();\n\n    var templateCallbacks = [];\n    var groupByDate = this.isGroupedByDate();\n\n    if (!groupByDate) {\n      for (var rowIndex = 0; rowIndex < repeatCount; rowIndex++) {\n        for (var columnIndex = 0; columnIndex < count; columnIndex++) {\n          var templateIndex = rowIndex * count + columnIndex;\n\n          this._renderDateHeaderTemplate($headerRow, columnIndex, templateIndex, cellTemplate, templateCallbacks);\n        }\n      }\n\n      container.append($headerRow);\n    } else {\n      var colSpan = groupByDate ? this._getGroupCount() : 1;\n\n      for (var _columnIndex = 0; _columnIndex < count; _columnIndex++) {\n        var _templateIndex = _columnIndex * repeatCount;\n\n        var cellElement = this._renderDateHeaderTemplate($headerRow, _columnIndex, _templateIndex, cellTemplate, templateCallbacks);\n\n        cellElement.attr(\"colSpan\", colSpan);\n      }\n\n      container.prepend($headerRow);\n    }\n\n    this._applyCellTemplates(templateCallbacks);\n\n    return $headerRow;\n  }\n\n  _renderDateHeaderTemplate(container, panelCellIndex, templateIndex, cellTemplate, templateCallbacks) {\n    var validTemplateIndex = this.isGroupedByDate() ? Math.floor(templateIndex / this._getGroupCount()) : templateIndex;\n    var completeDateHeaderMap = this.viewDataProvider.completeDateHeaderMap;\n    var {\n      text: text,\n      startDate: date\n    } = completeDateHeaderMap[completeDateHeaderMap.length - 1][validTemplateIndex];\n    var $cell = $(\"<th>\").addClass(this._getHeaderPanelCellClass(panelCellIndex)).attr(\"title\", text);\n\n    if (null !== cellTemplate && void 0 !== cellTemplate && cellTemplate.render) {\n      templateCallbacks.push(cellTemplate.render.bind(cellTemplate, {\n        model: _extends({\n          text: text,\n          date: date\n        }, this._getGroupsForDateHeaderTemplate(templateIndex)),\n        index: templateIndex,\n        container: getPublicElement($cell)\n      }));\n    } else {\n      $cell.text(text);\n    }\n\n    container.append($cell);\n    return $cell;\n  }\n\n  _getGroupsForDateHeaderTemplate(templateIndex) {\n    var indexMultiplier = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 1;\n    var groupIndex;\n    var groups;\n\n    if (this._isHorizontalGroupedWorkSpace() && !this.isGroupedByDate()) {\n      groupIndex = this._getGroupIndex(0, templateIndex * indexMultiplier);\n      var groupsArray = getCellGroups(groupIndex, this.option(\"groups\"));\n      groups = getGroupsObjectFromGroupsArray(groupsArray);\n    }\n\n    return {\n      groups: groups,\n      groupIndex: groupIndex\n    };\n  }\n\n  _getHeaderPanelCellClass(i) {\n    var cellClass = HEADER_PANEL_CELL_CLASS + \" \" + HORIZONTAL_SIZES_CLASS;\n    return this._groupedStrategy.addAdditionalGroupCellClasses(cellClass, i + 1, void 0, void 0, this.isGroupedByDate());\n  }\n\n  _renderAllDayPanel(index) {\n    var cellCount = this._getCellCount();\n\n    if (!this._isVerticalGroupedWorkSpace()) {\n      cellCount *= this._getGroupCount() || 1;\n    }\n\n    var cellTemplates = this._renderTableBody({\n      container: this._allDayPanels.length ? getPublicElement(this._allDayTables[index]) : getPublicElement(this._$allDayTable),\n      rowCount: 1,\n      cellCount: cellCount,\n      cellClass: this._getAllDayPanelCellClass.bind(this),\n      rowClass: ALL_DAY_TABLE_ROW_CLASS,\n      cellTemplate: this.option(\"dataCellTemplate\"),\n      getCellData: this._oldRender_getAllDayCellData(index),\n      groupIndex: index\n    }, true);\n\n    this._toggleAllDayVisibility(true);\n\n    this._applyCellTemplates(cellTemplates);\n  }\n\n  _renderGroupAllDayPanel() {\n    if (this._isVerticalGroupedWorkSpace()) {\n      var groupCount = this._getGroupCount();\n\n      for (var i = 0; i < groupCount; i++) {\n        this._renderAllDayPanel(i);\n      }\n    }\n  }\n\n  _getAllDayPanelCellClass(i, j) {\n    var cellClass = ALL_DAY_TABLE_CELL_CLASS + \" \" + HORIZONTAL_SIZES_CLASS;\n    return this._groupedStrategy.addAdditionalGroupCellClasses(cellClass, j + 1);\n  }\n\n  _renderTimePanel() {\n    var repeatCount = this._groupedStrategy.calculateTimeCellRepeatCount();\n\n    var getData = (rowIndex, field) => {\n      var allDayPanelsCount = 0;\n\n      if (this.isAllDayPanelVisible) {\n        allDayPanelsCount = 1;\n      }\n\n      if (this.isGroupedAllDayPanel()) {\n        allDayPanelsCount = Math.ceil((rowIndex + 1) / this._getRowCount());\n      }\n\n      var validRowIndex = rowIndex + allDayPanelsCount;\n      return this.viewDataProvider.completeTimePanelMap[validRowIndex][field];\n    };\n\n    this._renderTableBody({\n      container: getPublicElement(this._$timePanel),\n      rowCount: this._getTimePanelRowCount() * repeatCount,\n      cellCount: 1,\n      cellClass: this._getTimeCellClass.bind(this),\n      rowClass: TIME_PANEL_ROW_CLASS,\n      cellTemplate: this.option(\"timeCellTemplate\"),\n      getCellText: rowIndex => getData(rowIndex, \"text\"),\n      getCellDate: rowIndex => getData(rowIndex, \"startDate\"),\n      groupCount: this._getGroupCount(),\n      allDayElements: this._insertAllDayRowsIntoDateTable() ? this._allDayTitles : void 0,\n      getTemplateData: (rowIndex => {\n        if (!this._isVerticalGroupedWorkSpace()) {\n          return {};\n        }\n\n        var groupIndex = this._getGroupIndex(rowIndex, 0);\n\n        var groupsArray = getCellGroups(groupIndex, this.option(\"groups\"));\n        var groups = getGroupsObjectFromGroupsArray(groupsArray);\n        return {\n          groupIndex: groupIndex,\n          groups: groups\n        };\n      }).bind(this)\n    });\n  }\n\n  _getTimeCellClass(i) {\n    var cellClass = TIME_PANEL_CELL_CLASS + \" \" + VERTICAL_SIZES_CLASS;\n    return this._isVerticalGroupedWorkSpace() ? this._groupedStrategy.addAdditionalGroupCellClasses(cellClass, i, i) : cellClass;\n  }\n\n  _renderDateTable() {\n    var groupCount = this._getGroupCount();\n\n    this._renderTableBody({\n      container: getPublicElement(this._$dateTable),\n      rowCount: this._getTotalRowCount(groupCount),\n      cellCount: this._getTotalCellCount(groupCount),\n      cellClass: this._getDateTableCellClass.bind(this),\n      rowClass: DATE_TABLE_ROW_CLASS,\n      cellTemplate: this.option(\"dataCellTemplate\"),\n      getCellData: (_, rowIndex, columnIndex) => {\n        var isGroupedAllDayPanel = this.isGroupedAllDayPanel();\n        var validRowIndex = rowIndex;\n\n        if (isGroupedAllDayPanel) {\n          var rowCount = this._getRowCount();\n\n          var allDayPanelsCount = Math.ceil(rowIndex / rowCount);\n          validRowIndex += allDayPanelsCount;\n        }\n\n        var cellData = this.viewDataProvider.viewDataMap.dateTableMap[validRowIndex][columnIndex].cellData;\n        return {\n          value: this._filterCellDataFields(cellData),\n          fullValue: cellData,\n          key: CELL_DATA\n        };\n      },\n      allDayElements: this._insertAllDayRowsIntoDateTable() ? this._allDayPanels : void 0,\n      groupCount: groupCount,\n      groupByDate: this.option(\"groupByDate\")\n    });\n  }\n\n  _insertAllDayRowsIntoDateTable() {\n    return this._groupedStrategy.insertAllDayRowsIntoDateTable();\n  }\n\n  _renderTableBody(options, delayCellTemplateRendering) {\n    var result = [];\n\n    if (!delayCellTemplateRendering) {\n      this._applyCellTemplates(tableCreator.makeTable(options));\n    } else {\n      result = tableCreator.makeTable(options);\n    }\n\n    return result;\n  }\n\n}\n\nvar createDragBehaviorConfig = (container, isDefaultDraggingMode, dragBehavior, enableDefaultDragging, disableDefaultDragging, getDroppableCell, getDateTables, removeDroppableCellClass, getCellWidth, options) => {\n  var state = {\n    dragElement: void 0,\n    itemData: void 0\n  };\n\n  var isItemDisabled = () => {\n    var {\n      itemData: itemData\n    } = state;\n\n    if (itemData) {\n      var getter = compileGetter(\"disabled\");\n      return getter(itemData);\n    }\n\n    return true;\n  };\n\n  var cursorOffset = options.isSetCursorOffset ? () => {\n    var $dragElement = $(state.dragElement);\n    return {\n      x: getWidth($dragElement) / 2,\n      y: getHeight($dragElement) / 2\n    };\n  } : void 0;\n  return {\n    container: container,\n    dragTemplate: () => state.dragElement,\n    onDragStart: e => {\n      if (!isDefaultDraggingMode) {\n        disableDefaultDragging();\n      }\n\n      var canceled = e.cancel;\n      var event = e.event;\n      var $itemElement = $(e.itemElement);\n      var appointments = e.component._appointments;\n      state.itemData = options.getItemData(e.itemElement, appointments);\n      var settings = options.getItemSettings($itemElement, e);\n      var initialPosition = options.initialPosition;\n\n      if (!isItemDisabled()) {\n        event.data = event.data || {};\n\n        if (!canceled) {\n          if (!settings.isCompact) {\n            dragBehavior.updateDragSource(state.itemData, settings);\n          }\n\n          state.dragElement = ((itemData, settings, appointments) => {\n            var appointmentIndex = appointments.option(\"items\").length;\n            settings.isCompact = false;\n            settings.virtual = false;\n\n            var items = appointments._renderItem(appointmentIndex, {\n              itemData: itemData,\n              settings: [settings]\n            });\n\n            return items[0];\n          })(state.itemData, settings, appointments);\n\n          event.data.itemElement = state.dragElement;\n          event.data.initialPosition = null !== initialPosition && void 0 !== initialPosition ? initialPosition : locate($(state.dragElement));\n          event.data.itemData = state.itemData;\n          event.data.itemSettings = settings;\n          dragBehavior.onDragStart(event.data);\n          resetPosition($(state.dragElement));\n        }\n      }\n    },\n    onDragMove: () => {\n      if (isDefaultDraggingMode) {\n        return;\n      }\n\n      var appointmentWidth = getWidth(state.dragElement);\n      var cellWidth = getCellWidth();\n      var isWideAppointment = appointmentWidth > cellWidth;\n      var dragElementContainer = $(state.dragElement).parent();\n      var boundingRect = getBoundingRect(dragElementContainer.get(0));\n      var newX = boundingRect.left + 10;\n      var newY = boundingRect.top + 10;\n      var elements = isWideAppointment ? domAdapter.elementsFromPoint(newX, newY) : domAdapter.elementsFromPoint(newX + appointmentWidth / 2, newY);\n      var dateTables = getDateTables();\n      var droppableCell = elements.find(el => {\n        var classList = el.classList;\n        var isCurrentSchedulerElement = 1 === dateTables.find(el).length;\n        return isCurrentSchedulerElement && (classList.contains(DATE_TABLE_CELL_CLASS) || classList.contains(ALL_DAY_TABLE_CELL_CLASS));\n      });\n\n      if (droppableCell) {\n        var oldDroppableCell = getDroppableCell();\n\n        if (!oldDroppableCell.is(droppableCell)) {\n          removeDroppableCellClass();\n        }\n\n        $(droppableCell).addClass(DATE_TABLE_DROPPABLE_CELL_CLASS);\n      }\n    },\n    onDragEnd: e => {\n      var _state$dragElement;\n\n      if (!isDefaultDraggingMode) {\n        enableDefaultDragging();\n      }\n\n      if (!isItemDisabled()) {\n        dragBehavior.onDragEnd(e);\n      }\n\n      null === (_state$dragElement = state.dragElement) || void 0 === _state$dragElement ? void 0 : _state$dragElement.remove();\n      removeDroppableCellClass();\n    },\n    cursorOffset: cursorOffset,\n    filter: options.filter\n  };\n};\n\nexport default SchedulerWorkSpace;","map":{"version":3,"sources":["C:/Users/Zoran/source/repos/TransportApp/TransportLog-basic/node_modules/devextreme/esm/ui/scheduler/workspaces/ui.scheduler.work_space.js"],"names":["_extends","setWidth","getOuterHeight","getOuterWidth","setOuterHeight","getHeight","getWidth","$","domAdapter","eventsEngine","dateUtils","getWindow","hasWindow","getPublicElement","extend","getBoundingRect","messageLocalization","noop","isDefined","addNamespace","isMouseEvent","pointerEvents","errors","name","clickEventName","contextMenuEventName","enter","dragEventEnter","leave","dragEventLeave","drop","dragEventDrop","Scrollable","HorizontalGroupedStrategy","VerticalGroupedStrategy","tableCreatorModule","tableCreator","VerticalShader","AppointmentDragBehavior","APPOINTMENT_SETTINGS_KEY","FIXED_CONTAINER_CLASS","VIRTUAL_CELL_CLASS","TIME_PANEL_CLASS","DATE_TABLE_CLASS","DATE_TABLE_ROW_CLASS","GROUP_ROW_CLASS","GROUP_HEADER_CONTENT_CLASS","VERTICAL_GROUP_COUNT_CLASSES","WidgetObserver","resetPosition","locate","VirtualScrollingDispatcher","VirtualScrollingRenderer","ViewDataProvider","dxrDateTableLayout","dxrAllDayPanelTable","dxrAllDayPanelTitle","dxrTimePanelTableLayout","dxrGroupPanel","dxrDateHeader","CellsSelectionState","Cache","CellsSelectionController","calculateViewStartDate","getViewStartByOptions","validateDayHours","getStartViewDateTimeOffset","isDateAndTimeView","calculateIsGroupedAllDayPanel","getCellDuration","createResourcesTree","getCellGroups","getGroupsObjectFromGroupsArray","getGroupCount","ScrollSemaphore","getCellWidth","getCellHeight","getAllDayHeight","getMaxAllowedPosition","PositionHelper","utils","compileGetter","abstract","toMs","dateToMilliseconds","COMPONENT_CLASS","GROUPED_WORKSPACE_CLASS","VERTICAL_GROUPED_WORKSPACE_CLASS","WORKSPACE_VERTICAL_GROUP_TABLE_CLASS","WORKSPACE_WITH_BOTH_SCROLLS_CLASS","WORKSPACE_WITH_COUNT_CLASS","WORKSPACE_WITH_GROUP_BY_DATE_CLASS","WORKSPACE_WITH_ODD_CELLS_CLASS","TIME_PANEL_CELL_CLASS","TIME_PANEL_ROW_CLASS","ALL_DAY_PANEL_CLASS","ALL_DAY_TABLE_CLASS","ALL_DAY_CONTAINER_CLASS","ALL_DAY_TITLE_CLASS","ALL_DAY_TABLE_CELL_CLASS","ALL_DAY_TABLE_ROW_CLASS","WORKSPACE_WITH_ALL_DAY_CLASS","WORKSPACE_WITH_COLLAPSED_ALL_DAY_CLASS","WORKSPACE_WITH_MOUSE_SELECTION_CLASS","HORIZONTAL_SIZES_CLASS","VERTICAL_SIZES_CLASS","HEADER_PANEL_CLASS","HEADER_PANEL_CELL_CLASS","HEADER_ROW_CLASS","GROUP_HEADER_CLASS","DATE_TABLE_CELL_CLASS","DATE_TABLE_FOCUSED_CELL_CLASS","VIRTUAL_ROW_CLASS","DATE_TABLE_DROPPABLE_CELL_CLASS","SCHEDULER_HEADER_SCROLLABLE_CLASS","SCHEDULER_SIDEBAR_SCROLLABLE_CLASS","SCHEDULER_DATE_TABLE_SCROLLABLE_CLASS","SCHEDULER_WORKSPACE_DXPOINTERDOWN_EVENT_NAME","down","DragEventNames","ENTER","DROP","LEAVE","SCHEDULER_CELL_DXCLICK_EVENT_NAME","SCHEDULER_CELL_DXPOINTERDOWN_EVENT_NAME","SCHEDULER_CELL_DXPOINTERUP_EVENT_NAME","up","SCHEDULER_CELL_DXPOINTERMOVE_EVENT_NAME","move","CELL_DATA","DATE_TABLE_MIN_CELL_WIDTH","DAY_MS","HOUR_MS","DRAG_AND_DROP_SELECTOR","concat","CELL_SELECTOR","CELL_INDEX_CALCULATION_EPSILON","SchedulerWorkSpace","viewDataProvider","_viewDataProvider","type","cache","_cache","cellsSelectionState","_cellsSelectionState","selectedCellsOption","option","length","validSelectedCells","map","selectedCell","groups","_getGroupCount","groupIndex","_getGroupIndexByResourceId","setSelectedCellsByData","cellsSelectionController","_cellsSelectionController","isAllDayPanelVisible","_isShowAllDayPanel","supportAllDayRow","verticalGroupTableClass","viewDirection","renovatedHeaderPanelComponent","timeZoneCalculator","isDefaultDraggingMode","_supportedKeys","clickHandler","e","preventDefault","stopPropagation","selectedCells","getSelectedCells","selectedCellsElement","cellData","_getCellByData","filter","cell","target","_showPopup","_cellClickAction","event","cellElement","onArrowPressed","key","_this$cellsSelectionS","focusedCellData","focusedCell","isAllDayPanelCell","allDay","_isVerticalGroupedWorkSpace","isMultiSelection","shiftKey","isMultiSelectionAllowed","isRTL","_isRTL","groupCount","isGroupedByDate","isHorizontalGrouping","_isHorizontalGroupedWorkSpace","focusedCellPosition","findCellPositionInMap","isAllDay","edgeIndices","getGroupEdgeIndices","getViewEdgeIndices","nextCellData","handleArrowClick","viewType","getCellDataByPosition","getCellData","bind","_processNextSelectedCell","space","downArrow","upArrow","rightArrow","leftArrow","_moveToCell","$cell","currentCellData","_getFullCellData","nextFocusedCellData","moveToCell","isVirtualCell","hasClass","nextCellPosition","startDate","index","isSameCell","_dom_getAllDayPanelCell","columnIndex","_dom_getDateCell","isNextCellAllDay","_setSelectedCellsStateAndUpdateSelection","_dateTableScrollable","scrollToElement","cellPosition","$nextFocusedCell","nextCellCoordinates","rowIndex","setFocusedCell","setSelectedCells","updateCellsSelection","_updateSelectedCellDataOption","_hasAllDayClass","_focusInHandler","is","_focusTarget","_isCellClick","_contextMenuHandled","apply","arguments","restoreSelectedAndFocusedCells","cellCoordinates","_focusOutHandler","_disposed","releaseSelectedAndFocusedCells","updateViewData","generateRenderOptions","$element","_isWorkSpaceWithCount","_isWorkspaceWithOddCells","isVirtualScrolling","_getRealGroupOrientation","createRAllDayPanelElements","_$allDayPanel","addClass","_$allDayTitle","appendTo","_$headerPanelEmptyCell","_dateTableScrollableConfig","config","useKeyboard","bounceEnabled","updateManually","onScroll","_this$_groupedStrateg","_groupedStrategy","clear","_needCreateCrossScrolling","_createCrossScrollingConfig","virtualScrollingDispatcher","horizontalScrollingAllowed","height","currentOnScroll","handleOnScrollEvent","scrollOffset","currentConfig","direction","_dataTableSemaphore","take","_sideBarSemaphore","isFree","_this$_sidebarScrolla","_sidebarScrollable","scrollTo","top","_headerSemaphore","_this$_headerScrollab","_headerScrollable","left","release","onEnd","_headerScrollableConfig","showScrollbar","useNative","_visibilityChanged","visible","_updateGroupTableHeight","_setTableSizes","_attachTableClasses","cellWidth","getCellMinWidth","minWidth","getWorkSpaceMinWidth","totalCellCount","_getTotalCellCount","width","_$headerPanel","_$dateTable","_$allDayTable","_attachHeaderTableClasses","_updateScrollable","_dimensionChanged","_isVisible","updateHeaderEmptyCellWidth","_getElementClass","_getRowCount","getRowCount","intervalCount","currentDate","hoursInterval","startDayHour","endDayHour","_getCellCount","getCellCount","isRenovatedRender","renovatedRenderSupported","_isVirtualModeOn","_initVirtualScrolling","dispose","_getVirtualScrollingDispatcherOptions","attachScrollableEvents","renderer","onDataSourceChanged","isGroupedAllDayPanel","isProvideVirtualCellsWidth","_this$_getToday","groupOrientation","_getDefaultGroupStrategy","options","groupByDate","startRowIndex","startCellIndex","today","_getToday","call","headerCellTextFormat","_getFormat","getDateForHeaderText","_","date","cellDuration","firstDayOfWeek","getRenderState","_setHorizontalGroupHeaderCellsHeight","_isRenderHeaderPanelEmptyCell","timePanelWidth","getTimePanelWidth","groupPanelWidth","getGroupTableWidth","css","_isGroupsSpecified","resources","id","resourceTree","_getGroupIndexRecursively","currentKey","currentValue","reduce","prevIndex","_ref","leafIndex","value","children","areValuesEqual","_getViewStartByOptions","_getIntervalDuration","_calculateViewStartDate","getIntervalDuration","_getHeaderDate","getStartViewDate","_firstDayOfWeek","getFirstDayOfWeek","_attachEvents","_createSelectionChangedAction","_attachClickEvent","_attachContextMenuEvent","that","pointerDownAction","_createAction","_pointerDownHandler","_createCellClickAction","cellSelector","off","on","which","_createActionByOption","afterExecute","_cellClickHandler","args","_selectionChangedAction","_handleSelectedCellsClick","$target","_getCoordinatesByCell","isAllDayCell","firstCellData","lastCellData","result","endDate","_createContextMenuAction","eventName","NAME","_contextMenuHandler","_contextMenuAction","_getGroupHeaderContainer","_$groupTable","_$thead","_getDateHeaderContainer","_getCalculateHeaderCellRepeatCount","calculateHeaderCellRepeatCount","_this$_headerScrollab2","_this$_sidebarScrolla2","update","_getTimePanelRowCount","_getCellCountInDay","getCellCountInDay","getTotalCellCount","_getTotalRowCount","includeAllDayPanelRows","getTotalRowCount","_getGroupIndex","getGroupIndex","calculateEndDate","viewDataGenerator","getInterval","_attachTablesEvents","element","_attachDragEvents","_attachPointerEvents","_detachDragEvents","checkDropTarget","_isOutsideScrollable","preventDefaultDragging","removeDroppableCellClass","_this$dragBehavior","_this$dragBehavior$dr","dragBehavior","dragBetweenComponentsPromise","removeDroppableClasses","then","isPointerDown","getDocument","removeClass","getWorkArea","_$dateTableContainer","getScrollable","getScrollableScrollTop","scrollTop","getGroupedScrollableScrollTop","getScrollableScrollLeft","scrollLeft","getScrollableOuterWidth","scrollWidth","getScrollableContainer","container","getHeaderPanelHeight","_$timePanel","get","getWorkSpaceLeftOffset","getLeftOffset","_getCellCoordinatesByIndex","Math","floor","_getDateGenerationOptions","_this$viewDataProvide","isWorkView","interval","startViewDate","_getIntervalBetween","firstViewDate","startDayTime","timeZoneOffset","getTimezonesDifference","fullInterval","getTime","days","_getDaysOfInterval","weekendsCount","_getWeekendsCount","hiddenInterval","visibleDayDuration","getVisibleDayDuration","_updateIndex","_getDroppableCell","_getDateTables","find","_getWorkSpaceWidth","totalWidth","groupTableWidth","_getCellByCoordinates","inAllDayRow","indexes","prepareCellIndexes","position","eq","_getCells","cellClass","i","cells","toArray","_getFirstAndLastDataTableCell","selector","$cells","_getAllCells","_getGroupHeaderCells","_getScrollCoordinates","hours","minutes","Date","setHours","findGlobalCellPosition","calculateCoordinatesByDataAndPosition","$dateTableScrollableElement","scrollableSize","window","isTargetInAllDayPanel","closest","isOutsideHorizontalScrollable","pageX","scrollX","isOutsideVerticalScrollable","pageY","scrollY","setCellDataCache","JSON","stringify","set","setCellDataCacheAlias","appointment","geometry","aliasKey","keepOriginalHours","_filterCellDataFields","currentCell","_getDataByCell","_getVirtualRowOffset","virtualRowOffset","_getVirtualCellOffset","virtualCellOffset","parent","topVirtualRowsCount","leftVirtualCellsCount","getCellIndexByDate","timeInterval","startViewDateOffset","dateTimeStamp","getDroppableCellIndex","$droppableCell","$row","getDataByDroppableCell","getDateRange","getEndViewDateByEndDayHour","getRoundedCellWidth","startIndex","cellCount","elementWidth","getDOMElementsMetaData","getAllDayOffset","getCellIndexByCoordinates","coordinates","cellHeight","topIndex","leftIndex","getEndViewDate","getLastCellEndDate","getLastViewDateByEndDayHour","getGroupBounds","groupBounds","getGroupBoundsVertical","getGroupBoundsHorizontal","getGroupBoundsRtlCorrection","$firstAndLastCells","getGroupBoundsOffset","groupedDataMap","right","needRecalculateResizableArea","getCellDataByCoordinates","cellIndex","getVisibleBounds","$scrollable","scrolledCellCount","bottom","updateScrollPosition","newDate","createDate","path","needUpdateScrollPosition","_getCellsInViewport","time","trimmedTime","trimTime","currentResult","cellStartDate","cellEndDate","cellGroupIndex","cellStartTime","cellEndTime","totalColumnCount","scrollableScrollTop","scrollableScrollLeft","fullScrolledRowCount","scrolledRowCount","fullScrolledColumnCount","scrolledColumnCount","rowCount","columnCount","each","push","scrollToTime","_isValidScrollDate","scrollable","scrollBy","throwWarning","isScrollToAllDay","getHours","getMinutes","offset","scrollableHeight","scrollableWidth","xShift","yShift","setTimeout","min","max","log","needApplyCollectorOffset","$cellElement","isVerticalGrouping","_getTimePanelCells","_getRDateTableProps","viewData","dataCellTemplate","addDateTableClass","addVerticalSizesClassToRows","selectedCellData","correctedSelectedCellData","_ref2","dateTableCellsMeta","_getDateTableDOMElementsInfo","allDayPanelCellsMeta","_getAllDayPanelDOMElementsInfo","dateTableCells","dateTable","_getDateTable","dateTableRect","columnsCount","getColumnsCount","_addCellMetaData","allDayCells","allDayAppointmentContainer","allDayPanelRect","cellMetaDataArray","parentRect","cellRect","_oldRender_getAllDayCellData","validColumnIndex","getDateByCellIndices","validGroupIndex","data","groupsArray","renderRWorkSpace","componentsToRender","components","header","timePanel","allDayPanel","renderRHeaderPanel","renderRTimeTable","renderRDateTable","renderRAllDayPanel","renovation","renderComponent","renderRGroupPanel","resourceCellTemplate","className","groupPanelData","getGroupPanelData","_attachGroupCountClass","_detachGroupCountClass","_this$virtualScrollin","_toggleAllDayVisibility","horizontalVirtualScrolling","timePanelData","timeCellTemplate","isRenderDateHeader","dateHeaderData","dateCellTemplate","initDragBehavior","scheduler","_createDragBehavior","getAllDayContainer","getItemData","itemElement","appointments","_getItemData","getItemSettings","$itemElement","_createDragBehaviorBase","addTo","createDragBehaviorConfig","_dispose","_getDefaultOptions","activeStateEnabled","hoverStateEnabled","showAllDayPanel","allDayExpanded","onCellClick","crossScrollingEnabled","allowMultipleCellSelection","indicatorTime","indicatorUpdateInterval","shadeUntilCurrentTime","scrolling","mode","allDayPanelMode","renovateRender","draggingMode","onScrollEnd","getHeaderHeight","onRenderAppointments","onShowAllDayPanel","onSelectedCellsClick","schedulerHeight","schedulerWidth","_optionChanged","_cleanWorkSpace","_cleanView","_removeAllDayElements","_initGrouping","repaint","_initGroupedStrategy","_createAllDayPanelElements","_toggleGroupByDateClass","renderWorkSpace","_changeAllDayVisibility","_toggleWorkSpaceCountClass","_toggleHorizontalScrollClass","updateShowAllDayPanel","updateAppointments","updateDimensions","isHiddenAllDayPanel","getSchedulerHeight","getSchedulerWidth","getViewHeight","getViewWidth","getWindowHeight","innerHeight","getWindowWidth","innerWidth","getScrolling","createAction","updateRender","updateGrid","_toggleGroupedClass","_toggleWorkSpaceWithOddCells","_renderView","_init","_activeStateUnit","_initPositionHelper","positionHelper","viewStartDayHour","viewEndDayHour","groupedStrategy","rtlEnabled","getDOMMetaDataCallback","_toggleGroupingDirectionClass","isVerticalOrientation","orientation","Strategy","toggleClass","_getDateTableCellClass","addAdditionalGroupCellClasses","_getGroupHeaderClass","_initWorkSpaceUnits","_$headerPanelContainer","_$headerTablesContainer","_$fixedContainer","_$allDayContainer","_$dateTableScrollableContent","_$sidebarScrollableContent","_initAllDayPanelElements","_allDayTitles","_allDayTables","_allDayPanels","_initDateTableScrollable","$dateTableScrollable","_createComponent","_createWorkSpaceElements","_createWorkSpaceScrollableElements","_createWorkSpaceStaticElements","append","$content","_this$_$allDayPanel","_appendHeaderPanelEmptyCellIfNecessary","_$flexContainer","_createHeaderScrollable","_createSidebarScrollable","_this$_$allDayPanel2","$headerScrollable","$timePanelScrollable","_addTableClass","$el","_initMarkup","_render","_renderDateTimeIndication","_setIndicationUpdateInterval","_applyCellTemplates","_renderGroupHeader","_shader","renderOptions","_refreshDateTimeIndication","forEach","getGroupCountClass","_getDateHeaderTemplate","isUpdateScrollable","add","remove","_this$_shader","_cleanTableWidths","clearSelectedAndFocusedCells","_this$_$allDayTable","_this$_$sidebarTable","empty","_$sidebarTable","clean","_interval","_clean","_disposeRenovatedComponents","_this$renovatedAllDay","_this$renovatedDateTa","_this$renovatedTimePa","_this$renovatedGroupP","_this$renovatedHeader","renovatedAllDayPanel","renovatedDateTable","renovatedTimePanel","renovatedGroupPanel","renovatedHeaderPanel","getGroupedStrategy","getFixedContainer","_renderGrid","_this$dragBehavior2","updateDragSource","$allDayTitle","text","format","isGenerateNewViewData","_renderDateHeader","_renderTimePanel","_renderGroupAllDayPanel","_renderDateTable","_renderAllDayPanel","$container","cellTemplates","groupRows","_makeGroupRows","elements","templates","template","tableCreatorStrategy","VERTICAL","HORIZONTAL","makeGroupedTable","groupHeaderRowClass","groupRowClass","groupHeaderClass","groupHeaderContentClass","$headerRow","count","cellTemplate","repeatCount","templateCallbacks","templateIndex","_renderDateHeaderTemplate","colSpan","_columnIndex","_templateIndex","attr","prepend","panelCellIndex","validTemplateIndex","completeDateHeaderMap","_getHeaderPanelCellClass","render","model","_getGroupsForDateHeaderTemplate","indexMultiplier","_renderTableBody","_getAllDayPanelCellClass","rowClass","j","calculateTimeCellRepeatCount","getData","field","allDayPanelsCount","ceil","validRowIndex","completeTimePanelMap","_getTimeCellClass","getCellText","getCellDate","allDayElements","_insertAllDayRowsIntoDateTable","getTemplateData","viewDataMap","dateTableMap","fullValue","insertAllDayRowsIntoDateTable","delayCellTemplateRendering","makeTable","enableDefaultDragging","disableDefaultDragging","getDroppableCell","getDateTables","state","dragElement","itemData","isItemDisabled","getter","cursorOffset","isSetCursorOffset","$dragElement","x","y","dragTemplate","onDragStart","canceled","cancel","component","_appointments","settings","initialPosition","isCompact","appointmentIndex","virtual","items","_renderItem","itemSettings","onDragMove","appointmentWidth","isWideAppointment","dragElementContainer","boundingRect","newX","newY","elementsFromPoint","dateTables","droppableCell","el","classList","isCurrentSchedulerElement","contains","oldDroppableCell","onDragEnd","_state$dragElement"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (esm/ui/scheduler/workspaces/ui.scheduler.work_space.js)\r\n * Version: 22.1.6\r\n * Build date: Tue Oct 18 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\r\nimport {\r\n    setWidth,\r\n    getOuterHeight,\r\n    getOuterWidth,\r\n    setOuterHeight,\r\n    getHeight,\r\n    getWidth\r\n} from \"../../../core/utils/size\";\r\nimport $ from \"../../../core/renderer\";\r\nimport domAdapter from \"../../../core/dom_adapter\";\r\nimport eventsEngine from \"../../../events/core/events_engine\";\r\nimport dateUtils from \"../../../core/utils/date\";\r\nimport {\r\n    getWindow,\r\n    hasWindow\r\n} from \"../../../core/utils/window\";\r\nimport {\r\n    getPublicElement\r\n} from \"../../../core/element\";\r\nimport {\r\n    extend\r\n} from \"../../../core/utils/extend\";\r\nimport {\r\n    getBoundingRect\r\n} from \"../../../core/utils/position\";\r\nimport messageLocalization from \"../../../localization/message\";\r\nimport {\r\n    noop\r\n} from \"../../../core/utils/common\";\r\nimport {\r\n    isDefined\r\n} from \"../../../core/utils/type\";\r\nimport {\r\n    addNamespace,\r\n    isMouseEvent\r\n} from \"../../../events/utils/index\";\r\nimport pointerEvents from \"../../../events/pointer\";\r\nimport errors from \"../../widget/ui.errors\";\r\nimport {\r\n    name as clickEventName\r\n} from \"../../../events/click\";\r\nimport {\r\n    name as contextMenuEventName\r\n} from \"../../../events/contextmenu\";\r\nimport {\r\n    enter as dragEventEnter,\r\n    leave as dragEventLeave,\r\n    drop as dragEventDrop\r\n} from \"../../../events/drag\";\r\nimport Scrollable from \"../../scroll_view/ui.scrollable\";\r\nimport HorizontalGroupedStrategy from \"./ui.scheduler.work_space.grouped.strategy.horizontal\";\r\nimport VerticalGroupedStrategy from \"./ui.scheduler.work_space.grouped.strategy.vertical\";\r\nimport tableCreatorModule from \"../table_creator\";\r\nvar {\r\n    tableCreator: tableCreator\r\n} = tableCreatorModule;\r\nimport VerticalShader from \"../shaders/ui.scheduler.current_time_shader.vertical\";\r\nimport AppointmentDragBehavior from \"../appointmentDragBehavior\";\r\nimport {\r\n    APPOINTMENT_SETTINGS_KEY\r\n} from \"../constants\";\r\nimport {\r\n    FIXED_CONTAINER_CLASS,\r\n    VIRTUAL_CELL_CLASS,\r\n    TIME_PANEL_CLASS,\r\n    DATE_TABLE_CLASS,\r\n    DATE_TABLE_ROW_CLASS,\r\n    GROUP_ROW_CLASS,\r\n    GROUP_HEADER_CONTENT_CLASS,\r\n    VERTICAL_GROUP_COUNT_CLASSES\r\n} from \"../classes\";\r\nimport WidgetObserver from \"../base/widgetObserver\";\r\nimport {\r\n    resetPosition,\r\n    locate\r\n} from \"../../../animation/translator\";\r\nimport {\r\n    VirtualScrollingDispatcher,\r\n    VirtualScrollingRenderer\r\n} from \"./ui.scheduler.virtual_scrolling\";\r\nimport ViewDataProvider from \"./view_model/view_data_provider\";\r\nimport dxrDateTableLayout from \"../../../renovation/ui/scheduler/workspaces/base/date_table/layout.j\";\r\nimport dxrAllDayPanelTable from \"../../../renovation/ui/scheduler/workspaces/base/date_table/all_day_panel/table.j\";\r\nimport dxrAllDayPanelTitle from \"../../../renovation/ui/scheduler/workspaces/base/date_table/all_day_panel/title.j\";\r\nimport dxrTimePanelTableLayout from \"../../../renovation/ui/scheduler/workspaces/base/time_panel/layout.j\";\r\nimport dxrGroupPanel from \"../../../renovation/ui/scheduler/workspaces/base/group_panel/group_panel.j\";\r\nimport dxrDateHeader from \"../../../renovation/ui/scheduler/workspaces/base/header_panel/layout.j\";\r\nimport CellsSelectionState from \"./cells_selection_state\";\r\nimport {\r\n    Cache\r\n} from \"./cache\";\r\nimport {\r\n    CellsSelectionController\r\n} from \"./cells_selection_controller\";\r\nimport {\r\n    calculateViewStartDate,\r\n    getViewStartByOptions,\r\n    validateDayHours,\r\n    getStartViewDateTimeOffset,\r\n    isDateAndTimeView,\r\n    calculateIsGroupedAllDayPanel,\r\n    getCellDuration\r\n} from \"../../../renovation/ui/scheduler/view_model/to_test/views/utils/base\";\r\nimport {\r\n    createResourcesTree,\r\n    getCellGroups,\r\n    getGroupsObjectFromGroupsArray,\r\n    getGroupCount\r\n} from \"../resources/utils\";\r\nimport {\r\n    ScrollSemaphore\r\n} from \"../../../renovation/ui/scheduler/utils/semaphore/scrollSemaphore\";\r\nimport {\r\n    getCellWidth,\r\n    getCellHeight,\r\n    getAllDayHeight,\r\n    getMaxAllowedPosition,\r\n    PositionHelper\r\n} from \"./helpers/positionHelper\";\r\nimport {\r\n    utils\r\n} from \"../utils\";\r\nimport {\r\n    compileGetter\r\n} from \"../../../core/utils/data\";\r\nvar abstract = WidgetObserver.abstract;\r\nvar toMs = dateUtils.dateToMilliseconds;\r\nvar COMPONENT_CLASS = \"dx-scheduler-work-space\";\r\nvar GROUPED_WORKSPACE_CLASS = \"dx-scheduler-work-space-grouped\";\r\nvar VERTICAL_GROUPED_WORKSPACE_CLASS = \"dx-scheduler-work-space-vertical-grouped\";\r\nvar WORKSPACE_VERTICAL_GROUP_TABLE_CLASS = \"dx-scheduler-work-space-vertical-group-table\";\r\nvar WORKSPACE_WITH_BOTH_SCROLLS_CLASS = \"dx-scheduler-work-space-both-scrollbar\";\r\nvar WORKSPACE_WITH_COUNT_CLASS = \"dx-scheduler-work-space-count\";\r\nvar WORKSPACE_WITH_GROUP_BY_DATE_CLASS = \"dx-scheduler-work-space-group-by-date\";\r\nvar WORKSPACE_WITH_ODD_CELLS_CLASS = \"dx-scheduler-work-space-odd-cells\";\r\nvar TIME_PANEL_CELL_CLASS = \"dx-scheduler-time-panel-cell\";\r\nvar TIME_PANEL_ROW_CLASS = \"dx-scheduler-time-panel-row\";\r\nvar ALL_DAY_PANEL_CLASS = \"dx-scheduler-all-day-panel\";\r\nvar ALL_DAY_TABLE_CLASS = \"dx-scheduler-all-day-table\";\r\nvar ALL_DAY_CONTAINER_CLASS = \"dx-scheduler-all-day-appointments\";\r\nvar ALL_DAY_TITLE_CLASS = \"dx-scheduler-all-day-title\";\r\nvar ALL_DAY_TABLE_CELL_CLASS = \"dx-scheduler-all-day-table-cell\";\r\nvar ALL_DAY_TABLE_ROW_CLASS = \"dx-scheduler-all-day-table-row\";\r\nvar WORKSPACE_WITH_ALL_DAY_CLASS = \"dx-scheduler-work-space-all-day\";\r\nvar WORKSPACE_WITH_COLLAPSED_ALL_DAY_CLASS = \"dx-scheduler-work-space-all-day-collapsed\";\r\nvar WORKSPACE_WITH_MOUSE_SELECTION_CLASS = \"dx-scheduler-work-space-mouse-selection\";\r\nvar HORIZONTAL_SIZES_CLASS = \"dx-scheduler-cell-sizes-horizontal\";\r\nvar VERTICAL_SIZES_CLASS = \"dx-scheduler-cell-sizes-vertical\";\r\nvar HEADER_PANEL_CLASS = \"dx-scheduler-header-panel\";\r\nvar HEADER_PANEL_CELL_CLASS = \"dx-scheduler-header-panel-cell\";\r\nvar HEADER_ROW_CLASS = \"dx-scheduler-header-row\";\r\nvar GROUP_HEADER_CLASS = \"dx-scheduler-group-header\";\r\nvar DATE_TABLE_CELL_CLASS = \"dx-scheduler-date-table-cell\";\r\nvar DATE_TABLE_FOCUSED_CELL_CLASS = \"dx-scheduler-focused-cell\";\r\nvar VIRTUAL_ROW_CLASS = \"dx-scheduler-virtual-row\";\r\nvar DATE_TABLE_DROPPABLE_CELL_CLASS = \"dx-scheduler-date-table-droppable-cell\";\r\nvar SCHEDULER_HEADER_SCROLLABLE_CLASS = \"dx-scheduler-header-scrollable\";\r\nvar SCHEDULER_SIDEBAR_SCROLLABLE_CLASS = \"dx-scheduler-sidebar-scrollable\";\r\nvar SCHEDULER_DATE_TABLE_SCROLLABLE_CLASS = \"dx-scheduler-date-table-scrollable\";\r\nvar SCHEDULER_WORKSPACE_DXPOINTERDOWN_EVENT_NAME = addNamespace(pointerEvents.down, \"dxSchedulerWorkSpace\");\r\nvar DragEventNames = {\r\n    ENTER: addNamespace(dragEventEnter, \"dxSchedulerDateTable\"),\r\n    DROP: addNamespace(dragEventDrop, \"dxSchedulerDateTable\"),\r\n    LEAVE: addNamespace(dragEventLeave, \"dxSchedulerDateTable\")\r\n};\r\nvar SCHEDULER_CELL_DXCLICK_EVENT_NAME = addNamespace(clickEventName, \"dxSchedulerDateTable\");\r\nvar SCHEDULER_CELL_DXPOINTERDOWN_EVENT_NAME = addNamespace(pointerEvents.down, \"dxSchedulerDateTable\");\r\nvar SCHEDULER_CELL_DXPOINTERUP_EVENT_NAME = addNamespace(pointerEvents.up, \"dxSchedulerDateTable\");\r\nvar SCHEDULER_CELL_DXPOINTERMOVE_EVENT_NAME = addNamespace(pointerEvents.move, \"dxSchedulerDateTable\");\r\nvar CELL_DATA = \"dxCellData\";\r\nvar DATE_TABLE_MIN_CELL_WIDTH = 75;\r\nvar DAY_MS = toMs(\"day\");\r\nvar HOUR_MS = toMs(\"hour\");\r\nvar DRAG_AND_DROP_SELECTOR = \".\".concat(DATE_TABLE_CLASS, \" td, .\").concat(ALL_DAY_TABLE_CLASS, \" td\");\r\nvar CELL_SELECTOR = \".\".concat(DATE_TABLE_CELL_CLASS, \", .\").concat(ALL_DAY_TABLE_CELL_CLASS);\r\nvar CELL_INDEX_CALCULATION_EPSILON = .05;\r\nclass SchedulerWorkSpace extends WidgetObserver {\r\n    get viewDataProvider() {\r\n        if (!this._viewDataProvider) {\r\n            this._viewDataProvider = new ViewDataProvider(this.type)\r\n        }\r\n        return this._viewDataProvider\r\n    }\r\n    get cache() {\r\n        if (!this._cache) {\r\n            this._cache = new Cache\r\n        }\r\n        return this._cache\r\n    }\r\n    get cellsSelectionState() {\r\n        if (!this._cellsSelectionState) {\r\n            this._cellsSelectionState = new CellsSelectionState(this.viewDataProvider);\r\n            var selectedCellsOption = this.option(\"selectedCellData\");\r\n            if ((null === selectedCellsOption || void 0 === selectedCellsOption ? void 0 : selectedCellsOption.length) > 0) {\r\n                var validSelectedCells = selectedCellsOption.map(selectedCell => {\r\n                    var groups = selectedCell.groups;\r\n                    if (!groups || 0 === this._getGroupCount()) {\r\n                        return _extends({}, selectedCell, {\r\n                            groupIndex: 0\r\n                        })\r\n                    }\r\n                    var groupIndex = this._getGroupIndexByResourceId(groups);\r\n                    return _extends({}, selectedCell, {\r\n                        groupIndex: groupIndex\r\n                    })\r\n                });\r\n                this._cellsSelectionState.setSelectedCellsByData(validSelectedCells)\r\n            }\r\n        }\r\n        return this._cellsSelectionState\r\n    }\r\n    get cellsSelectionController() {\r\n        if (!this._cellsSelectionController) {\r\n            this._cellsSelectionController = new CellsSelectionController\r\n        }\r\n        return this._cellsSelectionController\r\n    }\r\n    get isAllDayPanelVisible() {\r\n        return this._isShowAllDayPanel() && this.supportAllDayRow()\r\n    }\r\n    get verticalGroupTableClass() {\r\n        return WORKSPACE_VERTICAL_GROUP_TABLE_CLASS\r\n    }\r\n    get viewDirection() {\r\n        return \"vertical\"\r\n    }\r\n    get renovatedHeaderPanelComponent() {\r\n        return dxrDateHeader\r\n    }\r\n    get timeZoneCalculator() {\r\n        return this.option(\"timeZoneCalculator\")\r\n    }\r\n    get isDefaultDraggingMode() {\r\n        return \"default\" === this.option(\"draggingMode\")\r\n    }\r\n    _supportedKeys() {\r\n        var clickHandler = function(e) {\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n            var selectedCells = this.cellsSelectionState.getSelectedCells();\r\n            if (null !== selectedCells && void 0 !== selectedCells && selectedCells.length) {\r\n                var selectedCellsElement = selectedCells.map(cellData => this._getCellByData(cellData)).filter(cell => !!cell);\r\n                e.target = selectedCellsElement;\r\n                this._showPopup = true;\r\n                this._cellClickAction({\r\n                    event: e,\r\n                    cellElement: $(selectedCellsElement),\r\n                    cellData: selectedCells[0]\r\n                })\r\n            }\r\n        };\r\n        var onArrowPressed = (e, key) => {\r\n            var _this$cellsSelectionS;\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n            var focusedCellData = null === (_this$cellsSelectionS = this.cellsSelectionState.focusedCell) || void 0 === _this$cellsSelectionS ? void 0 : _this$cellsSelectionS.cellData;\r\n            if (focusedCellData) {\r\n                var isAllDayPanelCell = focusedCellData.allDay && !this._isVerticalGroupedWorkSpace();\r\n                var isMultiSelection = e.shiftKey;\r\n                var isMultiSelectionAllowed = this.option(\"allowMultipleCellSelection\");\r\n                var isRTL = this._isRTL();\r\n                var groupCount = this._getGroupCount();\r\n                var isGroupedByDate = this.isGroupedByDate();\r\n                var isHorizontalGrouping = this._isHorizontalGroupedWorkSpace();\r\n                var focusedCellPosition = this.viewDataProvider.findCellPositionInMap(_extends({}, focusedCellData, {\r\n                    isAllDay: focusedCellData.allDay\r\n                }));\r\n                var edgeIndices = isHorizontalGrouping && isMultiSelection && !isGroupedByDate ? this.viewDataProvider.getGroupEdgeIndices(focusedCellData.groupIndex, isAllDayPanelCell) : this.viewDataProvider.getViewEdgeIndices(isAllDayPanelCell);\r\n                var nextCellData = this.cellsSelectionController.handleArrowClick({\r\n                    focusedCellPosition: focusedCellPosition,\r\n                    edgeIndices: edgeIndices,\r\n                    isRTL: isRTL,\r\n                    isGroupedByDate: isGroupedByDate,\r\n                    groupCount: groupCount,\r\n                    isMultiSelection: isMultiSelection,\r\n                    isMultiSelectionAllowed: isMultiSelectionAllowed,\r\n                    viewType: this.type,\r\n                    key: key,\r\n                    getCellDataByPosition: this.viewDataProvider.getCellData.bind(this.viewDataProvider),\r\n                    isAllDayPanelCell: isAllDayPanelCell,\r\n                    focusedCellData: focusedCellData\r\n                });\r\n                this._processNextSelectedCell(nextCellData, focusedCellData, isMultiSelection && isMultiSelectionAllowed)\r\n            }\r\n        };\r\n        return extend(super._supportedKeys(), {\r\n            enter: clickHandler,\r\n            space: clickHandler,\r\n            downArrow: e => {\r\n                onArrowPressed(e, \"down\")\r\n            },\r\n            upArrow: e => {\r\n                onArrowPressed(e, \"up\")\r\n            },\r\n            rightArrow: e => {\r\n                onArrowPressed(e, \"right\")\r\n            },\r\n            leftArrow: e => {\r\n                onArrowPressed(e, \"left\")\r\n            }\r\n        })\r\n    }\r\n    _isRTL() {\r\n        return this.option(\"rtlEnabled\")\r\n    }\r\n    _moveToCell($cell, isMultiSelection) {\r\n        if (!isDefined($cell) || !$cell.length) {\r\n            return\r\n        }\r\n        var isMultiSelectionAllowed = this.option(\"allowMultipleCellSelection\");\r\n        var currentCellData = this._getFullCellData($cell);\r\n        var focusedCellData = this.cellsSelectionState.focusedCell.cellData;\r\n        var nextFocusedCellData = this.cellsSelectionController.moveToCell({\r\n            isMultiSelection: isMultiSelection,\r\n            isMultiSelectionAllowed: isMultiSelectionAllowed,\r\n            currentCellData: currentCellData,\r\n            focusedCellData: focusedCellData,\r\n            isVirtualCell: $cell.hasClass(VIRTUAL_CELL_CLASS)\r\n        });\r\n        this._processNextSelectedCell(nextFocusedCellData, focusedCellData, isMultiSelectionAllowed && isMultiSelection)\r\n    }\r\n    _processNextSelectedCell(nextCellData, focusedCellData, isMultiSelection) {\r\n        var nextCellPosition = this.viewDataProvider.findCellPositionInMap({\r\n            startDate: nextCellData.startDate,\r\n            groupIndex: nextCellData.groupIndex,\r\n            isAllDay: nextCellData.allDay,\r\n            index: nextCellData.index\r\n        });\r\n        if (!this.viewDataProvider.isSameCell(focusedCellData, nextCellData)) {\r\n            var $cell = nextCellData.allDay && !this._isVerticalGroupedWorkSpace() ? this._dom_getAllDayPanelCell(nextCellPosition.columnIndex) : this._dom_getDateCell(nextCellPosition);\r\n            var isNextCellAllDay = nextCellData.allDay;\r\n            this._setSelectedCellsStateAndUpdateSelection(isNextCellAllDay, nextCellPosition, isMultiSelection, $cell);\r\n            this._dateTableScrollable.scrollToElement($cell)\r\n        }\r\n    }\r\n    _setSelectedCellsStateAndUpdateSelection(isAllDay, cellPosition, isMultiSelection, $nextFocusedCell) {\r\n        var nextCellCoordinates = {\r\n            rowIndex: cellPosition.rowIndex,\r\n            columnIndex: cellPosition.columnIndex,\r\n            allDay: isAllDay\r\n        };\r\n        this.cellsSelectionState.setFocusedCell(nextCellCoordinates.rowIndex, nextCellCoordinates.columnIndex, isAllDay);\r\n        if (isMultiSelection) {\r\n            this.cellsSelectionState.setSelectedCells(nextCellCoordinates)\r\n        } else {\r\n            this.cellsSelectionState.setSelectedCells(nextCellCoordinates, nextCellCoordinates)\r\n        }\r\n        this.updateCellsSelection();\r\n        this._updateSelectedCellDataOption(this.cellsSelectionState.getSelectedCells(), $nextFocusedCell)\r\n    }\r\n    _hasAllDayClass($cell) {\r\n        return $cell.hasClass(ALL_DAY_TABLE_CELL_CLASS)\r\n    }\r\n    _focusInHandler(e) {\r\n        if ($(e.target).is(this._focusTarget()) && false !== this._isCellClick) {\r\n            delete this._isCellClick;\r\n            delete this._contextMenuHandled;\r\n            super._focusInHandler.apply(this, arguments);\r\n            this.cellsSelectionState.restoreSelectedAndFocusedCells();\r\n            if (!this.cellsSelectionState.focusedCell) {\r\n                var cellCoordinates = {\r\n                    columnIndex: 0,\r\n                    rowIndex: 0,\r\n                    allDay: this._isVerticalGroupedWorkSpace() && this.isAllDayPanelVisible\r\n                };\r\n                this.cellsSelectionState.setFocusedCell(cellCoordinates.rowIndex, cellCoordinates.columnIndex, cellCoordinates.allDay);\r\n                this.cellsSelectionState.setSelectedCells(cellCoordinates, cellCoordinates)\r\n            }\r\n            this.updateCellsSelection();\r\n            this._updateSelectedCellDataOption(this.cellsSelectionState.getSelectedCells())\r\n        }\r\n    }\r\n    _focusOutHandler() {\r\n        super._focusOutHandler.apply(this, arguments);\r\n        if (!this._contextMenuHandled && !this._disposed) {\r\n            this.cellsSelectionState.releaseSelectedAndFocusedCells();\r\n            this.viewDataProvider.updateViewData(this.generateRenderOptions());\r\n            this.updateCellsSelection()\r\n        }\r\n    }\r\n    _focusTarget() {\r\n        return this.$element()\r\n    }\r\n    _isVerticalGroupedWorkSpace() {\r\n        return !!this.option(\"groups\").length && \"vertical\" === this.option(\"groupOrientation\")\r\n    }\r\n    _isHorizontalGroupedWorkSpace() {\r\n        return !!this.option(\"groups\").length && \"horizontal\" === this.option(\"groupOrientation\")\r\n    }\r\n    _isWorkSpaceWithCount() {\r\n        return this.option(\"intervalCount\") > 1\r\n    }\r\n    _isWorkspaceWithOddCells() {\r\n        return .5 === this.option(\"hoursInterval\") && !this.isVirtualScrolling()\r\n    }\r\n    _getRealGroupOrientation() {\r\n        return this._isVerticalGroupedWorkSpace() ? \"vertical\" : \"horizontal\"\r\n    }\r\n    createRAllDayPanelElements() {\r\n        this._$allDayPanel = $(\"<div>\").addClass(ALL_DAY_PANEL_CLASS);\r\n        this._$allDayTitle = $(\"<div>\").appendTo(this._$headerPanelEmptyCell)\r\n    }\r\n    _dateTableScrollableConfig() {\r\n        var config = {\r\n            useKeyboard: false,\r\n            bounceEnabled: false,\r\n            updateManually: true,\r\n            onScroll: () => {\r\n                var _this$_groupedStrateg;\r\n                null === (_this$_groupedStrateg = this._groupedStrategy.cache) || void 0 === _this$_groupedStrateg ? void 0 : _this$_groupedStrateg.clear()\r\n            }\r\n        };\r\n        if (this._needCreateCrossScrolling()) {\r\n            config = extend(config, this._createCrossScrollingConfig(config))\r\n        }\r\n        if (this.isVirtualScrolling() && (this.virtualScrollingDispatcher.horizontalScrollingAllowed || this.virtualScrollingDispatcher.height)) {\r\n            var currentOnScroll = config.onScroll;\r\n            config = _extends({}, config, {\r\n                onScroll: e => {\r\n                    null === currentOnScroll || void 0 === currentOnScroll ? void 0 : currentOnScroll(e);\r\n                    this.virtualScrollingDispatcher.handleOnScrollEvent(null === e || void 0 === e ? void 0 : e.scrollOffset)\r\n                }\r\n            })\r\n        }\r\n        return config\r\n    }\r\n    _createCrossScrollingConfig(currentConfig) {\r\n        var config = {};\r\n        config.direction = \"both\";\r\n        var currentOnScroll = currentConfig.onScroll;\r\n        config.onScroll = e => {\r\n            currentOnScroll();\r\n            this._dataTableSemaphore.take(e.scrollOffset);\r\n            if (this._sideBarSemaphore.isFree(e.scrollOffset)) {\r\n                var _this$_sidebarScrolla;\r\n                null === (_this$_sidebarScrolla = this._sidebarScrollable) || void 0 === _this$_sidebarScrolla ? void 0 : _this$_sidebarScrolla.scrollTo({\r\n                    top: e.scrollOffset.top\r\n                })\r\n            }\r\n            if (this._headerSemaphore.isFree(e.scrollOffset)) {\r\n                var _this$_headerScrollab;\r\n                null === (_this$_headerScrollab = this._headerScrollable) || void 0 === _this$_headerScrollab ? void 0 : _this$_headerScrollab.scrollTo({\r\n                    left: e.scrollOffset.left\r\n                })\r\n            }\r\n            this._dataTableSemaphore.release()\r\n        };\r\n        config.onEnd = () => {\r\n            this.option(\"onScrollEnd\")()\r\n        };\r\n        return config\r\n    }\r\n    _headerScrollableConfig() {\r\n        var config = {\r\n            useKeyboard: false,\r\n            showScrollbar: \"never\",\r\n            direction: \"horizontal\",\r\n            useNative: false,\r\n            updateManually: true,\r\n            bounceEnabled: false,\r\n            onScroll: e => {\r\n                this._headerSemaphore.take(e.scrollOffset);\r\n                this._dataTableSemaphore.isFree(e.scrollOffset) && this._dateTableScrollable.scrollTo({\r\n                    left: e.scrollOffset.left\r\n                });\r\n                this._headerSemaphore.release()\r\n            }\r\n        };\r\n        return config\r\n    }\r\n    _visibilityChanged(visible) {\r\n        this.cache.clear();\r\n        if (visible) {\r\n            this._updateGroupTableHeight()\r\n        }\r\n        if (visible && this._needCreateCrossScrolling()) {\r\n            this._setTableSizes()\r\n        }\r\n    }\r\n    _setTableSizes() {\r\n        this.cache.clear();\r\n        this._attachTableClasses();\r\n        var cellWidth = this.getCellWidth();\r\n        if (cellWidth < this.getCellMinWidth()) {\r\n            cellWidth = this.getCellMinWidth()\r\n        }\r\n        var minWidth = this.getWorkSpaceMinWidth();\r\n        var groupCount = this._getGroupCount();\r\n        var totalCellCount = this._getTotalCellCount(groupCount);\r\n        var width = cellWidth * totalCellCount;\r\n        if (width < minWidth) {\r\n            width = minWidth\r\n        }\r\n        setWidth(this._$headerPanel, width);\r\n        setWidth(this._$dateTable, width);\r\n        if (this._$allDayTable) {\r\n            setWidth(this._$allDayTable, width)\r\n        }\r\n        this._attachHeaderTableClasses();\r\n        this._updateGroupTableHeight();\r\n        this._updateScrollable()\r\n    }\r\n    getWorkSpaceMinWidth() {\r\n        return this._groupedStrategy.getWorkSpaceMinWidth()\r\n    }\r\n    _dimensionChanged() {\r\n        if (!this._isVisible()) {\r\n            return\r\n        }\r\n        if (this.option(\"crossScrollingEnabled\")) {\r\n            this._setTableSizes()\r\n        }\r\n        this.updateHeaderEmptyCellWidth();\r\n        this._updateScrollable();\r\n        this.cache.clear()\r\n    }\r\n    _needCreateCrossScrolling() {\r\n        return this.option(\"crossScrollingEnabled\")\r\n    }\r\n    _getElementClass() {\r\n        return noop()\r\n    }\r\n    _getRowCount() {\r\n        return this.viewDataProvider.getRowCount({\r\n            intervalCount: this.option(\"intervalCount\"),\r\n            currentDate: this.option(\"currentDate\"),\r\n            viewType: this.type,\r\n            hoursInterval: this.option(\"hoursInterval\"),\r\n            startDayHour: this.option(\"startDayHour\"),\r\n            endDayHour: this.option(\"endDayHour\")\r\n        })\r\n    }\r\n    _getCellCount() {\r\n        return this.viewDataProvider.getCellCount({\r\n            intervalCount: this.option(\"intervalCount\"),\r\n            currentDate: this.option(\"currentDate\"),\r\n            viewType: this.type,\r\n            hoursInterval: this.option(\"hoursInterval\"),\r\n            startDayHour: this.option(\"startDayHour\"),\r\n            endDayHour: this.option(\"endDayHour\")\r\n        })\r\n    }\r\n    isRenovatedRender() {\r\n        return this.renovatedRenderSupported() && this.option(\"renovateRender\")\r\n    }\r\n    _isVirtualModeOn() {\r\n        return \"virtual\" === this.option(\"scrolling.mode\")\r\n    }\r\n    isVirtualScrolling() {\r\n        return this.isRenovatedRender() && this._isVirtualModeOn()\r\n    }\r\n    _initVirtualScrolling() {\r\n        if (this.virtualScrollingDispatcher) {\r\n            this.virtualScrollingDispatcher.dispose();\r\n            this.virtualScrollingDispatcher = null\r\n        }\r\n        this.virtualScrollingDispatcher = new VirtualScrollingDispatcher(this._getVirtualScrollingDispatcherOptions());\r\n        this.virtualScrollingDispatcher.attachScrollableEvents();\r\n        this.renderer = new VirtualScrollingRenderer(this)\r\n    }\r\n    onDataSourceChanged() {}\r\n    isGroupedAllDayPanel() {\r\n        return calculateIsGroupedAllDayPanel(this.option(\"groups\"), this.option(\"groupOrientation\"), this.isAllDayPanelVisible)\r\n    }\r\n    generateRenderOptions(isProvideVirtualCellsWidth) {\r\n        var _this$_getToday;\r\n        var groupCount = this._getGroupCount();\r\n        var groupOrientation = groupCount > 0 ? this.option(\"groupOrientation\") : this._getDefaultGroupStrategy();\r\n        var options = _extends({\r\n            groupByDate: this.option(\"groupByDate\"),\r\n            startRowIndex: 0,\r\n            startCellIndex: 0,\r\n            groupOrientation: groupOrientation,\r\n            today: null === (_this$_getToday = this._getToday) || void 0 === _this$_getToday ? void 0 : _this$_getToday.call(this),\r\n            groups: this.option(\"groups\"),\r\n            isProvideVirtualCellsWidth: isProvideVirtualCellsWidth,\r\n            isAllDayPanelVisible: this.isAllDayPanelVisible,\r\n            selectedCells: this.cellsSelectionState.getSelectedCells(),\r\n            focusedCell: this.cellsSelectionState.focusedCell,\r\n            headerCellTextFormat: this._getFormat(),\r\n            getDateForHeaderText: (_, date) => date,\r\n            startDayHour: this.option(\"startDayHour\"),\r\n            endDayHour: this.option(\"endDayHour\"),\r\n            cellDuration: this.getCellDuration(),\r\n            viewType: this.type,\r\n            intervalCount: this.option(\"intervalCount\"),\r\n            hoursInterval: this.option(\"hoursInterval\"),\r\n            currentDate: this.option(\"currentDate\"),\r\n            startDate: this.option(\"startDate\"),\r\n            firstDayOfWeek: this.option(\"firstDayOfWeek\")\r\n        }, this.virtualScrollingDispatcher.getRenderState());\r\n        return options\r\n    }\r\n    renovatedRenderSupported() {\r\n        return true\r\n    }\r\n    _updateGroupTableHeight() {\r\n        if (this._isVerticalGroupedWorkSpace() && hasWindow()) {\r\n            this._setHorizontalGroupHeaderCellsHeight()\r\n        }\r\n    }\r\n    updateHeaderEmptyCellWidth() {\r\n        if (hasWindow() && this._isRenderHeaderPanelEmptyCell()) {\r\n            var timePanelWidth = this.getTimePanelWidth();\r\n            var groupPanelWidth = this.getGroupTableWidth();\r\n            this._$headerPanelEmptyCell.css(\"width\", timePanelWidth + groupPanelWidth)\r\n        }\r\n    }\r\n    _isGroupsSpecified(resources) {\r\n        return this.option(\"groups\").length && resources\r\n    }\r\n    _getGroupIndexByResourceId(id) {\r\n        var groups = this.option(\"groups\");\r\n        var resourceTree = createResourcesTree(groups);\r\n        if (!resourceTree.length) {\r\n            return 0\r\n        }\r\n        return this._getGroupIndexRecursively(resourceTree, id)\r\n    }\r\n    _getGroupIndexRecursively(resourceTree, id) {\r\n        var currentKey = resourceTree[0].name;\r\n        var currentValue = id[currentKey];\r\n        return resourceTree.reduce((prevIndex, _ref) => {\r\n            var {\r\n                leafIndex: leafIndex,\r\n                value: value,\r\n                children: children\r\n            } = _ref;\r\n            var areValuesEqual = currentValue === value;\r\n            if (areValuesEqual && void 0 !== leafIndex) {\r\n                return leafIndex\r\n            }\r\n            if (areValuesEqual) {\r\n                return this._getGroupIndexRecursively(children, id)\r\n            }\r\n            return prevIndex\r\n        }, 0)\r\n    }\r\n    _getViewStartByOptions() {\r\n        return getViewStartByOptions(this.option(\"startDate\"), this.option(\"currentDate\"), this._getIntervalDuration(), this.option(\"startDate\") ? this._calculateViewStartDate() : void 0)\r\n    }\r\n    _getIntervalDuration() {\r\n        return this.viewDataProvider.getIntervalDuration(this.option(\"intervalCount\"))\r\n    }\r\n    _getHeaderDate() {\r\n        return this.getStartViewDate()\r\n    }\r\n    _calculateViewStartDate() {\r\n        return calculateViewStartDate(this.option(\"startDate\"))\r\n    }\r\n    _firstDayOfWeek() {\r\n        return this.viewDataProvider.getFirstDayOfWeek(this.option(\"firstDayOfWeek\"))\r\n    }\r\n    _attachEvents() {\r\n        this._createSelectionChangedAction();\r\n        this._attachClickEvent();\r\n        this._attachContextMenuEvent()\r\n    }\r\n    _attachClickEvent() {\r\n        var that = this;\r\n        var pointerDownAction = this._createAction((function(e) {\r\n            that._pointerDownHandler(e.event)\r\n        }));\r\n        this._createCellClickAction();\r\n        var cellSelector = \".\" + DATE_TABLE_CELL_CLASS + \",.\" + ALL_DAY_TABLE_CELL_CLASS;\r\n        var $element = this.$element();\r\n        eventsEngine.off($element, SCHEDULER_WORKSPACE_DXPOINTERDOWN_EVENT_NAME);\r\n        eventsEngine.off($element, SCHEDULER_CELL_DXCLICK_EVENT_NAME);\r\n        eventsEngine.on($element, SCHEDULER_WORKSPACE_DXPOINTERDOWN_EVENT_NAME, (function(e) {\r\n            if (isMouseEvent(e) && e.which > 1) {\r\n                e.preventDefault();\r\n                return\r\n            }\r\n            pointerDownAction({\r\n                event: e\r\n            })\r\n        }));\r\n        eventsEngine.on($element, SCHEDULER_CELL_DXCLICK_EVENT_NAME, cellSelector, (function(e) {\r\n            var $cell = $(e.target);\r\n            that._cellClickAction({\r\n                event: e,\r\n                cellElement: getPublicElement($cell),\r\n                cellData: that.getCellData($cell)\r\n            })\r\n        }))\r\n    }\r\n    _createCellClickAction() {\r\n        this._cellClickAction = this._createActionByOption(\"onCellClick\", {\r\n            afterExecute: e => this._cellClickHandler(e.args[0].event)\r\n        })\r\n    }\r\n    _createSelectionChangedAction() {\r\n        this._selectionChangedAction = this._createActionByOption(\"onSelectionChanged\")\r\n    }\r\n    _cellClickHandler() {\r\n        if (this._showPopup) {\r\n            delete this._showPopup;\r\n            this._handleSelectedCellsClick()\r\n        }\r\n    }\r\n    _pointerDownHandler(e) {\r\n        var $target = $(e.target);\r\n        if (!$target.hasClass(DATE_TABLE_CELL_CLASS) && !$target.hasClass(ALL_DAY_TABLE_CELL_CLASS)) {\r\n            this._isCellClick = false;\r\n            return\r\n        }\r\n        this._isCellClick = true;\r\n        if ($target.hasClass(DATE_TABLE_FOCUSED_CELL_CLASS)) {\r\n            this._showPopup = true\r\n        } else {\r\n            var cellCoordinates = this._getCoordinatesByCell($target);\r\n            var isAllDayCell = this._hasAllDayClass($target);\r\n            this._setSelectedCellsStateAndUpdateSelection(isAllDayCell, cellCoordinates, false, $target)\r\n        }\r\n    }\r\n    _handleSelectedCellsClick() {\r\n        var selectedCells = this.cellsSelectionState.getSelectedCells();\r\n        var firstCellData = selectedCells[0];\r\n        var lastCellData = selectedCells[selectedCells.length - 1];\r\n        var result = {\r\n            startDate: firstCellData.startDate,\r\n            endDate: lastCellData.endDate\r\n        };\r\n        if (void 0 !== lastCellData.allDay) {\r\n            result.allDay = lastCellData.allDay\r\n        }\r\n        this.option(\"onSelectedCellsClick\")(result, lastCellData.groups)\r\n    }\r\n    _attachContextMenuEvent() {\r\n        this._createContextMenuAction();\r\n        var cellSelector = \".\" + DATE_TABLE_CELL_CLASS + \",.\" + ALL_DAY_TABLE_CELL_CLASS;\r\n        var $element = this.$element();\r\n        var eventName = addNamespace(contextMenuEventName, this.NAME);\r\n        eventsEngine.off($element, eventName, cellSelector);\r\n        eventsEngine.on($element, eventName, cellSelector, this._contextMenuHandler.bind(this))\r\n    }\r\n    _contextMenuHandler(e) {\r\n        var $cell = $(e.target);\r\n        this._contextMenuAction({\r\n            event: e,\r\n            cellElement: getPublicElement($cell),\r\n            cellData: this.getCellData($cell)\r\n        });\r\n        this._contextMenuHandled = true\r\n    }\r\n    _createContextMenuAction() {\r\n        this._contextMenuAction = this._createActionByOption(\"onCellContextMenu\")\r\n    }\r\n    _getGroupHeaderContainer() {\r\n        if (this._isVerticalGroupedWorkSpace()) {\r\n            return this._$groupTable\r\n        }\r\n        return this._$thead\r\n    }\r\n    _getDateHeaderContainer() {\r\n        return this._$thead\r\n    }\r\n    _getCalculateHeaderCellRepeatCount() {\r\n        return this._groupedStrategy.calculateHeaderCellRepeatCount()\r\n    }\r\n    _updateScrollable() {\r\n        var _this$_headerScrollab2, _this$_sidebarScrolla2;\r\n        this._dateTableScrollable.update();\r\n        null === (_this$_headerScrollab2 = this._headerScrollable) || void 0 === _this$_headerScrollab2 ? void 0 : _this$_headerScrollab2.update();\r\n        null === (_this$_sidebarScrolla2 = this._sidebarScrollable) || void 0 === _this$_sidebarScrolla2 ? void 0 : _this$_sidebarScrolla2.update()\r\n    }\r\n    _getTimePanelRowCount() {\r\n        return this._getCellCountInDay()\r\n    }\r\n    _getCellCountInDay() {\r\n        var hoursInterval = this.option(\"hoursInterval\");\r\n        var startDayHour = this.option(\"startDayHour\");\r\n        var endDayHour = this.option(\"endDayHour\");\r\n        return this.viewDataProvider.getCellCountInDay(startDayHour, endDayHour, hoursInterval)\r\n    }\r\n    _getTotalCellCount(groupCount) {\r\n        return this._groupedStrategy.getTotalCellCount(groupCount)\r\n    }\r\n    _getTotalRowCount(groupCount, includeAllDayPanelRows) {\r\n        var result = this._groupedStrategy.getTotalRowCount(groupCount);\r\n        if (includeAllDayPanelRows && this.isAllDayPanelVisible) {\r\n            result += groupCount\r\n        }\r\n        return result\r\n    }\r\n    _getGroupIndex(rowIndex, columnIndex) {\r\n        return this._groupedStrategy.getGroupIndex(rowIndex, columnIndex)\r\n    }\r\n    calculateEndDate(startDate) {\r\n        var viewDataGenerator = this.viewDataProvider.viewDataGenerator;\r\n        return viewDataGenerator.calculateEndDate(startDate, viewDataGenerator.getInterval(this.option(\"hoursInterval\")), this.option(\"endDayHour\"))\r\n    }\r\n    _getGroupCount() {\r\n        return getGroupCount(this.option(\"groups\"))\r\n    }\r\n    _attachTablesEvents() {\r\n        var element = this.$element();\r\n        this._attachDragEvents(element);\r\n        this._attachPointerEvents(element)\r\n    }\r\n    _detachDragEvents(element) {\r\n        eventsEngine.off(element, DragEventNames.ENTER);\r\n        eventsEngine.off(element, DragEventNames.LEAVE);\r\n        eventsEngine.off(element, DragEventNames.DROP)\r\n    }\r\n    _attachDragEvents(element) {\r\n        this._detachDragEvents(element);\r\n        eventsEngine.on(element, DragEventNames.ENTER, DRAG_AND_DROP_SELECTOR, {\r\n            checkDropTarget: (target, event) => !this._isOutsideScrollable(target, event)\r\n        }, e => {\r\n            if (!this.preventDefaultDragging) {\r\n                this.removeDroppableCellClass();\r\n                $(e.target).addClass(DATE_TABLE_DROPPABLE_CELL_CLASS)\r\n            }\r\n        });\r\n        eventsEngine.on(element, DragEventNames.LEAVE, () => {\r\n            if (!this.preventDefaultDragging) {\r\n                this.removeDroppableCellClass()\r\n            }\r\n        });\r\n        eventsEngine.on(element, DragEventNames.DROP, DRAG_AND_DROP_SELECTOR, () => {\r\n            var _this$dragBehavior, _this$dragBehavior$dr;\r\n            if (!this.dragBehavior) {\r\n                return\r\n            }\r\n            if (!(null !== (_this$dragBehavior = this.dragBehavior) && void 0 !== _this$dragBehavior && _this$dragBehavior.dragBetweenComponentsPromise)) {\r\n                this.dragBehavior.removeDroppableClasses();\r\n                return\r\n            }\r\n            null === (_this$dragBehavior$dr = this.dragBehavior.dragBetweenComponentsPromise) || void 0 === _this$dragBehavior$dr ? void 0 : _this$dragBehavior$dr.then(() => {\r\n                this.dragBehavior.removeDroppableClasses()\r\n            })\r\n        })\r\n    }\r\n    _attachPointerEvents(element) {\r\n        var isPointerDown = false;\r\n        eventsEngine.off(element, SCHEDULER_CELL_DXPOINTERMOVE_EVENT_NAME);\r\n        eventsEngine.off(element, SCHEDULER_CELL_DXPOINTERDOWN_EVENT_NAME);\r\n        eventsEngine.on(element, SCHEDULER_CELL_DXPOINTERDOWN_EVENT_NAME, DRAG_AND_DROP_SELECTOR, e => {\r\n            if (isMouseEvent(e) && 1 === e.which) {\r\n                isPointerDown = true;\r\n                this.$element().addClass(WORKSPACE_WITH_MOUSE_SELECTION_CLASS);\r\n                eventsEngine.off(domAdapter.getDocument(), SCHEDULER_CELL_DXPOINTERUP_EVENT_NAME);\r\n                eventsEngine.on(domAdapter.getDocument(), SCHEDULER_CELL_DXPOINTERUP_EVENT_NAME, () => {\r\n                    isPointerDown = false;\r\n                    this.$element().removeClass(WORKSPACE_WITH_MOUSE_SELECTION_CLASS)\r\n                })\r\n            }\r\n        });\r\n        eventsEngine.on(element, SCHEDULER_CELL_DXPOINTERMOVE_EVENT_NAME, DRAG_AND_DROP_SELECTOR, e => {\r\n            if (isPointerDown && this._dateTableScrollable && !this._dateTableScrollable.option(\"scrollByContent\")) {\r\n                e.preventDefault();\r\n                e.stopPropagation();\r\n                this._moveToCell($(e.target), true)\r\n            }\r\n        })\r\n    }\r\n    _getFormat() {\r\n        return abstract()\r\n    }\r\n    getWorkArea() {\r\n        return this._$dateTableContainer\r\n    }\r\n    getScrollable() {\r\n        return this._dateTableScrollable\r\n    }\r\n    getScrollableScrollTop() {\r\n        return this._dateTableScrollable.scrollTop()\r\n    }\r\n    getGroupedScrollableScrollTop(allDay) {\r\n        return this._groupedStrategy.getScrollableScrollTop(allDay)\r\n    }\r\n    getScrollableScrollLeft() {\r\n        return this._dateTableScrollable.scrollLeft()\r\n    }\r\n    getScrollableOuterWidth() {\r\n        return this._dateTableScrollable.scrollWidth()\r\n    }\r\n    getScrollableContainer() {\r\n        return $(this._dateTableScrollable.container())\r\n    }\r\n    getHeaderPanelHeight() {\r\n        return this._$headerPanel && getOuterHeight(this._$headerPanel, true)\r\n    }\r\n    getTimePanelWidth() {\r\n        return this._$timePanel && getBoundingRect(this._$timePanel.get(0)).width\r\n    }\r\n    getGroupTableWidth() {\r\n        return this._$groupTable ? getOuterWidth(this._$groupTable) : 0\r\n    }\r\n    getWorkSpaceLeftOffset() {\r\n        return this._groupedStrategy.getLeftOffset()\r\n    }\r\n    _getCellCoordinatesByIndex(index) {\r\n        var columnIndex = Math.floor(index / this._getRowCount());\r\n        var rowIndex = index - this._getRowCount() * columnIndex;\r\n        return {\r\n            columnIndex: columnIndex,\r\n            rowIndex: rowIndex\r\n        }\r\n    }\r\n    _getDateGenerationOptions() {\r\n        var _this$viewDataProvide;\r\n        return {\r\n            startDayHour: this.option(\"startDayHour\"),\r\n            endDayHour: this.option(\"endDayHour\"),\r\n            isWorkView: this.viewDataProvider.viewDataGenerator.isWorkView,\r\n            interval: null === (_this$viewDataProvide = this.viewDataProvider.viewDataGenerator) || void 0 === _this$viewDataProvide ? void 0 : _this$viewDataProvide.getInterval(this.option(\"hoursInterval\")),\r\n            startViewDate: this.getStartViewDate(),\r\n            firstDayOfWeek: this._firstDayOfWeek()\r\n        }\r\n    }\r\n    _getIntervalBetween(currentDate, allDay) {\r\n        var firstViewDate = this.getStartViewDate();\r\n        var startDayTime = this.option(\"startDayHour\") * HOUR_MS;\r\n        var timeZoneOffset = dateUtils.getTimezonesDifference(firstViewDate, currentDate);\r\n        var fullInterval = currentDate.getTime() - firstViewDate.getTime() - timeZoneOffset;\r\n        var days = this._getDaysOfInterval(fullInterval, startDayTime);\r\n        var weekendsCount = this._getWeekendsCount(days);\r\n        var result = (days - weekendsCount) * DAY_MS;\r\n        if (!allDay) {\r\n            var hiddenInterval = this.viewDataProvider.hiddenInterval;\r\n            var visibleDayDuration = this.getVisibleDayDuration();\r\n            result = fullInterval - days * hiddenInterval - weekendsCount * visibleDayDuration\r\n        }\r\n        return result\r\n    }\r\n    _getWeekendsCount() {\r\n        return 0\r\n    }\r\n    _getDaysOfInterval(fullInterval, startDayTime) {\r\n        return Math.floor((fullInterval + startDayTime) / DAY_MS)\r\n    }\r\n    _updateIndex(index) {\r\n        return index * this._getRowCount()\r\n    }\r\n    _getDroppableCell() {\r\n        return this._getDateTables().find(\".\" + DATE_TABLE_DROPPABLE_CELL_CLASS)\r\n    }\r\n    _getWorkSpaceWidth() {\r\n        return this.cache.get(\"workspaceWidth\", () => {\r\n            if (this._needCreateCrossScrolling()) {\r\n                return getBoundingRect(this._$dateTable.get(0)).width\r\n            }\r\n            var totalWidth = getBoundingRect(this.$element().get(0)).width;\r\n            var timePanelWidth = this.getTimePanelWidth();\r\n            var groupTableWidth = this.getGroupTableWidth();\r\n            return totalWidth - timePanelWidth - groupTableWidth\r\n        })\r\n    }\r\n    _getCellByCoordinates(cellCoordinates, groupIndex, inAllDayRow) {\r\n        var indexes = this._groupedStrategy.prepareCellIndexes(cellCoordinates, groupIndex, inAllDayRow);\r\n        return this._dom_getDateCell(indexes)\r\n    }\r\n    _dom_getDateCell(position) {\r\n        return this._$dateTable.find(\"tr:not(.\".concat(VIRTUAL_ROW_CLASS, \")\")).eq(position.rowIndex).find(\"td:not(.\".concat(VIRTUAL_CELL_CLASS, \")\")).eq(position.columnIndex)\r\n    }\r\n    _dom_getAllDayPanelCell(columnIndex) {\r\n        return this._$allDayPanel.find(\"tr\").eq(0).find(\"td\").eq(columnIndex)\r\n    }\r\n    _getCells(allDay, direction) {\r\n        var cellClass = allDay ? ALL_DAY_TABLE_CELL_CLASS : DATE_TABLE_CELL_CLASS;\r\n        if (\"vertical\" === direction) {\r\n            var result = [];\r\n            for (var i = 1;; i++) {\r\n                var cells = this.$element().find(\"tr .\".concat(cellClass, \":nth-child(\").concat(i, \")\"));\r\n                if (!cells.length) {\r\n                    break\r\n                }\r\n                result = result.concat(cells.toArray())\r\n            }\r\n            return $(result)\r\n        } else {\r\n            return this.$element().find(\".\" + cellClass)\r\n        }\r\n    }\r\n    _getFirstAndLastDataTableCell() {\r\n        var selector = this.isVirtualScrolling() ? \".\".concat(DATE_TABLE_CELL_CLASS, \", .\").concat(VIRTUAL_CELL_CLASS) : \".\".concat(DATE_TABLE_CELL_CLASS);\r\n        var $cells = this.$element().find(selector);\r\n        return [$cells[0], $cells[$cells.length - 1]]\r\n    }\r\n    _getAllCells(allDay) {\r\n        if (this._isVerticalGroupedWorkSpace()) {\r\n            return this._$dateTable.find(\"td:not(.\".concat(VIRTUAL_CELL_CLASS, \")\"))\r\n        }\r\n        var cellClass = allDay && this.supportAllDayRow() ? ALL_DAY_TABLE_CELL_CLASS : DATE_TABLE_CELL_CLASS;\r\n        return this.$element().find(\".\".concat(cellClass))\r\n    }\r\n    _setHorizontalGroupHeaderCellsHeight() {\r\n        var height = getBoundingRect(this._$dateTable.get(0)).height;\r\n        setOuterHeight(this._$groupTable, height)\r\n    }\r\n    _getGroupHeaderCells() {\r\n        return this.$element().find(\".\" + GROUP_HEADER_CLASS)\r\n    }\r\n    _getScrollCoordinates(hours, minutes, date, groupIndex, allDay) {\r\n        var currentDate = date || new Date(this.option(\"currentDate\"));\r\n        var startDayHour = this.option(\"startDayHour\");\r\n        var endDayHour = this.option(\"endDayHour\");\r\n        if (hours < startDayHour) {\r\n            hours = startDayHour\r\n        }\r\n        if (hours >= endDayHour) {\r\n            hours = endDayHour - 1\r\n        }\r\n        currentDate.setHours(hours, minutes, 0, 0);\r\n        var cell = this.viewDataProvider.findGlobalCellPosition(currentDate, groupIndex, allDay);\r\n        var {\r\n            position: position,\r\n            cellData: cellData\r\n        } = cell;\r\n        return this.virtualScrollingDispatcher.calculateCoordinatesByDataAndPosition(cellData, position, currentDate, isDateAndTimeView(this.type), \"vertical\" === this.viewDirection)\r\n    }\r\n    _isOutsideScrollable(target, event) {\r\n        var $dateTableScrollableElement = this._dateTableScrollable.$element();\r\n        var scrollableSize = getBoundingRect($dateTableScrollableElement.get(0));\r\n        var window = getWindow();\r\n        var isTargetInAllDayPanel = !$(target).closest($dateTableScrollableElement).length;\r\n        var isOutsideHorizontalScrollable = event.pageX < scrollableSize.left || event.pageX > scrollableSize.left + scrollableSize.width + (window.scrollX || 0);\r\n        var isOutsideVerticalScrollable = event.pageY < scrollableSize.top || event.pageY > scrollableSize.top + scrollableSize.height + (window.scrollY || 0);\r\n        if (isTargetInAllDayPanel && !isOutsideHorizontalScrollable) {\r\n            return false\r\n        }\r\n        return isOutsideVerticalScrollable || isOutsideHorizontalScrollable\r\n    }\r\n    setCellDataCache(cellCoordinates, groupIndex, $cell) {\r\n        var key = JSON.stringify({\r\n            rowIndex: cellCoordinates.rowIndex,\r\n            columnIndex: cellCoordinates.columnIndex,\r\n            groupIndex: groupIndex\r\n        });\r\n        this.cache.set(key, this.getCellData($cell))\r\n    }\r\n    setCellDataCacheAlias(appointment, geometry) {\r\n        var key = JSON.stringify({\r\n            rowIndex: appointment.rowIndex,\r\n            columnIndex: appointment.columnIndex,\r\n            groupIndex: appointment.groupIndex\r\n        });\r\n        var aliasKey = JSON.stringify({\r\n            top: geometry.top,\r\n            left: geometry.left\r\n        });\r\n        this.cache.set(aliasKey, this.cache.get(key))\r\n    }\r\n    supportAllDayRow() {\r\n        return true\r\n    }\r\n    keepOriginalHours() {\r\n        return false\r\n    }\r\n    _filterCellDataFields(cellData) {\r\n        return extend(true, {}, {\r\n            startDate: cellData.startDate,\r\n            endDate: cellData.endDate,\r\n            groups: cellData.groups,\r\n            groupIndex: cellData.groupIndex,\r\n            allDay: cellData.allDay\r\n        })\r\n    }\r\n    getCellData($cell) {\r\n        var cellData = this._getFullCellData($cell) || {};\r\n        return this._filterCellDataFields(cellData)\r\n    }\r\n    _getFullCellData($cell) {\r\n        var currentCell = $cell[0];\r\n        if (currentCell) {\r\n            return this._getDataByCell($cell)\r\n        }\r\n        return\r\n    }\r\n    _getVirtualRowOffset() {\r\n        return this.virtualScrollingDispatcher.virtualRowOffset\r\n    }\r\n    _getVirtualCellOffset() {\r\n        return this.virtualScrollingDispatcher.virtualCellOffset\r\n    }\r\n    _getDataByCell($cell) {\r\n        var rowIndex = $cell.parent().index() - this.virtualScrollingDispatcher.topVirtualRowsCount;\r\n        var columnIndex = $cell.index() - this.virtualScrollingDispatcher.leftVirtualCellsCount;\r\n        var {\r\n            viewDataProvider: viewDataProvider\r\n        } = this;\r\n        var isAllDayCell = this._hasAllDayClass($cell);\r\n        var cellData = viewDataProvider.getCellData(rowIndex, columnIndex, isAllDayCell);\r\n        return cellData ? cellData : void 0\r\n    }\r\n    isGroupedByDate() {\r\n        return this.option(\"groupByDate\") && this._isHorizontalGroupedWorkSpace() && this._getGroupCount() > 0\r\n    }\r\n    getCellIndexByDate(date, inAllDayRow) {\r\n        var viewDataGenerator = this.viewDataProvider.viewDataGenerator;\r\n        var timeInterval = inAllDayRow ? 864e5 : viewDataGenerator.getInterval(this.option(\"hoursInterval\"));\r\n        var startViewDateOffset = getStartViewDateTimeOffset(this.getStartViewDate(), this.option(\"startDayHour\"));\r\n        var dateTimeStamp = this._getIntervalBetween(date, inAllDayRow) + startViewDateOffset;\r\n        var index = Math.floor(dateTimeStamp / timeInterval);\r\n        if (inAllDayRow) {\r\n            index = this._updateIndex(index)\r\n        }\r\n        if (index < 0) {\r\n            index = 0\r\n        }\r\n        return index\r\n    }\r\n    getDroppableCellIndex() {\r\n        var $droppableCell = this._getDroppableCell();\r\n        var $row = $droppableCell.parent();\r\n        var rowIndex = $row.index();\r\n        return rowIndex * $row.find(\"td\").length + $droppableCell.index()\r\n    }\r\n    getDataByDroppableCell() {\r\n        var cellData = this.getCellData($(this._getDroppableCell()));\r\n        var allDay = cellData.allDay;\r\n        var startDate = cellData.startDate;\r\n        var endDate = cellData.endDate;\r\n        return {\r\n            startDate: startDate,\r\n            endDate: endDate,\r\n            allDay: allDay,\r\n            groups: cellData.groups\r\n        }\r\n    }\r\n    getDateRange() {\r\n        return [this.getStartViewDate(), this.getEndViewDateByEndDayHour()]\r\n    }\r\n    getCellMinWidth() {\r\n        return DATE_TABLE_MIN_CELL_WIDTH\r\n    }\r\n    getRoundedCellWidth(groupIndex, startIndex, cellCount) {\r\n        if (groupIndex < 0 || !hasWindow()) {\r\n            return 0\r\n        }\r\n        var $row = this.$element().find(\".\".concat(DATE_TABLE_ROW_CLASS)).eq(0);\r\n        var width = 0;\r\n        var $cells = $row.find(\".\" + DATE_TABLE_CELL_CLASS);\r\n        var totalCellCount = this._getCellCount() * groupIndex;\r\n        cellCount = cellCount || this._getCellCount();\r\n        if (!isDefined(startIndex)) {\r\n            startIndex = totalCellCount\r\n        }\r\n        for (var i = startIndex; i < totalCellCount + cellCount; i++) {\r\n            var element = $($cells).eq(i).get(0);\r\n            var elementWidth = element ? getBoundingRect(element).width : 0;\r\n            width += elementWidth\r\n        }\r\n        return width / (totalCellCount + cellCount - startIndex)\r\n    }\r\n    getCellWidth() {\r\n        return getCellWidth(this.getDOMElementsMetaData())\r\n    }\r\n    getCellHeight() {\r\n        return getCellHeight(this.getDOMElementsMetaData())\r\n    }\r\n    getAllDayHeight() {\r\n        return getAllDayHeight(this.option(\"showAllDayPanel\"), this._isVerticalGroupedWorkSpace(), this.getDOMElementsMetaData())\r\n    }\r\n    getMaxAllowedPosition(groupIndex) {\r\n        return getMaxAllowedPosition(groupIndex, this.viewDataProvider, this.option(\"rtlEnabled\"), this.getDOMElementsMetaData())\r\n    }\r\n    getAllDayOffset() {\r\n        return this._groupedStrategy.getAllDayOffset()\r\n    }\r\n    getCellIndexByCoordinates(coordinates, allDay) {\r\n        var cellCount = this._getTotalCellCount(this._getGroupCount());\r\n        var cellWidth = this.getCellWidth();\r\n        var cellHeight = allDay ? this.getAllDayHeight() : this.getCellHeight();\r\n        var topIndex = Math.floor(Math.floor(coordinates.top) / Math.floor(cellHeight));\r\n        var leftIndex = coordinates.left / cellWidth;\r\n        leftIndex = Math.floor(leftIndex + CELL_INDEX_CALCULATION_EPSILON);\r\n        if (this._isRTL()) {\r\n            leftIndex = cellCount - leftIndex - 1\r\n        }\r\n        return cellCount * topIndex + leftIndex\r\n    }\r\n    getStartViewDate() {\r\n        return this.viewDataProvider.getStartViewDate()\r\n    }\r\n    getEndViewDate() {\r\n        return this.viewDataProvider.getLastCellEndDate()\r\n    }\r\n    getEndViewDateByEndDayHour() {\r\n        return this.viewDataProvider.getLastViewDateByEndDayHour(this.option(\"endDayHour\"))\r\n    }\r\n    getCellDuration() {\r\n        return getCellDuration(this.type, this.option(\"startDayHour\"), this.option(\"endDayHour\"), this.option(\"hoursInterval\"))\r\n    }\r\n    getIntervalDuration(allDay) {\r\n        return allDay ? toMs(\"day\") : this.getCellDuration()\r\n    }\r\n    getVisibleDayDuration() {\r\n        var startDayHour = this.option(\"startDayHour\");\r\n        var endDayHour = this.option(\"endDayHour\");\r\n        var hoursInterval = this.option(\"hoursInterval\");\r\n        return this.viewDataProvider.getVisibleDayDuration(startDayHour, endDayHour, hoursInterval)\r\n    }\r\n    getGroupBounds(coordinates) {\r\n        var groupBounds = this._groupedStrategy instanceof VerticalGroupedStrategy ? this.getGroupBoundsVertical(coordinates.groupIndex) : this.getGroupBoundsHorizontal(coordinates);\r\n        return this._isRTL() ? this.getGroupBoundsRtlCorrection(groupBounds) : groupBounds\r\n    }\r\n    getGroupBoundsVertical(groupIndex) {\r\n        var $firstAndLastCells = this._getFirstAndLastDataTableCell();\r\n        return this._groupedStrategy.getGroupBoundsOffset(groupIndex, $firstAndLastCells)\r\n    }\r\n    getGroupBoundsHorizontal(coordinates) {\r\n        var cellCount = this._getCellCount();\r\n        var $cells = this._getCells();\r\n        var cellWidth = this.getCellWidth();\r\n        var groupedDataMap = this.viewDataProvider.groupedDataMap;\r\n        return this._groupedStrategy.getGroupBoundsOffset(cellCount, $cells, cellWidth, coordinates, groupedDataMap)\r\n    }\r\n    getGroupBoundsRtlCorrection(groupBounds) {\r\n        var cellWidth = this.getCellWidth();\r\n        return _extends({}, groupBounds, {\r\n            left: groupBounds.right - 2 * cellWidth,\r\n            right: groupBounds.left + 2 * cellWidth\r\n        })\r\n    }\r\n    needRecalculateResizableArea() {\r\n        return this._isVerticalGroupedWorkSpace() && 0 !== this.getScrollable().scrollTop()\r\n    }\r\n    getCellDataByCoordinates(coordinates, allDay) {\r\n        var key = JSON.stringify({\r\n            top: coordinates.top,\r\n            left: coordinates.left\r\n        });\r\n        return this.cache.get(key, () => {\r\n            var $cells = this._getCells(allDay);\r\n            var cellIndex = this.getCellIndexByCoordinates(coordinates, allDay);\r\n            var $cell = $cells.eq(cellIndex);\r\n            return this.getCellData($cell)\r\n        })\r\n    }\r\n    getVisibleBounds() {\r\n        var result = {};\r\n        var $scrollable = this.getScrollable().$element();\r\n        var cellHeight = this.getCellHeight();\r\n        var scrolledCellCount = this.getScrollableScrollTop() / cellHeight;\r\n        var totalCellCount = scrolledCellCount + getHeight($scrollable) / cellHeight;\r\n        result.top = {\r\n            hours: Math.floor(scrolledCellCount * this.option(\"hoursInterval\")) + this.option(\"startDayHour\"),\r\n            minutes: scrolledCellCount % 2 ? 30 : 0\r\n        };\r\n        result.bottom = {\r\n            hours: Math.floor(totalCellCount * this.option(\"hoursInterval\")) + this.option(\"startDayHour\"),\r\n            minutes: Math.floor(totalCellCount) % 2 ? 30 : 0\r\n        };\r\n        return result\r\n    }\r\n    updateScrollPosition(date, groups) {\r\n        var allDay = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : false;\r\n        var newDate = this.timeZoneCalculator.createDate(date, {\r\n            path: \"toGrid\"\r\n        });\r\n        var inAllDayRow = allDay && this.isAllDayPanelVisible;\r\n        if (this.needUpdateScrollPosition(newDate, groups, inAllDayRow)) {\r\n            this.scrollTo(newDate, groups, inAllDayRow, false)\r\n        }\r\n    }\r\n    needUpdateScrollPosition(date, groups, inAllDayRow) {\r\n        var cells = this._getCellsInViewport(inAllDayRow);\r\n        var groupIndex = this._isGroupsSpecified(groups) ? this._getGroupIndexByResourceId(groups) : 0;\r\n        var time = date.getTime();\r\n        var trimmedTime = dateUtils.trimTime(date).getTime();\r\n        return cells.reduce((currentResult, cell) => {\r\n            var {\r\n                startDate: cellStartDate,\r\n                endDate: cellEndDate,\r\n                groupIndex: cellGroupIndex\r\n            } = this.getCellData(cell);\r\n            var cellStartTime = cellStartDate.getTime();\r\n            var cellEndTime = cellEndDate.getTime();\r\n            if ((!inAllDayRow && cellStartTime <= time && time < cellEndTime || inAllDayRow && trimmedTime === cellStartTime) && groupIndex === cellGroupIndex) {\r\n                return false\r\n            }\r\n            return currentResult\r\n        }, true)\r\n    }\r\n    _getCellsInViewport(inAllDayRow) {\r\n        var $scrollable = this.getScrollable().$element();\r\n        var cellHeight = this.getCellHeight();\r\n        var cellWidth = this.getCellWidth();\r\n        var totalColumnCount = this._getTotalCellCount(this._getGroupCount());\r\n        var scrollableScrollTop = this.getScrollableScrollTop();\r\n        var scrollableScrollLeft = this.getScrollableScrollLeft();\r\n        var fullScrolledRowCount = scrollableScrollTop / cellHeight - this.virtualScrollingDispatcher.topVirtualRowsCount;\r\n        var scrolledRowCount = Math.floor(fullScrolledRowCount);\r\n        if (scrollableScrollTop % cellHeight !== 0) {\r\n            scrolledRowCount += 1\r\n        }\r\n        var fullScrolledColumnCount = scrollableScrollLeft / cellWidth;\r\n        var scrolledColumnCount = Math.floor(fullScrolledColumnCount);\r\n        if (scrollableScrollLeft % cellWidth !== 0) {\r\n            scrolledColumnCount += 1\r\n        }\r\n        var rowCount = Math.floor(fullScrolledRowCount + getHeight($scrollable) / cellHeight);\r\n        var columnCount = Math.floor(fullScrolledColumnCount + getWidth($scrollable) / cellWidth);\r\n        var $cells = this._getAllCells(inAllDayRow);\r\n        var result = [];\r\n        $cells.each((function(index) {\r\n            var $cell = $(this);\r\n            var columnIndex = index % totalColumnCount;\r\n            var rowIndex = index / totalColumnCount;\r\n            if (scrolledColumnCount <= columnIndex && columnIndex < columnCount && scrolledRowCount <= rowIndex && rowIndex < rowCount) {\r\n                result.push($cell)\r\n            }\r\n        }));\r\n        return result\r\n    }\r\n    scrollToTime(hours, minutes, date) {\r\n        if (!this._isValidScrollDate(date)) {\r\n            return\r\n        }\r\n        var coordinates = this._getScrollCoordinates(hours, minutes, date);\r\n        var scrollable = this.getScrollable();\r\n        scrollable.scrollBy({\r\n            top: coordinates.top - scrollable.scrollTop(),\r\n            left: 0\r\n        })\r\n    }\r\n    scrollTo(date, groups) {\r\n        var allDay = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : false;\r\n        var throwWarning = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : true;\r\n        if (!this._isValidScrollDate(date, throwWarning)) {\r\n            return\r\n        }\r\n        var groupIndex = this._getGroupCount() && groups ? this._getGroupIndexByResourceId(groups) : 0;\r\n        var isScrollToAllDay = allDay && this.isAllDayPanelVisible;\r\n        var coordinates = this._getScrollCoordinates(date.getHours(), date.getMinutes(), date, groupIndex, isScrollToAllDay);\r\n        var scrollable = this.getScrollable();\r\n        var $scrollable = scrollable.$element();\r\n        var cellWidth = this.getCellWidth();\r\n        var offset = this.option(\"rtlEnabled\") ? cellWidth : 0;\r\n        var scrollableHeight = getHeight($scrollable);\r\n        var scrollableWidth = getWidth($scrollable);\r\n        var cellHeight = this.getCellHeight();\r\n        var xShift = (scrollableWidth - cellWidth) / 2;\r\n        var yShift = (scrollableHeight - cellHeight) / 2;\r\n        var left = coordinates.left - scrollable.scrollLeft() - xShift - offset;\r\n        var top = coordinates.top - scrollable.scrollTop() - yShift;\r\n        if (isScrollToAllDay && !this._isVerticalGroupedWorkSpace()) {\r\n            top = 0\r\n        }\r\n        if (this.option(\"templatesRenderAsynchronously\")) {\r\n            setTimeout(() => {\r\n                scrollable.scrollBy({\r\n                    left: left,\r\n                    top: top\r\n                })\r\n            })\r\n        } else {\r\n            scrollable.scrollBy({\r\n                left: left,\r\n                top: top\r\n            })\r\n        }\r\n    }\r\n    _isValidScrollDate(date) {\r\n        var throwWarning = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : true;\r\n        var min = this.getStartViewDate();\r\n        var max = this.getEndViewDate();\r\n        if (date < min || date > max) {\r\n            throwWarning && errors.log(\"W1008\", date);\r\n            return false\r\n        }\r\n        return true\r\n    }\r\n    needApplyCollectorOffset() {\r\n        return false\r\n    }\r\n    removeDroppableCellClass($cellElement) {\r\n        var $cell = $cellElement || this._getDroppableCell();\r\n        null === $cell || void 0 === $cell ? void 0 : $cell.removeClass(DATE_TABLE_DROPPABLE_CELL_CLASS)\r\n    }\r\n    _getCoordinatesByCell($cell) {\r\n        var columnIndex = $cell.index() - this.virtualScrollingDispatcher.leftVirtualCellsCount;\r\n        var rowIndex = $cell.parent().index();\r\n        var isAllDayCell = this._hasAllDayClass($cell);\r\n        var isVerticalGrouping = this._isVerticalGroupedWorkSpace();\r\n        if (!(isAllDayCell && !isVerticalGrouping)) {\r\n            rowIndex -= this.virtualScrollingDispatcher.topVirtualRowsCount\r\n        }\r\n        return {\r\n            rowIndex: rowIndex,\r\n            columnIndex: columnIndex\r\n        }\r\n    }\r\n    _isShowAllDayPanel() {\r\n        return this.option(\"showAllDayPanel\")\r\n    }\r\n    _getTimePanelCells() {\r\n        return this.$element().find(\".\".concat(TIME_PANEL_CELL_CLASS))\r\n    }\r\n    _getRDateTableProps() {\r\n        return {\r\n            viewData: this.viewDataProvider.viewData,\r\n            dataCellTemplate: this.option(\"dataCellTemplate\"),\r\n            addDateTableClass: !this.option(\"crossScrollingEnabled\") || this.isVirtualScrolling(),\r\n            groupOrientation: this.option(\"groupOrientation\"),\r\n            addVerticalSizesClassToRows: false\r\n        }\r\n    }\r\n    _updateSelectedCellDataOption(selectedCellData) {\r\n        var correctedSelectedCellData = selectedCellData.map(_ref2 => {\r\n            var {\r\n                startDate: startDate,\r\n                endDate: endDate,\r\n                allDay: allDay,\r\n                groupIndex: groupIndex,\r\n                groups: groups\r\n            } = _ref2;\r\n            return {\r\n                startDate: startDate,\r\n                endDate: endDate,\r\n                allDay: allDay,\r\n                groupIndex: groupIndex,\r\n                groups: groups\r\n            }\r\n        });\r\n        this.option(\"selectedCellData\", correctedSelectedCellData);\r\n        this._selectionChangedAction({\r\n            selectedCellData: correctedSelectedCellData\r\n        })\r\n    }\r\n    _getCellByData(cellData) {\r\n        var {\r\n            startDate: startDate,\r\n            groupIndex: groupIndex,\r\n            allDay: allDay,\r\n            index: index\r\n        } = cellData;\r\n        var position = this.viewDataProvider.findCellPositionInMap({\r\n            startDate: startDate,\r\n            groupIndex: groupIndex,\r\n            isAllDay: allDay,\r\n            index: index\r\n        });\r\n        if (!position) {\r\n            return\r\n        }\r\n        return allDay && !this._isVerticalGroupedWorkSpace() ? this._dom_getAllDayPanelCell(position.columnIndex) : this._dom_getDateCell(position)\r\n    }\r\n    getDOMElementsMetaData() {\r\n        return this.cache.get(\"cellElementsMeta\", () => ({\r\n            dateTableCellsMeta: this._getDateTableDOMElementsInfo(),\r\n            allDayPanelCellsMeta: this._getAllDayPanelDOMElementsInfo()\r\n        }))\r\n    }\r\n    _getDateTableDOMElementsInfo() {\r\n        var dateTableCells = this._getAllCells(false);\r\n        if (!dateTableCells.length || !hasWindow()) {\r\n            return [\r\n                [{}]\r\n            ]\r\n        }\r\n        var dateTable = this._getDateTable();\r\n        var dateTableRect = getBoundingRect(dateTable.get(0));\r\n        var columnsCount = this.viewDataProvider.getColumnsCount();\r\n        var result = [];\r\n        dateTableCells.each((index, cell) => {\r\n            var rowIndex = Math.floor(index / columnsCount);\r\n            if (result.length === rowIndex) {\r\n                result.push([])\r\n            }\r\n            this._addCellMetaData(result[rowIndex], cell, dateTableRect)\r\n        });\r\n        return result\r\n    }\r\n    _getAllDayPanelDOMElementsInfo() {\r\n        var result = [];\r\n        if (this.isAllDayPanelVisible && !this._isVerticalGroupedWorkSpace() && hasWindow()) {\r\n            var allDayCells = this._getAllCells(true);\r\n            if (!allDayCells.length) {\r\n                return [{}]\r\n            }\r\n            var allDayAppointmentContainer = this._$allDayPanel;\r\n            var allDayPanelRect = getBoundingRect(allDayAppointmentContainer.get(0));\r\n            allDayCells.each((_, cell) => {\r\n                this._addCellMetaData(result, cell, allDayPanelRect)\r\n            })\r\n        }\r\n        return result\r\n    }\r\n    _addCellMetaData(cellMetaDataArray, cell, parentRect) {\r\n        var cellRect = getBoundingRect(cell);\r\n        cellMetaDataArray.push({\r\n            left: cellRect.left - parentRect.left,\r\n            top: cellRect.top - parentRect.top,\r\n            width: cellRect.width,\r\n            height: cellRect.height\r\n        })\r\n    }\r\n    _oldRender_getAllDayCellData(groupIndex) {\r\n        return (cell, rowIndex, columnIndex) => {\r\n            var validColumnIndex = columnIndex % this._getCellCount();\r\n            var options = this._getDateGenerationOptions(true);\r\n            var startDate = this.viewDataProvider.viewDataGenerator.getDateByCellIndices(options, rowIndex, validColumnIndex, this._getCellCountInDay());\r\n            startDate = dateUtils.trimTime(startDate);\r\n            var validGroupIndex = groupIndex || 0;\r\n            if (this.isGroupedByDate()) {\r\n                validGroupIndex = Math.floor(columnIndex % this._getGroupCount())\r\n            } else if (this._isHorizontalGroupedWorkSpace()) {\r\n                validGroupIndex = Math.floor(columnIndex / this._getCellCount())\r\n            }\r\n            var data = {\r\n                startDate: startDate,\r\n                endDate: startDate,\r\n                allDay: true,\r\n                groupIndex: validGroupIndex\r\n            };\r\n            var groupsArray = getCellGroups(validGroupIndex, this.option(\"groups\"));\r\n            if (groupsArray.length) {\r\n                data.groups = getGroupsObjectFromGroupsArray(groupsArray)\r\n            }\r\n            return {\r\n                key: CELL_DATA,\r\n                value: data\r\n            }\r\n        }\r\n    }\r\n    renderRWorkSpace(componentsToRender) {\r\n        var components = null !== componentsToRender && void 0 !== componentsToRender ? componentsToRender : {\r\n            header: true,\r\n            timePanel: true,\r\n            dateTable: true,\r\n            allDayPanel: true\r\n        };\r\n        components.header && this.renderRHeaderPanel();\r\n        components.timePanel && this.renderRTimeTable();\r\n        components.dateTable && this.renderRDateTable();\r\n        components.allDayPanel && this.renderRAllDayPanel()\r\n    }\r\n    renderRDateTable() {\r\n        utils.renovation.renderComponent(this, this._$dateTable, dxrDateTableLayout, \"renovatedDateTable\", this._getRDateTableProps())\r\n    }\r\n    renderRGroupPanel() {\r\n        var options = {\r\n            groups: this.option(\"groups\"),\r\n            groupOrientation: this.option(\"groupOrientation\"),\r\n            groupByDate: this.isGroupedByDate(),\r\n            resourceCellTemplate: this.option(\"resourceCellTemplate\"),\r\n            className: this.verticalGroupTableClass,\r\n            groupPanelData: this.viewDataProvider.getGroupPanelData(this.generateRenderOptions())\r\n        };\r\n        if (this.option(\"groups\").length) {\r\n            this._attachGroupCountClass();\r\n            utils.renovation.renderComponent(this, this._getGroupHeaderContainer(), dxrGroupPanel, \"renovatedGroupPanel\", options)\r\n        } else {\r\n            this._detachGroupCountClass()\r\n        }\r\n    }\r\n    renderRAllDayPanel() {\r\n        var visible = this.isAllDayPanelVisible && !this.isGroupedAllDayPanel();\r\n        if (visible) {\r\n            var _this$virtualScrollin;\r\n            this._toggleAllDayVisibility(false);\r\n            var options = _extends({\r\n                viewData: this.viewDataProvider.viewData,\r\n                dataCellTemplate: this.option(\"dataCellTemplate\"),\r\n                startCellIndex: 0\r\n            }, (null === (_this$virtualScrollin = this.virtualScrollingDispatcher.horizontalVirtualScrolling) || void 0 === _this$virtualScrollin ? void 0 : _this$virtualScrollin.getRenderState()) || {});\r\n            utils.renovation.renderComponent(this, this._$allDayTable, dxrAllDayPanelTable, \"renovatedAllDayPanel\", options);\r\n            utils.renovation.renderComponent(this, this._$allDayTitle, dxrAllDayPanelTitle, \"renovatedAllDayPanelTitle\", {})\r\n        }\r\n        this._toggleAllDayVisibility(true)\r\n    }\r\n    renderRTimeTable() {\r\n        utils.renovation.renderComponent(this, this._$timePanel, dxrTimePanelTableLayout, \"renovatedTimePanel\", {\r\n            timePanelData: this.viewDataProvider.timePanelData,\r\n            timeCellTemplate: this.option(\"timeCellTemplate\"),\r\n            groupOrientation: this.option(\"groupOrientation\")\r\n        })\r\n    }\r\n    renderRHeaderPanel() {\r\n        var isRenderDateHeader = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : true;\r\n        if (this.option(\"groups\").length) {\r\n            this._attachGroupCountClass()\r\n        } else {\r\n            this._detachGroupCountClass()\r\n        }\r\n        utils.renovation.renderComponent(this, this._$thead, this.renovatedHeaderPanelComponent, \"renovatedHeaderPanel\", {\r\n            dateHeaderData: this.viewDataProvider.dateHeaderData,\r\n            groupPanelData: this.viewDataProvider.getGroupPanelData(this.generateRenderOptions()),\r\n            dateCellTemplate: this.option(\"dateCellTemplate\"),\r\n            timeCellTemplate: this.option(\"timeCellTemplate\"),\r\n            groups: this.option(\"groups\"),\r\n            groupByDate: this.isGroupedByDate(),\r\n            groupOrientation: this.option(\"groupOrientation\"),\r\n            resourceCellTemplate: this.option(\"resourceCellTemplate\"),\r\n            isRenderDateHeader: isRenderDateHeader\r\n        })\r\n    }\r\n    initDragBehavior(scheduler) {\r\n        if (!this.dragBehavior && scheduler) {\r\n            this.dragBehavior = new AppointmentDragBehavior(scheduler);\r\n            this._createDragBehavior(this.getWorkArea());\r\n            this._createDragBehavior(this.getAllDayContainer());\r\n            this._createDragBehavior(this._$allDayPanel)\r\n        }\r\n    }\r\n    _createDragBehavior($element) {\r\n        var options = {\r\n            getItemData: (itemElement, appointments) => appointments._getItemData(itemElement),\r\n            getItemSettings: $itemElement => $itemElement.data(APPOINTMENT_SETTINGS_KEY)\r\n        };\r\n        this._createDragBehaviorBase($element, options)\r\n    }\r\n    _createDragBehaviorBase($element, options) {\r\n        var container = this.$element().find(\".\".concat(FIXED_CONTAINER_CLASS));\r\n        this.dragBehavior.addTo($element, createDragBehaviorConfig(container, this.isDefaultDraggingMode, this.dragBehavior, () => {\r\n            if (!this.isDefaultDraggingMode) {\r\n                this.preventDefaultDragging = false\r\n            }\r\n        }, () => {\r\n            if (!this.isDefaultDraggingMode) {\r\n                this.preventDefaultDragging = true\r\n            }\r\n        }, () => this._getDroppableCell(), () => this._getDateTables(), () => this.removeDroppableCellClass(), () => this.getCellWidth(), options))\r\n    }\r\n    _isRenderHeaderPanelEmptyCell() {\r\n        return this._isVerticalGroupedWorkSpace()\r\n    }\r\n    _dispose() {\r\n        super._dispose();\r\n        this.virtualScrollingDispatcher.dispose()\r\n    }\r\n    _getDefaultOptions() {\r\n        return extend(super._getDefaultOptions(), {\r\n            currentDate: new Date,\r\n            intervalCount: 1,\r\n            startDate: null,\r\n            firstDayOfWeek: void 0,\r\n            startDayHour: 0,\r\n            endDayHour: 24,\r\n            hoursInterval: .5,\r\n            activeStateEnabled: true,\r\n            hoverStateEnabled: true,\r\n            groups: [],\r\n            showAllDayPanel: true,\r\n            allDayExpanded: false,\r\n            onCellClick: null,\r\n            crossScrollingEnabled: false,\r\n            dataCellTemplate: null,\r\n            timeCellTemplate: null,\r\n            resourceCellTemplate: null,\r\n            dateCellTemplate: null,\r\n            allowMultipleCellSelection: true,\r\n            indicatorTime: new Date,\r\n            indicatorUpdateInterval: 5 * toMs(\"minute\"),\r\n            shadeUntilCurrentTime: true,\r\n            groupOrientation: \"horizontal\",\r\n            selectedCellData: [],\r\n            groupByDate: false,\r\n            scrolling: {\r\n                mode: \"standard\"\r\n            },\r\n            allDayPanelMode: \"all\",\r\n            renovateRender: true,\r\n            height: void 0,\r\n            draggingMode: \"outlook\",\r\n            onScrollEnd: () => {},\r\n            getHeaderHeight: void 0,\r\n            onRenderAppointments: () => {},\r\n            onShowAllDayPanel: () => {},\r\n            onSelectedCellsClick: () => {},\r\n            timeZoneCalculator: void 0,\r\n            schedulerHeight: void 0,\r\n            schedulerWidth: void 0\r\n        })\r\n    }\r\n    _optionChanged(args) {\r\n        switch (args.name) {\r\n            case \"startDayHour\":\r\n                validateDayHours(args.value, this.option(\"endDayHour\"));\r\n                this._cleanWorkSpace();\r\n                break;\r\n            case \"endDayHour\":\r\n                validateDayHours(this.option(\"startDayHour\"), args.value);\r\n                this._cleanWorkSpace();\r\n                break;\r\n            case \"dateCellTemplate\":\r\n            case \"resourceCellTemplate\":\r\n            case \"dataCellTemplate\":\r\n            case \"timeCellTemplate\":\r\n            case \"hoursInterval\":\r\n            case \"firstDayOfWeek\":\r\n            case \"currentDate\":\r\n            case \"startDate\":\r\n                this._cleanWorkSpace();\r\n                break;\r\n            case \"groups\":\r\n                this._cleanView();\r\n                this._removeAllDayElements();\r\n                this._initGrouping();\r\n                this.repaint();\r\n                break;\r\n            case \"groupOrientation\":\r\n                this._initGroupedStrategy();\r\n                this._createAllDayPanelElements();\r\n                this._removeAllDayElements();\r\n                this._cleanWorkSpace();\r\n                this._toggleGroupByDateClass();\r\n                break;\r\n            case \"showAllDayPanel\":\r\n                if (this._isVerticalGroupedWorkSpace()) {\r\n                    this._cleanView();\r\n                    this._removeAllDayElements();\r\n                    this._initGrouping();\r\n                    this.repaint()\r\n                } else if (!this.isRenovatedRender()) {\r\n                    this._toggleAllDayVisibility(true)\r\n                } else {\r\n                    this.renderWorkSpace()\r\n                }\r\n                break;\r\n            case \"allDayExpanded\":\r\n                this._changeAllDayVisibility();\r\n                this._attachTablesEvents();\r\n                this._updateScrollable();\r\n                break;\r\n            case \"onSelectionChanged\":\r\n                this._createSelectionChangedAction();\r\n                break;\r\n            case \"onCellClick\":\r\n                this._createCellClickAction();\r\n                break;\r\n            case \"onCellContextMenu\":\r\n                this._attachContextMenuEvent();\r\n                break;\r\n            case \"intervalCount\":\r\n                this._cleanWorkSpace();\r\n                this._toggleWorkSpaceCountClass();\r\n                break;\r\n            case \"groupByDate\":\r\n                this._cleanWorkSpace();\r\n                this._toggleGroupByDateClass();\r\n                break;\r\n            case \"crossScrollingEnabled\":\r\n                this._toggleHorizontalScrollClass();\r\n                this._dateTableScrollable.option(this._dateTableScrollableConfig());\r\n                break;\r\n            case \"allDayPanelMode\":\r\n                this.updateShowAllDayPanel();\r\n                this.updateAppointments();\r\n                break;\r\n            case \"width\":\r\n                super._optionChanged(args);\r\n                this._dimensionChanged();\r\n                break;\r\n            case \"timeZoneCalculator\":\r\n            case \"allowMultipleCellSelection\":\r\n            case \"selectedCellData\":\r\n                break;\r\n            case \"renovateRender\":\r\n            case \"scrolling\":\r\n                this.repaint();\r\n                break;\r\n            case \"schedulerHeight\":\r\n            case \"schedulerWidth\":\r\n                this.virtualScrollingDispatcher.updateDimensions(true);\r\n                break;\r\n            default:\r\n                super._optionChanged(args)\r\n        }\r\n    }\r\n    updateShowAllDayPanel() {\r\n        var isHiddenAllDayPanel = \"hidden\" === this.option(\"allDayPanelMode\");\r\n        this.option(\"onShowAllDayPanel\")(!isHiddenAllDayPanel)\r\n    }\r\n    _getVirtualScrollingDispatcherOptions() {\r\n        return {\r\n            getCellHeight: this.getCellHeight.bind(this),\r\n            getCellWidth: this.getCellWidth.bind(this),\r\n            getCellMinWidth: this.getCellMinWidth.bind(this),\r\n            isRTL: this._isRTL.bind(this),\r\n            getSchedulerHeight: () => this.option(\"schedulerHeight\"),\r\n            getSchedulerWidth: () => this.option(\"schedulerWidth\"),\r\n            getViewHeight: () => this.$element().height ? this.$element().height() : getHeight(this.$element()),\r\n            getViewWidth: () => this.$element().width ? this.$element().width() : getWidth(this.$element()),\r\n            getWindowHeight: () => getWindow().innerHeight,\r\n            getWindowWidth: () => getWindow().innerWidth,\r\n            getScrolling: () => this.option(\"scrolling\"),\r\n            getScrollableOuterWidth: this.getScrollableOuterWidth.bind(this),\r\n            getScrollable: this.getScrollable.bind(this),\r\n            createAction: this._createAction.bind(this),\r\n            updateRender: this.updateRender.bind(this),\r\n            updateGrid: this.updateGrid.bind(this),\r\n            getGroupCount: this._getGroupCount.bind(this),\r\n            isVerticalGrouping: this._isVerticalGroupedWorkSpace.bind(this),\r\n            getTotalRowCount: this._getTotalRowCount.bind(this),\r\n            getTotalCellCount: this._getTotalCellCount.bind(this)\r\n        }\r\n    }\r\n    _cleanWorkSpace() {\r\n        this._cleanView();\r\n        this._toggleGroupedClass();\r\n        this._toggleWorkSpaceWithOddCells();\r\n        this.virtualScrollingDispatcher.updateDimensions(true);\r\n        this._renderView();\r\n        this.option(\"crossScrollingEnabled\") && this._setTableSizes();\r\n        this.cache.clear()\r\n    }\r\n    _init() {\r\n        this._headerSemaphore = new ScrollSemaphore;\r\n        this._sideBarSemaphore = new ScrollSemaphore;\r\n        this._dataTableSemaphore = new ScrollSemaphore;\r\n        this._viewDataProvider = null;\r\n        this._cellsSelectionState = null;\r\n        this._activeStateUnit = CELL_SELECTOR;\r\n        super._init();\r\n        this._initGrouping();\r\n        this._toggleHorizontalScrollClass();\r\n        this._toggleWorkSpaceCountClass();\r\n        this._toggleGroupByDateClass();\r\n        this._toggleWorkSpaceWithOddCells();\r\n        this.$element().addClass(COMPONENT_CLASS).addClass(this._getElementClass())\r\n    }\r\n    _initPositionHelper() {\r\n        this.positionHelper = new PositionHelper({\r\n            key: this.option(\"key\"),\r\n            viewDataProvider: this.viewDataProvider,\r\n            viewStartDayHour: this.option(\"startDayHour\"),\r\n            viewEndDayHour: this.option(\"endDayHour\"),\r\n            cellDuration: this.getCellDuration(),\r\n            groupedStrategy: this._groupedStrategy,\r\n            isGroupedByDate: this.isGroupedByDate(),\r\n            rtlEnabled: this.option(\"rtlEnabled\"),\r\n            startViewDate: this.getStartViewDate(),\r\n            isVerticalGrouping: this._isVerticalGroupedWorkSpace(),\r\n            groupCount: this._getGroupCount(),\r\n            isVirtualScrolling: this.isVirtualScrolling(),\r\n            getDOMMetaDataCallback: this.getDOMElementsMetaData.bind(this)\r\n        })\r\n    }\r\n    _initGrouping() {\r\n        this._initGroupedStrategy();\r\n        this._toggleGroupingDirectionClass();\r\n        this._toggleGroupByDateClass()\r\n    }\r\n    isVerticalOrientation() {\r\n        var orientation = this.option(\"groups\").length ? this.option(\"groupOrientation\") : this._getDefaultGroupStrategy();\r\n        return \"vertical\" === orientation\r\n    }\r\n    _initGroupedStrategy() {\r\n        var Strategy = this.isVerticalOrientation() ? VerticalGroupedStrategy : HorizontalGroupedStrategy;\r\n        this._groupedStrategy = new Strategy(this)\r\n    }\r\n    _getDefaultGroupStrategy() {\r\n        return \"horizontal\"\r\n    }\r\n    _toggleHorizontalScrollClass() {\r\n        this.$element().toggleClass(WORKSPACE_WITH_BOTH_SCROLLS_CLASS, this.option(\"crossScrollingEnabled\"))\r\n    }\r\n    _toggleGroupByDateClass() {\r\n        this.$element().toggleClass(WORKSPACE_WITH_GROUP_BY_DATE_CLASS, this.isGroupedByDate())\r\n    }\r\n    _toggleWorkSpaceCountClass() {\r\n        this.$element().toggleClass(WORKSPACE_WITH_COUNT_CLASS, this._isWorkSpaceWithCount())\r\n    }\r\n    _toggleWorkSpaceWithOddCells() {\r\n        this.$element().toggleClass(WORKSPACE_WITH_ODD_CELLS_CLASS, this._isWorkspaceWithOddCells())\r\n    }\r\n    _toggleGroupingDirectionClass() {\r\n        this.$element().toggleClass(VERTICAL_GROUPED_WORKSPACE_CLASS, this._isVerticalGroupedWorkSpace())\r\n    }\r\n    _getDateTableCellClass(rowIndex, columnIndex) {\r\n        var cellClass = DATE_TABLE_CELL_CLASS + \" \" + HORIZONTAL_SIZES_CLASS + \" \" + VERTICAL_SIZES_CLASS;\r\n        return this._groupedStrategy.addAdditionalGroupCellClasses(cellClass, columnIndex + 1, rowIndex, columnIndex)\r\n    }\r\n    _getGroupHeaderClass(i) {\r\n        var cellClass = GROUP_HEADER_CLASS;\r\n        return this._groupedStrategy.addAdditionalGroupCellClasses(cellClass, i + 1)\r\n    }\r\n    _initWorkSpaceUnits() {\r\n        this._$headerPanelContainer = $(\"<div>\").addClass(\"dx-scheduler-header-panel-container\");\r\n        this._$headerTablesContainer = $(\"<div>\").addClass(\"dx-scheduler-header-tables-container\");\r\n        this._$headerPanel = $(\"<table>\");\r\n        this._$thead = $(\"<thead>\").appendTo(this._$headerPanel);\r\n        this._$headerPanelEmptyCell = $(\"<div>\").addClass(\"dx-scheduler-header-panel-empty-cell\");\r\n        this._$allDayTable = $(\"<table>\");\r\n        this._$fixedContainer = $(\"<div>\").addClass(FIXED_CONTAINER_CLASS);\r\n        this._$allDayContainer = $(\"<div>\").addClass(ALL_DAY_CONTAINER_CLASS);\r\n        this._$dateTableScrollableContent = $(\"<div>\").addClass(\"dx-scheduler-date-table-scrollable-content\");\r\n        this._$sidebarScrollableContent = $(\"<div>\").addClass(\"dx-scheduler-side-bar-scrollable-content\");\r\n        this._initAllDayPanelElements();\r\n        if (this.isRenovatedRender()) {\r\n            this.createRAllDayPanelElements()\r\n        } else {\r\n            this._createAllDayPanelElements()\r\n        }\r\n        this._$timePanel = $(\"<table>\").addClass(TIME_PANEL_CLASS);\r\n        this._$dateTable = $(\"<table>\");\r\n        this._$dateTableContainer = $(\"<div>\").addClass(\"dx-scheduler-date-table-container\");\r\n        this._$groupTable = $(\"<div>\").addClass(WORKSPACE_VERTICAL_GROUP_TABLE_CLASS)\r\n    }\r\n    _initAllDayPanelElements() {\r\n        this._allDayTitles = [];\r\n        this._allDayTables = [];\r\n        this._allDayPanels = []\r\n    }\r\n    _initDateTableScrollable() {\r\n        var $dateTableScrollable = $(\"<div>\").addClass(SCHEDULER_DATE_TABLE_SCROLLABLE_CLASS);\r\n        this._dateTableScrollable = this._createComponent($dateTableScrollable, Scrollable, this._dateTableScrollableConfig())\r\n    }\r\n    _createWorkSpaceElements() {\r\n        if (this.option(\"crossScrollingEnabled\")) {\r\n            this._createWorkSpaceScrollableElements()\r\n        } else {\r\n            this._createWorkSpaceStaticElements()\r\n        }\r\n    }\r\n    _createWorkSpaceStaticElements() {\r\n        this._$dateTableContainer.append(this._$dateTable);\r\n        if (this._isVerticalGroupedWorkSpace()) {\r\n            this._$dateTableContainer.append(this._$allDayContainer);\r\n            this._$dateTableScrollableContent.append(this._$groupTable, this._$timePanel, this._$dateTableContainer);\r\n            this._dateTableScrollable.$content().append(this._$dateTableScrollableContent);\r\n            this._$headerTablesContainer.append(this._$headerPanel)\r\n        } else {\r\n            var _this$_$allDayPanel;\r\n            this._$dateTableScrollableContent.append(this._$timePanel, this._$dateTableContainer);\r\n            this._dateTableScrollable.$content().append(this._$dateTableScrollableContent);\r\n            this._$headerTablesContainer.append(this._$headerPanel, this._$allDayPanel);\r\n            null === (_this$_$allDayPanel = this._$allDayPanel) || void 0 === _this$_$allDayPanel ? void 0 : _this$_$allDayPanel.append(this._$allDayContainer, this._$allDayTable)\r\n        }\r\n        this._appendHeaderPanelEmptyCellIfNecessary();\r\n        this._$headerPanelContainer.append(this._$headerTablesContainer);\r\n        this.$element().append(this._$fixedContainer, this._$headerPanelContainer, this._dateTableScrollable.$element())\r\n    }\r\n    _createWorkSpaceScrollableElements() {\r\n        this.$element().append(this._$fixedContainer);\r\n        this._$flexContainer = $(\"<div>\").addClass(\"dx-scheduler-work-space-flex-container\");\r\n        this._createHeaderScrollable();\r\n        this._headerScrollable.$content().append(this._$headerPanel);\r\n        this._appendHeaderPanelEmptyCellIfNecessary();\r\n        this._$headerPanelContainer.append(this._$headerTablesContainer);\r\n        this.$element().append(this._$headerPanelContainer);\r\n        this.$element().append(this._$flexContainer);\r\n        this._createSidebarScrollable();\r\n        this._$flexContainer.append(this._dateTableScrollable.$element());\r\n        this._$dateTableContainer.append(this._$dateTable);\r\n        this._$dateTableScrollableContent.append(this._$dateTableContainer);\r\n        this._dateTableScrollable.$content().append(this._$dateTableScrollableContent);\r\n        if (this._isVerticalGroupedWorkSpace()) {\r\n            this._$dateTableContainer.append(this._$allDayContainer);\r\n            this._$sidebarScrollableContent.append(this._$groupTable, this._$timePanel)\r\n        } else {\r\n            var _this$_$allDayPanel2;\r\n            this._headerScrollable.$content().append(this._$allDayPanel);\r\n            null === (_this$_$allDayPanel2 = this._$allDayPanel) || void 0 === _this$_$allDayPanel2 ? void 0 : _this$_$allDayPanel2.append(this._$allDayContainer, this._$allDayTable);\r\n            this._$sidebarScrollableContent.append(this._$timePanel)\r\n        }\r\n        this._sidebarScrollable.$content().append(this._$sidebarScrollableContent)\r\n    }\r\n    _appendHeaderPanelEmptyCellIfNecessary() {\r\n        this._isRenderHeaderPanelEmptyCell() && this._$headerPanelContainer.append(this._$headerPanelEmptyCell)\r\n    }\r\n    _createHeaderScrollable() {\r\n        var $headerScrollable = $(\"<div>\").addClass(SCHEDULER_HEADER_SCROLLABLE_CLASS).appendTo(this._$headerTablesContainer);\r\n        this._headerScrollable = this._createComponent($headerScrollable, Scrollable, this._headerScrollableConfig())\r\n    }\r\n    _createSidebarScrollable() {\r\n        var $timePanelScrollable = $(\"<div>\").addClass(SCHEDULER_SIDEBAR_SCROLLABLE_CLASS).appendTo(this._$flexContainer);\r\n        this._sidebarScrollable = this._createComponent($timePanelScrollable, Scrollable, {\r\n            useKeyboard: false,\r\n            showScrollbar: \"never\",\r\n            direction: \"vertical\",\r\n            useNative: false,\r\n            updateManually: true,\r\n            bounceEnabled: false,\r\n            onScroll: e => {\r\n                this._sideBarSemaphore.take(e.scrollOffset);\r\n                if (this._dataTableSemaphore.isFree(e.scrollOffset)) {\r\n                    this._dateTableScrollable.scrollTo({\r\n                        top: e.scrollOffset.top\r\n                    })\r\n                }\r\n                this._sideBarSemaphore.release()\r\n            }\r\n        })\r\n    }\r\n    _attachTableClasses() {\r\n        this._addTableClass(this._$dateTable, DATE_TABLE_CLASS);\r\n        if (this._isVerticalGroupedWorkSpace()) {\r\n            var groupCount = this._getGroupCount();\r\n            for (var i = 0; i < groupCount; i++) {\r\n                this._addTableClass(this._allDayTables[i], ALL_DAY_TABLE_CLASS)\r\n            }\r\n        } else if (!this.isRenovatedRender()) {\r\n            this._addTableClass(this._$allDayTable, ALL_DAY_TABLE_CLASS)\r\n        }\r\n    }\r\n    _attachHeaderTableClasses() {\r\n        this._addTableClass(this._$headerPanel, HEADER_PANEL_CLASS)\r\n    }\r\n    _addTableClass($el, className) {\r\n        $el && !$el.hasClass(className) && $el.addClass(className)\r\n    }\r\n    _initMarkup() {\r\n        this.cache.clear();\r\n        this._initWorkSpaceUnits();\r\n        this._initVirtualScrolling();\r\n        this._initDateTableScrollable();\r\n        this._createWorkSpaceElements();\r\n        super._initMarkup();\r\n        if (!this.option(\"crossScrollingEnabled\")) {\r\n            this._attachTableClasses();\r\n            this._attachHeaderTableClasses()\r\n        }\r\n        this._toggleGroupedClass();\r\n        this._renderView();\r\n        this._attachEvents()\r\n    }\r\n    _render() {\r\n        super._render();\r\n        this._renderDateTimeIndication();\r\n        this._setIndicationUpdateInterval()\r\n    }\r\n    _toggleGroupedClass() {\r\n        this.$element().toggleClass(GROUPED_WORKSPACE_CLASS, this._getGroupCount() > 0)\r\n    }\r\n    _renderView() {\r\n        if (this.isRenovatedRender()) {\r\n            if (this._isVerticalGroupedWorkSpace()) {\r\n                this.renderRGroupPanel()\r\n            }\r\n        } else {\r\n            this._applyCellTemplates(this._renderGroupHeader())\r\n        }\r\n        this.renderWorkSpace();\r\n        this._updateGroupTableHeight();\r\n        this.updateHeaderEmptyCellWidth();\r\n        this._shader = new VerticalShader(this)\r\n    }\r\n    updateCellsSelection() {\r\n        var renderOptions = this.generateRenderOptions();\r\n        this.viewDataProvider.updateViewData(renderOptions);\r\n        this.renderRWorkSpace({\r\n            timePanel: true,\r\n            dateTable: true,\r\n            allDayPanel: true\r\n        })\r\n    }\r\n    _renderDateTimeIndication() {\r\n        return noop()\r\n    }\r\n    _setIndicationUpdateInterval() {\r\n        return noop()\r\n    }\r\n    _refreshDateTimeIndication() {\r\n        return noop()\r\n    }\r\n    _detachGroupCountClass() {\r\n        [...VERTICAL_GROUP_COUNT_CLASSES].forEach(className => {\r\n            this.$element().removeClass(className)\r\n        })\r\n    }\r\n    _attachGroupCountClass() {\r\n        var className = this._groupedStrategy.getGroupCountClass(this.option(\"groups\"));\r\n        this.$element().addClass(className)\r\n    }\r\n    _getDateHeaderTemplate() {\r\n        return this.option(\"dateCellTemplate\")\r\n    }\r\n    _toggleAllDayVisibility(isUpdateScrollable) {\r\n        var showAllDayPanel = this._isShowAllDayPanel();\r\n        this.$element().toggleClass(WORKSPACE_WITH_ALL_DAY_CLASS, showAllDayPanel);\r\n        this._changeAllDayVisibility();\r\n        isUpdateScrollable && this._updateScrollable()\r\n    }\r\n    _changeAllDayVisibility() {\r\n        this.cache.clear();\r\n        this.$element().toggleClass(WORKSPACE_WITH_COLLAPSED_ALL_DAY_CLASS, !this.option(\"allDayExpanded\") && this._isShowAllDayPanel())\r\n    }\r\n    _getDateTables() {\r\n        return this._$dateTable.add(this._$allDayTable)\r\n    }\r\n    _getDateTable() {\r\n        return this._$dateTable\r\n    }\r\n    _removeAllDayElements() {\r\n        this._$allDayTable && this._$allDayTable.remove();\r\n        this._$allDayTitle && this._$allDayTitle.remove()\r\n    }\r\n    _cleanView() {\r\n        var _this$_shader;\r\n        this.cache.clear();\r\n        this._cleanTableWidths();\r\n        this.cellsSelectionState.clearSelectedAndFocusedCells();\r\n        if (!this.isRenovatedRender()) {\r\n            var _this$_$allDayTable, _this$_$sidebarTable;\r\n            this._$thead.empty();\r\n            this._$dateTable.empty();\r\n            this._$timePanel.empty();\r\n            this._$groupTable.empty();\r\n            null === (_this$_$allDayTable = this._$allDayTable) || void 0 === _this$_$allDayTable ? void 0 : _this$_$allDayTable.empty();\r\n            null === (_this$_$sidebarTable = this._$sidebarTable) || void 0 === _this$_$sidebarTable ? void 0 : _this$_$sidebarTable.empty()\r\n        }\r\n        null === (_this$_shader = this._shader) || void 0 === _this$_shader ? void 0 : _this$_shader.clean();\r\n        delete this._interval\r\n    }\r\n    _clean() {\r\n        eventsEngine.off(domAdapter.getDocument(), SCHEDULER_CELL_DXPOINTERUP_EVENT_NAME);\r\n        this._disposeRenovatedComponents();\r\n        super._clean()\r\n    }\r\n    _cleanTableWidths() {\r\n        this._$headerPanel.css(\"width\", \"\");\r\n        this._$dateTable.css(\"width\", \"\");\r\n        this._$allDayTable && this._$allDayTable.css(\"width\", \"\")\r\n    }\r\n    _disposeRenovatedComponents() {\r\n        var _this$renovatedAllDay, _this$renovatedDateTa, _this$renovatedTimePa, _this$renovatedGroupP, _this$renovatedHeader;\r\n        null === (_this$renovatedAllDay = this.renovatedAllDayPanel) || void 0 === _this$renovatedAllDay ? void 0 : _this$renovatedAllDay.dispose();\r\n        this.renovatedAllDayPanel = void 0;\r\n        null === (_this$renovatedDateTa = this.renovatedDateTable) || void 0 === _this$renovatedDateTa ? void 0 : _this$renovatedDateTa.dispose();\r\n        this.renovatedDateTable = void 0;\r\n        null === (_this$renovatedTimePa = this.renovatedTimePanel) || void 0 === _this$renovatedTimePa ? void 0 : _this$renovatedTimePa.dispose();\r\n        this.renovatedTimePanel = void 0;\r\n        null === (_this$renovatedGroupP = this.renovatedGroupPanel) || void 0 === _this$renovatedGroupP ? void 0 : _this$renovatedGroupP.dispose();\r\n        this.renovatedGroupPanel = void 0;\r\n        null === (_this$renovatedHeader = this.renovatedHeaderPanel) || void 0 === _this$renovatedHeader ? void 0 : _this$renovatedHeader.dispose();\r\n        this.renovatedHeaderPanel = void 0\r\n    }\r\n    getGroupedStrategy() {\r\n        return this._groupedStrategy\r\n    }\r\n    getFixedContainer() {\r\n        return this._$fixedContainer\r\n    }\r\n    getAllDayContainer() {\r\n        return this._$allDayContainer\r\n    }\r\n    updateRender() {\r\n        this.renderer.updateRender()\r\n    }\r\n    updateGrid() {\r\n        this.renderer._renderGrid()\r\n    }\r\n    updateAppointments() {\r\n        var _this$dragBehavior2;\r\n        this.option(\"onRenderAppointments\")();\r\n        null === (_this$dragBehavior2 = this.dragBehavior) || void 0 === _this$dragBehavior2 ? void 0 : _this$dragBehavior2.updateDragSource()\r\n    }\r\n    _createAllDayPanelElements() {\r\n        var groupCount = this._getGroupCount();\r\n        if (this._isVerticalGroupedWorkSpace() && 0 !== groupCount) {\r\n            for (var i = 0; i < groupCount; i++) {\r\n                var $allDayTitle = $(\"<div>\").addClass(ALL_DAY_TITLE_CLASS).text(messageLocalization.format(\"dxScheduler-allDay\"));\r\n                this._allDayTitles.push($allDayTitle);\r\n                this._$allDayTable = $(\"<table>\");\r\n                this._allDayTables.push(this._$allDayTable);\r\n                this._$allDayPanel = $(\"<div>\").addClass(ALL_DAY_PANEL_CLASS).append(this._$allDayTable);\r\n                this._allDayPanels.push(this._$allDayPanel)\r\n            }\r\n        } else {\r\n            this._$allDayTitle = $(\"<div>\").addClass(ALL_DAY_TITLE_CLASS).text(messageLocalization.format(\"dxScheduler-allDay\")).appendTo(this.$element());\r\n            this._$allDayTable = $(\"<table>\");\r\n            this._$allDayPanel = $(\"<div>\").addClass(ALL_DAY_PANEL_CLASS).append(this._$allDayTable)\r\n        }\r\n    }\r\n    renderWorkSpace() {\r\n        var isGenerateNewViewData = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : true;\r\n        this.cache.clear();\r\n        this.viewDataProvider.update(this.generateRenderOptions(), isGenerateNewViewData);\r\n        if (this.isRenovatedRender()) {\r\n            this.renderRWorkSpace();\r\n            this.virtualScrollingDispatcher.updateDimensions()\r\n        } else {\r\n            this._renderDateHeader();\r\n            this._renderTimePanel();\r\n            this._renderGroupAllDayPanel();\r\n            this._renderDateTable();\r\n            this._renderAllDayPanel()\r\n        }\r\n        this._initPositionHelper()\r\n    }\r\n    _renderGroupHeader() {\r\n        var $container = this._getGroupHeaderContainer();\r\n        var groupCount = this._getGroupCount();\r\n        var cellTemplates = [];\r\n        if (groupCount) {\r\n            var groupRows = this._makeGroupRows(this.option(\"groups\"), this.option(\"groupByDate\"));\r\n            this._attachGroupCountClass();\r\n            $container.append(groupRows.elements);\r\n            cellTemplates = groupRows.cellTemplates\r\n        } else {\r\n            this._detachGroupCountClass()\r\n        }\r\n        return cellTemplates\r\n    }\r\n    _applyCellTemplates(templates) {\r\n        null === templates || void 0 === templates ? void 0 : templates.forEach((function(template) {\r\n            template()\r\n        }))\r\n    }\r\n    _makeGroupRows(groups, groupByDate) {\r\n        var tableCreatorStrategy = this._isVerticalGroupedWorkSpace() ? tableCreator.VERTICAL : tableCreator.HORIZONTAL;\r\n        return tableCreator.makeGroupedTable(tableCreatorStrategy, groups, {\r\n            groupHeaderRowClass: GROUP_ROW_CLASS,\r\n            groupRowClass: GROUP_ROW_CLASS,\r\n            groupHeaderClass: this._getGroupHeaderClass.bind(this),\r\n            groupHeaderContentClass: GROUP_HEADER_CONTENT_CLASS\r\n        }, this._getCellCount() || 1, this.option(\"resourceCellTemplate\"), this._getGroupCount(), groupByDate)\r\n    }\r\n    _renderDateHeader() {\r\n        var container = this._getDateHeaderContainer();\r\n        var $headerRow = $(\"<tr>\").addClass(HEADER_ROW_CLASS);\r\n        var count = this._getCellCount();\r\n        var cellTemplate = this._getDateHeaderTemplate();\r\n        var repeatCount = this._getCalculateHeaderCellRepeatCount();\r\n        var templateCallbacks = [];\r\n        var groupByDate = this.isGroupedByDate();\r\n        if (!groupByDate) {\r\n            for (var rowIndex = 0; rowIndex < repeatCount; rowIndex++) {\r\n                for (var columnIndex = 0; columnIndex < count; columnIndex++) {\r\n                    var templateIndex = rowIndex * count + columnIndex;\r\n                    this._renderDateHeaderTemplate($headerRow, columnIndex, templateIndex, cellTemplate, templateCallbacks)\r\n                }\r\n            }\r\n            container.append($headerRow)\r\n        } else {\r\n            var colSpan = groupByDate ? this._getGroupCount() : 1;\r\n            for (var _columnIndex = 0; _columnIndex < count; _columnIndex++) {\r\n                var _templateIndex = _columnIndex * repeatCount;\r\n                var cellElement = this._renderDateHeaderTemplate($headerRow, _columnIndex, _templateIndex, cellTemplate, templateCallbacks);\r\n                cellElement.attr(\"colSpan\", colSpan)\r\n            }\r\n            container.prepend($headerRow)\r\n        }\r\n        this._applyCellTemplates(templateCallbacks);\r\n        return $headerRow\r\n    }\r\n    _renderDateHeaderTemplate(container, panelCellIndex, templateIndex, cellTemplate, templateCallbacks) {\r\n        var validTemplateIndex = this.isGroupedByDate() ? Math.floor(templateIndex / this._getGroupCount()) : templateIndex;\r\n        var completeDateHeaderMap = this.viewDataProvider.completeDateHeaderMap;\r\n        var {\r\n            text: text,\r\n            startDate: date\r\n        } = completeDateHeaderMap[completeDateHeaderMap.length - 1][validTemplateIndex];\r\n        var $cell = $(\"<th>\").addClass(this._getHeaderPanelCellClass(panelCellIndex)).attr(\"title\", text);\r\n        if (null !== cellTemplate && void 0 !== cellTemplate && cellTemplate.render) {\r\n            templateCallbacks.push(cellTemplate.render.bind(cellTemplate, {\r\n                model: _extends({\r\n                    text: text,\r\n                    date: date\r\n                }, this._getGroupsForDateHeaderTemplate(templateIndex)),\r\n                index: templateIndex,\r\n                container: getPublicElement($cell)\r\n            }))\r\n        } else {\r\n            $cell.text(text)\r\n        }\r\n        container.append($cell);\r\n        return $cell\r\n    }\r\n    _getGroupsForDateHeaderTemplate(templateIndex) {\r\n        var indexMultiplier = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 1;\r\n        var groupIndex;\r\n        var groups;\r\n        if (this._isHorizontalGroupedWorkSpace() && !this.isGroupedByDate()) {\r\n            groupIndex = this._getGroupIndex(0, templateIndex * indexMultiplier);\r\n            var groupsArray = getCellGroups(groupIndex, this.option(\"groups\"));\r\n            groups = getGroupsObjectFromGroupsArray(groupsArray)\r\n        }\r\n        return {\r\n            groups: groups,\r\n            groupIndex: groupIndex\r\n        }\r\n    }\r\n    _getHeaderPanelCellClass(i) {\r\n        var cellClass = HEADER_PANEL_CELL_CLASS + \" \" + HORIZONTAL_SIZES_CLASS;\r\n        return this._groupedStrategy.addAdditionalGroupCellClasses(cellClass, i + 1, void 0, void 0, this.isGroupedByDate())\r\n    }\r\n    _renderAllDayPanel(index) {\r\n        var cellCount = this._getCellCount();\r\n        if (!this._isVerticalGroupedWorkSpace()) {\r\n            cellCount *= this._getGroupCount() || 1\r\n        }\r\n        var cellTemplates = this._renderTableBody({\r\n            container: this._allDayPanels.length ? getPublicElement(this._allDayTables[index]) : getPublicElement(this._$allDayTable),\r\n            rowCount: 1,\r\n            cellCount: cellCount,\r\n            cellClass: this._getAllDayPanelCellClass.bind(this),\r\n            rowClass: ALL_DAY_TABLE_ROW_CLASS,\r\n            cellTemplate: this.option(\"dataCellTemplate\"),\r\n            getCellData: this._oldRender_getAllDayCellData(index),\r\n            groupIndex: index\r\n        }, true);\r\n        this._toggleAllDayVisibility(true);\r\n        this._applyCellTemplates(cellTemplates)\r\n    }\r\n    _renderGroupAllDayPanel() {\r\n        if (this._isVerticalGroupedWorkSpace()) {\r\n            var groupCount = this._getGroupCount();\r\n            for (var i = 0; i < groupCount; i++) {\r\n                this._renderAllDayPanel(i)\r\n            }\r\n        }\r\n    }\r\n    _getAllDayPanelCellClass(i, j) {\r\n        var cellClass = ALL_DAY_TABLE_CELL_CLASS + \" \" + HORIZONTAL_SIZES_CLASS;\r\n        return this._groupedStrategy.addAdditionalGroupCellClasses(cellClass, j + 1)\r\n    }\r\n    _renderTimePanel() {\r\n        var repeatCount = this._groupedStrategy.calculateTimeCellRepeatCount();\r\n        var getData = (rowIndex, field) => {\r\n            var allDayPanelsCount = 0;\r\n            if (this.isAllDayPanelVisible) {\r\n                allDayPanelsCount = 1\r\n            }\r\n            if (this.isGroupedAllDayPanel()) {\r\n                allDayPanelsCount = Math.ceil((rowIndex + 1) / this._getRowCount())\r\n            }\r\n            var validRowIndex = rowIndex + allDayPanelsCount;\r\n            return this.viewDataProvider.completeTimePanelMap[validRowIndex][field]\r\n        };\r\n        this._renderTableBody({\r\n            container: getPublicElement(this._$timePanel),\r\n            rowCount: this._getTimePanelRowCount() * repeatCount,\r\n            cellCount: 1,\r\n            cellClass: this._getTimeCellClass.bind(this),\r\n            rowClass: TIME_PANEL_ROW_CLASS,\r\n            cellTemplate: this.option(\"timeCellTemplate\"),\r\n            getCellText: rowIndex => getData(rowIndex, \"text\"),\r\n            getCellDate: rowIndex => getData(rowIndex, \"startDate\"),\r\n            groupCount: this._getGroupCount(),\r\n            allDayElements: this._insertAllDayRowsIntoDateTable() ? this._allDayTitles : void 0,\r\n            getTemplateData: (rowIndex => {\r\n                if (!this._isVerticalGroupedWorkSpace()) {\r\n                    return {}\r\n                }\r\n                var groupIndex = this._getGroupIndex(rowIndex, 0);\r\n                var groupsArray = getCellGroups(groupIndex, this.option(\"groups\"));\r\n                var groups = getGroupsObjectFromGroupsArray(groupsArray);\r\n                return {\r\n                    groupIndex: groupIndex,\r\n                    groups: groups\r\n                }\r\n            }).bind(this)\r\n        })\r\n    }\r\n    _getTimeCellClass(i) {\r\n        var cellClass = TIME_PANEL_CELL_CLASS + \" \" + VERTICAL_SIZES_CLASS;\r\n        return this._isVerticalGroupedWorkSpace() ? this._groupedStrategy.addAdditionalGroupCellClasses(cellClass, i, i) : cellClass\r\n    }\r\n    _renderDateTable() {\r\n        var groupCount = this._getGroupCount();\r\n        this._renderTableBody({\r\n            container: getPublicElement(this._$dateTable),\r\n            rowCount: this._getTotalRowCount(groupCount),\r\n            cellCount: this._getTotalCellCount(groupCount),\r\n            cellClass: this._getDateTableCellClass.bind(this),\r\n            rowClass: DATE_TABLE_ROW_CLASS,\r\n            cellTemplate: this.option(\"dataCellTemplate\"),\r\n            getCellData: (_, rowIndex, columnIndex) => {\r\n                var isGroupedAllDayPanel = this.isGroupedAllDayPanel();\r\n                var validRowIndex = rowIndex;\r\n                if (isGroupedAllDayPanel) {\r\n                    var rowCount = this._getRowCount();\r\n                    var allDayPanelsCount = Math.ceil(rowIndex / rowCount);\r\n                    validRowIndex += allDayPanelsCount\r\n                }\r\n                var cellData = this.viewDataProvider.viewDataMap.dateTableMap[validRowIndex][columnIndex].cellData;\r\n                return {\r\n                    value: this._filterCellDataFields(cellData),\r\n                    fullValue: cellData,\r\n                    key: CELL_DATA\r\n                }\r\n            },\r\n            allDayElements: this._insertAllDayRowsIntoDateTable() ? this._allDayPanels : void 0,\r\n            groupCount: groupCount,\r\n            groupByDate: this.option(\"groupByDate\")\r\n        })\r\n    }\r\n    _insertAllDayRowsIntoDateTable() {\r\n        return this._groupedStrategy.insertAllDayRowsIntoDateTable()\r\n    }\r\n    _renderTableBody(options, delayCellTemplateRendering) {\r\n        var result = [];\r\n        if (!delayCellTemplateRendering) {\r\n            this._applyCellTemplates(tableCreator.makeTable(options))\r\n        } else {\r\n            result = tableCreator.makeTable(options)\r\n        }\r\n        return result\r\n    }\r\n}\r\nvar createDragBehaviorConfig = (container, isDefaultDraggingMode, dragBehavior, enableDefaultDragging, disableDefaultDragging, getDroppableCell, getDateTables, removeDroppableCellClass, getCellWidth, options) => {\r\n    var state = {\r\n        dragElement: void 0,\r\n        itemData: void 0\r\n    };\r\n    var isItemDisabled = () => {\r\n        var {\r\n            itemData: itemData\r\n        } = state;\r\n        if (itemData) {\r\n            var getter = compileGetter(\"disabled\");\r\n            return getter(itemData)\r\n        }\r\n        return true\r\n    };\r\n    var cursorOffset = options.isSetCursorOffset ? () => {\r\n        var $dragElement = $(state.dragElement);\r\n        return {\r\n            x: getWidth($dragElement) / 2,\r\n            y: getHeight($dragElement) / 2\r\n        }\r\n    } : void 0;\r\n    return {\r\n        container: container,\r\n        dragTemplate: () => state.dragElement,\r\n        onDragStart: e => {\r\n            if (!isDefaultDraggingMode) {\r\n                disableDefaultDragging()\r\n            }\r\n            var canceled = e.cancel;\r\n            var event = e.event;\r\n            var $itemElement = $(e.itemElement);\r\n            var appointments = e.component._appointments;\r\n            state.itemData = options.getItemData(e.itemElement, appointments);\r\n            var settings = options.getItemSettings($itemElement, e);\r\n            var initialPosition = options.initialPosition;\r\n            if (!isItemDisabled()) {\r\n                event.data = event.data || {};\r\n                if (!canceled) {\r\n                    if (!settings.isCompact) {\r\n                        dragBehavior.updateDragSource(state.itemData, settings)\r\n                    }\r\n                    state.dragElement = ((itemData, settings, appointments) => {\r\n                        var appointmentIndex = appointments.option(\"items\").length;\r\n                        settings.isCompact = false;\r\n                        settings.virtual = false;\r\n                        var items = appointments._renderItem(appointmentIndex, {\r\n                            itemData: itemData,\r\n                            settings: [settings]\r\n                        });\r\n                        return items[0]\r\n                    })(state.itemData, settings, appointments);\r\n                    event.data.itemElement = state.dragElement;\r\n                    event.data.initialPosition = null !== initialPosition && void 0 !== initialPosition ? initialPosition : locate($(state.dragElement));\r\n                    event.data.itemData = state.itemData;\r\n                    event.data.itemSettings = settings;\r\n                    dragBehavior.onDragStart(event.data);\r\n                    resetPosition($(state.dragElement))\r\n                }\r\n            }\r\n        },\r\n        onDragMove: () => {\r\n            if (isDefaultDraggingMode) {\r\n                return\r\n            }\r\n            var appointmentWidth = getWidth(state.dragElement);\r\n            var cellWidth = getCellWidth();\r\n            var isWideAppointment = appointmentWidth > cellWidth;\r\n            var dragElementContainer = $(state.dragElement).parent();\r\n            var boundingRect = getBoundingRect(dragElementContainer.get(0));\r\n            var newX = boundingRect.left + 10;\r\n            var newY = boundingRect.top + 10;\r\n            var elements = isWideAppointment ? domAdapter.elementsFromPoint(newX, newY) : domAdapter.elementsFromPoint(newX + appointmentWidth / 2, newY);\r\n            var dateTables = getDateTables();\r\n            var droppableCell = elements.find(el => {\r\n                var classList = el.classList;\r\n                var isCurrentSchedulerElement = 1 === dateTables.find(el).length;\r\n                return isCurrentSchedulerElement && (classList.contains(DATE_TABLE_CELL_CLASS) || classList.contains(ALL_DAY_TABLE_CELL_CLASS))\r\n            });\r\n            if (droppableCell) {\r\n                var oldDroppableCell = getDroppableCell();\r\n                if (!oldDroppableCell.is(droppableCell)) {\r\n                    removeDroppableCellClass()\r\n                }\r\n                $(droppableCell).addClass(DATE_TABLE_DROPPABLE_CELL_CLASS)\r\n            }\r\n        },\r\n        onDragEnd: e => {\r\n            var _state$dragElement;\r\n            if (!isDefaultDraggingMode) {\r\n                enableDefaultDragging()\r\n            }\r\n            if (!isItemDisabled()) {\r\n                dragBehavior.onDragEnd(e)\r\n            }\r\n            null === (_state$dragElement = state.dragElement) || void 0 === _state$dragElement ? void 0 : _state$dragElement.remove();\r\n            removeDroppableCellClass()\r\n        },\r\n        cursorOffset: cursorOffset,\r\n        filter: options.filter\r\n    }\r\n};\r\nexport default SchedulerWorkSpace;\r\n"]},"metadata":{},"sourceType":"module"}