{"ast":null,"code":"/**\r\n * DevExtreme (esm/ui/drop_down_button.js)\r\n * Version: 22.1.6\r\n * Build date: Tue Oct 18 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport $ from \"../core/renderer\";\nimport Widget from \"./widget/ui.widget\";\nimport { FunctionTemplate } from \"../core/templates/function_template\";\nimport registerComponent from \"../core/component_registrator\";\nimport ButtonGroup from \"./button_group\";\nimport Popup from \"./popup\";\nimport List from \"./list_light\";\nimport { compileGetter } from \"../core/utils/data\";\nimport { getPublicElement } from \"../core/element\";\nimport { getImageContainer } from \"../core/utils/icon\";\nimport DataHelperMixin from \"../data_helper\";\nimport { DataSource } from \"../data/data_source/data_source\";\nimport ArrayStore from \"../data/array_store\";\nimport { Deferred } from \"../core/utils/deferred\";\nimport { extend } from \"../core/utils/extend\";\nimport { isPlainObject, isDefined } from \"../core/utils/type\";\nimport { ensureDefined, noop } from \"../core/utils/common\";\nimport Guid from \"../core/guid\";\nimport { getElementWidth, getSizeValue } from \"./drop_down_editor/utils\";\nimport messageLocalization from \"../localization/message\";\nvar DROP_DOWN_BUTTON_CLASS = \"dx-dropdownbutton\";\nvar DROP_DOWN_BUTTON_CONTENT = \"dx-dropdownbutton-content\";\nvar DROP_DOWN_BUTTON_ACTION_CLASS = \"dx-dropdownbutton-action\";\nvar DROP_DOWN_BUTTON_TOGGLE_CLASS = \"dx-dropdownbutton-toggle\";\nvar DROP_DOWN_BUTTON_HAS_ARROW_CLASS = \"dx-dropdownbutton-has-arrow\";\nvar DROP_DOWN_BUTTON_POPUP_WRAPPER_CLASS = \"dx-dropdownbutton-popup-wrapper\";\nvar DROP_DOWN_EDITOR_OVERLAY_CLASS = \"dx-dropdowneditor-overlay\";\nvar DX_BUTTON_TEXT_CLASS = \"dx-button-text\";\nvar DX_ICON_RIGHT_CLASS = \"dx-icon-right\";\nvar DropDownButton = Widget.inherit({\n  _getDefaultOptions() {\n    return extend(this.callBase(), {\n      itemTemplate: \"item\",\n      keyExpr: \"this\",\n      displayExpr: void 0,\n      selectedItem: null,\n      selectedItemKey: null,\n      stylingMode: \"outlined\",\n      deferRendering: true,\n      noDataText: messageLocalization.format(\"dxCollectionWidget-noDataText\"),\n      useSelectMode: false,\n      splitButton: false,\n      showArrowIcon: true,\n      text: \"\",\n      icon: void 0,\n      onButtonClick: null,\n      onSelectionChanged: null,\n      onItemClick: null,\n      opened: false,\n      items: null,\n      dataSource: null,\n      focusStateEnabled: true,\n      hoverStateEnabled: true,\n      dropDownOptions: {},\n      dropDownContentTemplate: \"content\",\n      wrapItemText: false,\n      useItemTextAsTitle: true,\n      grouped: false,\n      groupTemplate: \"group\",\n      buttonGroupOptions: {}\n    });\n  },\n\n  _setOptionsByReference() {\n    this.callBase();\n    extend(this._optionsByReference, {\n      selectedItem: true\n    });\n  },\n\n  _init() {\n    this.callBase();\n\n    this._createItemClickAction();\n\n    this._createActionClickAction();\n\n    this._createSelectionChangedAction();\n\n    this._initDataSource();\n\n    this._compileKeyGetter();\n\n    this._compileDisplayGetter();\n\n    this._itemsToDataSource(this.option(\"items\"));\n\n    this._options.cache(\"buttonGroupOptions\", this.option(\"buttonGroupOptions\"));\n\n    this._options.cache(\"dropDownOptions\", this.option(\"dropDownOptions\"));\n  },\n\n  _initTemplates() {\n    this._templateManager.addDefaultTemplates({\n      content: new FunctionTemplate(options => {\n        var $popupContent = $(options.container);\n        var $listContainer = $(\"<div>\").appendTo($popupContent);\n        this._list = this._createComponent($listContainer, List, this._listOptions());\n\n        this._list.registerKeyHandler(\"escape\", this._escHandler.bind(this));\n\n        this._list.registerKeyHandler(\"tab\", this._escHandler.bind(this));\n\n        this._list.registerKeyHandler(\"leftArrow\", this._escHandler.bind(this));\n\n        this._list.registerKeyHandler(\"rightArrow\", this._escHandler.bind(this));\n      })\n    });\n\n    this.callBase();\n  },\n\n  _itemsToDataSource: function (value) {\n    if (!this._dataSource) {\n      this._dataSource = new DataSource({\n        store: new ArrayStore({\n          key: this._getKey(),\n          data: value\n        }),\n        pageSize: 0\n      });\n    }\n  },\n  _getKey: function () {\n    var _this$_dataSource;\n\n    var keyExpr = this.option(\"keyExpr\");\n    var storeKey = null === (_this$_dataSource = this._dataSource) || void 0 === _this$_dataSource ? void 0 : _this$_dataSource.key();\n    return isDefined(storeKey) && (!isDefined(keyExpr) || \"this\" === keyExpr) ? storeKey : keyExpr;\n  },\n\n  _compileKeyGetter() {\n    this._keyGetter = compileGetter(this._getKey());\n  },\n\n  _compileDisplayGetter() {\n    this._displayGetter = compileGetter(this.option(\"displayExpr\"));\n  },\n\n  _initMarkup() {\n    this.callBase();\n    this.$element().addClass(DROP_DOWN_BUTTON_CLASS);\n\n    this._renderButtonGroup();\n\n    this._updateArrowClass();\n\n    if (isDefined(this.option(\"selectedItemKey\"))) {\n      this._loadSelectedItem().done(this._updateActionButton.bind(this));\n    }\n  },\n\n  _renderFocusTarget: noop,\n\n  _render() {\n    if (!this.option(\"deferRendering\") || this.option(\"opened\")) {\n      this._renderPopup();\n    }\n\n    this.callBase();\n  },\n\n  _renderContentImpl() {\n    if (this._popup) {\n      this._renderPopupContent();\n    }\n\n    return this.callBase();\n  },\n\n  _loadSelectedItem() {\n    var _this$_loadSingleDefe;\n\n    null === (_this$_loadSingleDefe = this._loadSingleDeferred) || void 0 === _this$_loadSingleDefe ? void 0 : _this$_loadSingleDefe.reject();\n    var d = new Deferred();\n\n    if (this._list && void 0 !== this._lastSelectedItemData) {\n      var cachedResult = this.option(\"useSelectMode\") ? this._list.option(\"selectedItem\") : this._lastSelectedItemData;\n      return d.resolve(cachedResult);\n    }\n\n    this._lastSelectedItemData = void 0;\n    var selectedItemKey = this.option(\"selectedItemKey\");\n\n    this._loadSingle(this._getKey(), selectedItemKey).done(d.resolve).fail(() => {\n      d.resolve(null);\n    });\n\n    this._loadSingleDeferred = d;\n    return d.promise();\n  },\n\n  _createActionClickAction() {\n    this._actionClickAction = this._createActionByOption(\"onButtonClick\");\n  },\n\n  _createSelectionChangedAction() {\n    this._selectionChangedAction = this._createActionByOption(\"onSelectionChanged\");\n  },\n\n  _createItemClickAction() {\n    this._itemClickAction = this._createActionByOption(\"onItemClick\");\n  },\n\n  _fireSelectionChangedAction(_ref) {\n    var {\n      previousValue: previousValue,\n      value: value\n    } = _ref;\n\n    this._selectionChangedAction({\n      item: value,\n      previousItem: previousValue\n    });\n  },\n\n  _fireItemClickAction(_ref2) {\n    var {\n      event: event,\n      itemElement: itemElement,\n      itemData: itemData\n    } = _ref2;\n    return this._itemClickAction({\n      event: event,\n      itemElement: itemElement,\n      itemData: this._actionItem || itemData\n    });\n  },\n\n  _actionButtonConfig() {\n    return {\n      text: this.option(\"text\"),\n      icon: this.option(\"icon\"),\n      elementAttr: {\n        class: DROP_DOWN_BUTTON_ACTION_CLASS\n      }\n    };\n  },\n\n  _getButtonGroupItems() {\n    var items = [];\n    items.push(this._actionButtonConfig());\n\n    if (this.option(\"splitButton\")) {\n      items.push({\n        icon: \"spindown\",\n        elementAttr: {\n          class: DROP_DOWN_BUTTON_TOGGLE_CLASS\n        }\n      });\n    }\n\n    return items;\n  },\n\n  _buttonGroupItemClick(_ref3) {\n    var {\n      event: event,\n      itemData: itemData\n    } = _ref3;\n    var isActionButton = itemData.elementAttr.class === DROP_DOWN_BUTTON_ACTION_CLASS;\n    var isToggleButton = itemData.elementAttr.class === DROP_DOWN_BUTTON_TOGGLE_CLASS;\n\n    if (isToggleButton) {\n      this.toggle();\n    } else if (isActionButton) {\n      this._actionClickAction({\n        event: event,\n        selectedItem: this.option(\"selectedItem\")\n      });\n\n      if (!this.option(\"splitButton\")) {\n        this.toggle();\n      }\n    }\n  },\n\n  _buttonGroupOptions() {\n    var {\n      splitButton: splitButton,\n      showArrowIcon: showArrowIcon,\n      focusStateEnabled: focusStateEnabled,\n      hoverStateEnabled: hoverStateEnabled,\n      stylingMode: stylingMode,\n      accessKey: accessKey,\n      tabIndex: tabIndex\n    } = this.option();\n    var buttonTemplate = splitButton || !showArrowIcon ? \"content\" : (_ref4, buttonContent) => {\n      var {\n        text: text,\n        icon: icon\n      } = _ref4;\n      var $firstIcon = getImageContainer(icon);\n      var $textContainer = text ? $(\"<span>\").text(text).addClass(DX_BUTTON_TEXT_CLASS) : void 0;\n      var $secondIcon = getImageContainer(\"spindown\").addClass(DX_ICON_RIGHT_CLASS);\n      $(buttonContent).append($firstIcon, $textContainer, $secondIcon);\n    };\n    return extend({\n      items: this._getButtonGroupItems(),\n      onItemClick: this._buttonGroupItemClick.bind(this),\n      width: \"100%\",\n      height: \"100%\",\n      selectionMode: \"none\",\n      onKeyboardHandled: e => this._keyboardHandler(e),\n      buttonTemplate: buttonTemplate,\n      focusStateEnabled: focusStateEnabled,\n      hoverStateEnabled: hoverStateEnabled,\n      stylingMode: stylingMode,\n      accessKey: accessKey,\n      tabIndex: tabIndex\n    }, this._options.cache(\"buttonGroupOptions\"));\n  },\n\n  _renderPopupContent() {\n    var $content = this._popup.$content();\n\n    var template = this._getTemplateByOption(\"dropDownContentTemplate\");\n\n    $content.empty();\n    this._popupContentId = \"dx-\" + new Guid();\n    this.setAria(\"id\", this._popupContentId, $content);\n    return template.render({\n      container: getPublicElement($content),\n      model: this.option(\"items\") || this._dataSource\n    });\n  },\n\n  _popupOptions() {\n    var horizontalAlignment = this.option(\"rtlEnabled\") ? \"right\" : \"left\";\n    return extend({\n      dragEnabled: false,\n      focusStateEnabled: false,\n      deferRendering: this.option(\"deferRendering\"),\n      hideOnOutsideClick: e => {\n        var $element = this.$element();\n        var $buttonClicked = $(e.target).closest(\".\".concat(DROP_DOWN_BUTTON_CLASS));\n        return !$buttonClicked.is($element);\n      },\n      showTitle: false,\n      animation: {\n        show: {\n          type: \"fade\",\n          duration: 0,\n          from: 0,\n          to: 1\n        },\n        hide: {\n          type: \"fade\",\n          duration: 400,\n          from: 1,\n          to: 0\n        }\n      },\n      _ignoreFunctionValueDeprecation: true,\n      width: () => getElementWidth(this.$element()),\n      height: \"auto\",\n      shading: false,\n      position: {\n        of: this.$element(),\n        collision: \"flipfit\",\n        my: horizontalAlignment + \" top\",\n        at: horizontalAlignment + \" bottom\"\n      },\n      wrapperAttr: {\n        class: DROP_DOWN_EDITOR_OVERLAY_CLASS\n      }\n    }, this._options.cache(\"dropDownOptions\"), {\n      visible: this.option(\"opened\")\n    });\n  },\n\n  _listOptions() {\n    var selectedItemKey = this.option(\"selectedItemKey\");\n    var useSelectMode = this.option(\"useSelectMode\");\n    return {\n      selectionMode: useSelectMode ? \"single\" : \"none\",\n      wrapItemText: this.option(\"wrapItemText\"),\n      focusStateEnabled: this.option(\"focusStateEnabled\"),\n      hoverStateEnabled: this.option(\"hoverStateEnabled\"),\n      useItemTextAsTitle: this.option(\"useItemTextAsTitle\"),\n      onContentReady: () => this._fireContentReadyAction(),\n      selectedItemKeys: isDefined(selectedItemKey) && useSelectMode ? [selectedItemKey] : [],\n      grouped: this.option(\"grouped\"),\n      groupTemplate: this.option(\"groupTemplate\"),\n      keyExpr: this._getKey(),\n      noDataText: this.option(\"noDataText\"),\n      displayExpr: this.option(\"displayExpr\"),\n      itemTemplate: this.option(\"itemTemplate\"),\n      items: this.option(\"items\"),\n      dataSource: this._dataSource,\n      onItemClick: e => {\n        if (!this.option(\"useSelectMode\")) {\n          this._lastSelectedItemData = e.itemData;\n        }\n\n        this.option(\"selectedItemKey\", this._keyGetter(e.itemData));\n\n        var actionResult = this._fireItemClickAction(e);\n\n        if (false !== actionResult) {\n          this.toggle(false);\n\n          this._buttonGroup.focus();\n        }\n      }\n    };\n  },\n\n  _upDownKeyHandler() {\n    if (this._popup && this._popup.option(\"visible\") && this._list) {\n      this._list.focus();\n    } else {\n      this.open();\n    }\n\n    return true;\n  },\n\n  _escHandler() {\n    this.close();\n\n    this._buttonGroup.focus();\n\n    return true;\n  },\n\n  _tabHandler() {\n    this.close();\n    return true;\n  },\n\n  _renderPopup() {\n    var $popup = $(\"<div>\");\n    this.$element().append($popup);\n    this._popup = this._createComponent($popup, Popup, this._popupOptions());\n\n    this._popup.$content().addClass(DROP_DOWN_BUTTON_CONTENT);\n\n    this._popup.$wrapper().addClass(DROP_DOWN_BUTTON_POPUP_WRAPPER_CLASS);\n\n    this._popup.on(\"hiding\", this._popupHidingHandler.bind(this));\n\n    this._popup.on(\"showing\", this._popupShowingHandler.bind(this));\n\n    this._bindInnerWidgetOptions(this._popup, \"dropDownOptions\");\n  },\n\n  _popupHidingHandler() {\n    this.option(\"opened\", false);\n\n    this._setAriaExpanded(false);\n  },\n\n  _popupOptionChanged: function (args) {\n    var options = Widget.getOptionsFromContainer(args);\n\n    this._setPopupOption(options);\n\n    var optionsKeys = Object.keys(options);\n\n    if (-1 !== optionsKeys.indexOf(\"width\") || -1 !== optionsKeys.indexOf(\"height\")) {\n      this._dimensionChanged();\n    }\n  },\n  _dimensionChanged: function () {\n    var popupWidth = getSizeValue(this.option(\"dropDownOptions.width\"));\n\n    if (void 0 === popupWidth) {\n      this._setPopupOption(\"width\", () => getElementWidth(this.$element()));\n    }\n  },\n  _setPopupOption: function (optionName, value) {\n    this._setWidgetOption(\"_popup\", arguments);\n  },\n\n  _popupShowingHandler() {\n    this.option(\"opened\", true);\n\n    this._setAriaExpanded(true);\n  },\n\n  _setAriaExpanded(value) {\n    this._ariaExpandedElements.forEach(ariaElement => {\n      this.setAria({\n        expanded: value,\n        owns: value ? this._popupContentId : void 0\n      }, $(ariaElement));\n    });\n  },\n\n  _renderButtonGroup() {\n    var $buttonGroup = this._buttonGroup && this._buttonGroup.$element() || $(\"<div>\");\n\n    if (!this._buttonGroup) {\n      this.$element().append($buttonGroup);\n    }\n\n    this._buttonGroup = this._createComponent($buttonGroup, ButtonGroup, this._buttonGroupOptions());\n\n    var buttonElements = this._buttonGroup.$element().find(\".dx-button\").toArray();\n\n    this._ariaExpandedElements = [...buttonElements, this.$element()];\n\n    this._buttonGroup.registerKeyHandler(\"downArrow\", this._upDownKeyHandler.bind(this));\n\n    this._buttonGroup.registerKeyHandler(\"tab\", this._tabHandler.bind(this));\n\n    this._buttonGroup.registerKeyHandler(\"upArrow\", this._upDownKeyHandler.bind(this));\n\n    this._buttonGroup.registerKeyHandler(\"escape\", this._escHandler.bind(this));\n\n    this._bindInnerWidgetOptions(this._buttonGroup, \"buttonGroupOptions\");\n\n    this._setAriaExpanded(this.option(\"opened\"));\n  },\n\n  _updateArrowClass() {\n    var hasArrow = this.option(\"splitButton\") || this.option(\"showArrowIcon\");\n    this.$element().toggleClass(DROP_DOWN_BUTTON_HAS_ARROW_CLASS, hasArrow);\n  },\n\n  toggle(visible) {\n    if (!this._popup) {\n      this._renderPopup();\n\n      this._renderContent();\n    }\n\n    return this._popup.toggle(visible);\n  },\n\n  open() {\n    return this.toggle(true);\n  },\n\n  close() {\n    return this.toggle(false);\n  },\n\n  _setListOption(name, value) {\n    this._list && this._list.option(name, value);\n  },\n\n  _getDisplayValue(item) {\n    var isPrimitiveItem = !isPlainObject(item);\n    var displayValue = isPrimitiveItem ? item : this._displayGetter(item);\n    return !isPlainObject(displayValue) ? String(ensureDefined(displayValue, \"\")) : \"\";\n  },\n\n  _updateActionButton(selectedItem) {\n    if (this.option(\"useSelectMode\")) {\n      this.option({\n        text: this._getDisplayValue(selectedItem),\n        icon: isPlainObject(selectedItem) ? selectedItem.icon : void 0\n      });\n    }\n\n    this._setOptionWithoutOptionChange(\"selectedItem\", selectedItem);\n\n    this._setOptionWithoutOptionChange(\"selectedItemKey\", this._keyGetter(selectedItem));\n  },\n\n  _clean() {\n    this._list && this._list.$element().remove();\n    this._popup && this._popup.$element().remove();\n  },\n\n  _selectedItemKeyChanged(value) {\n    this._setListOption(\"selectedItemKeys\", this.option(\"useSelectMode\") && isDefined(value) ? [value] : []);\n\n    var previousItem = this.option(\"selectedItem\");\n\n    this._loadSelectedItem().done(selectedItem => {\n      this._updateActionButton(selectedItem);\n\n      if (this._displayGetter(previousItem) !== this._displayGetter(selectedItem)) {\n        this._fireSelectionChangedAction({\n          previousValue: previousItem,\n          value: selectedItem\n        });\n      }\n    });\n  },\n\n  _actionButtonOptionChanged(_ref5) {\n    var {\n      name: name,\n      value: value\n    } = _ref5;\n    var newConfig = {};\n    newConfig[name] = value;\n\n    this._buttonGroup.option(\"items[0]\", extend({}, this._actionButtonConfig(), newConfig));\n\n    this._popup && this._popup.repaint();\n  },\n\n  _selectModeChanged(value) {\n    if (value) {\n      this._setListOption(\"selectionMode\", \"single\");\n\n      var selectedItemKey = this.option(\"selectedItemKey\");\n\n      this._setListOption(\"selectedItemKeys\", isDefined(selectedItemKey) ? [selectedItemKey] : []);\n\n      this._selectedItemKeyChanged(this.option(\"selectedItemKey\"));\n    } else {\n      this._setListOption(\"selectionMode\", \"none\");\n\n      this.option({\n        selectedItemKey: void 0,\n        selectedItem: void 0\n      });\n\n      this._actionButtonOptionChanged({\n        text: this.option(\"text\")\n      });\n    }\n  },\n\n  _updateItemCollection(optionName) {\n    var selectedItemKey = this.option(\"selectedItemKey\");\n\n    this._setListOption(\"selectedItem\", null);\n\n    this._setWidgetOption(\"_list\", [optionName]);\n\n    if (isDefined(selectedItemKey)) {\n      this._loadSelectedItem().done(selectedItem => {\n        this._setListOption(\"selectedItemKeys\", [selectedItemKey]);\n\n        this._setListOption(\"selectedItem\", selectedItem);\n      }).fail(error => {\n        this._setListOption(\"selectedItemKeys\", []);\n      }).always(this._updateActionButton.bind(this));\n    }\n  },\n\n  _updateDataSource: function () {\n    var items = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : this._dataSource.items();\n    this._dataSource = void 0;\n\n    this._itemsToDataSource(items);\n\n    this._updateKeyExpr();\n  },\n  _updateKeyExpr: function () {\n    this._compileKeyGetter();\n\n    this._setListOption(\"keyExpr\", this._getKey());\n  },\n  focus: function () {\n    this._buttonGroup.focus();\n  },\n\n  _optionChanged(args) {\n    var _this$_popup;\n\n    var {\n      name: name,\n      value: value\n    } = args;\n\n    switch (name) {\n      case \"useSelectMode\":\n        this._selectModeChanged(value);\n\n        break;\n\n      case \"splitButton\":\n        this._updateArrowClass();\n\n        this._renderButtonGroup();\n\n        break;\n\n      case \"displayExpr\":\n        this._compileDisplayGetter();\n\n        this._setListOption(name, value);\n\n        this._updateActionButton(this.option(\"selectedItem\"));\n\n        break;\n\n      case \"keyExpr\":\n        this._updateDataSource();\n\n        break;\n\n      case \"buttonGroupOptions\":\n        this._innerWidgetOptionChanged(this._buttonGroup, args);\n\n        break;\n\n      case \"dropDownOptions\":\n        if (\"dropDownOptions.visible\" === args.fullName) {\n          break;\n        }\n\n        if (void 0 !== args.value.visible) {\n          delete args.value.visible;\n        }\n\n        this._popupOptionChanged(args);\n\n        this._innerWidgetOptionChanged(this._popup, args);\n\n        break;\n\n      case \"opened\":\n        this.toggle(value);\n        break;\n\n      case \"focusStateEnabled\":\n      case \"hoverStateEnabled\":\n        this._setListOption(name, value);\n\n        this._buttonGroup.option(name, value);\n\n        this.callBase(args);\n        break;\n\n      case \"items\":\n        this._updateDataSource(this.option(\"items\"));\n\n        this._updateItemCollection(name);\n\n        break;\n\n      case \"dataSource\":\n        if (Array.isArray(value)) {\n          this._updateDataSource(this.option(\"dataSource\"));\n        } else {\n          this._initDataSource();\n\n          this._updateKeyExpr();\n        }\n\n        this._updateItemCollection(name);\n\n        break;\n\n      case \"icon\":\n      case \"text\":\n        this._actionButtonOptionChanged(args);\n\n        break;\n\n      case \"showArrowIcon\":\n        this._updateArrowClass();\n\n        this._renderButtonGroup();\n\n        this._popup && this._popup.repaint();\n        break;\n\n      case \"width\":\n      case \"height\":\n        this.callBase(args);\n        null === (_this$_popup = this._popup) || void 0 === _this$_popup ? void 0 : _this$_popup.repaint();\n        break;\n\n      case \"stylingMode\":\n        this._buttonGroup.option(name, value);\n\n        break;\n\n      case \"itemTemplate\":\n      case \"grouped\":\n      case \"noDataText\":\n      case \"groupTemplate\":\n      case \"wrapItemText\":\n      case \"useItemTextAsTitle\":\n        this._setListOption(name, value);\n\n        break;\n\n      case \"dropDownContentTemplate\":\n        this._renderContent();\n\n        break;\n\n      case \"selectedItemKey\":\n        this._selectedItemKeyChanged(value);\n\n        break;\n\n      case \"selectedItem\":\n        break;\n\n      case \"onItemClick\":\n        this._createItemClickAction();\n\n        break;\n\n      case \"onButtonClick\":\n        this._createActionClickAction();\n\n        break;\n\n      case \"onSelectionChanged\":\n        this._createSelectionChangedAction();\n\n        break;\n\n      case \"deferRendering\":\n        this.toggle(this.option(\"opened\"));\n        break;\n\n      case \"tabIndex\":\n        this._buttonGroup.option(name, value);\n\n        break;\n\n      default:\n        this.callBase(args);\n    }\n  }\n\n}).include(DataHelperMixin);\nregisterComponent(\"dxDropDownButton\", DropDownButton);\nexport default DropDownButton;","map":{"version":3,"sources":["C:/Users/Zoran/source/repos/TransportApp/TransportLog-basic/node_modules/devextreme/esm/ui/drop_down_button.js"],"names":["$","Widget","FunctionTemplate","registerComponent","ButtonGroup","Popup","List","compileGetter","getPublicElement","getImageContainer","DataHelperMixin","DataSource","ArrayStore","Deferred","extend","isPlainObject","isDefined","ensureDefined","noop","Guid","getElementWidth","getSizeValue","messageLocalization","DROP_DOWN_BUTTON_CLASS","DROP_DOWN_BUTTON_CONTENT","DROP_DOWN_BUTTON_ACTION_CLASS","DROP_DOWN_BUTTON_TOGGLE_CLASS","DROP_DOWN_BUTTON_HAS_ARROW_CLASS","DROP_DOWN_BUTTON_POPUP_WRAPPER_CLASS","DROP_DOWN_EDITOR_OVERLAY_CLASS","DX_BUTTON_TEXT_CLASS","DX_ICON_RIGHT_CLASS","DropDownButton","inherit","_getDefaultOptions","callBase","itemTemplate","keyExpr","displayExpr","selectedItem","selectedItemKey","stylingMode","deferRendering","noDataText","format","useSelectMode","splitButton","showArrowIcon","text","icon","onButtonClick","onSelectionChanged","onItemClick","opened","items","dataSource","focusStateEnabled","hoverStateEnabled","dropDownOptions","dropDownContentTemplate","wrapItemText","useItemTextAsTitle","grouped","groupTemplate","buttonGroupOptions","_setOptionsByReference","_optionsByReference","_init","_createItemClickAction","_createActionClickAction","_createSelectionChangedAction","_initDataSource","_compileKeyGetter","_compileDisplayGetter","_itemsToDataSource","option","_options","cache","_initTemplates","_templateManager","addDefaultTemplates","content","options","$popupContent","container","$listContainer","appendTo","_list","_createComponent","_listOptions","registerKeyHandler","_escHandler","bind","value","_dataSource","store","key","_getKey","data","pageSize","_this$_dataSource","storeKey","_keyGetter","_displayGetter","_initMarkup","$element","addClass","_renderButtonGroup","_updateArrowClass","_loadSelectedItem","done","_updateActionButton","_renderFocusTarget","_render","_renderPopup","_renderContentImpl","_popup","_renderPopupContent","_this$_loadSingleDefe","_loadSingleDeferred","reject","d","_lastSelectedItemData","cachedResult","resolve","_loadSingle","fail","promise","_actionClickAction","_createActionByOption","_selectionChangedAction","_itemClickAction","_fireSelectionChangedAction","_ref","previousValue","item","previousItem","_fireItemClickAction","_ref2","event","itemElement","itemData","_actionItem","_actionButtonConfig","elementAttr","class","_getButtonGroupItems","push","_buttonGroupItemClick","_ref3","isActionButton","isToggleButton","toggle","_buttonGroupOptions","accessKey","tabIndex","buttonTemplate","_ref4","buttonContent","$firstIcon","$textContainer","$secondIcon","append","width","height","selectionMode","onKeyboardHandled","e","_keyboardHandler","$content","template","_getTemplateByOption","empty","_popupContentId","setAria","render","model","_popupOptions","horizontalAlignment","dragEnabled","hideOnOutsideClick","$buttonClicked","target","closest","concat","is","showTitle","animation","show","type","duration","from","to","hide","_ignoreFunctionValueDeprecation","shading","position","of","collision","my","at","wrapperAttr","visible","onContentReady","_fireContentReadyAction","selectedItemKeys","actionResult","_buttonGroup","focus","_upDownKeyHandler","open","close","_tabHandler","$popup","$wrapper","on","_popupHidingHandler","_popupShowingHandler","_bindInnerWidgetOptions","_setAriaExpanded","_popupOptionChanged","args","getOptionsFromContainer","_setPopupOption","optionsKeys","Object","keys","indexOf","_dimensionChanged","popupWidth","optionName","_setWidgetOption","arguments","_ariaExpandedElements","forEach","ariaElement","expanded","owns","$buttonGroup","buttonElements","find","toArray","hasArrow","toggleClass","_renderContent","_setListOption","name","_getDisplayValue","isPrimitiveItem","displayValue","String","_setOptionWithoutOptionChange","_clean","remove","_selectedItemKeyChanged","_actionButtonOptionChanged","_ref5","newConfig","repaint","_selectModeChanged","_updateItemCollection","error","always","_updateDataSource","length","_updateKeyExpr","_optionChanged","_this$_popup","_innerWidgetOptionChanged","fullName","Array","isArray","include"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (esm/ui/drop_down_button.js)\r\n * Version: 22.1.6\r\n * Build date: Tue Oct 18 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport $ from \"../core/renderer\";\r\nimport Widget from \"./widget/ui.widget\";\r\nimport {\r\n    FunctionTemplate\r\n} from \"../core/templates/function_template\";\r\nimport registerComponent from \"../core/component_registrator\";\r\nimport ButtonGroup from \"./button_group\";\r\nimport Popup from \"./popup\";\r\nimport List from \"./list_light\";\r\nimport {\r\n    compileGetter\r\n} from \"../core/utils/data\";\r\nimport {\r\n    getPublicElement\r\n} from \"../core/element\";\r\nimport {\r\n    getImageContainer\r\n} from \"../core/utils/icon\";\r\nimport DataHelperMixin from \"../data_helper\";\r\nimport {\r\n    DataSource\r\n} from \"../data/data_source/data_source\";\r\nimport ArrayStore from \"../data/array_store\";\r\nimport {\r\n    Deferred\r\n} from \"../core/utils/deferred\";\r\nimport {\r\n    extend\r\n} from \"../core/utils/extend\";\r\nimport {\r\n    isPlainObject,\r\n    isDefined\r\n} from \"../core/utils/type\";\r\nimport {\r\n    ensureDefined,\r\n    noop\r\n} from \"../core/utils/common\";\r\nimport Guid from \"../core/guid\";\r\nimport {\r\n    getElementWidth,\r\n    getSizeValue\r\n} from \"./drop_down_editor/utils\";\r\nimport messageLocalization from \"../localization/message\";\r\nvar DROP_DOWN_BUTTON_CLASS = \"dx-dropdownbutton\";\r\nvar DROP_DOWN_BUTTON_CONTENT = \"dx-dropdownbutton-content\";\r\nvar DROP_DOWN_BUTTON_ACTION_CLASS = \"dx-dropdownbutton-action\";\r\nvar DROP_DOWN_BUTTON_TOGGLE_CLASS = \"dx-dropdownbutton-toggle\";\r\nvar DROP_DOWN_BUTTON_HAS_ARROW_CLASS = \"dx-dropdownbutton-has-arrow\";\r\nvar DROP_DOWN_BUTTON_POPUP_WRAPPER_CLASS = \"dx-dropdownbutton-popup-wrapper\";\r\nvar DROP_DOWN_EDITOR_OVERLAY_CLASS = \"dx-dropdowneditor-overlay\";\r\nvar DX_BUTTON_TEXT_CLASS = \"dx-button-text\";\r\nvar DX_ICON_RIGHT_CLASS = \"dx-icon-right\";\r\nvar DropDownButton = Widget.inherit({\r\n    _getDefaultOptions() {\r\n        return extend(this.callBase(), {\r\n            itemTemplate: \"item\",\r\n            keyExpr: \"this\",\r\n            displayExpr: void 0,\r\n            selectedItem: null,\r\n            selectedItemKey: null,\r\n            stylingMode: \"outlined\",\r\n            deferRendering: true,\r\n            noDataText: messageLocalization.format(\"dxCollectionWidget-noDataText\"),\r\n            useSelectMode: false,\r\n            splitButton: false,\r\n            showArrowIcon: true,\r\n            text: \"\",\r\n            icon: void 0,\r\n            onButtonClick: null,\r\n            onSelectionChanged: null,\r\n            onItemClick: null,\r\n            opened: false,\r\n            items: null,\r\n            dataSource: null,\r\n            focusStateEnabled: true,\r\n            hoverStateEnabled: true,\r\n            dropDownOptions: {},\r\n            dropDownContentTemplate: \"content\",\r\n            wrapItemText: false,\r\n            useItemTextAsTitle: true,\r\n            grouped: false,\r\n            groupTemplate: \"group\",\r\n            buttonGroupOptions: {}\r\n        })\r\n    },\r\n    _setOptionsByReference() {\r\n        this.callBase();\r\n        extend(this._optionsByReference, {\r\n            selectedItem: true\r\n        })\r\n    },\r\n    _init() {\r\n        this.callBase();\r\n        this._createItemClickAction();\r\n        this._createActionClickAction();\r\n        this._createSelectionChangedAction();\r\n        this._initDataSource();\r\n        this._compileKeyGetter();\r\n        this._compileDisplayGetter();\r\n        this._itemsToDataSource(this.option(\"items\"));\r\n        this._options.cache(\"buttonGroupOptions\", this.option(\"buttonGroupOptions\"));\r\n        this._options.cache(\"dropDownOptions\", this.option(\"dropDownOptions\"))\r\n    },\r\n    _initTemplates() {\r\n        this._templateManager.addDefaultTemplates({\r\n            content: new FunctionTemplate(options => {\r\n                var $popupContent = $(options.container);\r\n                var $listContainer = $(\"<div>\").appendTo($popupContent);\r\n                this._list = this._createComponent($listContainer, List, this._listOptions());\r\n                this._list.registerKeyHandler(\"escape\", this._escHandler.bind(this));\r\n                this._list.registerKeyHandler(\"tab\", this._escHandler.bind(this));\r\n                this._list.registerKeyHandler(\"leftArrow\", this._escHandler.bind(this));\r\n                this._list.registerKeyHandler(\"rightArrow\", this._escHandler.bind(this))\r\n            })\r\n        });\r\n        this.callBase()\r\n    },\r\n    _itemsToDataSource: function(value) {\r\n        if (!this._dataSource) {\r\n            this._dataSource = new DataSource({\r\n                store: new ArrayStore({\r\n                    key: this._getKey(),\r\n                    data: value\r\n                }),\r\n                pageSize: 0\r\n            })\r\n        }\r\n    },\r\n    _getKey: function() {\r\n        var _this$_dataSource;\r\n        var keyExpr = this.option(\"keyExpr\");\r\n        var storeKey = null === (_this$_dataSource = this._dataSource) || void 0 === _this$_dataSource ? void 0 : _this$_dataSource.key();\r\n        return isDefined(storeKey) && (!isDefined(keyExpr) || \"this\" === keyExpr) ? storeKey : keyExpr\r\n    },\r\n    _compileKeyGetter() {\r\n        this._keyGetter = compileGetter(this._getKey())\r\n    },\r\n    _compileDisplayGetter() {\r\n        this._displayGetter = compileGetter(this.option(\"displayExpr\"))\r\n    },\r\n    _initMarkup() {\r\n        this.callBase();\r\n        this.$element().addClass(DROP_DOWN_BUTTON_CLASS);\r\n        this._renderButtonGroup();\r\n        this._updateArrowClass();\r\n        if (isDefined(this.option(\"selectedItemKey\"))) {\r\n            this._loadSelectedItem().done(this._updateActionButton.bind(this))\r\n        }\r\n    },\r\n    _renderFocusTarget: noop,\r\n    _render() {\r\n        if (!this.option(\"deferRendering\") || this.option(\"opened\")) {\r\n            this._renderPopup()\r\n        }\r\n        this.callBase()\r\n    },\r\n    _renderContentImpl() {\r\n        if (this._popup) {\r\n            this._renderPopupContent()\r\n        }\r\n        return this.callBase()\r\n    },\r\n    _loadSelectedItem() {\r\n        var _this$_loadSingleDefe;\r\n        null === (_this$_loadSingleDefe = this._loadSingleDeferred) || void 0 === _this$_loadSingleDefe ? void 0 : _this$_loadSingleDefe.reject();\r\n        var d = new Deferred;\r\n        if (this._list && void 0 !== this._lastSelectedItemData) {\r\n            var cachedResult = this.option(\"useSelectMode\") ? this._list.option(\"selectedItem\") : this._lastSelectedItemData;\r\n            return d.resolve(cachedResult)\r\n        }\r\n        this._lastSelectedItemData = void 0;\r\n        var selectedItemKey = this.option(\"selectedItemKey\");\r\n        this._loadSingle(this._getKey(), selectedItemKey).done(d.resolve).fail(() => {\r\n            d.resolve(null)\r\n        });\r\n        this._loadSingleDeferred = d;\r\n        return d.promise()\r\n    },\r\n    _createActionClickAction() {\r\n        this._actionClickAction = this._createActionByOption(\"onButtonClick\")\r\n    },\r\n    _createSelectionChangedAction() {\r\n        this._selectionChangedAction = this._createActionByOption(\"onSelectionChanged\")\r\n    },\r\n    _createItemClickAction() {\r\n        this._itemClickAction = this._createActionByOption(\"onItemClick\")\r\n    },\r\n    _fireSelectionChangedAction(_ref) {\r\n        var {\r\n            previousValue: previousValue,\r\n            value: value\r\n        } = _ref;\r\n        this._selectionChangedAction({\r\n            item: value,\r\n            previousItem: previousValue\r\n        })\r\n    },\r\n    _fireItemClickAction(_ref2) {\r\n        var {\r\n            event: event,\r\n            itemElement: itemElement,\r\n            itemData: itemData\r\n        } = _ref2;\r\n        return this._itemClickAction({\r\n            event: event,\r\n            itemElement: itemElement,\r\n            itemData: this._actionItem || itemData\r\n        })\r\n    },\r\n    _actionButtonConfig() {\r\n        return {\r\n            text: this.option(\"text\"),\r\n            icon: this.option(\"icon\"),\r\n            elementAttr: {\r\n                class: DROP_DOWN_BUTTON_ACTION_CLASS\r\n            }\r\n        }\r\n    },\r\n    _getButtonGroupItems() {\r\n        var items = [];\r\n        items.push(this._actionButtonConfig());\r\n        if (this.option(\"splitButton\")) {\r\n            items.push({\r\n                icon: \"spindown\",\r\n                elementAttr: {\r\n                    class: DROP_DOWN_BUTTON_TOGGLE_CLASS\r\n                }\r\n            })\r\n        }\r\n        return items\r\n    },\r\n    _buttonGroupItemClick(_ref3) {\r\n        var {\r\n            event: event,\r\n            itemData: itemData\r\n        } = _ref3;\r\n        var isActionButton = itemData.elementAttr.class === DROP_DOWN_BUTTON_ACTION_CLASS;\r\n        var isToggleButton = itemData.elementAttr.class === DROP_DOWN_BUTTON_TOGGLE_CLASS;\r\n        if (isToggleButton) {\r\n            this.toggle()\r\n        } else if (isActionButton) {\r\n            this._actionClickAction({\r\n                event: event,\r\n                selectedItem: this.option(\"selectedItem\")\r\n            });\r\n            if (!this.option(\"splitButton\")) {\r\n                this.toggle()\r\n            }\r\n        }\r\n    },\r\n    _buttonGroupOptions() {\r\n        var {\r\n            splitButton: splitButton,\r\n            showArrowIcon: showArrowIcon,\r\n            focusStateEnabled: focusStateEnabled,\r\n            hoverStateEnabled: hoverStateEnabled,\r\n            stylingMode: stylingMode,\r\n            accessKey: accessKey,\r\n            tabIndex: tabIndex\r\n        } = this.option();\r\n        var buttonTemplate = splitButton || !showArrowIcon ? \"content\" : (_ref4, buttonContent) => {\r\n            var {\r\n                text: text,\r\n                icon: icon\r\n            } = _ref4;\r\n            var $firstIcon = getImageContainer(icon);\r\n            var $textContainer = text ? $(\"<span>\").text(text).addClass(DX_BUTTON_TEXT_CLASS) : void 0;\r\n            var $secondIcon = getImageContainer(\"spindown\").addClass(DX_ICON_RIGHT_CLASS);\r\n            $(buttonContent).append($firstIcon, $textContainer, $secondIcon)\r\n        };\r\n        return extend({\r\n            items: this._getButtonGroupItems(),\r\n            onItemClick: this._buttonGroupItemClick.bind(this),\r\n            width: \"100%\",\r\n            height: \"100%\",\r\n            selectionMode: \"none\",\r\n            onKeyboardHandled: e => this._keyboardHandler(e),\r\n            buttonTemplate: buttonTemplate,\r\n            focusStateEnabled: focusStateEnabled,\r\n            hoverStateEnabled: hoverStateEnabled,\r\n            stylingMode: stylingMode,\r\n            accessKey: accessKey,\r\n            tabIndex: tabIndex\r\n        }, this._options.cache(\"buttonGroupOptions\"))\r\n    },\r\n    _renderPopupContent() {\r\n        var $content = this._popup.$content();\r\n        var template = this._getTemplateByOption(\"dropDownContentTemplate\");\r\n        $content.empty();\r\n        this._popupContentId = \"dx-\" + new Guid;\r\n        this.setAria(\"id\", this._popupContentId, $content);\r\n        return template.render({\r\n            container: getPublicElement($content),\r\n            model: this.option(\"items\") || this._dataSource\r\n        })\r\n    },\r\n    _popupOptions() {\r\n        var horizontalAlignment = this.option(\"rtlEnabled\") ? \"right\" : \"left\";\r\n        return extend({\r\n            dragEnabled: false,\r\n            focusStateEnabled: false,\r\n            deferRendering: this.option(\"deferRendering\"),\r\n            hideOnOutsideClick: e => {\r\n                var $element = this.$element();\r\n                var $buttonClicked = $(e.target).closest(\".\".concat(DROP_DOWN_BUTTON_CLASS));\r\n                return !$buttonClicked.is($element)\r\n            },\r\n            showTitle: false,\r\n            animation: {\r\n                show: {\r\n                    type: \"fade\",\r\n                    duration: 0,\r\n                    from: 0,\r\n                    to: 1\r\n                },\r\n                hide: {\r\n                    type: \"fade\",\r\n                    duration: 400,\r\n                    from: 1,\r\n                    to: 0\r\n                }\r\n            },\r\n            _ignoreFunctionValueDeprecation: true,\r\n            width: () => getElementWidth(this.$element()),\r\n            height: \"auto\",\r\n            shading: false,\r\n            position: {\r\n                of: this.$element(),\r\n                collision: \"flipfit\",\r\n                my: horizontalAlignment + \" top\",\r\n                at: horizontalAlignment + \" bottom\"\r\n            },\r\n            wrapperAttr: {\r\n                class: DROP_DOWN_EDITOR_OVERLAY_CLASS\r\n            }\r\n        }, this._options.cache(\"dropDownOptions\"), {\r\n            visible: this.option(\"opened\")\r\n        })\r\n    },\r\n    _listOptions() {\r\n        var selectedItemKey = this.option(\"selectedItemKey\");\r\n        var useSelectMode = this.option(\"useSelectMode\");\r\n        return {\r\n            selectionMode: useSelectMode ? \"single\" : \"none\",\r\n            wrapItemText: this.option(\"wrapItemText\"),\r\n            focusStateEnabled: this.option(\"focusStateEnabled\"),\r\n            hoverStateEnabled: this.option(\"hoverStateEnabled\"),\r\n            useItemTextAsTitle: this.option(\"useItemTextAsTitle\"),\r\n            onContentReady: () => this._fireContentReadyAction(),\r\n            selectedItemKeys: isDefined(selectedItemKey) && useSelectMode ? [selectedItemKey] : [],\r\n            grouped: this.option(\"grouped\"),\r\n            groupTemplate: this.option(\"groupTemplate\"),\r\n            keyExpr: this._getKey(),\r\n            noDataText: this.option(\"noDataText\"),\r\n            displayExpr: this.option(\"displayExpr\"),\r\n            itemTemplate: this.option(\"itemTemplate\"),\r\n            items: this.option(\"items\"),\r\n            dataSource: this._dataSource,\r\n            onItemClick: e => {\r\n                if (!this.option(\"useSelectMode\")) {\r\n                    this._lastSelectedItemData = e.itemData\r\n                }\r\n                this.option(\"selectedItemKey\", this._keyGetter(e.itemData));\r\n                var actionResult = this._fireItemClickAction(e);\r\n                if (false !== actionResult) {\r\n                    this.toggle(false);\r\n                    this._buttonGroup.focus()\r\n                }\r\n            }\r\n        }\r\n    },\r\n    _upDownKeyHandler() {\r\n        if (this._popup && this._popup.option(\"visible\") && this._list) {\r\n            this._list.focus()\r\n        } else {\r\n            this.open()\r\n        }\r\n        return true\r\n    },\r\n    _escHandler() {\r\n        this.close();\r\n        this._buttonGroup.focus();\r\n        return true\r\n    },\r\n    _tabHandler() {\r\n        this.close();\r\n        return true\r\n    },\r\n    _renderPopup() {\r\n        var $popup = $(\"<div>\");\r\n        this.$element().append($popup);\r\n        this._popup = this._createComponent($popup, Popup, this._popupOptions());\r\n        this._popup.$content().addClass(DROP_DOWN_BUTTON_CONTENT);\r\n        this._popup.$wrapper().addClass(DROP_DOWN_BUTTON_POPUP_WRAPPER_CLASS);\r\n        this._popup.on(\"hiding\", this._popupHidingHandler.bind(this));\r\n        this._popup.on(\"showing\", this._popupShowingHandler.bind(this));\r\n        this._bindInnerWidgetOptions(this._popup, \"dropDownOptions\")\r\n    },\r\n    _popupHidingHandler() {\r\n        this.option(\"opened\", false);\r\n        this._setAriaExpanded(false)\r\n    },\r\n    _popupOptionChanged: function(args) {\r\n        var options = Widget.getOptionsFromContainer(args);\r\n        this._setPopupOption(options);\r\n        var optionsKeys = Object.keys(options);\r\n        if (-1 !== optionsKeys.indexOf(\"width\") || -1 !== optionsKeys.indexOf(\"height\")) {\r\n            this._dimensionChanged()\r\n        }\r\n    },\r\n    _dimensionChanged: function() {\r\n        var popupWidth = getSizeValue(this.option(\"dropDownOptions.width\"));\r\n        if (void 0 === popupWidth) {\r\n            this._setPopupOption(\"width\", () => getElementWidth(this.$element()))\r\n        }\r\n    },\r\n    _setPopupOption: function(optionName, value) {\r\n        this._setWidgetOption(\"_popup\", arguments)\r\n    },\r\n    _popupShowingHandler() {\r\n        this.option(\"opened\", true);\r\n        this._setAriaExpanded(true)\r\n    },\r\n    _setAriaExpanded(value) {\r\n        this._ariaExpandedElements.forEach(ariaElement => {\r\n            this.setAria({\r\n                expanded: value,\r\n                owns: value ? this._popupContentId : void 0\r\n            }, $(ariaElement))\r\n        })\r\n    },\r\n    _renderButtonGroup() {\r\n        var $buttonGroup = this._buttonGroup && this._buttonGroup.$element() || $(\"<div>\");\r\n        if (!this._buttonGroup) {\r\n            this.$element().append($buttonGroup)\r\n        }\r\n        this._buttonGroup = this._createComponent($buttonGroup, ButtonGroup, this._buttonGroupOptions());\r\n        var buttonElements = this._buttonGroup.$element().find(\".dx-button\").toArray();\r\n        this._ariaExpandedElements = [...buttonElements, this.$element()];\r\n        this._buttonGroup.registerKeyHandler(\"downArrow\", this._upDownKeyHandler.bind(this));\r\n        this._buttonGroup.registerKeyHandler(\"tab\", this._tabHandler.bind(this));\r\n        this._buttonGroup.registerKeyHandler(\"upArrow\", this._upDownKeyHandler.bind(this));\r\n        this._buttonGroup.registerKeyHandler(\"escape\", this._escHandler.bind(this));\r\n        this._bindInnerWidgetOptions(this._buttonGroup, \"buttonGroupOptions\");\r\n        this._setAriaExpanded(this.option(\"opened\"))\r\n    },\r\n    _updateArrowClass() {\r\n        var hasArrow = this.option(\"splitButton\") || this.option(\"showArrowIcon\");\r\n        this.$element().toggleClass(DROP_DOWN_BUTTON_HAS_ARROW_CLASS, hasArrow)\r\n    },\r\n    toggle(visible) {\r\n        if (!this._popup) {\r\n            this._renderPopup();\r\n            this._renderContent()\r\n        }\r\n        return this._popup.toggle(visible)\r\n    },\r\n    open() {\r\n        return this.toggle(true)\r\n    },\r\n    close() {\r\n        return this.toggle(false)\r\n    },\r\n    _setListOption(name, value) {\r\n        this._list && this._list.option(name, value)\r\n    },\r\n    _getDisplayValue(item) {\r\n        var isPrimitiveItem = !isPlainObject(item);\r\n        var displayValue = isPrimitiveItem ? item : this._displayGetter(item);\r\n        return !isPlainObject(displayValue) ? String(ensureDefined(displayValue, \"\")) : \"\"\r\n    },\r\n    _updateActionButton(selectedItem) {\r\n        if (this.option(\"useSelectMode\")) {\r\n            this.option({\r\n                text: this._getDisplayValue(selectedItem),\r\n                icon: isPlainObject(selectedItem) ? selectedItem.icon : void 0\r\n            })\r\n        }\r\n        this._setOptionWithoutOptionChange(\"selectedItem\", selectedItem);\r\n        this._setOptionWithoutOptionChange(\"selectedItemKey\", this._keyGetter(selectedItem))\r\n    },\r\n    _clean() {\r\n        this._list && this._list.$element().remove();\r\n        this._popup && this._popup.$element().remove()\r\n    },\r\n    _selectedItemKeyChanged(value) {\r\n        this._setListOption(\"selectedItemKeys\", this.option(\"useSelectMode\") && isDefined(value) ? [value] : []);\r\n        var previousItem = this.option(\"selectedItem\");\r\n        this._loadSelectedItem().done(selectedItem => {\r\n            this._updateActionButton(selectedItem);\r\n            if (this._displayGetter(previousItem) !== this._displayGetter(selectedItem)) {\r\n                this._fireSelectionChangedAction({\r\n                    previousValue: previousItem,\r\n                    value: selectedItem\r\n                })\r\n            }\r\n        })\r\n    },\r\n    _actionButtonOptionChanged(_ref5) {\r\n        var {\r\n            name: name,\r\n            value: value\r\n        } = _ref5;\r\n        var newConfig = {};\r\n        newConfig[name] = value;\r\n        this._buttonGroup.option(\"items[0]\", extend({}, this._actionButtonConfig(), newConfig));\r\n        this._popup && this._popup.repaint()\r\n    },\r\n    _selectModeChanged(value) {\r\n        if (value) {\r\n            this._setListOption(\"selectionMode\", \"single\");\r\n            var selectedItemKey = this.option(\"selectedItemKey\");\r\n            this._setListOption(\"selectedItemKeys\", isDefined(selectedItemKey) ? [selectedItemKey] : []);\r\n            this._selectedItemKeyChanged(this.option(\"selectedItemKey\"))\r\n        } else {\r\n            this._setListOption(\"selectionMode\", \"none\");\r\n            this.option({\r\n                selectedItemKey: void 0,\r\n                selectedItem: void 0\r\n            });\r\n            this._actionButtonOptionChanged({\r\n                text: this.option(\"text\")\r\n            })\r\n        }\r\n    },\r\n    _updateItemCollection(optionName) {\r\n        var selectedItemKey = this.option(\"selectedItemKey\");\r\n        this._setListOption(\"selectedItem\", null);\r\n        this._setWidgetOption(\"_list\", [optionName]);\r\n        if (isDefined(selectedItemKey)) {\r\n            this._loadSelectedItem().done(selectedItem => {\r\n                this._setListOption(\"selectedItemKeys\", [selectedItemKey]);\r\n                this._setListOption(\"selectedItem\", selectedItem)\r\n            }).fail(error => {\r\n                this._setListOption(\"selectedItemKeys\", [])\r\n            }).always(this._updateActionButton.bind(this))\r\n        }\r\n    },\r\n    _updateDataSource: function() {\r\n        var items = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : this._dataSource.items();\r\n        this._dataSource = void 0;\r\n        this._itemsToDataSource(items);\r\n        this._updateKeyExpr()\r\n    },\r\n    _updateKeyExpr: function() {\r\n        this._compileKeyGetter();\r\n        this._setListOption(\"keyExpr\", this._getKey())\r\n    },\r\n    focus: function() {\r\n        this._buttonGroup.focus()\r\n    },\r\n    _optionChanged(args) {\r\n        var _this$_popup;\r\n        var {\r\n            name: name,\r\n            value: value\r\n        } = args;\r\n        switch (name) {\r\n            case \"useSelectMode\":\r\n                this._selectModeChanged(value);\r\n                break;\r\n            case \"splitButton\":\r\n                this._updateArrowClass();\r\n                this._renderButtonGroup();\r\n                break;\r\n            case \"displayExpr\":\r\n                this._compileDisplayGetter();\r\n                this._setListOption(name, value);\r\n                this._updateActionButton(this.option(\"selectedItem\"));\r\n                break;\r\n            case \"keyExpr\":\r\n                this._updateDataSource();\r\n                break;\r\n            case \"buttonGroupOptions\":\r\n                this._innerWidgetOptionChanged(this._buttonGroup, args);\r\n                break;\r\n            case \"dropDownOptions\":\r\n                if (\"dropDownOptions.visible\" === args.fullName) {\r\n                    break\r\n                }\r\n                if (void 0 !== args.value.visible) {\r\n                    delete args.value.visible\r\n                }\r\n                this._popupOptionChanged(args);\r\n                this._innerWidgetOptionChanged(this._popup, args);\r\n                break;\r\n            case \"opened\":\r\n                this.toggle(value);\r\n                break;\r\n            case \"focusStateEnabled\":\r\n            case \"hoverStateEnabled\":\r\n                this._setListOption(name, value);\r\n                this._buttonGroup.option(name, value);\r\n                this.callBase(args);\r\n                break;\r\n            case \"items\":\r\n                this._updateDataSource(this.option(\"items\"));\r\n                this._updateItemCollection(name);\r\n                break;\r\n            case \"dataSource\":\r\n                if (Array.isArray(value)) {\r\n                    this._updateDataSource(this.option(\"dataSource\"))\r\n                } else {\r\n                    this._initDataSource();\r\n                    this._updateKeyExpr()\r\n                }\r\n                this._updateItemCollection(name);\r\n                break;\r\n            case \"icon\":\r\n            case \"text\":\r\n                this._actionButtonOptionChanged(args);\r\n                break;\r\n            case \"showArrowIcon\":\r\n                this._updateArrowClass();\r\n                this._renderButtonGroup();\r\n                this._popup && this._popup.repaint();\r\n                break;\r\n            case \"width\":\r\n            case \"height\":\r\n                this.callBase(args);\r\n                null === (_this$_popup = this._popup) || void 0 === _this$_popup ? void 0 : _this$_popup.repaint();\r\n                break;\r\n            case \"stylingMode\":\r\n                this._buttonGroup.option(name, value);\r\n                break;\r\n            case \"itemTemplate\":\r\n            case \"grouped\":\r\n            case \"noDataText\":\r\n            case \"groupTemplate\":\r\n            case \"wrapItemText\":\r\n            case \"useItemTextAsTitle\":\r\n                this._setListOption(name, value);\r\n                break;\r\n            case \"dropDownContentTemplate\":\r\n                this._renderContent();\r\n                break;\r\n            case \"selectedItemKey\":\r\n                this._selectedItemKeyChanged(value);\r\n                break;\r\n            case \"selectedItem\":\r\n                break;\r\n            case \"onItemClick\":\r\n                this._createItemClickAction();\r\n                break;\r\n            case \"onButtonClick\":\r\n                this._createActionClickAction();\r\n                break;\r\n            case \"onSelectionChanged\":\r\n                this._createSelectionChangedAction();\r\n                break;\r\n            case \"deferRendering\":\r\n                this.toggle(this.option(\"opened\"));\r\n                break;\r\n            case \"tabIndex\":\r\n                this._buttonGroup.option(name, value);\r\n                break;\r\n            default:\r\n                this.callBase(args)\r\n        }\r\n    }\r\n}).include(DataHelperMixin);\r\nregisterComponent(\"dxDropDownButton\", DropDownButton);\r\nexport default DropDownButton;\r\n"]},"metadata":{},"sourceType":"module"}