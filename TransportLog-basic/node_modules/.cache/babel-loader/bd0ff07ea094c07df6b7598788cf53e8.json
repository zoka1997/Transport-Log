{"ast":null,"code":"/**\r\n * DevExtreme (esm/ui/scheduler/appointments/rendering_strategies/strategy_horizontal_month_line.js)\r\n * Version: 22.1.6\r\n * Build date: Tue Oct 18 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport HorizontalAppointmentsStrategy from \"./strategy_horizontal\";\nimport dateUtils from \"../../../../core/utils/date\";\nimport query from \"../../../../data/query\";\nimport { sortAppointmentsByStartDate } from \"../dataProvider/utils\";\nvar HOURS_IN_DAY = 24;\nvar MINUTES_IN_HOUR = 60;\nvar MILLISECONDS_IN_MINUTE = 6e4;\nvar ZERO_APPOINTMENT_DURATION_IN_DAYS = 1;\n\nclass HorizontalMonthLineRenderingStrategy extends HorizontalAppointmentsStrategy {\n  calculateAppointmentWidth(appointment, position) {\n    var startDate = dateUtils.trimTime(position.info.appointment.startDate);\n    var {\n      normalizedEndDate: normalizedEndDate\n    } = position.info.appointment;\n    var cellWidth = this.cellWidth || this.getAppointmentMinSize();\n    var duration = Math.ceil(this._getDurationInDays(startDate, normalizedEndDate));\n    var width = this.cropAppointmentWidth(duration * cellWidth, cellWidth);\n\n    if (this.isVirtualScrolling) {\n      var skippedDays = this.viewDataProvider.getSkippedDaysCount(position.groupIndex, startDate, normalizedEndDate, duration);\n      width -= skippedDays * cellWidth;\n    }\n\n    return width;\n  }\n\n  _getDurationInDays(startDate, endDate) {\n    var adjustedDuration = this._adjustDurationByDaylightDiff(endDate.getTime() - startDate.getTime(), startDate, endDate);\n\n    return adjustedDuration / dateUtils.dateToMilliseconds(\"day\") || ZERO_APPOINTMENT_DURATION_IN_DAYS;\n  }\n\n  getDeltaTime(args, initialSize) {\n    return HOURS_IN_DAY * MINUTES_IN_HOUR * MILLISECONDS_IN_MINUTE * this._getDeltaWidth(args, initialSize);\n  }\n\n  isAllDay() {\n    return false;\n  }\n\n  createTaskPositionMap(items, skipSorting) {\n    if (!skipSorting) {\n      sortAppointmentsByStartDate(items, this.dataAccessors);\n    }\n\n    return super.createTaskPositionMap(items);\n  }\n\n  _getSortedPositions(map, skipSorting) {\n    var result = super._getSortedPositions(map);\n\n    if (!skipSorting) {\n      result = query(result).sortBy(\"top\").thenBy(\"left\").thenBy(\"cellPosition\").thenBy(\"i\").toArray();\n    }\n\n    return result;\n  }\n\n  needCorrectAppointmentDates() {\n    return false;\n  }\n\n  getPositionShift() {\n    return {\n      top: 0,\n      left: 0,\n      cellPosition: 0\n    };\n  }\n\n}\n\nexport default HorizontalMonthLineRenderingStrategy;","map":{"version":3,"sources":["C:/Users/Zoran/source/repos/TransportApp/TransportLog-basic/node_modules/devextreme/esm/ui/scheduler/appointments/rendering_strategies/strategy_horizontal_month_line.js"],"names":["HorizontalAppointmentsStrategy","dateUtils","query","sortAppointmentsByStartDate","HOURS_IN_DAY","MINUTES_IN_HOUR","MILLISECONDS_IN_MINUTE","ZERO_APPOINTMENT_DURATION_IN_DAYS","HorizontalMonthLineRenderingStrategy","calculateAppointmentWidth","appointment","position","startDate","trimTime","info","normalizedEndDate","cellWidth","getAppointmentMinSize","duration","Math","ceil","_getDurationInDays","width","cropAppointmentWidth","isVirtualScrolling","skippedDays","viewDataProvider","getSkippedDaysCount","groupIndex","endDate","adjustedDuration","_adjustDurationByDaylightDiff","getTime","dateToMilliseconds","getDeltaTime","args","initialSize","_getDeltaWidth","isAllDay","createTaskPositionMap","items","skipSorting","dataAccessors","_getSortedPositions","map","result","sortBy","thenBy","toArray","needCorrectAppointmentDates","getPositionShift","top","left","cellPosition"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (esm/ui/scheduler/appointments/rendering_strategies/strategy_horizontal_month_line.js)\r\n * Version: 22.1.6\r\n * Build date: Tue Oct 18 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport HorizontalAppointmentsStrategy from \"./strategy_horizontal\";\r\nimport dateUtils from \"../../../../core/utils/date\";\r\nimport query from \"../../../../data/query\";\r\nimport {\r\n    sortAppointmentsByStartDate\r\n} from \"../dataProvider/utils\";\r\nvar HOURS_IN_DAY = 24;\r\nvar MINUTES_IN_HOUR = 60;\r\nvar MILLISECONDS_IN_MINUTE = 6e4;\r\nvar ZERO_APPOINTMENT_DURATION_IN_DAYS = 1;\r\nclass HorizontalMonthLineRenderingStrategy extends HorizontalAppointmentsStrategy {\r\n    calculateAppointmentWidth(appointment, position) {\r\n        var startDate = dateUtils.trimTime(position.info.appointment.startDate);\r\n        var {\r\n            normalizedEndDate: normalizedEndDate\r\n        } = position.info.appointment;\r\n        var cellWidth = this.cellWidth || this.getAppointmentMinSize();\r\n        var duration = Math.ceil(this._getDurationInDays(startDate, normalizedEndDate));\r\n        var width = this.cropAppointmentWidth(duration * cellWidth, cellWidth);\r\n        if (this.isVirtualScrolling) {\r\n            var skippedDays = this.viewDataProvider.getSkippedDaysCount(position.groupIndex, startDate, normalizedEndDate, duration);\r\n            width -= skippedDays * cellWidth\r\n        }\r\n        return width\r\n    }\r\n    _getDurationInDays(startDate, endDate) {\r\n        var adjustedDuration = this._adjustDurationByDaylightDiff(endDate.getTime() - startDate.getTime(), startDate, endDate);\r\n        return adjustedDuration / dateUtils.dateToMilliseconds(\"day\") || ZERO_APPOINTMENT_DURATION_IN_DAYS\r\n    }\r\n    getDeltaTime(args, initialSize) {\r\n        return HOURS_IN_DAY * MINUTES_IN_HOUR * MILLISECONDS_IN_MINUTE * this._getDeltaWidth(args, initialSize)\r\n    }\r\n    isAllDay() {\r\n        return false\r\n    }\r\n    createTaskPositionMap(items, skipSorting) {\r\n        if (!skipSorting) {\r\n            sortAppointmentsByStartDate(items, this.dataAccessors)\r\n        }\r\n        return super.createTaskPositionMap(items)\r\n    }\r\n    _getSortedPositions(map, skipSorting) {\r\n        var result = super._getSortedPositions(map);\r\n        if (!skipSorting) {\r\n            result = query(result).sortBy(\"top\").thenBy(\"left\").thenBy(\"cellPosition\").thenBy(\"i\").toArray()\r\n        }\r\n        return result\r\n    }\r\n    needCorrectAppointmentDates() {\r\n        return false\r\n    }\r\n    getPositionShift() {\r\n        return {\r\n            top: 0,\r\n            left: 0,\r\n            cellPosition: 0\r\n        }\r\n    }\r\n}\r\nexport default HorizontalMonthLineRenderingStrategy;\r\n"]},"metadata":{},"sourceType":"module"}