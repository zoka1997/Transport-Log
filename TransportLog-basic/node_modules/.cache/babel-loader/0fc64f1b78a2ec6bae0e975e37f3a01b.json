{"ast":null,"code":"/**\r\n * DevExtreme (esm/ui/toolbar.js)\r\n * Version: 22.1.6\r\n * Build date: Tue Oct 18 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport { getWidth, getOuterWidth } from \"../core/utils/size\";\nimport $ from \"../core/renderer\";\nimport registerComponent from \"../core/component_registrator\";\nimport { grep, deferRender } from \"../core/utils/common\";\nimport { extend } from \"../core/utils/extend\";\nimport { each } from \"../core/utils/iterator\";\nimport ToolbarDropDownMenu from \"./toolbar/ui.toolbar.drop_down_menu\";\nimport ToolbarBase from \"./toolbar/ui.toolbar.base\";\nimport { ChildDefaultTemplate } from \"../core/templates/child_default_template\";\nimport { toggleItemFocusableElementTabIndex } from \"./toolbar/ui.toolbar.utils\";\nvar TOOLBAR_AUTO_HIDE_ITEM_CLASS = \"dx-toolbar-item-auto-hide\";\nvar TOOLBAR_AUTO_HIDE_TEXT_CLASS = \"dx-toolbar-text-auto-hide\";\nvar TOOLBAR_HIDDEN_ITEM = \"dx-toolbar-item-invisible\";\nvar Toolbar = ToolbarBase.inherit({\n  _getDefaultOptions: function () {\n    return extend(this.callBase(), {\n      menuItemTemplate: \"menuItem\",\n      menuContainer: void 0,\n      overflowMenuVisible: false\n    });\n  },\n  updateDimensions: function () {\n    this._dimensionChanged();\n  },\n  _dimensionChanged: function (dimension) {\n    if (\"height\" === dimension) {\n      return;\n    }\n\n    this.callBase();\n\n    this._menu.renderMenuItems();\n  },\n  _initTemplates: function () {\n    this.callBase();\n\n    this._templateManager.addDefaultTemplates({\n      actionSheetItem: new ChildDefaultTemplate(\"item\")\n    });\n  },\n  _initMarkup: function () {\n    this.callBase();\n\n    this._updateFocusableItemsTabIndex();\n\n    this._renderMenu();\n  },\n  _postProcessRenderItems: function () {\n    this._hideOverflowItems();\n\n    this._menu._updateMenuVisibility();\n\n    this.callBase();\n    deferRender(() => {\n      this._menu.renderMenuItems();\n    });\n  },\n  _renderItem: function (index, item, itemContainer, $after) {\n    var itemElement = this.callBase(index, item, itemContainer, $after);\n\n    if (\"auto\" === item.locateInMenu) {\n      itemElement.addClass(TOOLBAR_AUTO_HIDE_ITEM_CLASS);\n    }\n\n    if (\"dxButton\" === item.widget && \"inMenu\" === item.showText) {\n      itemElement.toggleClass(TOOLBAR_AUTO_HIDE_TEXT_CLASS);\n    }\n\n    return itemElement;\n  },\n  _getItemsWidth: function () {\n    return this._getSummaryItemsWidth([this._$beforeSection, this._$centerSection, this._$afterSection]);\n  },\n  _hideOverflowItems: function (elementWidth) {\n    var overflowItems = this.$element().find(\".\" + TOOLBAR_AUTO_HIDE_ITEM_CLASS);\n\n    if (!overflowItems.length) {\n      return;\n    }\n\n    elementWidth = elementWidth || getWidth(this.$element());\n    $(overflowItems).removeClass(TOOLBAR_HIDDEN_ITEM);\n\n    var itemsWidth = this._getItemsWidth();\n\n    while (overflowItems.length && elementWidth < itemsWidth) {\n      var $item = overflowItems.eq(-1);\n      itemsWidth -= getOuterWidth($item);\n      $item.addClass(TOOLBAR_HIDDEN_ITEM);\n      overflowItems.splice(-1, 1);\n    }\n  },\n  _getMenuItems: function () {\n    var that = this;\n    var menuItems = grep(this.option(\"items\") || [], function (item) {\n      return that._isMenuItem(item);\n    });\n\n    var $hiddenItems = this._itemContainer().children(\".\" + TOOLBAR_AUTO_HIDE_ITEM_CLASS + \".\" + TOOLBAR_HIDDEN_ITEM).not(\".dx-state-invisible\");\n\n    this._restoreItems = this._restoreItems || [];\n    var overflowItems = [].slice.call($hiddenItems).map(item => {\n      var itemData = that._getItemData(item);\n\n      var $itemContainer = $(item);\n      var $itemMarkup = $itemContainer.children();\n      return extend({\n        menuItemTemplate: function () {\n          that._restoreItems.push({\n            container: $itemContainer,\n            item: $itemMarkup\n          });\n\n          var $container = $(\"<div>\").addClass(TOOLBAR_AUTO_HIDE_ITEM_CLASS);\n          return $container.append($itemMarkup);\n        }\n      }, itemData);\n    });\n    return [...overflowItems, ...menuItems];\n  },\n  _getToolbarItems: function () {\n    var that = this;\n    return grep(this.option(\"items\") || [], function (item) {\n      return !that._isMenuItem(item);\n    });\n  },\n  _renderMenu: function () {\n    this._renderMenuStrategy();\n\n    deferRender(() => {\n      this._menu.render();\n    });\n  },\n  _renderMenuStrategy: function () {\n    if (!this._menu) {\n      this._menu = new ToolbarDropDownMenu(this);\n    }\n  },\n  _arrangeItems: function () {\n    if (this.$element().is(\":hidden\")) {\n      return;\n    }\n\n    this._$centerSection.css({\n      margin: \"0 auto\",\n      float: \"none\"\n    });\n\n    each(this._restoreItems || [], function (_, obj) {\n      $(obj.container).append(obj.item);\n    });\n    this._restoreItems = [];\n    var elementWidth = getWidth(this.$element());\n\n    this._hideOverflowItems(elementWidth);\n\n    this.callBase(elementWidth);\n  },\n  _itemOptionChanged: function (item, property, value) {\n    if (this._isMenuItem(item)) {\n      this._menu.itemOption(item, property, value);\n    } else if (this._isToolbarItem(item)) {\n      this.callBase(item, property, value);\n    } else {\n      this.callBase(item, property, value);\n\n      this._menu.renderMenuItems();\n    }\n\n    if (\"disabled\" === property || \"options.disabled\" === property) {\n      toggleItemFocusableElementTabIndex(this, item);\n    }\n\n    if (\"location\" === property) {\n      this.repaint();\n    }\n  },\n\n  _updateFocusableItemsTabIndex() {\n    this._getToolbarItems().forEach(item => toggleItemFocusableElementTabIndex(this, item));\n  },\n\n  _isMenuItem: function (itemData) {\n    return \"menu\" === itemData.location || \"always\" === itemData.locateInMenu;\n  },\n  _isToolbarItem: function (itemData) {\n    return void 0 === itemData.location || \"never\" === itemData.locateInMenu;\n  },\n  _optionChanged: function (args) {\n    var {\n      name: name,\n      value: value\n    } = args;\n\n    switch (name) {\n      case \"menuItemTemplate\":\n        this._changeMenuOption(\"itemTemplate\", this._getTemplate(value));\n\n        break;\n\n      case \"onItemClick\":\n        this._changeMenuOption(name, value);\n\n        this.callBase.apply(this, arguments);\n        break;\n\n      case \"menuContainer\":\n        this._changeMenuOption(\"container\", value);\n\n        break;\n\n      case \"overflowMenuVisible\":\n        this._changeMenuOption(\"opened\", value);\n\n        break;\n\n      case \"disabled\":\n        this._changeMenuOption(\"disabled\", value);\n\n        this.callBase.apply(this, arguments);\n\n        this._updateFocusableItemsTabIndex();\n\n        break;\n\n      default:\n        this.callBase.apply(this, arguments);\n    }\n  },\n  _changeMenuOption: function (name, value) {\n    this._menu.widgetOption(name, value);\n  }\n});\nregisterComponent(\"dxToolbar\", Toolbar);\nexport default Toolbar;","map":{"version":3,"sources":["C:/Users/Zoran/source/repos/TransportApp/TransportLog-basic/node_modules/devextreme/esm/ui/toolbar.js"],"names":["getWidth","getOuterWidth","$","registerComponent","grep","deferRender","extend","each","ToolbarDropDownMenu","ToolbarBase","ChildDefaultTemplate","toggleItemFocusableElementTabIndex","TOOLBAR_AUTO_HIDE_ITEM_CLASS","TOOLBAR_AUTO_HIDE_TEXT_CLASS","TOOLBAR_HIDDEN_ITEM","Toolbar","inherit","_getDefaultOptions","callBase","menuItemTemplate","menuContainer","overflowMenuVisible","updateDimensions","_dimensionChanged","dimension","_menu","renderMenuItems","_initTemplates","_templateManager","addDefaultTemplates","actionSheetItem","_initMarkup","_updateFocusableItemsTabIndex","_renderMenu","_postProcessRenderItems","_hideOverflowItems","_updateMenuVisibility","_renderItem","index","item","itemContainer","$after","itemElement","locateInMenu","addClass","widget","showText","toggleClass","_getItemsWidth","_getSummaryItemsWidth","_$beforeSection","_$centerSection","_$afterSection","elementWidth","overflowItems","$element","find","length","removeClass","itemsWidth","$item","eq","splice","_getMenuItems","that","menuItems","option","_isMenuItem","$hiddenItems","_itemContainer","children","not","_restoreItems","slice","call","map","itemData","_getItemData","$itemContainer","$itemMarkup","push","container","$container","append","_getToolbarItems","_renderMenuStrategy","render","_arrangeItems","is","css","margin","float","_","obj","_itemOptionChanged","property","value","itemOption","_isToolbarItem","repaint","forEach","location","_optionChanged","args","name","_changeMenuOption","_getTemplate","apply","arguments","widgetOption"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (esm/ui/toolbar.js)\r\n * Version: 22.1.6\r\n * Build date: Tue Oct 18 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport {\r\n    getWidth,\r\n    getOuterWidth\r\n} from \"../core/utils/size\";\r\nimport $ from \"../core/renderer\";\r\nimport registerComponent from \"../core/component_registrator\";\r\nimport {\r\n    grep,\r\n    deferRender\r\n} from \"../core/utils/common\";\r\nimport {\r\n    extend\r\n} from \"../core/utils/extend\";\r\nimport {\r\n    each\r\n} from \"../core/utils/iterator\";\r\nimport ToolbarDropDownMenu from \"./toolbar/ui.toolbar.drop_down_menu\";\r\nimport ToolbarBase from \"./toolbar/ui.toolbar.base\";\r\nimport {\r\n    ChildDefaultTemplate\r\n} from \"../core/templates/child_default_template\";\r\nimport {\r\n    toggleItemFocusableElementTabIndex\r\n} from \"./toolbar/ui.toolbar.utils\";\r\nvar TOOLBAR_AUTO_HIDE_ITEM_CLASS = \"dx-toolbar-item-auto-hide\";\r\nvar TOOLBAR_AUTO_HIDE_TEXT_CLASS = \"dx-toolbar-text-auto-hide\";\r\nvar TOOLBAR_HIDDEN_ITEM = \"dx-toolbar-item-invisible\";\r\nvar Toolbar = ToolbarBase.inherit({\r\n    _getDefaultOptions: function() {\r\n        return extend(this.callBase(), {\r\n            menuItemTemplate: \"menuItem\",\r\n            menuContainer: void 0,\r\n            overflowMenuVisible: false\r\n        })\r\n    },\r\n    updateDimensions: function() {\r\n        this._dimensionChanged()\r\n    },\r\n    _dimensionChanged: function(dimension) {\r\n        if (\"height\" === dimension) {\r\n            return\r\n        }\r\n        this.callBase();\r\n        this._menu.renderMenuItems()\r\n    },\r\n    _initTemplates: function() {\r\n        this.callBase();\r\n        this._templateManager.addDefaultTemplates({\r\n            actionSheetItem: new ChildDefaultTemplate(\"item\")\r\n        })\r\n    },\r\n    _initMarkup: function() {\r\n        this.callBase();\r\n        this._updateFocusableItemsTabIndex();\r\n        this._renderMenu()\r\n    },\r\n    _postProcessRenderItems: function() {\r\n        this._hideOverflowItems();\r\n        this._menu._updateMenuVisibility();\r\n        this.callBase();\r\n        deferRender(() => {\r\n            this._menu.renderMenuItems()\r\n        })\r\n    },\r\n    _renderItem: function(index, item, itemContainer, $after) {\r\n        var itemElement = this.callBase(index, item, itemContainer, $after);\r\n        if (\"auto\" === item.locateInMenu) {\r\n            itemElement.addClass(TOOLBAR_AUTO_HIDE_ITEM_CLASS)\r\n        }\r\n        if (\"dxButton\" === item.widget && \"inMenu\" === item.showText) {\r\n            itemElement.toggleClass(TOOLBAR_AUTO_HIDE_TEXT_CLASS)\r\n        }\r\n        return itemElement\r\n    },\r\n    _getItemsWidth: function() {\r\n        return this._getSummaryItemsWidth([this._$beforeSection, this._$centerSection, this._$afterSection])\r\n    },\r\n    _hideOverflowItems: function(elementWidth) {\r\n        var overflowItems = this.$element().find(\".\" + TOOLBAR_AUTO_HIDE_ITEM_CLASS);\r\n        if (!overflowItems.length) {\r\n            return\r\n        }\r\n        elementWidth = elementWidth || getWidth(this.$element());\r\n        $(overflowItems).removeClass(TOOLBAR_HIDDEN_ITEM);\r\n        var itemsWidth = this._getItemsWidth();\r\n        while (overflowItems.length && elementWidth < itemsWidth) {\r\n            var $item = overflowItems.eq(-1);\r\n            itemsWidth -= getOuterWidth($item);\r\n            $item.addClass(TOOLBAR_HIDDEN_ITEM);\r\n            overflowItems.splice(-1, 1)\r\n        }\r\n    },\r\n    _getMenuItems: function() {\r\n        var that = this;\r\n        var menuItems = grep(this.option(\"items\") || [], (function(item) {\r\n            return that._isMenuItem(item)\r\n        }));\r\n        var $hiddenItems = this._itemContainer().children(\".\" + TOOLBAR_AUTO_HIDE_ITEM_CLASS + \".\" + TOOLBAR_HIDDEN_ITEM).not(\".dx-state-invisible\");\r\n        this._restoreItems = this._restoreItems || [];\r\n        var overflowItems = [].slice.call($hiddenItems).map(item => {\r\n            var itemData = that._getItemData(item);\r\n            var $itemContainer = $(item);\r\n            var $itemMarkup = $itemContainer.children();\r\n            return extend({\r\n                menuItemTemplate: function() {\r\n                    that._restoreItems.push({\r\n                        container: $itemContainer,\r\n                        item: $itemMarkup\r\n                    });\r\n                    var $container = $(\"<div>\").addClass(TOOLBAR_AUTO_HIDE_ITEM_CLASS);\r\n                    return $container.append($itemMarkup)\r\n                }\r\n            }, itemData)\r\n        });\r\n        return [...overflowItems, ...menuItems]\r\n    },\r\n    _getToolbarItems: function() {\r\n        var that = this;\r\n        return grep(this.option(\"items\") || [], (function(item) {\r\n            return !that._isMenuItem(item)\r\n        }))\r\n    },\r\n    _renderMenu: function() {\r\n        this._renderMenuStrategy();\r\n        deferRender(() => {\r\n            this._menu.render()\r\n        })\r\n    },\r\n    _renderMenuStrategy: function() {\r\n        if (!this._menu) {\r\n            this._menu = new ToolbarDropDownMenu(this)\r\n        }\r\n    },\r\n    _arrangeItems: function() {\r\n        if (this.$element().is(\":hidden\")) {\r\n            return\r\n        }\r\n        this._$centerSection.css({\r\n            margin: \"0 auto\",\r\n            float: \"none\"\r\n        });\r\n        each(this._restoreItems || [], (function(_, obj) {\r\n            $(obj.container).append(obj.item)\r\n        }));\r\n        this._restoreItems = [];\r\n        var elementWidth = getWidth(this.$element());\r\n        this._hideOverflowItems(elementWidth);\r\n        this.callBase(elementWidth)\r\n    },\r\n    _itemOptionChanged: function(item, property, value) {\r\n        if (this._isMenuItem(item)) {\r\n            this._menu.itemOption(item, property, value)\r\n        } else if (this._isToolbarItem(item)) {\r\n            this.callBase(item, property, value)\r\n        } else {\r\n            this.callBase(item, property, value);\r\n            this._menu.renderMenuItems()\r\n        }\r\n        if (\"disabled\" === property || \"options.disabled\" === property) {\r\n            toggleItemFocusableElementTabIndex(this, item)\r\n        }\r\n        if (\"location\" === property) {\r\n            this.repaint()\r\n        }\r\n    },\r\n    _updateFocusableItemsTabIndex() {\r\n        this._getToolbarItems().forEach(item => toggleItemFocusableElementTabIndex(this, item))\r\n    },\r\n    _isMenuItem: function(itemData) {\r\n        return \"menu\" === itemData.location || \"always\" === itemData.locateInMenu\r\n    },\r\n    _isToolbarItem: function(itemData) {\r\n        return void 0 === itemData.location || \"never\" === itemData.locateInMenu\r\n    },\r\n    _optionChanged: function(args) {\r\n        var {\r\n            name: name,\r\n            value: value\r\n        } = args;\r\n        switch (name) {\r\n            case \"menuItemTemplate\":\r\n                this._changeMenuOption(\"itemTemplate\", this._getTemplate(value));\r\n                break;\r\n            case \"onItemClick\":\r\n                this._changeMenuOption(name, value);\r\n                this.callBase.apply(this, arguments);\r\n                break;\r\n            case \"menuContainer\":\r\n                this._changeMenuOption(\"container\", value);\r\n                break;\r\n            case \"overflowMenuVisible\":\r\n                this._changeMenuOption(\"opened\", value);\r\n                break;\r\n            case \"disabled\":\r\n                this._changeMenuOption(\"disabled\", value);\r\n                this.callBase.apply(this, arguments);\r\n                this._updateFocusableItemsTabIndex();\r\n                break;\r\n            default:\r\n                this.callBase.apply(this, arguments)\r\n        }\r\n    },\r\n    _changeMenuOption: function(name, value) {\r\n        this._menu.widgetOption(name, value)\r\n    }\r\n});\r\nregisterComponent(\"dxToolbar\", Toolbar);\r\nexport default Toolbar;\r\n"]},"metadata":{},"sourceType":"module"}