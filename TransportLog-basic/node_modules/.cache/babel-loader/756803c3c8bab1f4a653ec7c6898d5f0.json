{"ast":null,"code":"/**\r\n * DevExtreme (esm/ui/selection/selection.strategy.js)\r\n * Version: 22.1.6\r\n * Build date: Tue Oct 18 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport dataQuery from \"../../data/query\";\nimport { getKeyHash, noop, equalByValue } from \"../../core/utils/common\";\nimport { isPlainObject, isObject } from \"../../core/utils/type\";\nimport Class from \"../../core/class\";\nimport { Deferred } from \"../../core/utils/deferred\";\nexport default Class.inherit({\n  ctor: function (options) {\n    this.options = options;\n\n    this._setOption(\"disabledItemKeys\", []);\n\n    this._clearItemKeys();\n  },\n  _clearItemKeys: function () {\n    this._setOption(\"addedItemKeys\", []);\n\n    this._setOption(\"removedItemKeys\", []);\n\n    this._setOption(\"removedItems\", []);\n\n    this._setOption(\"addedItems\", []);\n  },\n  validate: noop,\n  _setOption: function (name, value) {\n    this.options[name] = value;\n  },\n  onSelectionChanged: function () {\n    var addedItemKeys = this.options.addedItemKeys;\n    var removedItemKeys = this.options.removedItemKeys;\n    var addedItems = this.options.addedItems;\n    var removedItems = this.options.removedItems;\n    var selectedItems = this.options.selectedItems;\n    var selectedItemKeys = this.options.selectedItemKeys;\n    var onSelectionChanged = this.options.onSelectionChanged || noop;\n\n    this._clearItemKeys();\n\n    onSelectionChanged({\n      selectedItems: selectedItems,\n      selectedItemKeys: selectedItemKeys,\n      addedItemKeys: addedItemKeys,\n      removedItemKeys: removedItemKeys,\n      addedItems: addedItems,\n      removedItems: removedItems\n    });\n  },\n  equalKeys: function (key1, key2) {\n    if (this.options.equalByReference) {\n      if (isObject(key1) && isObject(key2)) {\n        return key1 === key2;\n      }\n    }\n\n    return equalByValue(key1, key2);\n  },\n  getSelectableItems: function (items) {\n    return items.filter(function (item) {\n      return !(null !== item && void 0 !== item && item.disabled);\n    });\n  },\n  _clearSelection: function (keys, preserve, isDeselect, isSelectAll) {\n    keys = keys || [];\n    keys = Array.isArray(keys) ? keys : [keys];\n    this.validate();\n    return this.selectedItemKeys(keys, preserve, isDeselect, isSelectAll);\n  },\n  _removeTemplateProperty: function (remoteFilter) {\n    if (Array.isArray(remoteFilter)) {\n      return remoteFilter.map(f => this._removeTemplateProperty(f));\n    }\n\n    if (isObject(remoteFilter)) {\n      delete remoteFilter.template;\n    }\n\n    return remoteFilter;\n  },\n  _loadFilteredData: function (remoteFilter, localFilter, select, isSelectAll) {\n    var filterLength = encodeURI(JSON.stringify(this._removeTemplateProperty(remoteFilter))).length;\n    var needLoadAllData = this.options.maxFilterLengthInRequest && filterLength > this.options.maxFilterLengthInRequest;\n    var deferred = new Deferred();\n    var loadOptions = {\n      filter: needLoadAllData ? void 0 : remoteFilter,\n      select: needLoadAllData ? this.options.dataFields() : select || this.options.dataFields()\n    };\n\n    if (remoteFilter && 0 === remoteFilter.length) {\n      deferred.resolve([]);\n    } else {\n      this.options.load(loadOptions).done(function (items) {\n        var filteredItems = isPlainObject(items) ? items.data : items;\n\n        if (localFilter && !isSelectAll) {\n          filteredItems = filteredItems.filter(localFilter);\n        } else if (needLoadAllData) {\n          filteredItems = dataQuery(filteredItems).filter(remoteFilter).toArray();\n        }\n\n        deferred.resolve(filteredItems);\n      }).fail(deferred.reject.bind(deferred));\n    }\n\n    return deferred;\n  },\n  updateSelectedItemKeyHash: function (keys) {\n    for (var i = 0; i < keys.length; i++) {\n      var keyHash = getKeyHash(keys[i]);\n\n      if (!isObject(keyHash)) {\n        this.options.keyHashIndices[keyHash] = this.options.keyHashIndices[keyHash] || [];\n        var keyIndices = this.options.keyHashIndices[keyHash];\n        keyIndices.push(i);\n      }\n    }\n  },\n  _isAnyItemSelected: function (items) {\n    for (var i = 0; i < items.length; i++) {\n      if (this.options.isItemSelected(items[i])) {\n        return;\n      }\n    }\n\n    return false;\n  },\n  _getFullSelectAllState: function () {\n    var items = this.options.plainItems();\n    var dataFilter = this.options.filter();\n    var selectedItems = this.options.ignoreDisabledItems ? this.options.selectedItems : this.options.selectedItems.filter(item => !(null !== item && void 0 !== item && item.disabled));\n\n    if (dataFilter) {\n      selectedItems = dataQuery(selectedItems).filter(dataFilter).toArray();\n    }\n\n    var selectedItemsLength = selectedItems.length;\n    var disabledItemsLength = items.length - this.getSelectableItems(items).length;\n\n    if (!selectedItemsLength) {\n      return this._isAnyItemSelected(items);\n    }\n\n    if (selectedItemsLength >= this.options.totalCount() - disabledItemsLength) {\n      return true;\n    }\n\n    return;\n  },\n  _getVisibleSelectAllState: function () {\n    var items = this.getSelectableItems(this.options.plainItems());\n    var hasSelectedItems = false;\n    var hasUnselectedItems = false;\n\n    for (var i = 0; i < items.length; i++) {\n      var item = items[i];\n      var itemData = this.options.getItemData(item);\n      var key = this.options.keyOf(itemData);\n\n      if (this.options.isSelectableItem(item)) {\n        if (this.isItemKeySelected(key)) {\n          hasSelectedItems = true;\n        } else {\n          hasUnselectedItems = true;\n        }\n      }\n    }\n\n    if (hasSelectedItems) {\n      return !hasUnselectedItems ? true : void 0;\n    } else {\n      return false;\n    }\n  }\n});","map":{"version":3,"sources":["C:/Users/Zoran/source/repos/TransportApp/TransportLog-basic/node_modules/devextreme/esm/ui/selection/selection.strategy.js"],"names":["dataQuery","getKeyHash","noop","equalByValue","isPlainObject","isObject","Class","Deferred","inherit","ctor","options","_setOption","_clearItemKeys","validate","name","value","onSelectionChanged","addedItemKeys","removedItemKeys","addedItems","removedItems","selectedItems","selectedItemKeys","equalKeys","key1","key2","equalByReference","getSelectableItems","items","filter","item","disabled","_clearSelection","keys","preserve","isDeselect","isSelectAll","Array","isArray","_removeTemplateProperty","remoteFilter","map","f","template","_loadFilteredData","localFilter","select","filterLength","encodeURI","JSON","stringify","length","needLoadAllData","maxFilterLengthInRequest","deferred","loadOptions","dataFields","resolve","load","done","filteredItems","data","toArray","fail","reject","bind","updateSelectedItemKeyHash","i","keyHash","keyHashIndices","keyIndices","push","_isAnyItemSelected","isItemSelected","_getFullSelectAllState","plainItems","dataFilter","ignoreDisabledItems","selectedItemsLength","disabledItemsLength","totalCount","_getVisibleSelectAllState","hasSelectedItems","hasUnselectedItems","itemData","getItemData","key","keyOf","isSelectableItem","isItemKeySelected"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (esm/ui/selection/selection.strategy.js)\r\n * Version: 22.1.6\r\n * Build date: Tue Oct 18 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport dataQuery from \"../../data/query\";\r\nimport {\r\n    getKeyHash,\r\n    noop,\r\n    equalByValue\r\n} from \"../../core/utils/common\";\r\nimport {\r\n    isPlainObject,\r\n    isObject\r\n} from \"../../core/utils/type\";\r\nimport Class from \"../../core/class\";\r\nimport {\r\n    Deferred\r\n} from \"../../core/utils/deferred\";\r\nexport default Class.inherit({\r\n    ctor: function(options) {\r\n        this.options = options;\r\n        this._setOption(\"disabledItemKeys\", []);\r\n        this._clearItemKeys()\r\n    },\r\n    _clearItemKeys: function() {\r\n        this._setOption(\"addedItemKeys\", []);\r\n        this._setOption(\"removedItemKeys\", []);\r\n        this._setOption(\"removedItems\", []);\r\n        this._setOption(\"addedItems\", [])\r\n    },\r\n    validate: noop,\r\n    _setOption: function(name, value) {\r\n        this.options[name] = value\r\n    },\r\n    onSelectionChanged: function() {\r\n        var addedItemKeys = this.options.addedItemKeys;\r\n        var removedItemKeys = this.options.removedItemKeys;\r\n        var addedItems = this.options.addedItems;\r\n        var removedItems = this.options.removedItems;\r\n        var selectedItems = this.options.selectedItems;\r\n        var selectedItemKeys = this.options.selectedItemKeys;\r\n        var onSelectionChanged = this.options.onSelectionChanged || noop;\r\n        this._clearItemKeys();\r\n        onSelectionChanged({\r\n            selectedItems: selectedItems,\r\n            selectedItemKeys: selectedItemKeys,\r\n            addedItemKeys: addedItemKeys,\r\n            removedItemKeys: removedItemKeys,\r\n            addedItems: addedItems,\r\n            removedItems: removedItems\r\n        })\r\n    },\r\n    equalKeys: function(key1, key2) {\r\n        if (this.options.equalByReference) {\r\n            if (isObject(key1) && isObject(key2)) {\r\n                return key1 === key2\r\n            }\r\n        }\r\n        return equalByValue(key1, key2)\r\n    },\r\n    getSelectableItems: function(items) {\r\n        return items.filter((function(item) {\r\n            return !(null !== item && void 0 !== item && item.disabled)\r\n        }))\r\n    },\r\n    _clearSelection: function(keys, preserve, isDeselect, isSelectAll) {\r\n        keys = keys || [];\r\n        keys = Array.isArray(keys) ? keys : [keys];\r\n        this.validate();\r\n        return this.selectedItemKeys(keys, preserve, isDeselect, isSelectAll)\r\n    },\r\n    _removeTemplateProperty: function(remoteFilter) {\r\n        if (Array.isArray(remoteFilter)) {\r\n            return remoteFilter.map(f => this._removeTemplateProperty(f))\r\n        }\r\n        if (isObject(remoteFilter)) {\r\n            delete remoteFilter.template\r\n        }\r\n        return remoteFilter\r\n    },\r\n    _loadFilteredData: function(remoteFilter, localFilter, select, isSelectAll) {\r\n        var filterLength = encodeURI(JSON.stringify(this._removeTemplateProperty(remoteFilter))).length;\r\n        var needLoadAllData = this.options.maxFilterLengthInRequest && filterLength > this.options.maxFilterLengthInRequest;\r\n        var deferred = new Deferred;\r\n        var loadOptions = {\r\n            filter: needLoadAllData ? void 0 : remoteFilter,\r\n            select: needLoadAllData ? this.options.dataFields() : select || this.options.dataFields()\r\n        };\r\n        if (remoteFilter && 0 === remoteFilter.length) {\r\n            deferred.resolve([])\r\n        } else {\r\n            this.options.load(loadOptions).done((function(items) {\r\n                var filteredItems = isPlainObject(items) ? items.data : items;\r\n                if (localFilter && !isSelectAll) {\r\n                    filteredItems = filteredItems.filter(localFilter)\r\n                } else if (needLoadAllData) {\r\n                    filteredItems = dataQuery(filteredItems).filter(remoteFilter).toArray()\r\n                }\r\n                deferred.resolve(filteredItems)\r\n            })).fail(deferred.reject.bind(deferred))\r\n        }\r\n        return deferred\r\n    },\r\n    updateSelectedItemKeyHash: function(keys) {\r\n        for (var i = 0; i < keys.length; i++) {\r\n            var keyHash = getKeyHash(keys[i]);\r\n            if (!isObject(keyHash)) {\r\n                this.options.keyHashIndices[keyHash] = this.options.keyHashIndices[keyHash] || [];\r\n                var keyIndices = this.options.keyHashIndices[keyHash];\r\n                keyIndices.push(i)\r\n            }\r\n        }\r\n    },\r\n    _isAnyItemSelected: function(items) {\r\n        for (var i = 0; i < items.length; i++) {\r\n            if (this.options.isItemSelected(items[i])) {\r\n                return\r\n            }\r\n        }\r\n        return false\r\n    },\r\n    _getFullSelectAllState: function() {\r\n        var items = this.options.plainItems();\r\n        var dataFilter = this.options.filter();\r\n        var selectedItems = this.options.ignoreDisabledItems ? this.options.selectedItems : this.options.selectedItems.filter(item => !(null !== item && void 0 !== item && item.disabled));\r\n        if (dataFilter) {\r\n            selectedItems = dataQuery(selectedItems).filter(dataFilter).toArray()\r\n        }\r\n        var selectedItemsLength = selectedItems.length;\r\n        var disabledItemsLength = items.length - this.getSelectableItems(items).length;\r\n        if (!selectedItemsLength) {\r\n            return this._isAnyItemSelected(items)\r\n        }\r\n        if (selectedItemsLength >= this.options.totalCount() - disabledItemsLength) {\r\n            return true\r\n        }\r\n        return\r\n    },\r\n    _getVisibleSelectAllState: function() {\r\n        var items = this.getSelectableItems(this.options.plainItems());\r\n        var hasSelectedItems = false;\r\n        var hasUnselectedItems = false;\r\n        for (var i = 0; i < items.length; i++) {\r\n            var item = items[i];\r\n            var itemData = this.options.getItemData(item);\r\n            var key = this.options.keyOf(itemData);\r\n            if (this.options.isSelectableItem(item)) {\r\n                if (this.isItemKeySelected(key)) {\r\n                    hasSelectedItems = true\r\n                } else {\r\n                    hasUnselectedItems = true\r\n                }\r\n            }\r\n        }\r\n        if (hasSelectedItems) {\r\n            return !hasUnselectedItems ? true : void 0\r\n        } else {\r\n            return false\r\n        }\r\n    }\r\n});\r\n"]},"metadata":{},"sourceType":"module"}