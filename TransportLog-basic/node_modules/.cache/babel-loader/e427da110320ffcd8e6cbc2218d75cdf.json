{"ast":null,"code":"/**\r\n * DevExtreme (esm/ui/scheduler/workspaces/ui.scheduler.agenda.js)\r\n * Version: 22.1.6\r\n * Build date: Tue Oct 18 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport { setOuterHeight, setHeight } from \"../../../core/utils/size\";\nimport $ from \"../../../core/renderer\";\nimport domAdapter from \"../../../core/dom_adapter\";\nimport { noop } from \"../../../core/utils/common\";\nimport { each } from \"../../../core/utils/iterator\";\nimport { getPublicElement } from \"../../../core/element\";\nimport registerComponent from \"../../../core/component_registrator\";\nimport WorkSpace from \"./ui.scheduler.work_space\";\nimport { extend } from \"../../../core/utils/extend\";\nimport dateLocalization from \"../../../localization/date\";\nimport tableCreatorModule from \"../table_creator\";\nimport { TIME_PANEL_CLASS, DATE_TABLE_CLASS, DATE_TABLE_ROW_CLASS, GROUP_ROW_CLASS, GROUP_HEADER_CONTENT_CLASS } from \"../classes\";\nimport { createReducedResourcesTree, getDataAccessors, getPathToLeaf } from \"../resources/utils\";\nimport { calculateStartViewDate } from \"../../../renovation/ui/scheduler/view_model/to_test/views/utils/agenda\";\nimport { formatWeekday, getVerticalGroupCountClass } from \"../../../renovation/ui/scheduler/view_model/to_test/views/utils/base\";\nimport { VIEWS } from \"../constants\";\nimport dateUtils from \"../../../core/utils/date\";\nvar {\n  tableCreator: tableCreator\n} = tableCreatorModule;\nvar AGENDA_CLASS = \"dx-scheduler-agenda\";\nvar AGENDA_DATE_CLASS = \"dx-scheduler-agenda-date\";\nvar GROUP_TABLE_CLASS = \"dx-scheduler-group-table\";\nvar TIME_PANEL_ROW_CLASS = \"dx-scheduler-time-panel-row\";\nvar TIME_PANEL_CELL_CLASS = \"dx-scheduler-time-panel-cell\";\nvar NODATA_CONTAINER_CLASS = \"dx-scheduler-agenda-nodata\";\nvar LAST_ROW_CLASS = \"dx-scheduler-date-table-last-row\";\nvar INNER_CELL_MARGIN = 5;\nvar OUTER_CELL_MARGIN = 20;\n\nclass SchedulerAgenda extends WorkSpace {\n  get type() {\n    return VIEWS.AGENDA;\n  }\n\n  get renderingStrategy() {\n    return this.invoke(\"getLayoutManager\").getRenderingStrategyInstance();\n  }\n\n  get appointmentDataProvider() {\n    return this.option(\"getAppointmentDataProvider\")();\n  }\n\n  getStartViewDate() {\n    return this._startViewDate;\n  }\n\n  _init() {\n    super._init();\n\n    this._activeStateUnit = void 0;\n  }\n\n  _getDefaultOptions() {\n    return extend(super._getDefaultOptions(), {\n      agendaDuration: 7,\n      rowHeight: 60,\n      noDataText: \"\"\n    });\n  }\n\n  _optionChanged(args) {\n    var name = args.name;\n    var value = args.value;\n\n    switch (name) {\n      case \"agendaDuration\":\n        break;\n\n      case \"noDataText\":\n      case \"rowHeight\":\n        this._recalculateAgenda(this._rows);\n\n        break;\n\n      case \"groups\":\n        if (!value || !value.length) {\n          if (this._$groupTable) {\n            this._$groupTable.remove();\n\n            this._$groupTable = null;\n\n            this._detachGroupCountClass();\n          }\n        } else if (!this._$groupTable) {\n          this._initGroupTable();\n\n          this._dateTableScrollable.$content().prepend(this._$groupTable);\n        }\n\n        super._optionChanged(args);\n\n        break;\n\n      default:\n        super._optionChanged(args);\n\n    }\n  }\n\n  _renderFocusState() {\n    return noop();\n  }\n\n  _renderFocusTarget() {\n    return noop();\n  }\n\n  _cleanFocusState() {\n    return noop();\n  }\n\n  supportAllDayRow() {\n    return false;\n  }\n\n  _isVerticalGroupedWorkSpace() {\n    return false;\n  }\n\n  _getElementClass() {\n    return AGENDA_CLASS;\n  }\n\n  _calculateStartViewDate() {\n    return calculateStartViewDate(this.option(\"currentDate\"), this.option(\"startDayHour\"));\n  }\n\n  _getRowCount() {\n    return this.option(\"agendaDuration\");\n  }\n\n  _getCellCount() {\n    return 1;\n  }\n\n  _getTimePanelRowCount() {\n    return this.option(\"agendaDuration\");\n  }\n\n  _renderAllDayPanel() {\n    return noop();\n  }\n\n  _toggleAllDayVisibility() {\n    return noop();\n  }\n\n  _initWorkSpaceUnits() {\n    this._initGroupTable();\n\n    this._$timePanel = $(\"<table>\").addClass(TIME_PANEL_CLASS);\n    this._$dateTable = $(\"<table>\").addClass(DATE_TABLE_CLASS);\n    this._$dateTableScrollableContent = $(\"<div>\").addClass(\"dx-scheduler-date-table-scrollable-content\");\n    this._$dateTableContainer = $(\"<div>\").addClass(\"dx-scheduler-date-table-container\");\n  }\n\n  _initGroupTable() {\n    var groups = this.option(\"groups\");\n\n    if (groups && groups.length) {\n      this._$groupTable = $(\"<table>\").addClass(GROUP_TABLE_CLASS);\n    }\n  }\n\n  _renderView() {\n    this._startViewDate = this._calculateStartViewDate();\n    this._rows = [];\n\n    this._initPositionHelper();\n  }\n\n  _recalculateAgenda(rows) {\n    var cellTemplates = [];\n\n    this._cleanView();\n\n    if (this._rowsIsEmpty(rows)) {\n      this._renderNoData();\n\n      return;\n    }\n\n    this._rows = rows;\n\n    if (this._$groupTable) {\n      cellTemplates = this._renderGroupHeader();\n\n      this._setGroupHeaderCellsHeight();\n    }\n\n    this._renderTimePanel();\n\n    this._renderDateTable();\n\n    this.invoke(\"onAgendaReady\", rows);\n\n    this._applyCellTemplates(cellTemplates);\n\n    this._dateTableScrollable.update();\n  }\n\n  _renderNoData() {\n    this._$noDataContainer = $(\"<div>\").addClass(NODATA_CONTAINER_CLASS).html(this.option(\"noDataText\"));\n\n    this._dateTableScrollable.$content().append(this._$noDataContainer);\n  }\n\n  _setTableSizes() {\n    return noop();\n  }\n\n  _toggleHorizontalScrollClass() {\n    return noop();\n  }\n\n  _createCrossScrollingConfig() {\n    return noop();\n  }\n\n  _setGroupHeaderCellsHeight() {\n    var $cells = this._getGroupHeaderCells().filter(function (_, element) {\n      return !element.getAttribute(\"rowSpan\");\n    });\n\n    var rows = this._removeEmptyRows(this._rows);\n\n    if (!rows.length) {\n      return;\n    }\n\n    for (var i = 0; i < $cells.length; i++) {\n      var $cellContent = $cells.eq(i).find(\".dx-scheduler-group-header-content\");\n      setOuterHeight($cellContent, this._getGroupRowHeight(rows[i]));\n    }\n  }\n\n  _rowsIsEmpty(rows) {\n    var result = true;\n\n    for (var i = 0; i < rows.length; i++) {\n      var groupRow = rows[i];\n\n      for (var j = 0; j < groupRow.length; j++) {\n        if (groupRow[j]) {\n          result = false;\n          break;\n        }\n      }\n    }\n\n    return result;\n  }\n\n  _attachGroupCountClass() {\n    var className = getVerticalGroupCountClass(this.option(\"groups\"));\n    this.$element().addClass(className);\n  }\n\n  _removeEmptyRows(rows) {\n    var result = [];\n\n    for (var i = 0; i < rows.length; i++) {\n      if (rows[i].length && !(data = rows[i], !data.some(function (value) {\n        return value > 0;\n      }))) {\n        result.push(rows[i]);\n      }\n    }\n\n    var data;\n    return result;\n  }\n\n  _getGroupHeaderContainer() {\n    return this._$groupTable;\n  }\n\n  _makeGroupRows() {\n    var tree = createReducedResourcesTree(this.option(\"loadedResources\"), (field, action) => getDataAccessors(this.option(\"getResourceDataAccessors\")(), field, action), this.option(\"getFilteredItems\")());\n    var cellTemplate = this.option(\"resourceCellTemplate\");\n    var getGroupHeaderContentClass = GROUP_HEADER_CONTENT_CLASS;\n    var cellTemplates = [];\n    var table = tableCreator.makeGroupedTableFromJSON(tableCreator.VERTICAL, tree, {\n      cellTag: \"th\",\n      groupTableClass: GROUP_TABLE_CLASS,\n      groupRowClass: GROUP_ROW_CLASS,\n      groupCellClass: this._getGroupHeaderClass(),\n\n      groupCellCustomContent(cell, cellText, index, data) {\n        var container = domAdapter.createElement(\"div\");\n        var contentWrapper = domAdapter.createElement(\"div\");\n        container.className = getGroupHeaderContentClass;\n        contentWrapper.appendChild(cellText);\n        container.appendChild(contentWrapper);\n        container.className = getGroupHeaderContentClass;\n\n        if (cellTemplate && cellTemplate.render) {\n          cellTemplates.push(cellTemplate.render.bind(cellTemplate, {\n            model: {\n              data: data.data,\n              id: data.value,\n              color: data.color,\n              text: cellText.textContent\n            },\n            container: getPublicElement($(container)),\n            index: index\n          }));\n        } else {\n          contentWrapper.appendChild(cellText);\n          container.appendChild(contentWrapper);\n        }\n\n        cell.appendChild(container);\n      },\n\n      cellTemplate: cellTemplate\n    });\n    return {\n      elements: $(table).find(\".\".concat(GROUP_ROW_CLASS)),\n      cellTemplates: cellTemplates\n    };\n  }\n\n  _cleanView() {\n    this._$dateTable.empty();\n\n    this._$timePanel.empty();\n\n    if (this._$groupTable) {\n      this._$groupTable.empty();\n    }\n\n    if (this._$noDataContainer) {\n      this._$noDataContainer.empty();\n\n      this._$noDataContainer.remove();\n\n      delete this._$noDataContainer;\n    }\n  }\n\n  _createWorkSpaceElements() {\n    this._createWorkSpaceStaticElements();\n  }\n\n  _createWorkSpaceStaticElements() {\n    this._$dateTableContainer.append(this._$dateTable);\n\n    this._dateTableScrollable.$content().append(this._$dateTableScrollableContent);\n\n    if (this._$groupTable) {\n      this._$dateTableScrollableContent.prepend(this._$groupTable);\n    }\n\n    this._$dateTableScrollableContent.append(this._$timePanel, this._$dateTableContainer);\n\n    this.$element().append(this._dateTableScrollable.$element());\n  }\n\n  _renderDateTable() {\n    this._renderTableBody({\n      container: getPublicElement(this._$dateTable),\n      rowClass: DATE_TABLE_ROW_CLASS,\n      cellClass: this._getDateTableCellClass()\n    });\n  }\n\n  _attachTablesEvents() {\n    return noop();\n  }\n\n  _attachEvents() {\n    return noop();\n  }\n\n  _cleanCellDataCache() {\n    return noop();\n  }\n\n  isIndicationAvailable() {\n    return false;\n  }\n\n  _prepareCellTemplateOptions(text, date, rowIndex, $cell) {\n    var groupsOpt = this.option(\"groups\");\n    var groups = {};\n    var isGroupedView = !!groupsOpt.length;\n    var path = isGroupedView && getPathToLeaf(rowIndex, groupsOpt) || [];\n    path.forEach(function (resourceValue, resourceIndex) {\n      var resourceName = groupsOpt[resourceIndex].name;\n      groups[resourceName] = resourceValue;\n    });\n    var groupIndex = isGroupedView ? this._getGroupIndexByResourceId(groups) : void 0;\n    return {\n      model: {\n        text: text,\n        date: date,\n        groups: groups,\n        groupIndex: groupIndex\n      },\n      container: getPublicElement($cell),\n      index: rowIndex\n    };\n  }\n\n  _renderTableBody(options) {\n    var cellTemplates = [];\n    var cellTemplateOpt = options.cellTemplate;\n    this._$rows = [];\n    var i;\n\n    var fillTableBody = function (rowIndex, rowSize) {\n      if (rowSize) {\n        var date;\n        var cellDateNumber;\n        var cellDayName;\n        var $row = $(\"<tr>\");\n        var $td = $(\"<td>\");\n        setHeight($td, this._getRowHeight(rowSize));\n\n        if (options.getStartDate) {\n          date = options.getStartDate && options.getStartDate(rowIndex);\n          cellDateNumber = dateLocalization.format(date, \"d\");\n          cellDayName = dateLocalization.format(date, formatWeekday);\n        }\n\n        if (cellTemplateOpt && cellTemplateOpt.render) {\n          var templateOptions = this._prepareCellTemplateOptions(cellDateNumber + \" \" + cellDayName, date, i, $td);\n\n          cellTemplates.push(cellTemplateOpt.render.bind(cellTemplateOpt, templateOptions));\n        } else if (cellDateNumber && cellDayName) {\n          $td.addClass(AGENDA_DATE_CLASS).text(cellDateNumber + \" \" + cellDayName);\n        }\n\n        if (options.rowClass) {\n          $row.addClass(options.rowClass);\n        }\n\n        if (options.cellClass) {\n          $td.addClass(options.cellClass);\n        }\n\n        $row.append($td);\n\n        this._$rows.push($row);\n      }\n    }.bind(this);\n\n    for (i = 0; i < this._rows.length; i++) {\n      each(this._rows[i], fillTableBody);\n\n      this._setLastRowClass();\n    }\n\n    $(options.container).append($(\"<tbody>\").append(this._$rows));\n\n    this._applyCellTemplates(cellTemplates);\n  }\n\n  _setLastRowClass() {\n    if (this._rows.length > 1 && this._$rows.length) {\n      var $lastRow = this._$rows[this._$rows.length - 1];\n      $lastRow.addClass(LAST_ROW_CLASS);\n    }\n  }\n\n  _renderTimePanel() {\n    this._renderTableBody({\n      container: getPublicElement(this._$timePanel),\n      rowCount: this._getTimePanelRowCount(),\n      cellCount: 1,\n      rowClass: TIME_PANEL_ROW_CLASS,\n      cellClass: TIME_PANEL_CELL_CLASS,\n      cellTemplate: this.option(\"dateCellTemplate\"),\n      getStartDate: this._getTimePanelStartDate.bind(this)\n    });\n  }\n\n  _getTimePanelStartDate(rowIndex) {\n    var current = new Date(this.option(\"currentDate\"));\n    var cellDate = new Date(current.setDate(current.getDate() + rowIndex));\n    return cellDate;\n  }\n\n  _getRowHeight(rowSize) {\n    var baseHeight = this.option(\"rowHeight\");\n    var innerOffset = (rowSize - 1) * INNER_CELL_MARGIN;\n    return rowSize ? baseHeight * rowSize + innerOffset + OUTER_CELL_MARGIN : 0;\n  }\n\n  _getGroupRowHeight(groupRows) {\n    if (!groupRows) {\n      return;\n    }\n\n    var result = 0;\n\n    for (var i = 0; i < groupRows.length; i++) {\n      result += this._getRowHeight(groupRows[i]);\n    }\n\n    return result;\n  }\n\n  _calculateRows(appointments) {\n    return this.renderingStrategy.calculateRows(appointments, this.option(\"agendaDuration\"), this.option(\"currentDate\"));\n  }\n\n  onDataSourceChanged(appointments) {\n    super.onDataSourceChanged();\n\n    this._renderView();\n\n    var rows = this._calculateRows(appointments);\n\n    this._recalculateAgenda(rows);\n  }\n\n  getAgendaVerticalStepHeight() {\n    return this.option(\"rowHeight\");\n  }\n\n  getEndViewDate() {\n    var currentDate = new Date(this.option(\"currentDate\"));\n    var agendaDuration = this.option(\"agendaDuration\");\n    currentDate.setHours(this.option(\"endDayHour\"));\n    var result = currentDate.setDate(currentDate.getDate() + agendaDuration - 1) - 6e4;\n    return new Date(result);\n  }\n\n  getEndViewDateByEndDayHour() {\n    return this.getEndViewDate();\n  }\n\n  getCellDataByCoordinates() {\n    return {\n      startDate: null,\n      endDate: null\n    };\n  }\n\n  updateScrollPosition(date) {\n    var newDate = this.timeZoneCalculator.createDate(date, {\n      path: \"toGrid\"\n    });\n    var bounds = this.getVisibleBounds();\n    var startDateHour = newDate.getHours();\n    var startDateMinutes = newDate.getMinutes();\n\n    if (this.needUpdateScrollPosition(startDateHour, startDateMinutes, bounds, newDate)) {\n      this.scrollToTime(startDateHour, startDateMinutes, newDate);\n    }\n  }\n\n  needUpdateScrollPosition(hours, minutes, bounds) {\n    var isUpdateNeeded = false;\n\n    if (hours < bounds.top.hours || hours > bounds.bottom.hours) {\n      isUpdateNeeded = true;\n    }\n\n    if (hours === bounds.top.hours && minutes < bounds.top.minutes) {\n      isUpdateNeeded = true;\n    }\n\n    if (hours === bounds.bottom.hours && minutes > bounds.top.minutes) {\n      isUpdateNeeded = true;\n    }\n\n    return isUpdateNeeded;\n  }\n\n  renovatedRenderSupported() {\n    return false;\n  }\n\n  _setSelectedCellsByCellData() {}\n\n  _getIntervalDuration() {\n    return dateUtils.dateToMilliseconds(\"day\") * this.option(\"intervalCount\");\n  }\n\n  getDOMElementsMetaData() {\n    return {\n      dateTableCellsMeta: [[{}]],\n      allDayPanelCellsMeta: [{}]\n    };\n  }\n\n}\n\nregisterComponent(\"dxSchedulerAgenda\", SchedulerAgenda);\nexport default SchedulerAgenda;","map":{"version":3,"sources":["C:/Users/Zoran/source/repos/TransportApp/TransportLog-basic/node_modules/devextreme/esm/ui/scheduler/workspaces/ui.scheduler.agenda.js"],"names":["setOuterHeight","setHeight","$","domAdapter","noop","each","getPublicElement","registerComponent","WorkSpace","extend","dateLocalization","tableCreatorModule","TIME_PANEL_CLASS","DATE_TABLE_CLASS","DATE_TABLE_ROW_CLASS","GROUP_ROW_CLASS","GROUP_HEADER_CONTENT_CLASS","createReducedResourcesTree","getDataAccessors","getPathToLeaf","calculateStartViewDate","formatWeekday","getVerticalGroupCountClass","VIEWS","dateUtils","tableCreator","AGENDA_CLASS","AGENDA_DATE_CLASS","GROUP_TABLE_CLASS","TIME_PANEL_ROW_CLASS","TIME_PANEL_CELL_CLASS","NODATA_CONTAINER_CLASS","LAST_ROW_CLASS","INNER_CELL_MARGIN","OUTER_CELL_MARGIN","SchedulerAgenda","type","AGENDA","renderingStrategy","invoke","getRenderingStrategyInstance","appointmentDataProvider","option","getStartViewDate","_startViewDate","_init","_activeStateUnit","_getDefaultOptions","agendaDuration","rowHeight","noDataText","_optionChanged","args","name","value","_recalculateAgenda","_rows","length","_$groupTable","remove","_detachGroupCountClass","_initGroupTable","_dateTableScrollable","$content","prepend","_renderFocusState","_renderFocusTarget","_cleanFocusState","supportAllDayRow","_isVerticalGroupedWorkSpace","_getElementClass","_calculateStartViewDate","_getRowCount","_getCellCount","_getTimePanelRowCount","_renderAllDayPanel","_toggleAllDayVisibility","_initWorkSpaceUnits","_$timePanel","addClass","_$dateTable","_$dateTableScrollableContent","_$dateTableContainer","groups","_renderView","_initPositionHelper","rows","cellTemplates","_cleanView","_rowsIsEmpty","_renderNoData","_renderGroupHeader","_setGroupHeaderCellsHeight","_renderTimePanel","_renderDateTable","_applyCellTemplates","update","_$noDataContainer","html","append","_setTableSizes","_toggleHorizontalScrollClass","_createCrossScrollingConfig","$cells","_getGroupHeaderCells","filter","_","element","getAttribute","_removeEmptyRows","i","$cellContent","eq","find","_getGroupRowHeight","result","groupRow","j","_attachGroupCountClass","className","$element","data","some","push","_getGroupHeaderContainer","_makeGroupRows","tree","field","action","cellTemplate","getGroupHeaderContentClass","table","makeGroupedTableFromJSON","VERTICAL","cellTag","groupTableClass","groupRowClass","groupCellClass","_getGroupHeaderClass","groupCellCustomContent","cell","cellText","index","container","createElement","contentWrapper","appendChild","render","bind","model","id","color","text","textContent","elements","concat","empty","_createWorkSpaceElements","_createWorkSpaceStaticElements","_renderTableBody","rowClass","cellClass","_getDateTableCellClass","_attachTablesEvents","_attachEvents","_cleanCellDataCache","isIndicationAvailable","_prepareCellTemplateOptions","date","rowIndex","$cell","groupsOpt","isGroupedView","path","forEach","resourceValue","resourceIndex","resourceName","groupIndex","_getGroupIndexByResourceId","options","cellTemplateOpt","_$rows","fillTableBody","rowSize","cellDateNumber","cellDayName","$row","$td","_getRowHeight","getStartDate","format","templateOptions","_setLastRowClass","$lastRow","rowCount","cellCount","_getTimePanelStartDate","current","Date","cellDate","setDate","getDate","baseHeight","innerOffset","groupRows","_calculateRows","appointments","calculateRows","onDataSourceChanged","getAgendaVerticalStepHeight","getEndViewDate","currentDate","setHours","getEndViewDateByEndDayHour","getCellDataByCoordinates","startDate","endDate","updateScrollPosition","newDate","timeZoneCalculator","createDate","bounds","getVisibleBounds","startDateHour","getHours","startDateMinutes","getMinutes","needUpdateScrollPosition","scrollToTime","hours","minutes","isUpdateNeeded","top","bottom","renovatedRenderSupported","_setSelectedCellsByCellData","_getIntervalDuration","dateToMilliseconds","getDOMElementsMetaData","dateTableCellsMeta","allDayPanelCellsMeta"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (esm/ui/scheduler/workspaces/ui.scheduler.agenda.js)\r\n * Version: 22.1.6\r\n * Build date: Tue Oct 18 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport {\r\n    setOuterHeight,\r\n    setHeight\r\n} from \"../../../core/utils/size\";\r\nimport $ from \"../../../core/renderer\";\r\nimport domAdapter from \"../../../core/dom_adapter\";\r\nimport {\r\n    noop\r\n} from \"../../../core/utils/common\";\r\nimport {\r\n    each\r\n} from \"../../../core/utils/iterator\";\r\nimport {\r\n    getPublicElement\r\n} from \"../../../core/element\";\r\nimport registerComponent from \"../../../core/component_registrator\";\r\nimport WorkSpace from \"./ui.scheduler.work_space\";\r\nimport {\r\n    extend\r\n} from \"../../../core/utils/extend\";\r\nimport dateLocalization from \"../../../localization/date\";\r\nimport tableCreatorModule from \"../table_creator\";\r\nimport {\r\n    TIME_PANEL_CLASS,\r\n    DATE_TABLE_CLASS,\r\n    DATE_TABLE_ROW_CLASS,\r\n    GROUP_ROW_CLASS,\r\n    GROUP_HEADER_CONTENT_CLASS\r\n} from \"../classes\";\r\nimport {\r\n    createReducedResourcesTree,\r\n    getDataAccessors,\r\n    getPathToLeaf\r\n} from \"../resources/utils\";\r\nimport {\r\n    calculateStartViewDate\r\n} from \"../../../renovation/ui/scheduler/view_model/to_test/views/utils/agenda\";\r\nimport {\r\n    formatWeekday,\r\n    getVerticalGroupCountClass\r\n} from \"../../../renovation/ui/scheduler/view_model/to_test/views/utils/base\";\r\nimport {\r\n    VIEWS\r\n} from \"../constants\";\r\nimport dateUtils from \"../../../core/utils/date\";\r\nvar {\r\n    tableCreator: tableCreator\r\n} = tableCreatorModule;\r\nvar AGENDA_CLASS = \"dx-scheduler-agenda\";\r\nvar AGENDA_DATE_CLASS = \"dx-scheduler-agenda-date\";\r\nvar GROUP_TABLE_CLASS = \"dx-scheduler-group-table\";\r\nvar TIME_PANEL_ROW_CLASS = \"dx-scheduler-time-panel-row\";\r\nvar TIME_PANEL_CELL_CLASS = \"dx-scheduler-time-panel-cell\";\r\nvar NODATA_CONTAINER_CLASS = \"dx-scheduler-agenda-nodata\";\r\nvar LAST_ROW_CLASS = \"dx-scheduler-date-table-last-row\";\r\nvar INNER_CELL_MARGIN = 5;\r\nvar OUTER_CELL_MARGIN = 20;\r\nclass SchedulerAgenda extends WorkSpace {\r\n    get type() {\r\n        return VIEWS.AGENDA\r\n    }\r\n    get renderingStrategy() {\r\n        return this.invoke(\"getLayoutManager\").getRenderingStrategyInstance()\r\n    }\r\n    get appointmentDataProvider() {\r\n        return this.option(\"getAppointmentDataProvider\")()\r\n    }\r\n    getStartViewDate() {\r\n        return this._startViewDate\r\n    }\r\n    _init() {\r\n        super._init();\r\n        this._activeStateUnit = void 0\r\n    }\r\n    _getDefaultOptions() {\r\n        return extend(super._getDefaultOptions(), {\r\n            agendaDuration: 7,\r\n            rowHeight: 60,\r\n            noDataText: \"\"\r\n        })\r\n    }\r\n    _optionChanged(args) {\r\n        var name = args.name;\r\n        var value = args.value;\r\n        switch (name) {\r\n            case \"agendaDuration\":\r\n                break;\r\n            case \"noDataText\":\r\n            case \"rowHeight\":\r\n                this._recalculateAgenda(this._rows);\r\n                break;\r\n            case \"groups\":\r\n                if (!value || !value.length) {\r\n                    if (this._$groupTable) {\r\n                        this._$groupTable.remove();\r\n                        this._$groupTable = null;\r\n                        this._detachGroupCountClass()\r\n                    }\r\n                } else if (!this._$groupTable) {\r\n                    this._initGroupTable();\r\n                    this._dateTableScrollable.$content().prepend(this._$groupTable)\r\n                }\r\n                super._optionChanged(args);\r\n                break;\r\n            default:\r\n                super._optionChanged(args)\r\n        }\r\n    }\r\n    _renderFocusState() {\r\n        return noop()\r\n    }\r\n    _renderFocusTarget() {\r\n        return noop()\r\n    }\r\n    _cleanFocusState() {\r\n        return noop()\r\n    }\r\n    supportAllDayRow() {\r\n        return false\r\n    }\r\n    _isVerticalGroupedWorkSpace() {\r\n        return false\r\n    }\r\n    _getElementClass() {\r\n        return AGENDA_CLASS\r\n    }\r\n    _calculateStartViewDate() {\r\n        return calculateStartViewDate(this.option(\"currentDate\"), this.option(\"startDayHour\"))\r\n    }\r\n    _getRowCount() {\r\n        return this.option(\"agendaDuration\")\r\n    }\r\n    _getCellCount() {\r\n        return 1\r\n    }\r\n    _getTimePanelRowCount() {\r\n        return this.option(\"agendaDuration\")\r\n    }\r\n    _renderAllDayPanel() {\r\n        return noop()\r\n    }\r\n    _toggleAllDayVisibility() {\r\n        return noop()\r\n    }\r\n    _initWorkSpaceUnits() {\r\n        this._initGroupTable();\r\n        this._$timePanel = $(\"<table>\").addClass(TIME_PANEL_CLASS);\r\n        this._$dateTable = $(\"<table>\").addClass(DATE_TABLE_CLASS);\r\n        this._$dateTableScrollableContent = $(\"<div>\").addClass(\"dx-scheduler-date-table-scrollable-content\");\r\n        this._$dateTableContainer = $(\"<div>\").addClass(\"dx-scheduler-date-table-container\")\r\n    }\r\n    _initGroupTable() {\r\n        var groups = this.option(\"groups\");\r\n        if (groups && groups.length) {\r\n            this._$groupTable = $(\"<table>\").addClass(GROUP_TABLE_CLASS)\r\n        }\r\n    }\r\n    _renderView() {\r\n        this._startViewDate = this._calculateStartViewDate();\r\n        this._rows = [];\r\n        this._initPositionHelper()\r\n    }\r\n    _recalculateAgenda(rows) {\r\n        var cellTemplates = [];\r\n        this._cleanView();\r\n        if (this._rowsIsEmpty(rows)) {\r\n            this._renderNoData();\r\n            return\r\n        }\r\n        this._rows = rows;\r\n        if (this._$groupTable) {\r\n            cellTemplates = this._renderGroupHeader();\r\n            this._setGroupHeaderCellsHeight()\r\n        }\r\n        this._renderTimePanel();\r\n        this._renderDateTable();\r\n        this.invoke(\"onAgendaReady\", rows);\r\n        this._applyCellTemplates(cellTemplates);\r\n        this._dateTableScrollable.update()\r\n    }\r\n    _renderNoData() {\r\n        this._$noDataContainer = $(\"<div>\").addClass(NODATA_CONTAINER_CLASS).html(this.option(\"noDataText\"));\r\n        this._dateTableScrollable.$content().append(this._$noDataContainer)\r\n    }\r\n    _setTableSizes() {\r\n        return noop()\r\n    }\r\n    _toggleHorizontalScrollClass() {\r\n        return noop()\r\n    }\r\n    _createCrossScrollingConfig() {\r\n        return noop()\r\n    }\r\n    _setGroupHeaderCellsHeight() {\r\n        var $cells = this._getGroupHeaderCells().filter((function(_, element) {\r\n            return !element.getAttribute(\"rowSpan\")\r\n        }));\r\n        var rows = this._removeEmptyRows(this._rows);\r\n        if (!rows.length) {\r\n            return\r\n        }\r\n        for (var i = 0; i < $cells.length; i++) {\r\n            var $cellContent = $cells.eq(i).find(\".dx-scheduler-group-header-content\");\r\n            setOuterHeight($cellContent, this._getGroupRowHeight(rows[i]))\r\n        }\r\n    }\r\n    _rowsIsEmpty(rows) {\r\n        var result = true;\r\n        for (var i = 0; i < rows.length; i++) {\r\n            var groupRow = rows[i];\r\n            for (var j = 0; j < groupRow.length; j++) {\r\n                if (groupRow[j]) {\r\n                    result = false;\r\n                    break\r\n                }\r\n            }\r\n        }\r\n        return result\r\n    }\r\n    _attachGroupCountClass() {\r\n        var className = getVerticalGroupCountClass(this.option(\"groups\"));\r\n        this.$element().addClass(className)\r\n    }\r\n    _removeEmptyRows(rows) {\r\n        var result = [];\r\n        for (var i = 0; i < rows.length; i++) {\r\n            if (rows[i].length && !(data = rows[i], !data.some((function(value) {\r\n                    return value > 0\r\n                })))) {\r\n                result.push(rows[i])\r\n            }\r\n        }\r\n        var data;\r\n        return result\r\n    }\r\n    _getGroupHeaderContainer() {\r\n        return this._$groupTable\r\n    }\r\n    _makeGroupRows() {\r\n        var tree = createReducedResourcesTree(this.option(\"loadedResources\"), (field, action) => getDataAccessors(this.option(\"getResourceDataAccessors\")(), field, action), this.option(\"getFilteredItems\")());\r\n        var cellTemplate = this.option(\"resourceCellTemplate\");\r\n        var getGroupHeaderContentClass = GROUP_HEADER_CONTENT_CLASS;\r\n        var cellTemplates = [];\r\n        var table = tableCreator.makeGroupedTableFromJSON(tableCreator.VERTICAL, tree, {\r\n            cellTag: \"th\",\r\n            groupTableClass: GROUP_TABLE_CLASS,\r\n            groupRowClass: GROUP_ROW_CLASS,\r\n            groupCellClass: this._getGroupHeaderClass(),\r\n            groupCellCustomContent(cell, cellText, index, data) {\r\n                var container = domAdapter.createElement(\"div\");\r\n                var contentWrapper = domAdapter.createElement(\"div\");\r\n                container.className = getGroupHeaderContentClass;\r\n                contentWrapper.appendChild(cellText);\r\n                container.appendChild(contentWrapper);\r\n                container.className = getGroupHeaderContentClass;\r\n                if (cellTemplate && cellTemplate.render) {\r\n                    cellTemplates.push(cellTemplate.render.bind(cellTemplate, {\r\n                        model: {\r\n                            data: data.data,\r\n                            id: data.value,\r\n                            color: data.color,\r\n                            text: cellText.textContent\r\n                        },\r\n                        container: getPublicElement($(container)),\r\n                        index: index\r\n                    }))\r\n                } else {\r\n                    contentWrapper.appendChild(cellText);\r\n                    container.appendChild(contentWrapper)\r\n                }\r\n                cell.appendChild(container)\r\n            },\r\n            cellTemplate: cellTemplate\r\n        });\r\n        return {\r\n            elements: $(table).find(\".\".concat(GROUP_ROW_CLASS)),\r\n            cellTemplates: cellTemplates\r\n        }\r\n    }\r\n    _cleanView() {\r\n        this._$dateTable.empty();\r\n        this._$timePanel.empty();\r\n        if (this._$groupTable) {\r\n            this._$groupTable.empty()\r\n        }\r\n        if (this._$noDataContainer) {\r\n            this._$noDataContainer.empty();\r\n            this._$noDataContainer.remove();\r\n            delete this._$noDataContainer\r\n        }\r\n    }\r\n    _createWorkSpaceElements() {\r\n        this._createWorkSpaceStaticElements()\r\n    }\r\n    _createWorkSpaceStaticElements() {\r\n        this._$dateTableContainer.append(this._$dateTable);\r\n        this._dateTableScrollable.$content().append(this._$dateTableScrollableContent);\r\n        if (this._$groupTable) {\r\n            this._$dateTableScrollableContent.prepend(this._$groupTable)\r\n        }\r\n        this._$dateTableScrollableContent.append(this._$timePanel, this._$dateTableContainer);\r\n        this.$element().append(this._dateTableScrollable.$element())\r\n    }\r\n    _renderDateTable() {\r\n        this._renderTableBody({\r\n            container: getPublicElement(this._$dateTable),\r\n            rowClass: DATE_TABLE_ROW_CLASS,\r\n            cellClass: this._getDateTableCellClass()\r\n        })\r\n    }\r\n    _attachTablesEvents() {\r\n        return noop()\r\n    }\r\n    _attachEvents() {\r\n        return noop()\r\n    }\r\n    _cleanCellDataCache() {\r\n        return noop()\r\n    }\r\n    isIndicationAvailable() {\r\n        return false\r\n    }\r\n    _prepareCellTemplateOptions(text, date, rowIndex, $cell) {\r\n        var groupsOpt = this.option(\"groups\");\r\n        var groups = {};\r\n        var isGroupedView = !!groupsOpt.length;\r\n        var path = isGroupedView && getPathToLeaf(rowIndex, groupsOpt) || [];\r\n        path.forEach((function(resourceValue, resourceIndex) {\r\n            var resourceName = groupsOpt[resourceIndex].name;\r\n            groups[resourceName] = resourceValue\r\n        }));\r\n        var groupIndex = isGroupedView ? this._getGroupIndexByResourceId(groups) : void 0;\r\n        return {\r\n            model: {\r\n                text: text,\r\n                date: date,\r\n                groups: groups,\r\n                groupIndex: groupIndex\r\n            },\r\n            container: getPublicElement($cell),\r\n            index: rowIndex\r\n        }\r\n    }\r\n    _renderTableBody(options) {\r\n        var cellTemplates = [];\r\n        var cellTemplateOpt = options.cellTemplate;\r\n        this._$rows = [];\r\n        var i;\r\n        var fillTableBody = function(rowIndex, rowSize) {\r\n            if (rowSize) {\r\n                var date;\r\n                var cellDateNumber;\r\n                var cellDayName;\r\n                var $row = $(\"<tr>\");\r\n                var $td = $(\"<td>\");\r\n                setHeight($td, this._getRowHeight(rowSize));\r\n                if (options.getStartDate) {\r\n                    date = options.getStartDate && options.getStartDate(rowIndex);\r\n                    cellDateNumber = dateLocalization.format(date, \"d\");\r\n                    cellDayName = dateLocalization.format(date, formatWeekday)\r\n                }\r\n                if (cellTemplateOpt && cellTemplateOpt.render) {\r\n                    var templateOptions = this._prepareCellTemplateOptions(cellDateNumber + \" \" + cellDayName, date, i, $td);\r\n                    cellTemplates.push(cellTemplateOpt.render.bind(cellTemplateOpt, templateOptions))\r\n                } else if (cellDateNumber && cellDayName) {\r\n                    $td.addClass(AGENDA_DATE_CLASS).text(cellDateNumber + \" \" + cellDayName)\r\n                }\r\n                if (options.rowClass) {\r\n                    $row.addClass(options.rowClass)\r\n                }\r\n                if (options.cellClass) {\r\n                    $td.addClass(options.cellClass)\r\n                }\r\n                $row.append($td);\r\n                this._$rows.push($row)\r\n            }\r\n        }.bind(this);\r\n        for (i = 0; i < this._rows.length; i++) {\r\n            each(this._rows[i], fillTableBody);\r\n            this._setLastRowClass()\r\n        }\r\n        $(options.container).append($(\"<tbody>\").append(this._$rows));\r\n        this._applyCellTemplates(cellTemplates)\r\n    }\r\n    _setLastRowClass() {\r\n        if (this._rows.length > 1 && this._$rows.length) {\r\n            var $lastRow = this._$rows[this._$rows.length - 1];\r\n            $lastRow.addClass(LAST_ROW_CLASS)\r\n        }\r\n    }\r\n    _renderTimePanel() {\r\n        this._renderTableBody({\r\n            container: getPublicElement(this._$timePanel),\r\n            rowCount: this._getTimePanelRowCount(),\r\n            cellCount: 1,\r\n            rowClass: TIME_PANEL_ROW_CLASS,\r\n            cellClass: TIME_PANEL_CELL_CLASS,\r\n            cellTemplate: this.option(\"dateCellTemplate\"),\r\n            getStartDate: this._getTimePanelStartDate.bind(this)\r\n        })\r\n    }\r\n    _getTimePanelStartDate(rowIndex) {\r\n        var current = new Date(this.option(\"currentDate\"));\r\n        var cellDate = new Date(current.setDate(current.getDate() + rowIndex));\r\n        return cellDate\r\n    }\r\n    _getRowHeight(rowSize) {\r\n        var baseHeight = this.option(\"rowHeight\");\r\n        var innerOffset = (rowSize - 1) * INNER_CELL_MARGIN;\r\n        return rowSize ? baseHeight * rowSize + innerOffset + OUTER_CELL_MARGIN : 0\r\n    }\r\n    _getGroupRowHeight(groupRows) {\r\n        if (!groupRows) {\r\n            return\r\n        }\r\n        var result = 0;\r\n        for (var i = 0; i < groupRows.length; i++) {\r\n            result += this._getRowHeight(groupRows[i])\r\n        }\r\n        return result\r\n    }\r\n    _calculateRows(appointments) {\r\n        return this.renderingStrategy.calculateRows(appointments, this.option(\"agendaDuration\"), this.option(\"currentDate\"))\r\n    }\r\n    onDataSourceChanged(appointments) {\r\n        super.onDataSourceChanged();\r\n        this._renderView();\r\n        var rows = this._calculateRows(appointments);\r\n        this._recalculateAgenda(rows)\r\n    }\r\n    getAgendaVerticalStepHeight() {\r\n        return this.option(\"rowHeight\")\r\n    }\r\n    getEndViewDate() {\r\n        var currentDate = new Date(this.option(\"currentDate\"));\r\n        var agendaDuration = this.option(\"agendaDuration\");\r\n        currentDate.setHours(this.option(\"endDayHour\"));\r\n        var result = currentDate.setDate(currentDate.getDate() + agendaDuration - 1) - 6e4;\r\n        return new Date(result)\r\n    }\r\n    getEndViewDateByEndDayHour() {\r\n        return this.getEndViewDate()\r\n    }\r\n    getCellDataByCoordinates() {\r\n        return {\r\n            startDate: null,\r\n            endDate: null\r\n        }\r\n    }\r\n    updateScrollPosition(date) {\r\n        var newDate = this.timeZoneCalculator.createDate(date, {\r\n            path: \"toGrid\"\r\n        });\r\n        var bounds = this.getVisibleBounds();\r\n        var startDateHour = newDate.getHours();\r\n        var startDateMinutes = newDate.getMinutes();\r\n        if (this.needUpdateScrollPosition(startDateHour, startDateMinutes, bounds, newDate)) {\r\n            this.scrollToTime(startDateHour, startDateMinutes, newDate)\r\n        }\r\n    }\r\n    needUpdateScrollPosition(hours, minutes, bounds) {\r\n        var isUpdateNeeded = false;\r\n        if (hours < bounds.top.hours || hours > bounds.bottom.hours) {\r\n            isUpdateNeeded = true\r\n        }\r\n        if (hours === bounds.top.hours && minutes < bounds.top.minutes) {\r\n            isUpdateNeeded = true\r\n        }\r\n        if (hours === bounds.bottom.hours && minutes > bounds.top.minutes) {\r\n            isUpdateNeeded = true\r\n        }\r\n        return isUpdateNeeded\r\n    }\r\n    renovatedRenderSupported() {\r\n        return false\r\n    }\r\n    _setSelectedCellsByCellData() {}\r\n    _getIntervalDuration() {\r\n        return dateUtils.dateToMilliseconds(\"day\") * this.option(\"intervalCount\")\r\n    }\r\n    getDOMElementsMetaData() {\r\n        return {\r\n            dateTableCellsMeta: [\r\n                [{}]\r\n            ],\r\n            allDayPanelCellsMeta: [{}]\r\n        }\r\n    }\r\n}\r\nregisterComponent(\"dxSchedulerAgenda\", SchedulerAgenda);\r\nexport default SchedulerAgenda;\r\n"]},"metadata":{},"sourceType":"module"}