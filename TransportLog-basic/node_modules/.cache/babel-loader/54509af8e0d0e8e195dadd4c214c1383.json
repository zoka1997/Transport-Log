{"ast":null,"code":"/**\r\n * DevExtreme (esm/core/templates/bindable_template.js)\r\n * Version: 22.1.6\r\n * Build date: Tue Oct 18 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport $ from \"../renderer\";\nimport { TemplateBase } from \"./template_base\";\nimport eventsEngine from \"../../events/core/events_engine\";\nimport { removeEvent } from \"../../events/remove\";\nimport { isPrimitive } from \"../utils/type\";\n\nvar watchChanges = function (rawData, watchMethod, fields, fieldsMap, callback) {\n  var fieldsDispose;\n\n  var globalDispose = ((data, watchMethod, callback) => watchMethod(() => data, callback))(rawData, watchMethod, function (dataWithRawFields) {\n    fieldsDispose && fieldsDispose();\n\n    if (isPrimitive(dataWithRawFields)) {\n      callback(dataWithRawFields);\n      return;\n    }\n\n    fieldsDispose = function (data, watchMethod, fields, fieldsMap, callback) {\n      var resolvedData = {};\n      var missedFields = fields.slice();\n      var watchHandlers = fields.map(function (name) {\n        var fieldGetter = fieldsMap[name];\n        return watchMethod(fieldGetter ? () => fieldGetter(data) : () => data[name], function (value) {\n          resolvedData[name] = value;\n\n          if (missedFields.length) {\n            var index = missedFields.indexOf(name);\n\n            if (index >= 0) {\n              missedFields.splice(index, 1);\n            }\n          }\n\n          if (!missedFields.length) {\n            callback(resolvedData);\n          }\n        });\n      });\n      return function () {\n        watchHandlers.forEach(dispose => dispose());\n      };\n    }(dataWithRawFields, watchMethod, fields, fieldsMap, callback);\n  });\n\n  return function () {\n    fieldsDispose && fieldsDispose();\n    globalDispose && globalDispose();\n  };\n};\n\nexport class BindableTemplate extends TemplateBase {\n  constructor(render, fields, watchMethod, fieldsMap) {\n    super();\n    this._render = render;\n    this._fields = fields;\n    this._fieldsMap = fieldsMap || {};\n    this._watchMethod = watchMethod;\n  }\n\n  _renderCore(options) {\n    var $container = $(options.container);\n    var dispose = watchChanges(options.model, this._watchMethod, this._fields, this._fieldsMap, data => {\n      $container.empty();\n\n      this._render($container, data, options.model);\n    });\n    eventsEngine.on($container, removeEvent, dispose);\n    return $container.contents();\n  }\n\n}","map":{"version":3,"sources":["C:/Users/Zoran/source/repos/TransportApp/TransportLog-basic/node_modules/devextreme/esm/core/templates/bindable_template.js"],"names":["$","TemplateBase","eventsEngine","removeEvent","isPrimitive","watchChanges","rawData","watchMethod","fields","fieldsMap","callback","fieldsDispose","globalDispose","data","dataWithRawFields","resolvedData","missedFields","slice","watchHandlers","map","name","fieldGetter","value","length","index","indexOf","splice","forEach","dispose","BindableTemplate","constructor","render","_render","_fields","_fieldsMap","_watchMethod","_renderCore","options","$container","container","model","empty","on","contents"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAOA,CAAP,MAAc,aAAd;AACA,SACIC,YADJ,QAEO,iBAFP;AAGA,OAAOC,YAAP,MAAyB,iCAAzB;AACA,SACIC,WADJ,QAEO,qBAFP;AAGA,SACIC,WADJ,QAEO,eAFP;;AAGA,IAAIC,YAAY,GAAG,UAASC,OAAT,EAAkBC,WAAlB,EAA+BC,MAA/B,EAAuCC,SAAvC,EAAkDC,QAAlD,EAA4D;AAC3E,MAAIC,aAAJ;;AACA,MAAIC,aAAa,GAAG,CAAC,CAACC,IAAD,EAAON,WAAP,EAAoBG,QAApB,KAAiCH,WAAW,CAAC,MAAMM,IAAP,EAAaH,QAAb,CAA7C,EAAqEJ,OAArE,EAA8EC,WAA9E,EAA4F,UAASO,iBAAT,EAA4B;AACxIH,IAAAA,aAAa,IAAIA,aAAa,EAA9B;;AACA,QAAIP,WAAW,CAACU,iBAAD,CAAf,EAAoC;AAChCJ,MAAAA,QAAQ,CAACI,iBAAD,CAAR;AACA;AACH;;AACDH,IAAAA,aAAa,GAAG,UAASE,IAAT,EAAeN,WAAf,EAA4BC,MAA5B,EAAoCC,SAApC,EAA+CC,QAA/C,EAAyD;AACrE,UAAIK,YAAY,GAAG,EAAnB;AACA,UAAIC,YAAY,GAAGR,MAAM,CAACS,KAAP,EAAnB;AACA,UAAIC,aAAa,GAAGV,MAAM,CAACW,GAAP,CAAY,UAASC,IAAT,EAAe;AAC3C,YAAIC,WAAW,GAAGZ,SAAS,CAACW,IAAD,CAA3B;AACA,eAAOb,WAAW,CAACc,WAAW,GAAG,MAAMA,WAAW,CAACR,IAAD,CAApB,GAA6B,MAAMA,IAAI,CAACO,IAAD,CAAnD,EAA4D,UAASE,KAAT,EAAgB;AAC1FP,UAAAA,YAAY,CAACK,IAAD,CAAZ,GAAqBE,KAArB;;AACA,cAAIN,YAAY,CAACO,MAAjB,EAAyB;AACrB,gBAAIC,KAAK,GAAGR,YAAY,CAACS,OAAb,CAAqBL,IAArB,CAAZ;;AACA,gBAAII,KAAK,IAAI,CAAb,EAAgB;AACZR,cAAAA,YAAY,CAACU,MAAb,CAAoBF,KAApB,EAA2B,CAA3B;AACH;AACJ;;AACD,cAAI,CAACR,YAAY,CAACO,MAAlB,EAA0B;AACtBb,YAAAA,QAAQ,CAACK,YAAD,CAAR;AACH;AACJ,SAXiB,CAAlB;AAYH,OAdmB,CAApB;AAeA,aAAO,YAAW;AACdG,QAAAA,aAAa,CAACS,OAAd,CAAsBC,OAAO,IAAIA,OAAO,EAAxC;AACH,OAFD;AAGH,KArBe,CAqBdd,iBArBc,EAqBKP,WArBL,EAqBkBC,MArBlB,EAqB0BC,SArB1B,EAqBqCC,QArBrC,CAAhB;AAsBH,GA5BmB,CAApB;;AA6BA,SAAO,YAAW;AACdC,IAAAA,aAAa,IAAIA,aAAa,EAA9B;AACAC,IAAAA,aAAa,IAAIA,aAAa,EAA9B;AACH,GAHD;AAIH,CAnCD;;AAoCA,OAAO,MAAMiB,gBAAN,SAA+B5B,YAA/B,CAA4C;AAC/C6B,EAAAA,WAAW,CAACC,MAAD,EAASvB,MAAT,EAAiBD,WAAjB,EAA8BE,SAA9B,EAAyC;AAChD;AACA,SAAKuB,OAAL,GAAeD,MAAf;AACA,SAAKE,OAAL,GAAezB,MAAf;AACA,SAAK0B,UAAL,GAAkBzB,SAAS,IAAI,EAA/B;AACA,SAAK0B,YAAL,GAAoB5B,WAApB;AACH;;AACD6B,EAAAA,WAAW,CAACC,OAAD,EAAU;AACjB,QAAIC,UAAU,GAAGtC,CAAC,CAACqC,OAAO,CAACE,SAAT,CAAlB;AACA,QAAIX,OAAO,GAAGvB,YAAY,CAACgC,OAAO,CAACG,KAAT,EAAgB,KAAKL,YAArB,EAAmC,KAAKF,OAAxC,EAAiD,KAAKC,UAAtD,EAAkErB,IAAI,IAAI;AAChGyB,MAAAA,UAAU,CAACG,KAAX;;AACA,WAAKT,OAAL,CAAaM,UAAb,EAAyBzB,IAAzB,EAA+BwB,OAAO,CAACG,KAAvC;AACH,KAHyB,CAA1B;AAIAtC,IAAAA,YAAY,CAACwC,EAAb,CAAgBJ,UAAhB,EAA4BnC,WAA5B,EAAyCyB,OAAzC;AACA,WAAOU,UAAU,CAACK,QAAX,EAAP;AACH;;AAhB8C","sourcesContent":["/**\r\n * DevExtreme (esm/core/templates/bindable_template.js)\r\n * Version: 22.1.6\r\n * Build date: Tue Oct 18 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport $ from \"../renderer\";\r\nimport {\r\n    TemplateBase\r\n} from \"./template_base\";\r\nimport eventsEngine from \"../../events/core/events_engine\";\r\nimport {\r\n    removeEvent\r\n} from \"../../events/remove\";\r\nimport {\r\n    isPrimitive\r\n} from \"../utils/type\";\r\nvar watchChanges = function(rawData, watchMethod, fields, fieldsMap, callback) {\r\n    var fieldsDispose;\r\n    var globalDispose = ((data, watchMethod, callback) => watchMethod(() => data, callback))(rawData, watchMethod, (function(dataWithRawFields) {\r\n        fieldsDispose && fieldsDispose();\r\n        if (isPrimitive(dataWithRawFields)) {\r\n            callback(dataWithRawFields);\r\n            return\r\n        }\r\n        fieldsDispose = function(data, watchMethod, fields, fieldsMap, callback) {\r\n            var resolvedData = {};\r\n            var missedFields = fields.slice();\r\n            var watchHandlers = fields.map((function(name) {\r\n                var fieldGetter = fieldsMap[name];\r\n                return watchMethod(fieldGetter ? () => fieldGetter(data) : () => data[name], (function(value) {\r\n                    resolvedData[name] = value;\r\n                    if (missedFields.length) {\r\n                        var index = missedFields.indexOf(name);\r\n                        if (index >= 0) {\r\n                            missedFields.splice(index, 1)\r\n                        }\r\n                    }\r\n                    if (!missedFields.length) {\r\n                        callback(resolvedData)\r\n                    }\r\n                }))\r\n            }));\r\n            return function() {\r\n                watchHandlers.forEach(dispose => dispose())\r\n            }\r\n        }(dataWithRawFields, watchMethod, fields, fieldsMap, callback)\r\n    }));\r\n    return function() {\r\n        fieldsDispose && fieldsDispose();\r\n        globalDispose && globalDispose()\r\n    }\r\n};\r\nexport class BindableTemplate extends TemplateBase {\r\n    constructor(render, fields, watchMethod, fieldsMap) {\r\n        super();\r\n        this._render = render;\r\n        this._fields = fields;\r\n        this._fieldsMap = fieldsMap || {};\r\n        this._watchMethod = watchMethod\r\n    }\r\n    _renderCore(options) {\r\n        var $container = $(options.container);\r\n        var dispose = watchChanges(options.model, this._watchMethod, this._fields, this._fieldsMap, data => {\r\n            $container.empty();\r\n            this._render($container, data, options.model)\r\n        });\r\n        eventsEngine.on($container, removeEvent, dispose);\r\n        return $container.contents()\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}