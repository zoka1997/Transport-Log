{"ast":null,"code":"import { append, addClass, remove, isNullOrUndefined, setStyleAttribute, createElement, prepend } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport * as cls from '../base/css-constant';\nimport * as util from '../base/util';\n/**\n * Virtual Scroll\n */\n\nvar VirtualScroll =\n/** @class */\nfunction () {\n  function VirtualScroll(parent) {\n    this.translateY = 0;\n    this.itemSize = 60;\n    this.bufferCount = 3;\n    this.renderedLength = 0;\n    this.averageRowHeight = 0;\n    this.startIndex = 0;\n    this.parent = parent;\n    this.addEventListener();\n  }\n\n  VirtualScroll.prototype.addEventListener = function () {\n    if (!this.parent || this.parent && this.parent.isDestroyed) {\n      return;\n    }\n\n    this.parent.on(events.virtualScroll, this.virtualScrolling, this);\n  };\n\n  VirtualScroll.prototype.removeEventListener = function () {\n    if (!this.parent || this.parent && this.parent.isDestroyed) {\n      return;\n    }\n\n    this.parent.off(events.virtualScroll, this.virtualScrolling);\n  };\n\n  VirtualScroll.prototype.getRenderedCount = function () {\n    this.setItemSize();\n    var containerSize = this.isHorizontalScroll ? this.parent.element.clientWidth : this.parent.element.clientHeight;\n    this.renderedLength = Math.ceil(containerSize / this.itemSize) + this.bufferCount;\n    return this.renderedLength;\n  };\n\n  VirtualScroll.prototype.renderVirtualTrack = function (contentWrap) {\n    var wrap = createElement('div', {\n      className: cls.VIRTUAL_TRACK_CLASS\n    });\n\n    if (this.isHorizontalScroll) {\n      var colCount = this.parent.activeView.colLevels[this.parent.activeView.colLevels.length - 1].length;\n      wrap.style.width = colCount * this.itemSize + 'px';\n    } else {\n      wrap.style.height = this.parent.resourceBase.expandedResources.length * this.itemSize + 'px';\n    }\n\n    contentWrap.appendChild(wrap);\n  };\n\n  VirtualScroll.prototype.updateVirtualScrollHeight = function () {\n    var virtual = this.parent.element.querySelector('.' + cls.VIRTUAL_TRACK_CLASS);\n    var lastResourceIndex = this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length - 1].groupIndex;\n    var lastRenderIndex = this.parent.resourceBase.renderedResources[this.parent.resourceBase.renderedResources.length - 1].groupIndex;\n\n    if (lastRenderIndex !== lastResourceIndex) {\n      var conTable = this.parent.element.querySelector('.' + cls.CONTENT_TABLE_CLASS);\n      this.renderedLength = conTable.querySelector('tbody').children.length;\n      virtual.style.height = conTable.offsetHeight + (this.parent.resourceBase.expandedResources.length - this.renderedLength) * conTable.offsetHeight / this.renderedLength + 'px';\n    } else {\n      virtual.style.height = '';\n    }\n\n    this.averageRowHeight = virtual.offsetHeight / this.parent.resourceBase.expandedResources.length;\n  };\n\n  VirtualScroll.prototype.updateVirtualTrackHeight = function (wrap) {\n    var resourceCount = this.parent.resourceBase.renderedResources.length;\n\n    if (resourceCount !== this.getRenderedCount()) {\n      wrap.style.height = this.parent.element.querySelector('.e-content-wrap').clientHeight + 'px';\n      var resWrap = this.parent.element.querySelector('.' + cls.RESOURCE_COLUMN_WRAP_CLASS);\n      var conWrap = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n      var eventWrap = this.parent.element.querySelector('.' + cls.EVENT_TABLE_CLASS);\n      this.translateY = 0;\n      this.setTranslate(resWrap, conWrap, eventWrap);\n    } else {\n      var lastRenderIndex = this.parent.resourceBase.renderedResources[resourceCount - 1].groupIndex;\n      var lastCollIndex = this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length - 1].groupIndex;\n      var renderedResCount = resourceCount + (lastCollIndex - lastRenderIndex);\n      renderedResCount = renderedResCount > this.parent.resourceBase.expandedResources.length ? this.parent.resourceBase.expandedResources.length : renderedResCount;\n      wrap.style.height = renderedResCount * this.itemSize + 'px';\n    }\n  };\n\n  VirtualScroll.prototype.setItemSize = function () {\n    if (this.isHorizontalScroll) {\n      this.itemSize = util.getElementWidthFromClass(this.parent.activeView.element, cls.WORK_CELLS_CLASS) || this.itemSize;\n    } else {\n      this.itemSize = util.getElementHeightFromClass(this.parent.activeView.element, cls.WORK_CELLS_CLASS) || this.itemSize;\n    }\n  };\n\n  VirtualScroll.prototype.renderEvents = function () {\n    this.setTabIndex();\n\n    if (this.parent.crudModule) {\n      this.parent.crudModule.refreshProcessedData(true);\n    }\n\n    if (this.parent.currentView !== 'Month') {\n      this.parent.notify(events.contentReady, {});\n    }\n\n    this.parent.hideSpinner();\n  };\n\n  VirtualScroll.prototype.virtualScrolling = function () {\n    var _this = this;\n\n    if (this.parent.quickPopup) {\n      this.parent.quickPopup.quickPopupHide();\n      this.parent.quickPopup.morePopup.hide();\n    }\n\n    var conWrap = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n\n    if (this.isHorizontalScroll) {\n      this.horizontalScrolling(conWrap);\n    } else {\n      var resWrap = this.parent.element.querySelector('.' + cls.RESOURCE_COLUMN_WRAP_CLASS);\n      var eventWrap = this.parent.element.querySelector('.' + cls.EVENT_TABLE_CLASS);\n      var timeIndicator = this.parent.element.querySelector('.' + cls.CURRENT_TIMELINE_CLASS);\n      var conTable = this.parent.element.querySelector('.' + cls.CONTENT_TABLE_CLASS);\n      addClass([conWrap], 'e-transition');\n      this.renderedLength = resWrap.querySelector('tbody').children.length;\n      var firstTDIndex = parseInt(resWrap.querySelector('tbody td').getAttribute('data-group-index'), 10);\n      var scrollHeight = this.parent.rowAutoHeight ? conTable.offsetHeight - conWrap.offsetHeight : this.bufferCount * this.itemSize;\n      var resCollection = [];\n\n      if (conWrap.scrollTop - this.translateY < 0) {\n        resCollection = this.upScroll(conWrap, firstTDIndex);\n      } else if (conWrap.scrollTop - this.translateY > scrollHeight) {\n        resCollection = this.downScroll(conWrap, firstTDIndex);\n      }\n\n      if (!isNullOrUndefined(resCollection) && resCollection.length > 0) {\n        this.parent.showSpinner();\n        var selectedEle = this.parent.getSelectedElements();\n        this.focusedEle = selectedEle[selectedEle.length - 1] || this.focusedEle;\n        this.updateContent(resWrap, conWrap, eventWrap, resCollection);\n        this.setTranslate(resWrap, conWrap, eventWrap, timeIndicator);\n\n        if (this.parent.dragAndDropModule && this.parent.dragAndDropModule.actionObj.action === 'drag') {\n          this.parent.dragAndDropModule.navigationWrapper();\n        }\n\n        window.clearTimeout(this.timeValue);\n        this.timeValue = window.setTimeout(function () {\n          _this.renderEvents();\n        }, 250);\n      }\n    }\n  };\n\n  VirtualScroll.prototype.horizontalScrolling = function (conWrap) {\n    var _this = this;\n\n    var resCollection = [];\n    var scrollWidth = this.bufferCount * this.itemSize;\n\n    if (Math.abs(conWrap.scrollLeft) - Math.abs(this.translateY) < 0) {\n      resCollection = this.leftScroll(conWrap);\n    } else if (Math.abs(conWrap.scrollLeft) - Math.abs(this.translateY) > scrollWidth) {\n      resCollection = this.rightScroll(conWrap);\n    }\n\n    if (!isNullOrUndefined(resCollection) && resCollection.length > 0) {\n      if (this.parent.resourceBase.expandedResources.length !== resCollection.length || this.parent.resourceBase.expandedResources[0] !== resCollection[0] || this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length - 1] !== resCollection[resCollection.length - 1]) {\n        this.parent.showSpinner();\n        var colLevels = this.parent.activeView.colLevels.slice(0);\n        this.updateHorizontalContent(conWrap, resCollection);\n        setStyleAttribute(conWrap.querySelector('table'), {\n          transform: \"translateX(\" + this.translateY + \"px)\"\n        });\n        this.parent.activeView.colLevels = colLevels;\n\n        if (this.parent.dragAndDropModule && this.parent.dragAndDropModule.actionObj.action === 'drag') {\n          this.parent.dragAndDropModule.navigationWrapper();\n        }\n      }\n\n      window.clearTimeout(this.timeValue);\n      this.timeValue = window.setTimeout(function () {\n        _this.renderEvents();\n      }, 250);\n    }\n  };\n\n  VirtualScroll.prototype.upScroll = function (conWrap, firstTDIndex) {\n    var index = 0;\n    index = ~~(conWrap.scrollTop / this.itemSize) + Math.ceil(conWrap.clientHeight / this.itemSize) - this.renderedLength;\n\n    if (this.parent.rowAutoHeight) {\n      index = index > firstTDIndex ? firstTDIndex - this.bufferCount : index;\n    }\n\n    index = index > 0 ? index : 0;\n    var prevSetCollection = this.getBufferCollection(index, index + this.renderedLength);\n    this.parent.resourceBase.renderedResources = prevSetCollection;\n\n    if (firstTDIndex === 0) {\n      this.translateY = conWrap.scrollTop;\n    } else {\n      var height = this.parent.rowAutoHeight ? this.averageRowHeight : this.itemSize;\n      height = height > 0 ? height : this.itemSize;\n      this.translateY = conWrap.scrollTop - this.bufferCount * height > 0 ? conWrap.scrollTop - this.bufferCount * height : 0;\n    }\n\n    return prevSetCollection;\n  };\n\n  VirtualScroll.prototype.downScroll = function (conWrap, firstTDIndex) {\n    var lastResource = this.parent.resourceBase.renderedResources[this.parent.resourceBase.renderedResources.length - 1].groupIndex;\n    var lastResourceIndex = this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length - 1].groupIndex;\n\n    if (lastResource === lastResourceIndex) {\n      return null;\n    }\n\n    var nextSetResIndex = 0;\n    nextSetResIndex = ~~(conWrap.scrollTop / this.itemSize);\n\n    if (this.parent.rowAutoHeight) {\n      nextSetResIndex = ~~((conWrap.scrollTop - this.translateY) / this.averageRowHeight) + firstTDIndex;\n      nextSetResIndex = nextSetResIndex > firstTDIndex + this.bufferCount ? nextSetResIndex : firstTDIndex + this.bufferCount;\n    }\n\n    var lastIndex = nextSetResIndex + this.renderedLength;\n    lastIndex = lastIndex > this.parent.resourceBase.expandedResources.length ? nextSetResIndex + (this.parent.resourceBase.expandedResources.length - nextSetResIndex) : lastIndex;\n    var nextSetCollection = this.getBufferCollection(lastIndex - this.renderedLength, lastIndex);\n    this.translateY = conWrap.scrollTop;\n    return nextSetCollection;\n  };\n\n  VirtualScroll.prototype.leftScroll = function (conWrap) {\n    var index = 0;\n    index = ~~(Math.abs(conWrap.scrollLeft) / this.itemSize) + Math.ceil(conWrap.clientWidth / this.itemSize) - this.renderedLength;\n    index = index > 0 ? index : 0;\n    return this.getCollection(index, index + this.renderedLength);\n  };\n\n  VirtualScroll.prototype.rightScroll = function (conWrap) {\n    var lastLevel = this.parent.activeView.colLevels[this.parent.activeView.colLevels.length - 1];\n    var nextSetIndex = 0;\n    nextSetIndex = ~~(Math.abs(conWrap.scrollLeft) / this.itemSize);\n    var lastIndex = nextSetIndex + this.renderedLength;\n    lastIndex = lastIndex > lastLevel.length - 1 ? lastLevel.length - 1 : lastIndex;\n    return this.getCollection(lastIndex - this.renderedLength, lastIndex);\n  };\n\n  VirtualScroll.prototype.getCollection = function (startIndex, endIndex) {\n    this.translateY = startIndex * this.itemSize;\n    var lastLevel = this.getResCollection(startIndex, endIndex);\n\n    if (this.parent.enableRtl) {\n      this.translateY = -this.translateY;\n    }\n\n    return lastLevel;\n  };\n\n  VirtualScroll.prototype.getResCollection = function (startIndex, endIndex) {\n    var lastLevel = this.parent.activeView.colLevels[this.parent.activeView.colLevels.length - 1];\n    var resCollection = [];\n    var index = {\n      startIndex: 0,\n      endIndex: 0\n    };\n\n    if (this.parent.activeViewOptions.group.byDate) {\n      if (lastLevel[startIndex].date.getTime() === this.parent.resourceBase.expandedResources[0].date.getTime() && lastLevel[endIndex].date.getTime() === this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length - 1].date.getTime()) {\n        return this.parent.resourceBase.expandedResources;\n      }\n\n      resCollection = this.getByDateCollection(lastLevel[startIndex], lastLevel[endIndex], index);\n      this.setRenderedDates(resCollection);\n    } else {\n      if (lastLevel[startIndex].groupIndex === this.parent.resourceBase.expandedResources[0].groupIndex && lastLevel[endIndex].groupIndex === this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length - 1].groupIndex) {\n        return this.parent.resourceBase.expandedResources;\n      }\n\n      resCollection = this.getByIdCollection(lastLevel[startIndex], lastLevel[endIndex], index);\n    }\n\n    if (this.parent.currentView !== 'Month') {\n      this.startIndex = index.startIndex;\n      resCollection = lastLevel.slice(index.startIndex, index.endIndex);\n    }\n\n    this.translateY = index.startIndex * this.itemSize;\n    return resCollection;\n  };\n\n  VirtualScroll.prototype.getByDateCollection = function (firstItem, lastItem, index) {\n    var resCollection = this.parent.activeView.colLevels[0].filter(function (data) {\n      return firstItem.date.getTime() <= data.date.getTime() && data.date.getTime() <= lastItem.date.getTime();\n    });\n    this.setStartEndIndex(this.parent.activeView.colLevels[0], resCollection[0], resCollection[resCollection.length - 1], index);\n    return resCollection;\n  };\n\n  VirtualScroll.prototype.getByIdCollection = function (firstItem, lastItem, index) {\n    var resCollection = this.parent.resourceBase.lastResourceLevel.filter(function (data) {\n      return firstItem.groupIndex <= data.groupIndex && data.groupIndex <= lastItem.groupIndex;\n    });\n    this.parent.resourceBase.renderedResources = resCollection;\n    this.setStartEndIndex(this.parent.resourceBase.lastResourceLevel, resCollection[0], resCollection[resCollection.length - 1], index);\n    return resCollection;\n  };\n\n  VirtualScroll.prototype.setStartEndIndex = function (data, firstItem, lastItem, colIndex) {\n    var index = 0;\n    data.filter(function (data) {\n      if (firstItem === data) {\n        colIndex.startIndex = index;\n      } else if (lastItem === data) {\n        colIndex.endIndex = index + data.colSpan;\n      }\n\n      index += data.colSpan;\n    });\n\n    if (firstItem === lastItem) {\n      colIndex.endIndex = colIndex.startIndex + lastItem.colSpan;\n    }\n  };\n\n  VirtualScroll.prototype.updateContent = function (resWrap, conWrap, eventWrap, resCollection) {\n    var renderedLength = resWrap.querySelector('tbody').children.length;\n\n    if (document.activeElement && document.activeElement.classList.contains(cls.RESOURCE_CELLS_CLASS)) {\n      this.isResourceCell = true;\n      this.parent.element.focus();\n    }\n\n    for (var i = 0; i < renderedLength; i++) {\n      remove(resWrap.querySelector('tbody tr'));\n      remove(conWrap.querySelector('tbody tr'));\n      remove(eventWrap.querySelector('div'));\n    }\n\n    this.parent.resourceBase.renderedResources = resCollection;\n    var resourceRows = this.parent.resourceBase.getContentRows(resCollection, true);\n    var contentRows = this.parent.activeView.getContentRows();\n    var eventRows = this.parent.activeView.getEventRows(resCollection.length);\n    append(resourceRows, resWrap.querySelector('tbody'));\n    append(contentRows, conWrap.querySelector('tbody'));\n    append(eventRows, eventWrap);\n  };\n\n  VirtualScroll.prototype.updateHorizontalContent = function (conWrap, resCollection) {\n    this.parent.resourceBase.expandedResources = resCollection;\n    var selectedEle = this.parent.getSelectedElements();\n    this.focusedEle = selectedEle[selectedEle.length - 1] || this.focusedEle;\n    var renderedLength = conWrap.querySelectorAll('tbody tr').length;\n\n    for (var i = 0; i < renderedLength; i++) {\n      remove(conWrap.querySelector('tbody tr'));\n    }\n\n    if (this.parent.currentView === 'Month') {\n      if (this.parent.activeViewOptions.group.byDate) {\n        this.parent.activeView.colLevels[0] = resCollection;\n      } else {\n        this.parent.activeView.colLevels[this.parent.activeView.colLevels.length - 2] = resCollection;\n      }\n\n      var contentRows = this.parent.activeView.getContentRows();\n      append(contentRows, conWrap.querySelector('tbody'));\n    } else {\n      var col = [].slice.call(conWrap.querySelector('colgroup').children);\n\n      for (var i = 0; i < col.length; i++) {\n        remove(col[i]);\n      }\n\n      this.parent.activeView.colLevels[this.parent.activeView.colLevels.length - 1] = resCollection;\n      var contentRows = this.parent.activeView.getContentRows();\n      var table = conWrap.querySelector('table');\n      var thead = conWrap.querySelector('thead');\n      var colGroupEle_1 = conWrap.querySelector('colgroup');\n      resCollection.forEach(function () {\n        colGroupEle_1.appendChild(createElement('col'));\n      });\n      thead.appendChild(this.parent.eventBase.createEventWrapper('', this.startIndex > 0 ? this.startIndex : 0));\n\n      if (this.parent.activeViewOptions.timeScale.enable) {\n        thead.appendChild(this.parent.eventBase.createEventWrapper('timeIndicator'));\n      }\n\n      prepend([thead], table);\n      append(contentRows, conWrap.querySelector('tbody'));\n    }\n  };\n\n  VirtualScroll.prototype.getBufferCollection = function (startIndex, endIndex) {\n    return this.parent.resourceBase.expandedResources.slice(startIndex, endIndex);\n  };\n\n  VirtualScroll.prototype.setTranslate = function (resWrap, conWrap, eventWrap, timeIndicator) {\n    setStyleAttribute(resWrap.querySelector('table'), {\n      transform: \"translateY(\" + this.translateY + \"px)\"\n    });\n    setStyleAttribute(conWrap.querySelector('table'), {\n      transform: \"translateY(\" + this.translateY + \"px)\"\n    });\n    setStyleAttribute(eventWrap, {\n      transform: \"translateY(\" + this.translateY + \"px)\"\n    });\n\n    if (!isNullOrUndefined(timeIndicator)) {\n      setStyleAttribute(timeIndicator, {\n        transform: \"translateY(\" + this.translateY + \"px)\"\n      });\n    }\n  };\n\n  VirtualScroll.prototype.updateFocusedWorkCell = function () {\n    if (this.focusedEle) {\n      var date = parseInt(this.focusedEle.getAttribute('data-date'), 10);\n      var groupIndex = parseInt(this.focusedEle.getAttribute('data-group-index'), 10);\n      var ele = this.parent.element.querySelector(\".\" + cls.WORK_CELLS_CLASS + \"[data-date=\\\"\" + date + \"\\\"][data-group-index=\\\"\" + groupIndex + \"\\\"]\");\n\n      if (ele) {\n        this.parent.addSelectedClass([ele], ele, true);\n      }\n\n      this.focusedEle = null;\n    }\n  };\n\n  VirtualScroll.prototype.setRenderedDates = function (resCollection) {\n    if (this.parent.currentView !== 'Month') {\n      var dateCol_1 = resCollection.map(function (x) {\n        return x.date;\n      });\n      this.parent.resourceBase.renderedResources.forEach(function (x) {\n        return x.renderDates = dateCol_1;\n      });\n    } else {\n      var dateCol_2 = resCollection.map(function (x) {\n        return x.date.getDay();\n      });\n      var renderDates_1 = this.parent.activeView.renderDates.filter(function (x) {\n        return dateCol_2.indexOf(x.getDay()) >= 0;\n      });\n      this.parent.resourceBase.renderedResources.forEach(function (x) {\n        return x.renderDates = renderDates_1;\n      });\n    }\n  };\n\n  VirtualScroll.prototype.setTabIndex = function () {\n    var resColWrap = this.parent.element.querySelector('.' + cls.RESOURCE_COLUMN_WRAP_CLASS);\n    var resCells = [].slice.call(this.parent.element.querySelectorAll('.' + cls.RESOURCE_CELLS_CLASS));\n\n    if (resCells && resColWrap) {\n      resCells.forEach(function (element) {\n        if (element.getBoundingClientRect().top >= resColWrap.getBoundingClientRect().top) {\n          element.setAttribute('tabindex', '0');\n        }\n      });\n    }\n\n    var focusResCell = this.parent.element.querySelector(\".\" + cls.RESOURCE_CELLS_CLASS + \"[tabindex=\\\"\" + 0 + \"\\\"]\");\n\n    if (this.isResourceCell && focusResCell) {\n      focusResCell.focus();\n      this.isResourceCell = false;\n    }\n  };\n\n  VirtualScroll.prototype.destroy = function () {\n    this.removeEventListener();\n    this.focusedEle = null;\n  };\n\n  return VirtualScroll;\n}();\n\nexport { VirtualScroll };","map":{"version":3,"sources":["C:/Users/Zoran/source/repos/TransportApp/TransportLog-basic/node_modules/@syncfusion/ej2-schedule/src/schedule/actions/virtual-scroll.js"],"names":["append","addClass","remove","isNullOrUndefined","setStyleAttribute","createElement","prepend","events","cls","util","VirtualScroll","parent","translateY","itemSize","bufferCount","renderedLength","averageRowHeight","startIndex","addEventListener","prototype","isDestroyed","on","virtualScroll","virtualScrolling","removeEventListener","off","getRenderedCount","setItemSize","containerSize","isHorizontalScroll","element","clientWidth","clientHeight","Math","ceil","renderVirtualTrack","contentWrap","wrap","className","VIRTUAL_TRACK_CLASS","colCount","activeView","colLevels","length","style","width","height","resourceBase","expandedResources","appendChild","updateVirtualScrollHeight","virtual","querySelector","lastResourceIndex","groupIndex","lastRenderIndex","renderedResources","conTable","CONTENT_TABLE_CLASS","children","offsetHeight","updateVirtualTrackHeight","resourceCount","resWrap","RESOURCE_COLUMN_WRAP_CLASS","conWrap","CONTENT_WRAP_CLASS","eventWrap","EVENT_TABLE_CLASS","setTranslate","lastCollIndex","renderedResCount","getElementWidthFromClass","WORK_CELLS_CLASS","getElementHeightFromClass","renderEvents","setTabIndex","crudModule","refreshProcessedData","currentView","notify","contentReady","hideSpinner","_this","quickPopup","quickPopupHide","morePopup","hide","horizontalScrolling","timeIndicator","CURRENT_TIMELINE_CLASS","firstTDIndex","parseInt","getAttribute","scrollHeight","rowAutoHeight","resCollection","scrollTop","upScroll","downScroll","showSpinner","selectedEle","getSelectedElements","focusedEle","updateContent","dragAndDropModule","actionObj","action","navigationWrapper","window","clearTimeout","timeValue","setTimeout","scrollWidth","abs","scrollLeft","leftScroll","rightScroll","slice","updateHorizontalContent","transform","index","prevSetCollection","getBufferCollection","lastResource","nextSetResIndex","lastIndex","nextSetCollection","getCollection","lastLevel","nextSetIndex","endIndex","getResCollection","enableRtl","activeViewOptions","group","byDate","date","getTime","getByDateCollection","setRenderedDates","getByIdCollection","firstItem","lastItem","filter","data","setStartEndIndex","lastResourceLevel","colIndex","colSpan","document","activeElement","classList","contains","RESOURCE_CELLS_CLASS","isResourceCell","focus","i","resourceRows","getContentRows","contentRows","eventRows","getEventRows","querySelectorAll","col","call","table","thead","colGroupEle_1","forEach","eventBase","createEventWrapper","timeScale","enable","updateFocusedWorkCell","ele","addSelectedClass","dateCol_1","map","x","renderDates","dateCol_2","getDay","renderDates_1","indexOf","resColWrap","resCells","getBoundingClientRect","top","setAttribute","focusResCell","destroy"],"mappings":"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","sourcesContent":["import { append, addClass, remove, isNullOrUndefined, setStyleAttribute, createElement, prepend } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport * as cls from '../base/css-constant';\nimport * as util from '../base/util';\n/**\n * Virtual Scroll\n */\nvar VirtualScroll = /** @class */ (function () {\n    function VirtualScroll(parent) {\n        this.translateY = 0;\n        this.itemSize = 60;\n        this.bufferCount = 3;\n        this.renderedLength = 0;\n        this.averageRowHeight = 0;\n        this.startIndex = 0;\n        this.parent = parent;\n        this.addEventListener();\n    }\n    VirtualScroll.prototype.addEventListener = function () {\n        if (!this.parent || this.parent && this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.virtualScroll, this.virtualScrolling, this);\n    };\n    VirtualScroll.prototype.removeEventListener = function () {\n        if (!this.parent || this.parent && this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.virtualScroll, this.virtualScrolling);\n    };\n    VirtualScroll.prototype.getRenderedCount = function () {\n        this.setItemSize();\n        var containerSize = this.isHorizontalScroll ? this.parent.element.clientWidth : this.parent.element.clientHeight;\n        this.renderedLength = Math.ceil(containerSize / this.itemSize) + this.bufferCount;\n        return this.renderedLength;\n    };\n    VirtualScroll.prototype.renderVirtualTrack = function (contentWrap) {\n        var wrap = createElement('div', { className: cls.VIRTUAL_TRACK_CLASS });\n        if (this.isHorizontalScroll) {\n            var colCount = this.parent.activeView.colLevels[this.parent.activeView.colLevels.length - 1].length;\n            wrap.style.width = (colCount * this.itemSize) + 'px';\n        }\n        else {\n            wrap.style.height = (this.parent.resourceBase.expandedResources.length * this.itemSize) + 'px';\n        }\n        contentWrap.appendChild(wrap);\n    };\n    VirtualScroll.prototype.updateVirtualScrollHeight = function () {\n        var virtual = this.parent.element.querySelector('.' + cls.VIRTUAL_TRACK_CLASS);\n        var lastResourceIndex = this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length - 1].groupIndex;\n        var lastRenderIndex = this.parent.resourceBase.renderedResources[this.parent.resourceBase.renderedResources.length - 1].groupIndex;\n        if (lastRenderIndex !== lastResourceIndex) {\n            var conTable = this.parent.element.querySelector('.' + cls.CONTENT_TABLE_CLASS);\n            this.renderedLength = conTable.querySelector('tbody').children.length;\n            virtual.style.height = (conTable.offsetHeight + (this.parent.resourceBase.expandedResources.length - (this.renderedLength)) *\n                conTable.offsetHeight / this.renderedLength) + 'px';\n        }\n        else {\n            virtual.style.height = '';\n        }\n        this.averageRowHeight = virtual.offsetHeight / this.parent.resourceBase.expandedResources.length;\n    };\n    VirtualScroll.prototype.updateVirtualTrackHeight = function (wrap) {\n        var resourceCount = this.parent.resourceBase.renderedResources.length;\n        if (resourceCount !== this.getRenderedCount()) {\n            wrap.style.height = this.parent.element.querySelector('.e-content-wrap').clientHeight + 'px';\n            var resWrap = this.parent.element.querySelector('.' + cls.RESOURCE_COLUMN_WRAP_CLASS);\n            var conWrap = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n            var eventWrap = this.parent.element.querySelector('.' + cls.EVENT_TABLE_CLASS);\n            this.translateY = 0;\n            this.setTranslate(resWrap, conWrap, eventWrap);\n        }\n        else {\n            var lastRenderIndex = this.parent.resourceBase.renderedResources[resourceCount - 1].groupIndex;\n            var lastCollIndex = this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length - 1].groupIndex;\n            var renderedResCount = resourceCount + (lastCollIndex - lastRenderIndex);\n            renderedResCount = (renderedResCount > this.parent.resourceBase.expandedResources.length) ?\n                this.parent.resourceBase.expandedResources.length : renderedResCount;\n            wrap.style.height = (renderedResCount * this.itemSize) + 'px';\n        }\n    };\n    VirtualScroll.prototype.setItemSize = function () {\n        if (this.isHorizontalScroll) {\n            this.itemSize = util.getElementWidthFromClass(this.parent.activeView.element, cls.WORK_CELLS_CLASS) || this.itemSize;\n        }\n        else {\n            this.itemSize = util.getElementHeightFromClass(this.parent.activeView.element, cls.WORK_CELLS_CLASS) || this.itemSize;\n        }\n    };\n    VirtualScroll.prototype.renderEvents = function () {\n        this.setTabIndex();\n        if (this.parent.crudModule) {\n            this.parent.crudModule.refreshProcessedData(true);\n        }\n        if (this.parent.currentView !== 'Month') {\n            this.parent.notify(events.contentReady, {});\n        }\n        this.parent.hideSpinner();\n    };\n    VirtualScroll.prototype.virtualScrolling = function () {\n        var _this = this;\n        if (this.parent.quickPopup) {\n            this.parent.quickPopup.quickPopupHide();\n            this.parent.quickPopup.morePopup.hide();\n        }\n        var conWrap = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n        if (this.isHorizontalScroll) {\n            this.horizontalScrolling(conWrap);\n        }\n        else {\n            var resWrap = this.parent.element.querySelector('.' + cls.RESOURCE_COLUMN_WRAP_CLASS);\n            var eventWrap = this.parent.element.querySelector('.' + cls.EVENT_TABLE_CLASS);\n            var timeIndicator = this.parent.element.querySelector('.' + cls.CURRENT_TIMELINE_CLASS);\n            var conTable = this.parent.element.querySelector('.' + cls.CONTENT_TABLE_CLASS);\n            addClass([conWrap], 'e-transition');\n            this.renderedLength = resWrap.querySelector('tbody').children.length;\n            var firstTDIndex = parseInt(resWrap.querySelector('tbody td').getAttribute('data-group-index'), 10);\n            var scrollHeight = this.parent.rowAutoHeight ?\n                (conTable.offsetHeight - conWrap.offsetHeight) : this.bufferCount * this.itemSize;\n            var resCollection = [];\n            if ((conWrap.scrollTop) - this.translateY < 0) {\n                resCollection = this.upScroll(conWrap, firstTDIndex);\n            }\n            else if (conWrap.scrollTop - this.translateY > scrollHeight) {\n                resCollection = this.downScroll(conWrap, firstTDIndex);\n            }\n            if (!isNullOrUndefined(resCollection) && resCollection.length > 0) {\n                this.parent.showSpinner();\n                var selectedEle = this.parent.getSelectedElements();\n                this.focusedEle = selectedEle[selectedEle.length - 1] || this.focusedEle;\n                this.updateContent(resWrap, conWrap, eventWrap, resCollection);\n                this.setTranslate(resWrap, conWrap, eventWrap, timeIndicator);\n                if (this.parent.dragAndDropModule && this.parent.dragAndDropModule.actionObj.action === 'drag') {\n                    this.parent.dragAndDropModule.navigationWrapper();\n                }\n                window.clearTimeout(this.timeValue);\n                this.timeValue = window.setTimeout(function () { _this.renderEvents(); }, 250);\n            }\n        }\n    };\n    VirtualScroll.prototype.horizontalScrolling = function (conWrap) {\n        var _this = this;\n        var resCollection = [];\n        var scrollWidth = this.bufferCount * this.itemSize;\n        if (Math.abs(conWrap.scrollLeft) - Math.abs(this.translateY) < 0) {\n            resCollection = this.leftScroll(conWrap);\n        }\n        else if (Math.abs(conWrap.scrollLeft) - Math.abs(this.translateY) > scrollWidth) {\n            resCollection = this.rightScroll(conWrap);\n        }\n        if (!isNullOrUndefined(resCollection) && resCollection.length > 0) {\n            if (this.parent.resourceBase.expandedResources.length !== resCollection.length ||\n                this.parent.resourceBase.expandedResources[0] !== resCollection[0] ||\n                this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length - 1] !==\n                    resCollection[resCollection.length - 1]) {\n                this.parent.showSpinner();\n                var colLevels = this.parent.activeView.colLevels.slice(0);\n                this.updateHorizontalContent(conWrap, resCollection);\n                setStyleAttribute(conWrap.querySelector('table'), { transform: \"translateX(\" + this.translateY + \"px)\" });\n                this.parent.activeView.colLevels = colLevels;\n                if (this.parent.dragAndDropModule && this.parent.dragAndDropModule.actionObj.action === 'drag') {\n                    this.parent.dragAndDropModule.navigationWrapper();\n                }\n            }\n            window.clearTimeout(this.timeValue);\n            this.timeValue = window.setTimeout(function () { _this.renderEvents(); }, 250);\n        }\n    };\n    VirtualScroll.prototype.upScroll = function (conWrap, firstTDIndex) {\n        var index = 0;\n        index = (~~(conWrap.scrollTop / this.itemSize) + Math.ceil(conWrap.clientHeight / this.itemSize)) - this.renderedLength;\n        if (this.parent.rowAutoHeight) {\n            index = (index > firstTDIndex) ? firstTDIndex - this.bufferCount : index;\n        }\n        index = (index > 0) ? index : 0;\n        var prevSetCollection = this.getBufferCollection(index, index + this.renderedLength);\n        this.parent.resourceBase.renderedResources = prevSetCollection;\n        if (firstTDIndex === 0) {\n            this.translateY = conWrap.scrollTop;\n        }\n        else {\n            var height = (this.parent.rowAutoHeight) ? this.averageRowHeight : this.itemSize;\n            height = (height > 0) ? height : this.itemSize;\n            this.translateY = (conWrap.scrollTop - (this.bufferCount * height) > 0) ?\n                conWrap.scrollTop - (this.bufferCount * height) : 0;\n        }\n        return prevSetCollection;\n    };\n    VirtualScroll.prototype.downScroll = function (conWrap, firstTDIndex) {\n        var lastResource = this.parent.resourceBase.\n            renderedResources[this.parent.resourceBase.renderedResources.length - 1].groupIndex;\n        var lastResourceIndex = this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length - 1].groupIndex;\n        if (lastResource === lastResourceIndex) {\n            return null;\n        }\n        var nextSetResIndex = 0;\n        nextSetResIndex = ~~(conWrap.scrollTop / this.itemSize);\n        if (this.parent.rowAutoHeight) {\n            nextSetResIndex = ~~((conWrap.scrollTop - this.translateY) / this.averageRowHeight) + firstTDIndex;\n            nextSetResIndex = (nextSetResIndex > firstTDIndex + this.bufferCount) ? nextSetResIndex : firstTDIndex + this.bufferCount;\n        }\n        var lastIndex = nextSetResIndex + this.renderedLength;\n        lastIndex = (lastIndex > this.parent.resourceBase.expandedResources.length) ?\n            nextSetResIndex + (this.parent.resourceBase.expandedResources.length - nextSetResIndex) : lastIndex;\n        var nextSetCollection = this.getBufferCollection(lastIndex - this.renderedLength, lastIndex);\n        this.translateY = conWrap.scrollTop;\n        return nextSetCollection;\n    };\n    VirtualScroll.prototype.leftScroll = function (conWrap) {\n        var index = 0;\n        index = (~~(Math.abs(conWrap.scrollLeft) / this.itemSize) + Math.ceil(conWrap.clientWidth / this.itemSize)) - this.renderedLength;\n        index = (index > 0) ? index : 0;\n        return this.getCollection(index, index + this.renderedLength);\n    };\n    VirtualScroll.prototype.rightScroll = function (conWrap) {\n        var lastLevel = this.parent.activeView.colLevels[this.parent.activeView.colLevels.length - 1];\n        var nextSetIndex = 0;\n        nextSetIndex = ~~(Math.abs(conWrap.scrollLeft) / this.itemSize);\n        var lastIndex = nextSetIndex + this.renderedLength;\n        lastIndex = (lastIndex > lastLevel.length - 1) ? lastLevel.length - 1 : lastIndex;\n        return this.getCollection(lastIndex - this.renderedLength, lastIndex);\n    };\n    VirtualScroll.prototype.getCollection = function (startIndex, endIndex) {\n        this.translateY = startIndex * this.itemSize;\n        var lastLevel = this.getResCollection(startIndex, endIndex);\n        if (this.parent.enableRtl) {\n            this.translateY = -this.translateY;\n        }\n        return lastLevel;\n    };\n    VirtualScroll.prototype.getResCollection = function (startIndex, endIndex) {\n        var lastLevel = this.parent.activeView.colLevels[this.parent.activeView.colLevels.length - 1];\n        var resCollection = [];\n        var index = { startIndex: 0, endIndex: 0 };\n        if (this.parent.activeViewOptions.group.byDate) {\n            if (lastLevel[startIndex].date.getTime() === this.parent.resourceBase.expandedResources[0].date.getTime() &&\n                lastLevel[endIndex].date.getTime() ===\n                    this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length - 1].date.getTime()) {\n                return this.parent.resourceBase.expandedResources;\n            }\n            resCollection = this.getByDateCollection(lastLevel[startIndex], lastLevel[endIndex], index);\n            this.setRenderedDates(resCollection);\n        }\n        else {\n            if (lastLevel[startIndex].groupIndex === this.parent.resourceBase.expandedResources[0].groupIndex &&\n                lastLevel[endIndex].groupIndex ===\n                    this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length - 1].groupIndex) {\n                return this.parent.resourceBase.expandedResources;\n            }\n            resCollection = this.getByIdCollection(lastLevel[startIndex], lastLevel[endIndex], index);\n        }\n        if (this.parent.currentView !== 'Month') {\n            this.startIndex = index.startIndex;\n            resCollection = lastLevel.slice(index.startIndex, index.endIndex);\n        }\n        this.translateY = index.startIndex * this.itemSize;\n        return resCollection;\n    };\n    VirtualScroll.prototype.getByDateCollection = function (firstItem, lastItem, index) {\n        var resCollection = this.parent.activeView.colLevels[0].filter(function (data) {\n            return firstItem.date.getTime() <= data.date.getTime() &&\n                data.date.getTime() <= lastItem.date.getTime();\n        });\n        this.setStartEndIndex(this.parent.activeView.colLevels[0], resCollection[0], resCollection[resCollection.length - 1], index);\n        return resCollection;\n    };\n    VirtualScroll.prototype.getByIdCollection = function (firstItem, lastItem, index) {\n        var resCollection = this.parent.resourceBase.lastResourceLevel.filter(function (data) {\n            return firstItem.groupIndex <= data.groupIndex && data.groupIndex <= lastItem.groupIndex;\n        });\n        this.parent.resourceBase.renderedResources = resCollection;\n        this.setStartEndIndex(this.parent.resourceBase.lastResourceLevel, resCollection[0], resCollection[resCollection.length - 1], index);\n        return resCollection;\n    };\n    VirtualScroll.prototype.setStartEndIndex = function (data, firstItem, lastItem, colIndex) {\n        var index = 0;\n        data.filter(function (data) {\n            if (firstItem === data) {\n                colIndex.startIndex = index;\n            }\n            else if (lastItem === data) {\n                colIndex.endIndex = index + data.colSpan;\n            }\n            index += data.colSpan;\n        });\n        if (firstItem === lastItem) {\n            colIndex.endIndex = colIndex.startIndex + lastItem.colSpan;\n        }\n    };\n    VirtualScroll.prototype.updateContent = function (resWrap, conWrap, eventWrap, resCollection) {\n        var renderedLength = resWrap.querySelector('tbody').children.length;\n        if (document.activeElement && document.activeElement.classList.contains(cls.RESOURCE_CELLS_CLASS)) {\n            this.isResourceCell = true;\n            this.parent.element.focus();\n        }\n        for (var i = 0; i < renderedLength; i++) {\n            remove(resWrap.querySelector('tbody tr'));\n            remove(conWrap.querySelector('tbody tr'));\n            remove(eventWrap.querySelector('div'));\n        }\n        this.parent.resourceBase.renderedResources = resCollection;\n        var resourceRows = this.parent.resourceBase.getContentRows(resCollection, true);\n        var contentRows = this.parent.activeView.getContentRows();\n        var eventRows = this.parent.activeView.getEventRows(resCollection.length);\n        append(resourceRows, resWrap.querySelector('tbody'));\n        append(contentRows, conWrap.querySelector('tbody'));\n        append(eventRows, eventWrap);\n    };\n    VirtualScroll.prototype.updateHorizontalContent = function (conWrap, resCollection) {\n        this.parent.resourceBase.expandedResources = resCollection;\n        var selectedEle = this.parent.getSelectedElements();\n        this.focusedEle = selectedEle[selectedEle.length - 1] || this.focusedEle;\n        var renderedLength = conWrap.querySelectorAll('tbody tr').length;\n        for (var i = 0; i < renderedLength; i++) {\n            remove(conWrap.querySelector('tbody tr'));\n        }\n        if (this.parent.currentView === 'Month') {\n            if (this.parent.activeViewOptions.group.byDate) {\n                this.parent.activeView.colLevels[0] = resCollection;\n            }\n            else {\n                this.parent.activeView.colLevels[this.parent.activeView.colLevels.length - 2] = resCollection;\n            }\n            var contentRows = this.parent.activeView.getContentRows();\n            append(contentRows, conWrap.querySelector('tbody'));\n        }\n        else {\n            var col = [].slice.call(conWrap.querySelector('colgroup').children);\n            for (var i = 0; i < col.length; i++) {\n                remove(col[i]);\n            }\n            this.parent.activeView.colLevels[this.parent.activeView.colLevels.length - 1] = resCollection;\n            var contentRows = this.parent.activeView.getContentRows();\n            var table = conWrap.querySelector('table');\n            var thead = conWrap.querySelector('thead');\n            var colGroupEle_1 = conWrap.querySelector('colgroup');\n            resCollection.forEach(function () {\n                colGroupEle_1.appendChild(createElement('col'));\n            });\n            thead.appendChild(this.parent.eventBase.createEventWrapper('', this.startIndex > 0 ? this.startIndex : 0));\n            if (this.parent.activeViewOptions.timeScale.enable) {\n                thead.appendChild(this.parent.eventBase.createEventWrapper('timeIndicator'));\n            }\n            prepend([thead], table);\n            append(contentRows, conWrap.querySelector('tbody'));\n        }\n    };\n    VirtualScroll.prototype.getBufferCollection = function (startIndex, endIndex) {\n        return this.parent.resourceBase.expandedResources.slice(startIndex, endIndex);\n    };\n    VirtualScroll.prototype.setTranslate = function (resWrap, conWrap, eventWrap, timeIndicator) {\n        setStyleAttribute(resWrap.querySelector('table'), { transform: \"translateY(\" + this.translateY + \"px)\" });\n        setStyleAttribute(conWrap.querySelector('table'), { transform: \"translateY(\" + this.translateY + \"px)\" });\n        setStyleAttribute(eventWrap, { transform: \"translateY(\" + this.translateY + \"px)\" });\n        if (!isNullOrUndefined(timeIndicator)) {\n            setStyleAttribute(timeIndicator, { transform: \"translateY(\" + this.translateY + \"px)\" });\n        }\n    };\n    VirtualScroll.prototype.updateFocusedWorkCell = function () {\n        if (this.focusedEle) {\n            var date = parseInt(this.focusedEle.getAttribute('data-date'), 10);\n            var groupIndex = parseInt(this.focusedEle.getAttribute('data-group-index'), 10);\n            var ele = this.parent.element.querySelector(\".\" + cls.WORK_CELLS_CLASS + \"[data-date=\\\"\" + date + \"\\\"][data-group-index=\\\"\" + groupIndex + \"\\\"]\");\n            if (ele) {\n                this.parent.addSelectedClass([ele], ele, true);\n            }\n            this.focusedEle = null;\n        }\n    };\n    VirtualScroll.prototype.setRenderedDates = function (resCollection) {\n        if (this.parent.currentView !== 'Month') {\n            var dateCol_1 = resCollection.map(function (x) { return x.date; });\n            this.parent.resourceBase.renderedResources.forEach(function (x) { return x.renderDates = dateCol_1; });\n        }\n        else {\n            var dateCol_2 = resCollection.map(function (x) { return x.date.getDay(); });\n            var renderDates_1 = this.parent.activeView.renderDates.filter(function (x) { return dateCol_2.indexOf(x.getDay()) >= 0; });\n            this.parent.resourceBase.renderedResources.forEach(function (x) { return x.renderDates = renderDates_1; });\n        }\n    };\n    VirtualScroll.prototype.setTabIndex = function () {\n        var resColWrap = this.parent.element.querySelector('.' + cls.RESOURCE_COLUMN_WRAP_CLASS);\n        var resCells = [].slice.call(this.parent.element.querySelectorAll('.' + cls.RESOURCE_CELLS_CLASS));\n        if (resCells && resColWrap) {\n            resCells.forEach(function (element) {\n                if (element.getBoundingClientRect().top >= resColWrap.getBoundingClientRect().top) {\n                    element.setAttribute('tabindex', '0');\n                }\n            });\n        }\n        var focusResCell = this.parent.element.querySelector(\".\" + cls.RESOURCE_CELLS_CLASS + \"[tabindex=\\\"\" + 0 + \"\\\"]\");\n        if (this.isResourceCell && focusResCell) {\n            focusResCell.focus();\n            this.isResourceCell = false;\n        }\n    };\n    VirtualScroll.prototype.destroy = function () {\n        this.removeEventListener();\n        this.focusedEle = null;\n    };\n    return VirtualScroll;\n}());\nexport { VirtualScroll };\n"]},"metadata":{},"sourceType":"module"}