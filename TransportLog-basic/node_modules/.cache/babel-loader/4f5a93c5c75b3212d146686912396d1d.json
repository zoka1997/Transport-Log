{"ast":null,"code":"/**\r\n * DevExtreme (esm/renovation/ui/scheduler/appointment/appointment.js)\r\n * Version: 22.1.6\r\n * Build date: Tue Oct 18 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nvar _excluded = [\"appointmentTemplate\", \"groups\", \"hideReducedIconTooltip\", \"index\", \"onItemClick\", \"onItemDoubleClick\", \"showReducedIconTooltip\", \"viewModel\"];\nimport { createComponentVNode, normalizeProps } from \"inferno\";\nimport { InfernoEffect, InfernoComponent } from \"@devextreme/runtime/inferno\";\nimport { normalizeStyles } from \"@devextreme/runtime/inferno\";\nimport { getAppointmentStyles, mergeStylesWithColor } from \"./utils\";\nimport { AppointmentContent } from \"./content/layout\";\nimport { Widget } from \"../../common/widget\";\nimport { combineClasses } from \"../../../utils/combine_classes\";\nimport { getAppointmentColor } from \"../resources/utils\";\nimport { AppointmentsContext } from \"../appointments_context\";\nexport var viewFunction = _ref => {\n  var {\n    classes: classes,\n    data: data,\n    dateText: dateText,\n    isReduced: isReduced,\n    onItemClick: onItemClick,\n    props: {\n      appointmentTemplate: appointmentTemplate,\n      hideReducedIconTooltip: hideReducedIconTooltip,\n      index: index,\n      showReducedIconTooltip: showReducedIconTooltip,\n      viewModel: {\n        info: {\n          isRecurrent: isRecurrent\n        }\n      }\n    },\n    ref: ref,\n    styles: styles,\n    text: text\n  } = _ref;\n  return normalizeProps(createComponentVNode(2, Widget, _extends({\n    focusStateEnabled: true,\n    onClick: onItemClick,\n    rootElementRef: ref,\n    style: normalizeStyles(styles),\n    classes: classes,\n    hint: text\n  }, {\n    role: \"button\",\n    \"data-index\": index\n  }, {\n    children: createComponentVNode(2, AppointmentContent, {\n      text: text,\n      isReduced: isReduced,\n      dateText: dateText,\n      isRecurrent: isRecurrent,\n      index: index,\n      data: data,\n      showReducedIconTooltip: showReducedIconTooltip,\n      hideReducedIconTooltip: hideReducedIconTooltip,\n      appointmentTemplate: appointmentTemplate\n    })\n  })));\n};\nexport var AppointmentProps = {\n  index: 0\n};\nimport { createRef as infernoCreateRef } from \"inferno\";\n\nvar getTemplate = TemplateProp => TemplateProp && (TemplateProp.defaultProps ? props => normalizeProps(createComponentVNode(2, TemplateProp, _extends({}, props))) : TemplateProp);\n\nexport class Appointment extends InfernoComponent {\n  constructor(props) {\n    super(props);\n    this.ref = infernoCreateRef();\n    this.state = {\n      color: void 0\n    };\n    this.updateStylesEffect = this.updateStylesEffect.bind(this);\n    this.bindDoubleClickEffect = this.bindDoubleClickEffect.bind(this);\n    this.onItemClick = this.onItemClick.bind(this);\n    this.onItemDoubleClick = this.onItemDoubleClick.bind(this);\n  }\n\n  get appointmentsContextValue() {\n    if (\"AppointmentsContext\" in this.context) {\n      return this.context.AppointmentsContext;\n    }\n\n    return AppointmentsContext;\n  }\n\n  createEffects() {\n    return [new InfernoEffect(this.updateStylesEffect, [this.props.viewModel, this.appointmentsContextValue, this.props.groups]), new InfernoEffect(this.bindDoubleClickEffect, [])];\n  }\n\n  updateEffects() {\n    var _this$_effects$;\n\n    null === (_this$_effects$ = this._effects[0]) || void 0 === _this$_effects$ ? void 0 : _this$_effects$.update([this.props.viewModel, this.appointmentsContextValue, this.props.groups]);\n  }\n\n  updateStylesEffect() {\n    var _viewModel$info$group;\n\n    var {\n      viewModel: viewModel\n    } = this.props;\n    var groupIndex = null !== (_viewModel$info$group = viewModel.info.groupIndex) && void 0 !== _viewModel$info$group ? _viewModel$info$group : 0;\n    var {\n      appointment: appointment\n    } = viewModel;\n    getAppointmentColor({\n      resources: this.appointmentsContextValue.resources,\n      resourceLoaderMap: this.appointmentsContextValue.resourceLoaderMap,\n      resourcesDataAccessors: this.appointmentsContextValue.dataAccessors.resources,\n      loadedResources: this.appointmentsContextValue.loadedResources\n    }, {\n      itemData: appointment,\n      groupIndex: groupIndex,\n      groups: this.props.groups\n    }).then(color => {\n      this.setState(__state_argument => ({\n        color: color\n      }));\n    }).catch(() => \"\");\n  }\n\n  bindDoubleClickEffect() {\n    var _this$ref$current;\n\n    var onDoubleClick = () => this.onItemDoubleClick();\n\n    null === (_this$ref$current = this.ref.current) || void 0 === _this$ref$current ? void 0 : _this$ref$current.addEventListener(\"dblclick\", onDoubleClick);\n    return () => {\n      var _this$ref$current2;\n\n      null === (_this$ref$current2 = this.ref.current) || void 0 === _this$ref$current2 ? void 0 : _this$ref$current2.removeEventListener(\"dblclick\", onDoubleClick);\n    };\n  }\n\n  get appointmentStyles() {\n    return getAppointmentStyles(this.props.viewModel);\n  }\n\n  get styles() {\n    return mergeStylesWithColor(this.state.color, this.appointmentStyles);\n  }\n\n  get text() {\n    return this.props.viewModel.appointment.text;\n  }\n\n  get isReduced() {\n    var {\n      appointmentReduced: appointmentReduced\n    } = this.props.viewModel.info;\n    return !!appointmentReduced;\n  }\n\n  get classes() {\n    var {\n      focused: focused,\n      info: {\n        allDay: allDay,\n        appointmentReduced: appointmentReduced,\n        direction: direction,\n        isRecurrent: isRecurrent\n      }\n    } = this.props.viewModel;\n    var isVerticalDirection = \"vertical\" === direction;\n    return combineClasses({\n      \"dx-state-focused\": !!focused,\n      \"dx-scheduler-appointment\": true,\n      \"dx-scheduler-appointment-horizontal\": !isVerticalDirection,\n      \"dx-scheduler-appointment-vertical\": isVerticalDirection,\n      \"dx-scheduler-appointment-recurrence\": isRecurrent,\n      \"dx-scheduler-all-day-appointment\": allDay,\n      \"dx-scheduler-appointment-reduced\": this.isReduced,\n      \"dx-scheduler-appointment-head\": \"head\" === appointmentReduced,\n      \"dx-scheduler-appointment-body\": \"body\" === appointmentReduced,\n      \"dx-scheduler-appointment-tail\": \"tail\" === appointmentReduced\n    });\n  }\n\n  get dateText() {\n    return this.props.viewModel.info.dateText;\n  }\n\n  get data() {\n    return {\n      appointmentData: this.props.viewModel.info.appointment,\n      targetedAppointmentData: this.props.viewModel.appointment\n    };\n  }\n\n  onItemClick() {\n    var e = {\n      data: [this.props.viewModel],\n      target: this.ref.current,\n      index: this.props.index\n    };\n    this.props.onItemClick(e);\n  }\n\n  onItemDoubleClick() {\n    var e = {\n      data: [this.props.viewModel],\n      target: this.ref.current,\n      index: this.props.index\n    };\n    this.props.onItemDoubleClick(e);\n  }\n\n  get restAttributes() {\n    var _this$props = this.props,\n        restProps = _objectWithoutPropertiesLoose(_this$props, _excluded);\n\n    return restProps;\n  }\n\n  render() {\n    var props = this.props;\n    return viewFunction({\n      props: _extends({}, props, {\n        appointmentTemplate: getTemplate(props.appointmentTemplate)\n      }),\n      color: this.state.color,\n      ref: this.ref,\n      appointmentsContextValue: this.appointmentsContextValue,\n      appointmentStyles: this.appointmentStyles,\n      styles: this.styles,\n      text: this.text,\n      isReduced: this.isReduced,\n      classes: this.classes,\n      dateText: this.dateText,\n      data: this.data,\n      onItemClick: this.onItemClick,\n      onItemDoubleClick: this.onItemDoubleClick,\n      restAttributes: this.restAttributes\n    });\n  }\n\n}\nAppointment.defaultProps = AppointmentProps;","map":{"version":3,"sources":["C:/Users/Zoran/source/repos/TransportApp/TransportLog-basic/node_modules/devextreme/esm/renovation/ui/scheduler/appointment/appointment.js"],"names":["_objectWithoutPropertiesLoose","_extends","_excluded","createComponentVNode","normalizeProps","InfernoEffect","InfernoComponent","normalizeStyles","getAppointmentStyles","mergeStylesWithColor","AppointmentContent","Widget","combineClasses","getAppointmentColor","AppointmentsContext","viewFunction","_ref","classes","data","dateText","isReduced","onItemClick","props","appointmentTemplate","hideReducedIconTooltip","index","showReducedIconTooltip","viewModel","info","isRecurrent","ref","styles","text","focusStateEnabled","onClick","rootElementRef","style","hint","role","children","AppointmentProps","createRef","infernoCreateRef","getTemplate","TemplateProp","defaultProps","Appointment","constructor","state","color","updateStylesEffect","bind","bindDoubleClickEffect","onItemDoubleClick","appointmentsContextValue","context","createEffects","groups","updateEffects","_this$_effects$","_effects","update","_viewModel$info$group","groupIndex","appointment","resources","resourceLoaderMap","resourcesDataAccessors","dataAccessors","loadedResources","itemData","then","setState","__state_argument","catch","_this$ref$current","onDoubleClick","current","addEventListener","_this$ref$current2","removeEventListener","appointmentStyles","appointmentReduced","focused","allDay","direction","isVerticalDirection","appointmentData","targetedAppointmentData","e","target","restAttributes","_this$props","restProps","render"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (esm/renovation/ui/scheduler/appointment/appointment.js)\r\n * Version: 22.1.6\r\n * Build date: Tue Oct 18 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\r\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\r\nvar _excluded = [\"appointmentTemplate\", \"groups\", \"hideReducedIconTooltip\", \"index\", \"onItemClick\", \"onItemDoubleClick\", \"showReducedIconTooltip\", \"viewModel\"];\r\nimport {\r\n    createComponentVNode,\r\n    normalizeProps\r\n} from \"inferno\";\r\nimport {\r\n    InfernoEffect,\r\n    InfernoComponent\r\n} from \"@devextreme/runtime/inferno\";\r\nimport {\r\n    normalizeStyles\r\n} from \"@devextreme/runtime/inferno\";\r\nimport {\r\n    getAppointmentStyles,\r\n    mergeStylesWithColor\r\n} from \"./utils\";\r\nimport {\r\n    AppointmentContent\r\n} from \"./content/layout\";\r\nimport {\r\n    Widget\r\n} from \"../../common/widget\";\r\nimport {\r\n    combineClasses\r\n} from \"../../../utils/combine_classes\";\r\nimport {\r\n    getAppointmentColor\r\n} from \"../resources/utils\";\r\nimport {\r\n    AppointmentsContext\r\n} from \"../appointments_context\";\r\nexport var viewFunction = _ref => {\r\n    var {\r\n        classes: classes,\r\n        data: data,\r\n        dateText: dateText,\r\n        isReduced: isReduced,\r\n        onItemClick: onItemClick,\r\n        props: {\r\n            appointmentTemplate: appointmentTemplate,\r\n            hideReducedIconTooltip: hideReducedIconTooltip,\r\n            index: index,\r\n            showReducedIconTooltip: showReducedIconTooltip,\r\n            viewModel: {\r\n                info: {\r\n                    isRecurrent: isRecurrent\r\n                }\r\n            }\r\n        },\r\n        ref: ref,\r\n        styles: styles,\r\n        text: text\r\n    } = _ref;\r\n    return normalizeProps(createComponentVNode(2, Widget, _extends({\r\n        focusStateEnabled: true,\r\n        onClick: onItemClick,\r\n        rootElementRef: ref,\r\n        style: normalizeStyles(styles),\r\n        classes: classes,\r\n        hint: text\r\n    }, {\r\n        role: \"button\",\r\n        \"data-index\": index\r\n    }, {\r\n        children: createComponentVNode(2, AppointmentContent, {\r\n            text: text,\r\n            isReduced: isReduced,\r\n            dateText: dateText,\r\n            isRecurrent: isRecurrent,\r\n            index: index,\r\n            data: data,\r\n            showReducedIconTooltip: showReducedIconTooltip,\r\n            hideReducedIconTooltip: hideReducedIconTooltip,\r\n            appointmentTemplate: appointmentTemplate\r\n        })\r\n    })))\r\n};\r\nexport var AppointmentProps = {\r\n    index: 0\r\n};\r\nimport {\r\n    createRef as infernoCreateRef\r\n} from \"inferno\";\r\nvar getTemplate = TemplateProp => TemplateProp && (TemplateProp.defaultProps ? props => normalizeProps(createComponentVNode(2, TemplateProp, _extends({}, props))) : TemplateProp);\r\nexport class Appointment extends InfernoComponent {\r\n    constructor(props) {\r\n        super(props);\r\n        this.ref = infernoCreateRef();\r\n        this.state = {\r\n            color: void 0\r\n        };\r\n        this.updateStylesEffect = this.updateStylesEffect.bind(this);\r\n        this.bindDoubleClickEffect = this.bindDoubleClickEffect.bind(this);\r\n        this.onItemClick = this.onItemClick.bind(this);\r\n        this.onItemDoubleClick = this.onItemDoubleClick.bind(this)\r\n    }\r\n    get appointmentsContextValue() {\r\n        if (\"AppointmentsContext\" in this.context) {\r\n            return this.context.AppointmentsContext\r\n        }\r\n        return AppointmentsContext\r\n    }\r\n    createEffects() {\r\n        return [new InfernoEffect(this.updateStylesEffect, [this.props.viewModel, this.appointmentsContextValue, this.props.groups]), new InfernoEffect(this.bindDoubleClickEffect, [])]\r\n    }\r\n    updateEffects() {\r\n        var _this$_effects$;\r\n        null === (_this$_effects$ = this._effects[0]) || void 0 === _this$_effects$ ? void 0 : _this$_effects$.update([this.props.viewModel, this.appointmentsContextValue, this.props.groups])\r\n    }\r\n    updateStylesEffect() {\r\n        var _viewModel$info$group;\r\n        var {\r\n            viewModel: viewModel\r\n        } = this.props;\r\n        var groupIndex = null !== (_viewModel$info$group = viewModel.info.groupIndex) && void 0 !== _viewModel$info$group ? _viewModel$info$group : 0;\r\n        var {\r\n            appointment: appointment\r\n        } = viewModel;\r\n        getAppointmentColor({\r\n            resources: this.appointmentsContextValue.resources,\r\n            resourceLoaderMap: this.appointmentsContextValue.resourceLoaderMap,\r\n            resourcesDataAccessors: this.appointmentsContextValue.dataAccessors.resources,\r\n            loadedResources: this.appointmentsContextValue.loadedResources\r\n        }, {\r\n            itemData: appointment,\r\n            groupIndex: groupIndex,\r\n            groups: this.props.groups\r\n        }).then(color => {\r\n            this.setState(__state_argument => ({\r\n                color: color\r\n            }))\r\n        }).catch(() => \"\")\r\n    }\r\n    bindDoubleClickEffect() {\r\n        var _this$ref$current;\r\n        var onDoubleClick = () => this.onItemDoubleClick();\r\n        null === (_this$ref$current = this.ref.current) || void 0 === _this$ref$current ? void 0 : _this$ref$current.addEventListener(\"dblclick\", onDoubleClick);\r\n        return () => {\r\n            var _this$ref$current2;\r\n            null === (_this$ref$current2 = this.ref.current) || void 0 === _this$ref$current2 ? void 0 : _this$ref$current2.removeEventListener(\"dblclick\", onDoubleClick)\r\n        }\r\n    }\r\n    get appointmentStyles() {\r\n        return getAppointmentStyles(this.props.viewModel)\r\n    }\r\n    get styles() {\r\n        return mergeStylesWithColor(this.state.color, this.appointmentStyles)\r\n    }\r\n    get text() {\r\n        return this.props.viewModel.appointment.text\r\n    }\r\n    get isReduced() {\r\n        var {\r\n            appointmentReduced: appointmentReduced\r\n        } = this.props.viewModel.info;\r\n        return !!appointmentReduced\r\n    }\r\n    get classes() {\r\n        var {\r\n            focused: focused,\r\n            info: {\r\n                allDay: allDay,\r\n                appointmentReduced: appointmentReduced,\r\n                direction: direction,\r\n                isRecurrent: isRecurrent\r\n            }\r\n        } = this.props.viewModel;\r\n        var isVerticalDirection = \"vertical\" === direction;\r\n        return combineClasses({\r\n            \"dx-state-focused\": !!focused,\r\n            \"dx-scheduler-appointment\": true,\r\n            \"dx-scheduler-appointment-horizontal\": !isVerticalDirection,\r\n            \"dx-scheduler-appointment-vertical\": isVerticalDirection,\r\n            \"dx-scheduler-appointment-recurrence\": isRecurrent,\r\n            \"dx-scheduler-all-day-appointment\": allDay,\r\n            \"dx-scheduler-appointment-reduced\": this.isReduced,\r\n            \"dx-scheduler-appointment-head\": \"head\" === appointmentReduced,\r\n            \"dx-scheduler-appointment-body\": \"body\" === appointmentReduced,\r\n            \"dx-scheduler-appointment-tail\": \"tail\" === appointmentReduced\r\n        })\r\n    }\r\n    get dateText() {\r\n        return this.props.viewModel.info.dateText\r\n    }\r\n    get data() {\r\n        return {\r\n            appointmentData: this.props.viewModel.info.appointment,\r\n            targetedAppointmentData: this.props.viewModel.appointment\r\n        }\r\n    }\r\n    onItemClick() {\r\n        var e = {\r\n            data: [this.props.viewModel],\r\n            target: this.ref.current,\r\n            index: this.props.index\r\n        };\r\n        this.props.onItemClick(e)\r\n    }\r\n    onItemDoubleClick() {\r\n        var e = {\r\n            data: [this.props.viewModel],\r\n            target: this.ref.current,\r\n            index: this.props.index\r\n        };\r\n        this.props.onItemDoubleClick(e)\r\n    }\r\n    get restAttributes() {\r\n        var _this$props = this.props,\r\n            restProps = _objectWithoutPropertiesLoose(_this$props, _excluded);\r\n        return restProps\r\n    }\r\n    render() {\r\n        var props = this.props;\r\n        return viewFunction({\r\n            props: _extends({}, props, {\r\n                appointmentTemplate: getTemplate(props.appointmentTemplate)\r\n            }),\r\n            color: this.state.color,\r\n            ref: this.ref,\r\n            appointmentsContextValue: this.appointmentsContextValue,\r\n            appointmentStyles: this.appointmentStyles,\r\n            styles: this.styles,\r\n            text: this.text,\r\n            isReduced: this.isReduced,\r\n            classes: this.classes,\r\n            dateText: this.dateText,\r\n            data: this.data,\r\n            onItemClick: this.onItemClick,\r\n            onItemDoubleClick: this.onItemDoubleClick,\r\n            restAttributes: this.restAttributes\r\n        })\r\n    }\r\n}\r\nAppointment.defaultProps = AppointmentProps;\r\n"]},"metadata":{},"sourceType":"module"}