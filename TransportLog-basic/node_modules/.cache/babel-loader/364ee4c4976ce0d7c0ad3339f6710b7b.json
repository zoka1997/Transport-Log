{"ast":null,"code":"/**\r\n * DevExtreme (esm/ui/grid_core/ui.grid_core.columns_view.js)\r\n * Version: 22.1.6\r\n * Build date: Tue Oct 18 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport { getOuterWidth, getWidth, getOuterHeight, getHeight } from \"../../core/utils/size\";\nimport $ from \"../../core/renderer\";\nimport domAdapter from \"../../core/dom_adapter\";\nimport { getWindow } from \"../../core/utils/window\";\nimport eventsEngine from \"../../events/core/events_engine\";\nimport { data as elementData } from \"../../core/element_data\";\nimport pointerEvents from \"../../events/pointer\";\nimport { name as clickEventName } from \"../../events/click\";\nimport { name as dblclickEvent } from \"../../events/double_click\";\nimport browser from \"../../core/utils/browser\";\nimport { noop } from \"../../core/utils/common\";\nimport { setWidth } from \"../../core/utils/style\";\nimport { getPublicElement } from \"../../core/element\";\nimport { isRenderer, isFunction, isString, isDefined, isNumeric } from \"../../core/utils/type\";\nimport { getBoundingRect, getDefaultAlignment } from \"../../core/utils/position\";\nimport * as iteratorUtils from \"../../core/utils/iterator\";\nimport { extend } from \"../../core/utils/extend\";\nimport modules from \"./ui.grid_core.modules\";\nimport gridCoreUtils from \"./ui.grid_core.utils\";\nimport columnStateMixin from \"./ui.grid_core.column_state_mixin\";\nimport { when, Deferred } from \"../../core/utils/deferred\";\nimport { nativeScrolling } from \"../../core/utils/support\";\nvar SCROLL_CONTAINER_CLASS = \"scroll-container\";\nvar SCROLLABLE_SIMULATED_CLASS = \"scrollable-simulated\";\nvar GROUP_SPACE_CLASS = \"group-space\";\nvar CONTENT_CLASS = \"content\";\nvar TABLE_CLASS = \"table\";\nvar TABLE_FIXED_CLASS = \"table-fixed\";\nvar CONTENT_FIXED_CLASS = \"content-fixed\";\nvar ROW_CLASS = \"dx-row\";\nvar GROUP_ROW_CLASS = \"dx-group-row\";\nvar GROUP_CELL_CLASS = \"dx-group-cell\";\nvar DETAIL_ROW_CLASS = \"dx-master-detail-row\";\nvar FILTER_ROW_CLASS = \"filter-row\";\nvar ERROR_ROW_CLASS = \"dx-error-row\";\nvar CELL_UPDATED_ANIMATION_CLASS = \"cell-updated-animation\";\nvar HIDDEN_COLUMNS_WIDTH = \"0.0001px\";\nvar CELL_HINT_VISIBLE = \"dxCellHintVisible\";\nvar FORM_FIELD_ITEM_CONTENT_CLASS = \"dx-field-item-content\";\nvar appendElementTemplate = {\n  render: function (options) {\n    options.container.append(options.content);\n  }\n};\n\nvar subscribeToRowEvents = function (that, $table) {\n  var touchTarget;\n  var touchCurrentTarget;\n  var timeoutId;\n\n  function clearTouchTargets(timeout) {\n    return setTimeout(function () {\n      touchTarget = touchCurrentTarget = null;\n    }, timeout);\n  }\n\n  eventsEngine.on($table, \"touchstart touchend\", \".dx-row\", function (e) {\n    clearTimeout(timeoutId);\n\n    if (\"touchstart\" === e.type) {\n      touchTarget = e.target;\n      touchCurrentTarget = e.currentTarget;\n      timeoutId = clearTouchTargets(1e3);\n    } else {\n      timeoutId = clearTouchTargets();\n    }\n  });\n  eventsEngine.on($table, [clickEventName, dblclickEvent, pointerEvents.down].join(\" \"), \".dx-row\", that.createAction(function (e) {\n    var event = e.event;\n\n    if (touchTarget) {\n      event.target = touchTarget;\n      event.currentTarget = touchCurrentTarget;\n    }\n\n    if (!$(event.target).closest(\"a\").length) {\n      e.rowIndex = that.getRowIndex(event.currentTarget);\n\n      if (e.rowIndex >= 0) {\n        e.rowElement = getPublicElement($(event.currentTarget));\n        e.columns = that.getColumns();\n\n        if (event.type === pointerEvents.down) {\n          that._rowPointerDown(e);\n        } else if (event.type === clickEventName) {\n          that._rowClick(e);\n        } else {\n          that._rowDblClick(e);\n        }\n      }\n    }\n  }));\n};\n\nvar getWidthStyle = function (width) {\n  if (\"auto\" === width) {\n    return \"\";\n  }\n\n  return isNumeric(width) ? width + \"px\" : width;\n};\n\nvar setCellWidth = function (cell, column, width) {\n  cell.style.width = cell.style.maxWidth = \"auto\" === column.width ? \"\" : width;\n};\n\nvar copyAttributes = function (element, newElement) {\n  if (!element || !newElement) {\n    return;\n  }\n\n  var oldAttributes = element.attributes;\n  var newAttributes = newElement.attributes;\n  var i;\n\n  for (i = 0; i < oldAttributes.length; i++) {\n    var name = oldAttributes[i].nodeName;\n\n    if (!newElement.hasAttribute(name)) {\n      element.removeAttribute(name);\n    }\n  }\n\n  for (i = 0; i < newAttributes.length; i++) {\n    element.setAttribute(newAttributes[i].nodeName, newAttributes[i].nodeValue);\n  }\n};\n\nexport var ColumnsView = modules.View.inherit(columnStateMixin).inherit({\n  _createScrollableOptions: function () {\n    var scrollingOptions = this.option(\"scrolling\");\n    var useNativeScrolling = this.option(\"scrolling.useNative\");\n    var options = extend({}, scrollingOptions, {\n      direction: \"both\",\n      bounceEnabled: false,\n      useKeyboard: false\n    });\n\n    if (void 0 === useNativeScrolling) {\n      useNativeScrolling = true;\n    }\n\n    if (\"auto\" === useNativeScrolling) {\n      delete options.useNative;\n      delete options.useSimulatedScrollbar;\n    } else {\n      options.useNative = !!useNativeScrolling;\n      options.useSimulatedScrollbar = !useNativeScrolling;\n    }\n\n    return options;\n  },\n  _updateCell: function ($cell, parameters) {\n    if (parameters.rowType) {\n      this._cellPrepared($cell, parameters);\n    }\n  },\n  _createCell: function (options) {\n    var column = options.column;\n    var alignment = column.alignment || getDefaultAlignment(this.option(\"rtlEnabled\"));\n    var cell = domAdapter.createElement(\"td\");\n    cell.style.textAlign = alignment;\n    var $cell = $(cell);\n\n    if (\"data\" === options.rowType && column.headerId && !column.type) {\n      if (this.component.option(\"showColumnHeaders\")) {\n        this.setAria(\"describedby\", column.headerId, $cell);\n      }\n    }\n\n    if (column.cssClass) {\n      $cell.addClass(column.cssClass);\n    }\n\n    if (\"expand\" === column.command) {\n      $cell.addClass(column.cssClass);\n      $cell.addClass(this.addWidgetPrefix(GROUP_SPACE_CLASS));\n    }\n\n    if (column.colspan > 1) {\n      $cell.attr(\"colSpan\", column.colspan);\n    } else if (!column.isBand && \"auto\" !== column.visibleWidth && this.option(\"columnAutoWidth\")) {\n      if (column.width || column.minWidth) {\n        cell.style.minWidth = getWidthStyle(column.minWidth || column.width);\n      }\n\n      if (column.width) {\n        setCellWidth(cell, column, getWidthStyle(column.width));\n      }\n    }\n\n    return $cell;\n  },\n  _createRow: function (rowObject, tagName) {\n    tagName = tagName || \"tr\";\n    var $element = $(\"<\".concat(tagName, \">\")).addClass(ROW_CLASS);\n    this.setAria(\"role\", \"row\", $element);\n    return $element;\n  },\n  _isAltRow: function (row) {\n    return row && row.dataIndex % 2 === 1;\n  },\n  _createTable: function (columns, isAppend) {\n    var that = this;\n    var $table = $(\"<table>\").addClass(that.addWidgetPrefix(TABLE_CLASS)).addClass(that.addWidgetPrefix(TABLE_FIXED_CLASS));\n\n    if (columns && !isAppend) {\n      $table.append(that._createColGroup(columns));\n\n      if (browser.safari) {\n        $table.append($(\"<thead>\").append(\"<tr>\"));\n      }\n\n      that.setAria(\"role\", \"presentation\", $table);\n    } else {\n      that.setAria(\"hidden\", true, $table);\n    }\n\n    this.setAria(\"role\", \"presentation\", $(\"<tbody>\").appendTo($table));\n\n    if (isAppend) {\n      return $table;\n    }\n\n    if (browser.mozilla) {\n      eventsEngine.on($table, \"mousedown\", \"td\", function (e) {\n        if (e.ctrlKey) {\n          e.preventDefault();\n        }\n      });\n    }\n\n    if (that.option(\"cellHintEnabled\")) {\n      eventsEngine.on($table, \"mousemove\", \".dx-row > td\", this.createAction(function (args) {\n        var e = args.event;\n        var $element = $(e.target);\n        var $cell = $(e.currentTarget);\n        var $row = $cell.parent();\n\n        var visibleColumns = that._columnsController.getVisibleColumns();\n\n        var rowOptions = $row.data(\"options\");\n        var columnIndex = $cell.index();\n        var cellOptions = rowOptions && rowOptions.cells && rowOptions.cells[columnIndex];\n        var column = cellOptions ? cellOptions.column : visibleColumns[columnIndex];\n        var isHeaderRow = $row.hasClass(\"dx-header-row\");\n        var isDataRow = $row.hasClass(\"dx-data-row\");\n        var isMasterDetailRow = $row.hasClass(DETAIL_ROW_CLASS);\n        var isGroupRow = $row.hasClass(GROUP_ROW_CLASS);\n        var isFilterRow = $row.hasClass(that.addWidgetPrefix(FILTER_ROW_CLASS));\n        var isDataRowWithTemplate = isDataRow && (!column || column.cellTemplate);\n        var isEditorShown = isDataRow && cellOptions && (rowOptions.isEditing || cellOptions.isEditing || (null === column || void 0 === column ? void 0 : column.showEditorAlways));\n        var isHeaderRowWithTemplate = isHeaderRow && (!column || column.headerCellTemplate);\n        var isGroupCellWithTemplate = isGroupRow && (!column || column.groupIndex && column.groupCellTemplate);\n        var shouldShowHint = !isMasterDetailRow && !isFilterRow && !isEditorShown && !isDataRowWithTemplate && !isHeaderRowWithTemplate && !isGroupCellWithTemplate;\n\n        if (shouldShowHint) {\n          if ($element.data(CELL_HINT_VISIBLE)) {\n            $element.removeAttr(\"title\");\n            $element.data(CELL_HINT_VISIBLE, false);\n          }\n\n          var difference = $element[0].scrollWidth - $element[0].clientWidth;\n\n          if (difference > 0 && !isDefined($element.attr(\"title\"))) {\n            $element.attr(\"title\", $element.text());\n            $element.data(CELL_HINT_VISIBLE, true);\n          }\n        }\n      }));\n    }\n\n    var getOptions = function (event) {\n      var $cell = $(event.currentTarget);\n      var $fieldItemContent = $(event.target).closest(\".\" + FORM_FIELD_ITEM_CONTENT_CLASS);\n      var $row = $cell.parent();\n      var rowOptions = $row.data(\"options\");\n      var options = rowOptions && rowOptions.cells && rowOptions.cells[$cell.index()];\n\n      if (!$cell.closest(\"table\").is(event.delegateTarget)) {\n        return;\n      }\n\n      var resultOptions = extend({}, options, {\n        cellElement: getPublicElement($cell),\n        event: event,\n        eventType: event.type\n      });\n      resultOptions.rowIndex = that.getRowIndex($row);\n\n      if ($fieldItemContent.length) {\n        var formItemOptions = $fieldItemContent.data(\"dx-form-item\");\n\n        if (formItemOptions.column) {\n          resultOptions.column = formItemOptions.column;\n          resultOptions.columnIndex = that._columnsController.getVisibleIndex(resultOptions.column.index);\n        }\n      }\n\n      return resultOptions;\n    };\n\n    eventsEngine.on($table, \"mouseover\", \".dx-row > td\", function (e) {\n      var options = getOptions(e);\n      options && that.executeAction(\"onCellHoverChanged\", options);\n    });\n    eventsEngine.on($table, \"mouseout\", \".dx-row > td\", function (e) {\n      var options = getOptions(e);\n      options && that.executeAction(\"onCellHoverChanged\", options);\n    });\n    eventsEngine.on($table, clickEventName, \".dx-row > td\", function (e) {\n      var options = getOptions(e);\n      options && that.executeAction(\"onCellClick\", options);\n    });\n    eventsEngine.on($table, dblclickEvent, \".dx-row > td\", function (e) {\n      var options = getOptions(e);\n      options && that.executeAction(\"onCellDblClick\", options);\n    });\n    subscribeToRowEvents(that, $table);\n    return $table;\n  },\n  _rowPointerDown: noop,\n  _rowClick: noop,\n  _rowDblClick: noop,\n  _createColGroup: function (columns) {\n    var colgroupElement = $(\"<colgroup>\");\n\n    for (var i = 0; i < columns.length; i++) {\n      var colspan = columns[i].colspan || 1;\n\n      for (var j = 0; j < colspan; j++) {\n        colgroupElement.append(this._createCol(columns[i]));\n      }\n    }\n\n    return colgroupElement;\n  },\n  _createCol: function (column) {\n    var width = column.visibleWidth || column.width;\n\n    if (\"adaptiveHidden\" === width) {\n      width = HIDDEN_COLUMNS_WIDTH;\n    }\n\n    var col = $(\"<col>\");\n    setWidth(col, width);\n    return col;\n  },\n  renderDelayedTemplates: function (change) {\n    var delayedTemplates = this._delayedTemplates;\n    var syncTemplates = delayedTemplates.filter(template => !template.async);\n    var asyncTemplates = delayedTemplates.filter(template => template.async);\n    this._delayedTemplates = [];\n\n    this._renderDelayedTemplatesCore(syncTemplates, false, change);\n\n    this._renderDelayedTemplatesCoreAsync(asyncTemplates);\n  },\n  _renderDelayedTemplatesCoreAsync: function (templates) {\n    var that = this;\n\n    if (templates.length) {\n      getWindow().setTimeout(function () {\n        that._renderDelayedTemplatesCore(templates, true);\n      });\n    }\n  },\n  _renderDelayedTemplatesCore: function (templates, isAsync, change) {\n    var date = new Date();\n\n    while (templates.length) {\n      var templateParameters = templates.shift();\n      var options = templateParameters.options;\n      var doc = domAdapter.getDocument();\n\n      if (!isAsync || $(options.container).closest(doc).length) {\n        if (change) {\n          options.change = change;\n        }\n\n        templateParameters.template.render(options);\n      }\n\n      if (isAsync && new Date() - date > 30) {\n        this._renderDelayedTemplatesCoreAsync(templates);\n\n        break;\n      }\n    }\n\n    if (!templates.length && this._delayedTemplates.length) {\n      this.renderDelayedTemplates();\n    }\n  },\n  _processTemplate: function (template) {\n    var renderingTemplate;\n\n    if (template && template.render && !isRenderer(template)) {\n      renderingTemplate = {\n        allowRenderToDetachedContainer: template.allowRenderToDetachedContainer,\n        render: function (options) {\n          template.render(options.container, options.model, options.change);\n          options.deferred && options.deferred.resolve();\n        }\n      };\n    } else if (isFunction(template)) {\n      renderingTemplate = {\n        render: function (options) {\n          var renderedTemplate = template(getPublicElement(options.container), options.model, options.change);\n\n          if (renderedTemplate && (renderedTemplate.nodeType || isRenderer(renderedTemplate))) {\n            options.container.append(renderedTemplate);\n          }\n\n          options.deferred && options.deferred.resolve();\n        }\n      };\n    } else {\n      var templateID = isString(template) ? template : $(template).attr(\"id\");\n\n      if (!templateID) {\n        renderingTemplate = this.getTemplate(template);\n      } else {\n        if (!this._templatesCache[templateID]) {\n          this._templatesCache[templateID] = this.getTemplate(template);\n        }\n\n        renderingTemplate = this._templatesCache[templateID];\n      }\n    }\n\n    return renderingTemplate;\n  },\n  renderTemplate: function (container, template, options, allowRenderToDetachedContainer, change) {\n    var renderingTemplate = this._processTemplate(template, options);\n\n    var column = options.column;\n    var isDataRow = \"data\" === options.rowType;\n    var templateDeferred = new Deferred();\n    var templateOptions = {\n      container: container,\n      model: options,\n      deferred: templateDeferred,\n      onRendered: () => {\n        templateDeferred.resolve();\n      }\n    };\n\n    if (renderingTemplate) {\n      options.component = this.component;\n      var async = column && (column.renderAsync && isDataRow || this.option(\"renderAsync\") && (false !== column.renderAsync && (column.command || column.showEditorAlways) && isDataRow || \"filter\" === options.rowType));\n\n      if ((renderingTemplate.allowRenderToDetachedContainer || allowRenderToDetachedContainer) && !async) {\n        renderingTemplate.render(templateOptions);\n      } else {\n        this._delayedTemplates.push({\n          template: renderingTemplate,\n          options: templateOptions,\n          async: async\n        });\n      }\n\n      if (change) {\n        change.templateDeferreds = change.templateDeferreds || [];\n        change.templateDeferreds.push(templateDeferred);\n      }\n    } else {\n      templateDeferred.reject();\n    }\n\n    return templateDeferred.promise();\n  },\n  _getBodies: function (tableElement) {\n    return $(tableElement).children(\"tbody\").not(\".dx-header\").not(\".dx-footer\");\n  },\n  _needWrapRow: function ($tableElement) {\n    var _this$_getBodies;\n\n    var hasRowTemplate = !!this.option().rowTemplate;\n    return hasRowTemplate && !!(null !== (_this$_getBodies = this._getBodies($tableElement)) && void 0 !== _this$_getBodies && _this$_getBodies.filter(\".\" + ROW_CLASS).length);\n  },\n  _wrapRowIfNeed: function ($table, $row, isRefreshing) {\n    var $tableElement = isRefreshing ? $table || this._tableElement : this._tableElement || $table;\n\n    var needWrapRow = this._needWrapRow($tableElement);\n\n    if (needWrapRow) {\n      var $tbody = $(\"<tbody>\").addClass($row.attr(\"class\"));\n      this.setAria(\"role\", \"presentation\", $tbody);\n      return $tbody.append($row);\n    }\n\n    return $row;\n  },\n  _appendRow: function ($table, $row, appendTemplate) {\n    appendTemplate = appendTemplate || appendElementTemplate;\n    appendTemplate.render({\n      content: $row,\n      container: $table\n    });\n  },\n  _resizeCore: function () {\n    var scrollLeft = this._scrollLeft;\n\n    if (scrollLeft >= 0) {\n      this._scrollLeft = 0;\n      this.scrollTo({\n        left: scrollLeft\n      });\n    }\n  },\n  _renderCore: function (e) {\n    var $root = this.element().parent();\n\n    if (!$root || $root.parent().length) {\n      this.renderDelayedTemplates(e);\n    }\n  },\n  _renderTable: function (options) {\n    options = options || {};\n    options.columns = this._columnsController.getVisibleColumns();\n    var changeType = options.change && options.change.changeType;\n\n    var $table = this._createTable(options.columns, \"append\" === changeType || \"prepend\" === changeType || \"update\" === changeType);\n\n    this._renderRows($table, options);\n\n    return $table;\n  },\n  _renderRows: function ($table, options) {\n    var rows = this._getRows(options.change);\n\n    var columnIndices = options.change && options.change.columnIndices || [];\n    var changeTypes = options.change && options.change.changeTypes || [];\n\n    for (var i = 0; i < rows.length; i++) {\n      this._renderRow($table, extend({\n        row: rows[i],\n        columnIndices: columnIndices[i],\n        changeType: changeTypes[i]\n      }, options));\n    }\n  },\n  _renderRow: function ($table, options) {\n    if (!options.columnIndices) {\n      options.row.cells = [];\n    }\n\n    var $row = this._createRow(options.row);\n\n    var $wrappedRow = this._wrapRowIfNeed($table, $row);\n\n    if (\"remove\" !== options.changeType) {\n      this._renderCells($row, options);\n    }\n\n    this._appendRow($table, $wrappedRow);\n\n    var rowOptions = extend({\n      columns: options.columns\n    }, options.row);\n\n    this._addWatchMethod(rowOptions, options.row);\n\n    this._rowPrepared($wrappedRow, rowOptions, options.row);\n  },\n  _needRenderCell: function (columnIndex, columnIndices) {\n    return !columnIndices || columnIndices.indexOf(columnIndex) >= 0;\n  },\n  _renderCells: function ($row, options) {\n    var columnIndex = 0;\n    var row = options.row;\n    var columns = options.columns;\n\n    for (var i = 0; i < columns.length; i++) {\n      if (this._needRenderCell(i, options.columnIndices)) {\n        this._renderCell($row, extend({\n          column: columns[i],\n          columnIndex: columnIndex,\n          value: row.values && row.values[columnIndex],\n          oldValue: row.oldValues && row.oldValues[columnIndex]\n        }, options));\n      }\n\n      if (columns[i].colspan > 1) {\n        columnIndex += columns[i].colspan;\n      } else {\n        columnIndex++;\n      }\n    }\n  },\n  _updateCells: function ($rowElement, $newRowElement, columnIndices) {\n    var $cells = $rowElement.children();\n    var $newCells = $newRowElement.children();\n    var highlightChanges = this.option(\"highlightChanges\");\n    var cellUpdatedClass = this.addWidgetPrefix(CELL_UPDATED_ANIMATION_CLASS);\n    columnIndices.forEach(function (columnIndex, index) {\n      var $cell = $cells.eq(columnIndex);\n      var $newCell = $newCells.eq(index);\n      $cell.replaceWith($newCell);\n\n      if (highlightChanges && !$newCell.hasClass(\"dx-command-expand\")) {\n        $newCell.addClass(cellUpdatedClass);\n      }\n    });\n    copyAttributes($rowElement.get(0), $newRowElement.get(0));\n  },\n  _setCellAriaAttributes: function ($cell, cellOptions) {\n    if (\"freeSpace\" !== cellOptions.rowType) {\n      this.setAria(\"role\", \"gridcell\", $cell);\n\n      var columnIndexOffset = this._columnsController.getColumnIndexOffset();\n\n      var ariaColIndex = cellOptions.columnIndex + columnIndexOffset + 1;\n      this.setAria(\"colindex\", ariaColIndex, $cell);\n    }\n  },\n  _renderCell: function ($row, options) {\n    var cellOptions = this._getCellOptions(options);\n\n    if (options.columnIndices) {\n      if (options.row.cells) {\n        var cellIndex = options.row.cells.findIndex(cell => cell.columnIndex === cellOptions.columnIndex);\n        options.row.cells[cellIndex] = cellOptions;\n      }\n    } else {\n      options.row.cells.push(cellOptions);\n    }\n\n    var $cell = this._createCell(cellOptions);\n\n    this._setCellAriaAttributes($cell, cellOptions);\n\n    this._renderCellContent($cell, cellOptions, options);\n\n    $row.get(0).appendChild($cell.get(0));\n    return $cell;\n  },\n  _renderCellContent: function ($cell, options, renderOptions) {\n    var template = this._getCellTemplate(options);\n\n    when(!template || this.renderTemplate($cell, template, options, void 0, renderOptions.change)).done(() => {\n      this._updateCell($cell, options);\n    });\n  },\n  _getCellTemplate: function () {},\n  _getRows: function () {\n    return [];\n  },\n  _getCellOptions: function (options) {\n    var cellOptions = {\n      column: options.column,\n      columnIndex: options.columnIndex,\n      rowType: options.row.rowType,\n      isAltRow: this._isAltRow(options.row)\n    };\n\n    this._addWatchMethod(cellOptions);\n\n    return cellOptions;\n  },\n  _addWatchMethod: function (options, source) {\n    if (!this.option(\"repaintChangesOnly\")) {\n      return;\n    }\n\n    var watchers = [];\n    source = source || options;\n\n    source.watch = source.watch || function (getter, updateValueFunc, updateRowFunc) {\n      var oldValue = getter(source.data);\n\n      var watcher = function (row) {\n        if (row && updateRowFunc) {\n          updateRowFunc(row);\n        }\n\n        var newValue = getter(source.data);\n\n        if (JSON.stringify(oldValue) !== JSON.stringify(newValue)) {\n          if (row) {\n            updateValueFunc(newValue);\n          }\n\n          oldValue = newValue;\n        }\n      };\n\n      watchers.push(watcher);\n      return function () {\n        var index = watchers.indexOf(watcher);\n\n        if (index >= 0) {\n          watchers.splice(index, 1);\n        }\n      };\n    };\n\n    source.update = source.update || function (row, keepRow) {\n      if (row) {\n        this.data = options.data = row.data;\n        this.rowIndex = options.rowIndex = row.rowIndex;\n        this.dataIndex = options.dataIndex = row.dataIndex;\n        this.isExpanded = options.isExpanded = row.isExpanded;\n\n        if (options.row && !keepRow) {\n          options.row = row;\n        }\n      }\n\n      watchers.forEach(function (watcher) {\n        watcher(row);\n      });\n    };\n\n    if (source !== options) {\n      options.watch = source.watch.bind(source);\n    }\n\n    return options;\n  },\n  _cellPrepared: function (cell, options) {\n    options.cellElement = getPublicElement($(cell));\n    this.executeAction(\"onCellPrepared\", options);\n  },\n  _rowPrepared: function ($row, options) {\n    elementData($row.get(0), \"options\", options);\n    options.rowElement = getPublicElement($row);\n    this.executeAction(\"onRowPrepared\", options);\n  },\n  _columnOptionChanged: function (e) {\n    var optionNames = e.optionNames;\n\n    if (gridCoreUtils.checkChanges(optionNames, [\"width\", \"visibleWidth\"])) {\n      var visibleColumns = this._columnsController.getVisibleColumns();\n\n      var widths = iteratorUtils.map(visibleColumns, function (column) {\n        var width = column.visibleWidth || column.width;\n        return isDefined(width) ? width : \"auto\";\n      });\n      this.setColumnWidths({\n        widths: widths,\n        optionNames: optionNames\n      });\n      return;\n    }\n\n    if (!this._requireReady) {\n      this.render();\n    }\n  },\n  getCellIndex: function ($cell) {\n    var cellIndex = $cell.length ? $cell[0].cellIndex : -1;\n    return cellIndex;\n  },\n  getTableElements: function () {\n    return this._tableElement || $();\n  },\n  getTableElement: function () {\n    return this._tableElement;\n  },\n  setTableElement: function (tableElement) {\n    this._tableElement = tableElement;\n  },\n  optionChanged: function (args) {\n    this.callBase(args);\n\n    switch (args.name) {\n      case \"cellHintEnabled\":\n      case \"onCellPrepared\":\n      case \"onRowPrepared\":\n      case \"onCellHoverChanged\":\n        this._invalidate(true, true);\n\n        args.handled = true;\n    }\n  },\n  init: function () {\n    var that = this;\n    that._scrollLeft = -1;\n    that._columnsController = that.getController(\"columns\");\n    that._dataController = that.getController(\"data\");\n    that._delayedTemplates = [];\n    that._templatesCache = {};\n    that.createAction(\"onCellClick\");\n    that.createAction(\"onRowClick\");\n    that.createAction(\"onCellDblClick\");\n    that.createAction(\"onRowDblClick\");\n    that.createAction(\"onCellHoverChanged\", {\n      excludeValidators: [\"disabled\", \"readOnly\"]\n    });\n    that.createAction(\"onCellPrepared\", {\n      excludeValidators: [\"disabled\", \"readOnly\"],\n      category: \"rendering\"\n    });\n    that.createAction(\"onRowPrepared\", {\n      excludeValidators: [\"disabled\", \"readOnly\"],\n      category: \"rendering\",\n      afterExecute: function (e) {\n        that._afterRowPrepared(e);\n      }\n    });\n\n    that._columnsController.columnsChanged.add(that._columnOptionChanged.bind(that));\n\n    that._dataController && that._dataController.changed.add(that._handleDataChanged.bind(that));\n  },\n  _afterRowPrepared: noop,\n  _handleDataChanged: function () {},\n  callbackNames: function () {\n    return [\"scrollChanged\"];\n  },\n  _updateScrollLeftPosition: function () {\n    var scrollLeft = this._scrollLeft;\n\n    if (scrollLeft >= 0) {\n      this._scrollLeft = 0;\n      this.scrollTo({\n        left: scrollLeft\n      });\n    }\n  },\n  scrollTo: function (pos) {\n    var $element = this.element();\n    var $scrollContainer = $element && $element.children(\".\" + this.addWidgetPrefix(SCROLL_CONTAINER_CLASS)).not(\".\" + this.addWidgetPrefix(CONTENT_FIXED_CLASS));\n\n    if (isDefined(pos) && isDefined(pos.left) && this._scrollLeft !== pos.left) {\n      this._scrollLeft = pos.left;\n      $scrollContainer && $scrollContainer.scrollLeft(pos.left);\n    }\n  },\n  _wrapTableInScrollContainer: function ($table) {\n    var $scrollContainer = $(\"<div>\");\n    var useNative = this.option(\"scrolling.useNative\");\n\n    if (false === useNative || \"auto\" === useNative && !nativeScrolling) {\n      $scrollContainer.addClass(this.addWidgetPrefix(SCROLLABLE_SIMULATED_CLASS));\n    }\n\n    eventsEngine.on($scrollContainer, \"scroll\", () => {\n      var scrollLeft = $scrollContainer.scrollLeft();\n\n      if (scrollLeft !== this._scrollLeft) {\n        this.scrollChanged.fire({\n          left: scrollLeft\n        }, this.name);\n      }\n    });\n    $scrollContainer.addClass(this.addWidgetPrefix(CONTENT_CLASS)).addClass(this.addWidgetPrefix(SCROLL_CONTAINER_CLASS)).append($table).appendTo(this.element());\n    this.setAria(\"role\", \"presentation\", $scrollContainer);\n    return $scrollContainer;\n  },\n  _updateContent: function ($newTableElement) {\n    this.setTableElement($newTableElement);\n\n    this._wrapTableInScrollContainer($newTableElement);\n  },\n  _findContentElement: noop,\n  _getWidths: function ($cellElements) {\n    var result = [];\n    var width;\n\n    if ($cellElements) {\n      iteratorUtils.each($cellElements, function (index, item) {\n        width = item.offsetWidth;\n\n        if (item.getBoundingClientRect) {\n          var clientRect = getBoundingRect(item);\n\n          if (clientRect.width > width - 1) {\n            width = clientRect.width;\n          }\n        }\n\n        result.push(width);\n      });\n    }\n\n    return result;\n  },\n  getColumnWidths: function ($tableElement) {\n    var result = [];\n    var $rows;\n    var $cells;\n    (this.option(\"forceApplyBindings\") || noop)();\n    $tableElement = $tableElement || this.getTableElement();\n\n    if ($tableElement) {\n      $rows = $tableElement.children(\"tbody:not(.dx-header)\").children();\n\n      for (var i = 0; i < $rows.length; i++) {\n        var $row = $rows.eq(i);\n        var isRowVisible = \"none\" !== $row.get(0).style.display && !$row.hasClass(\"dx-state-invisible\");\n\n        if (!$row.is(\".\" + GROUP_ROW_CLASS) && !$row.is(\".\" + DETAIL_ROW_CLASS) && !$row.is(\".\" + ERROR_ROW_CLASS) && isRowVisible) {\n          $cells = $row.children(\"td\");\n          break;\n        }\n      }\n\n      result = this._getWidths($cells);\n    }\n\n    return result;\n  },\n  getVisibleColumnIndex: function (columnIndex, rowIndex) {\n    return columnIndex;\n  },\n  setColumnWidths: function (_ref) {\n    var {\n      widths: widths,\n      $tableElement: $tableElement,\n      columns: columns,\n      fixed: fixed\n    } = _ref;\n    var $cols;\n    var width;\n    var minWidth;\n    var columnIndex;\n    var columnAutoWidth = this.option(\"columnAutoWidth\");\n    $tableElement = $tableElement || this.getTableElement();\n\n    if ($tableElement && $tableElement.length && widths) {\n      columnIndex = 0;\n      $cols = $tableElement.children(\"colgroup\").children(\"col\");\n      setWidth($cols, \"auto\");\n      columns = columns || this.getColumns(null, $tableElement);\n\n      for (var i = 0; i < columns.length; i++) {\n        if (columnAutoWidth && !fixed) {\n          width = columns[i].width;\n\n          if (width && !columns[i].command) {\n            width = columns[i].visibleWidth || width;\n            width = getWidthStyle(width);\n            minWidth = getWidthStyle(columns[i].minWidth || width);\n            var $rows = $rows || $tableElement.children().children(\".dx-row\").not(\".\" + DETAIL_ROW_CLASS);\n\n            for (var rowIndex = 0; rowIndex < $rows.length; rowIndex++) {\n              var row = $rows[rowIndex];\n              var cell = void 0;\n              var visibleIndex = this.getVisibleColumnIndex(i, rowIndex);\n\n              if (row.classList.contains(GROUP_ROW_CLASS)) {\n                cell = row.querySelector(\"td[aria-colindex='\".concat(visibleIndex + 1, \"']:not(.\").concat(GROUP_CELL_CLASS, \")\"));\n              } else {\n                cell = row.cells[visibleIndex];\n              }\n\n              if (cell) {\n                setCellWidth(cell, columns[i], width);\n                cell.style.minWidth = minWidth;\n              }\n            }\n          }\n        }\n\n        if (columns[i].colspan) {\n          columnIndex += columns[i].colspan;\n          continue;\n        }\n\n        width = widths[columnIndex];\n\n        if (\"adaptiveHidden\" === width) {\n          width = HIDDEN_COLUMNS_WIDTH;\n        }\n\n        if (\"number\" === typeof width) {\n          width = width.toFixed(3) + \"px\";\n        }\n\n        setWidth($cols.eq(columnIndex), isDefined(width) ? width : \"auto\");\n        columnIndex++;\n      }\n    }\n  },\n  getCellElements: function (rowIndex) {\n    return this._getCellElementsCore(rowIndex);\n  },\n  _getCellElementsCore: function (rowIndex) {\n    var $row = this._getRowElements().eq(rowIndex);\n\n    return $row.children();\n  },\n  _getCellElement: function (rowIndex, columnIdentifier) {\n    var $cell;\n    var $cells = this.getCellElements(rowIndex);\n\n    var columnVisibleIndex = this._getVisibleColumnIndex($cells, rowIndex, columnIdentifier);\n\n    if ($cells.length && columnVisibleIndex >= 0) {\n      $cell = $cells.eq(columnVisibleIndex);\n    }\n\n    if ($cell && $cell.length) {\n      return $cell;\n    }\n  },\n  _getRowElement: function (rowIndex) {\n    var that = this;\n    var $rowElement = $();\n    var $tableElements = that.getTableElements();\n    iteratorUtils.each($tableElements, function (_, tableElement) {\n      $rowElement = $rowElement.add(that._getRowElements($(tableElement)).eq(rowIndex));\n    });\n\n    if ($rowElement.length) {\n      return $rowElement;\n    }\n  },\n  getCellElement: function (rowIndex, columnIdentifier) {\n    return getPublicElement(this._getCellElement(rowIndex, columnIdentifier));\n  },\n  getRowElement: function (rowIndex) {\n    var $rows = this._getRowElement(rowIndex);\n\n    var elements = [];\n\n    if ($rows && !getPublicElement($rows).get) {\n      for (var i = 0; i < $rows.length; i++) {\n        elements.push($rows[i]);\n      }\n    } else {\n      elements = $rows;\n    }\n\n    return elements;\n  },\n  _getVisibleColumnIndex: function ($cells, rowIndex, columnIdentifier) {\n    if (isString(columnIdentifier)) {\n      var columnIndex = this._columnsController.columnOption(columnIdentifier, \"index\");\n\n      return this._columnsController.getVisibleIndex(columnIndex);\n    }\n\n    return columnIdentifier;\n  },\n  getColumnElements: function () {},\n  getColumns: function (rowIndex) {\n    return this._columnsController.getVisibleColumns(rowIndex);\n  },\n  getCell: function (cellPosition, rows) {\n    var $rows = rows || this._getRowElements();\n\n    var $cells;\n\n    if ($rows.length > 0 && cellPosition.rowIndex >= 0) {\n      if (\"virtual\" !== this.option(\"scrolling.mode\") && \"virtual\" !== this.option(\"scrolling.rowRenderingMode\")) {\n        cellPosition.rowIndex = cellPosition.rowIndex < $rows.length ? cellPosition.rowIndex : $rows.length - 1;\n      }\n\n      $cells = this.getCellElements(cellPosition.rowIndex);\n\n      if ($cells && $cells.length > 0) {\n        return $cells.eq($cells.length > cellPosition.columnIndex ? cellPosition.columnIndex : $cells.length - 1);\n      }\n    }\n  },\n  getRowsCount: function () {\n    var tableElement = this.getTableElement();\n\n    if (tableElement && 1 === tableElement.length) {\n      return tableElement[0].rows.length;\n    }\n\n    return 0;\n  },\n  _getRowElementsCore: function (tableElement) {\n    tableElement = tableElement || this.getTableElement();\n\n    if (tableElement) {\n      var hasRowTemplate = this.option().rowTemplate || this.option(\"dataRowTemplate\");\n      var tBodies = hasRowTemplate && tableElement.find(\"> tbody.\" + ROW_CLASS);\n      return tBodies && tBodies.length ? tBodies : tableElement.find(\"> tbody > .\" + ROW_CLASS + \", > .\" + ROW_CLASS);\n    }\n\n    return $();\n  },\n  _getRowElements: function (tableElement) {\n    return this._getRowElementsCore(tableElement);\n  },\n  getRowIndex: function ($row) {\n    return this._getRowElements().index($row);\n  },\n  getBoundingRect: function () {},\n  getName: function () {},\n  setScrollerSpacing: function (width) {\n    var $element = this.element();\n    var rtlEnabled = this.option(\"rtlEnabled\");\n    $element && $element.css({\n      paddingLeft: rtlEnabled ? width : \"\",\n      paddingRight: !rtlEnabled ? width : \"\"\n    });\n  },\n  isScrollbarVisible: function (isHorizontal) {\n    var $element = this.element();\n    var $tableElement = this._tableElement;\n\n    if ($element && $tableElement) {\n      return isHorizontal ? getOuterWidth($tableElement) - getWidth($element) > 0 : getOuterHeight($tableElement) - getHeight($element) > 0;\n    }\n\n    return false;\n  }\n});","map":{"version":3,"sources":["C:/Users/Zoran/source/repos/TransportApp/TransportLog-basic/node_modules/devextreme/esm/ui/grid_core/ui.grid_core.columns_view.js"],"names":["getOuterWidth","getWidth","getOuterHeight","getHeight","$","domAdapter","getWindow","eventsEngine","data","elementData","pointerEvents","name","clickEventName","dblclickEvent","browser","noop","setWidth","getPublicElement","isRenderer","isFunction","isString","isDefined","isNumeric","getBoundingRect","getDefaultAlignment","iteratorUtils","extend","modules","gridCoreUtils","columnStateMixin","when","Deferred","nativeScrolling","SCROLL_CONTAINER_CLASS","SCROLLABLE_SIMULATED_CLASS","GROUP_SPACE_CLASS","CONTENT_CLASS","TABLE_CLASS","TABLE_FIXED_CLASS","CONTENT_FIXED_CLASS","ROW_CLASS","GROUP_ROW_CLASS","GROUP_CELL_CLASS","DETAIL_ROW_CLASS","FILTER_ROW_CLASS","ERROR_ROW_CLASS","CELL_UPDATED_ANIMATION_CLASS","HIDDEN_COLUMNS_WIDTH","CELL_HINT_VISIBLE","FORM_FIELD_ITEM_CONTENT_CLASS","appendElementTemplate","render","options","container","append","content","subscribeToRowEvents","that","$table","touchTarget","touchCurrentTarget","timeoutId","clearTouchTargets","timeout","setTimeout","on","e","clearTimeout","type","target","currentTarget","down","join","createAction","event","closest","length","rowIndex","getRowIndex","rowElement","columns","getColumns","_rowPointerDown","_rowClick","_rowDblClick","getWidthStyle","width","setCellWidth","cell","column","style","maxWidth","copyAttributes","element","newElement","oldAttributes","attributes","newAttributes","i","nodeName","hasAttribute","removeAttribute","setAttribute","nodeValue","ColumnsView","View","inherit","_createScrollableOptions","scrollingOptions","option","useNativeScrolling","direction","bounceEnabled","useKeyboard","useNative","useSimulatedScrollbar","_updateCell","$cell","parameters","rowType","_cellPrepared","_createCell","alignment","createElement","textAlign","headerId","component","setAria","cssClass","addClass","command","addWidgetPrefix","colspan","attr","isBand","visibleWidth","minWidth","_createRow","rowObject","tagName","$element","concat","_isAltRow","row","dataIndex","_createTable","isAppend","_createColGroup","safari","appendTo","mozilla","ctrlKey","preventDefault","args","$row","parent","visibleColumns","_columnsController","getVisibleColumns","rowOptions","columnIndex","index","cellOptions","cells","isHeaderRow","hasClass","isDataRow","isMasterDetailRow","isGroupRow","isFilterRow","isDataRowWithTemplate","cellTemplate","isEditorShown","isEditing","showEditorAlways","isHeaderRowWithTemplate","headerCellTemplate","isGroupCellWithTemplate","groupIndex","groupCellTemplate","shouldShowHint","removeAttr","difference","scrollWidth","clientWidth","text","getOptions","$fieldItemContent","is","delegateTarget","resultOptions","cellElement","eventType","formItemOptions","getVisibleIndex","executeAction","colgroupElement","j","_createCol","col","renderDelayedTemplates","change","delayedTemplates","_delayedTemplates","syncTemplates","filter","template","async","asyncTemplates","_renderDelayedTemplatesCore","_renderDelayedTemplatesCoreAsync","templates","isAsync","date","Date","templateParameters","shift","doc","getDocument","_processTemplate","renderingTemplate","allowRenderToDetachedContainer","model","deferred","resolve","renderedTemplate","nodeType","templateID","getTemplate","_templatesCache","renderTemplate","templateDeferred","templateOptions","onRendered","renderAsync","push","templateDeferreds","reject","promise","_getBodies","tableElement","children","not","_needWrapRow","$tableElement","_this$_getBodies","hasRowTemplate","rowTemplate","_wrapRowIfNeed","isRefreshing","_tableElement","needWrapRow","$tbody","_appendRow","appendTemplate","_resizeCore","scrollLeft","_scrollLeft","scrollTo","left","_renderCore","$root","_renderTable","changeType","_renderRows","rows","_getRows","columnIndices","changeTypes","_renderRow","$wrappedRow","_renderCells","_addWatchMethod","_rowPrepared","_needRenderCell","indexOf","_renderCell","value","values","oldValue","oldValues","_updateCells","$rowElement","$newRowElement","$cells","$newCells","highlightChanges","cellUpdatedClass","forEach","eq","$newCell","replaceWith","get","_setCellAriaAttributes","columnIndexOffset","getColumnIndexOffset","ariaColIndex","_getCellOptions","cellIndex","findIndex","_renderCellContent","appendChild","renderOptions","_getCellTemplate","done","isAltRow","source","watchers","watch","getter","updateValueFunc","updateRowFunc","watcher","newValue","JSON","stringify","splice","update","keepRow","isExpanded","bind","_columnOptionChanged","optionNames","checkChanges","widths","map","setColumnWidths","_requireReady","getCellIndex","getTableElements","getTableElement","setTableElement","optionChanged","callBase","_invalidate","handled","init","getController","_dataController","excludeValidators","category","afterExecute","_afterRowPrepared","columnsChanged","add","changed","_handleDataChanged","callbackNames","_updateScrollLeftPosition","pos","$scrollContainer","_wrapTableInScrollContainer","scrollChanged","fire","_updateContent","$newTableElement","_findContentElement","_getWidths","$cellElements","result","each","item","offsetWidth","getBoundingClientRect","clientRect","getColumnWidths","$rows","isRowVisible","display","getVisibleColumnIndex","_ref","fixed","$cols","columnAutoWidth","visibleIndex","classList","contains","querySelector","toFixed","getCellElements","_getCellElementsCore","_getRowElements","_getCellElement","columnIdentifier","columnVisibleIndex","_getVisibleColumnIndex","_getRowElement","$tableElements","_","getCellElement","getRowElement","elements","columnOption","getColumnElements","getCell","cellPosition","getRowsCount","_getRowElementsCore","tBodies","find","getName","setScrollerSpacing","rtlEnabled","css","paddingLeft","paddingRight","isScrollbarVisible","isHorizontal"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SACIA,aADJ,EAEIC,QAFJ,EAGIC,cAHJ,EAIIC,SAJJ,QAKO,uBALP;AAMA,OAAOC,CAAP,MAAc,qBAAd;AACA,OAAOC,UAAP,MAAuB,wBAAvB;AACA,SACIC,SADJ,QAEO,yBAFP;AAGA,OAAOC,YAAP,MAAyB,iCAAzB;AACA,SACIC,IAAI,IAAIC,WADZ,QAEO,yBAFP;AAGA,OAAOC,aAAP,MAA0B,sBAA1B;AACA,SACIC,IAAI,IAAIC,cADZ,QAEO,oBAFP;AAGA,SACID,IAAI,IAAIE,aADZ,QAEO,2BAFP;AAGA,OAAOC,OAAP,MAAoB,0BAApB;AACA,SACIC,IADJ,QAEO,yBAFP;AAGA,SACIC,QADJ,QAEO,wBAFP;AAGA,SACIC,gBADJ,QAEO,oBAFP;AAGA,SACIC,UADJ,EAEIC,UAFJ,EAGIC,QAHJ,EAIIC,SAJJ,EAKIC,SALJ,QAMO,uBANP;AAOA,SACIC,eADJ,EAEIC,mBAFJ,QAGO,2BAHP;AAIA,OAAO,KAAKC,aAAZ,MAA+B,2BAA/B;AACA,SACIC,MADJ,QAEO,yBAFP;AAGA,OAAOC,OAAP,MAAoB,wBAApB;AACA,OAAOC,aAAP,MAA0B,sBAA1B;AACA,OAAOC,gBAAP,MAA6B,mCAA7B;AACA,SACIC,IADJ,EAEIC,QAFJ,QAGO,2BAHP;AAIA,SACIC,eADJ,QAEO,0BAFP;AAGA,IAAIC,sBAAsB,GAAG,kBAA7B;AACA,IAAIC,0BAA0B,GAAG,sBAAjC;AACA,IAAIC,iBAAiB,GAAG,aAAxB;AACA,IAAIC,aAAa,GAAG,SAApB;AACA,IAAIC,WAAW,GAAG,OAAlB;AACA,IAAIC,iBAAiB,GAAG,aAAxB;AACA,IAAIC,mBAAmB,GAAG,eAA1B;AACA,IAAIC,SAAS,GAAG,QAAhB;AACA,IAAIC,eAAe,GAAG,cAAtB;AACA,IAAIC,gBAAgB,GAAG,eAAvB;AACA,IAAIC,gBAAgB,GAAG,sBAAvB;AACA,IAAIC,gBAAgB,GAAG,YAAvB;AACA,IAAIC,eAAe,GAAG,cAAtB;AACA,IAAIC,4BAA4B,GAAG,wBAAnC;AACA,IAAIC,oBAAoB,GAAG,UAA3B;AACA,IAAIC,iBAAiB,GAAG,mBAAxB;AACA,IAAIC,6BAA6B,GAAG,uBAApC;AACA,IAAIC,qBAAqB,GAAG;AACxBC,EAAAA,MAAM,EAAE,UAASC,OAAT,EAAkB;AACtBA,IAAAA,OAAO,CAACC,SAAR,CAAkBC,MAAlB,CAAyBF,OAAO,CAACG,OAAjC;AACH;AAHuB,CAA5B;;AAKA,IAAIC,oBAAoB,GAAG,UAASC,IAAT,EAAeC,MAAf,EAAuB;AAC9C,MAAIC,WAAJ;AACA,MAAIC,kBAAJ;AACA,MAAIC,SAAJ;;AAEA,WAASC,iBAAT,CAA2BC,OAA3B,EAAoC;AAChC,WAAOC,UAAU,CAAE,YAAW;AAC1BL,MAAAA,WAAW,GAAGC,kBAAkB,GAAG,IAAnC;AACH,KAFgB,EAEbG,OAFa,CAAjB;AAGH;;AACDxD,EAAAA,YAAY,CAAC0D,EAAb,CAAgBP,MAAhB,EAAwB,qBAAxB,EAA+C,SAA/C,EAA2D,UAASQ,CAAT,EAAY;AACnEC,IAAAA,YAAY,CAACN,SAAD,CAAZ;;AACA,QAAI,iBAAiBK,CAAC,CAACE,IAAvB,EAA6B;AACzBT,MAAAA,WAAW,GAAGO,CAAC,CAACG,MAAhB;AACAT,MAAAA,kBAAkB,GAAGM,CAAC,CAACI,aAAvB;AACAT,MAAAA,SAAS,GAAGC,iBAAiB,CAAC,GAAD,CAA7B;AACH,KAJD,MAIO;AACHD,MAAAA,SAAS,GAAGC,iBAAiB,EAA7B;AACH;AACJ,GATD;AAUAvD,EAAAA,YAAY,CAAC0D,EAAb,CAAgBP,MAAhB,EAAwB,CAAC9C,cAAD,EAAiBC,aAAjB,EAAgCH,aAAa,CAAC6D,IAA9C,EAAoDC,IAApD,CAAyD,GAAzD,CAAxB,EAAuF,SAAvF,EAAkGf,IAAI,CAACgB,YAAL,CAAmB,UAASP,CAAT,EAAY;AAC7H,QAAIQ,KAAK,GAAGR,CAAC,CAACQ,KAAd;;AACA,QAAIf,WAAJ,EAAiB;AACbe,MAAAA,KAAK,CAACL,MAAN,GAAeV,WAAf;AACAe,MAAAA,KAAK,CAACJ,aAAN,GAAsBV,kBAAtB;AACH;;AACD,QAAI,CAACxD,CAAC,CAACsE,KAAK,CAACL,MAAP,CAAD,CAAgBM,OAAhB,CAAwB,GAAxB,EAA6BC,MAAlC,EAA0C;AACtCV,MAAAA,CAAC,CAACW,QAAF,GAAapB,IAAI,CAACqB,WAAL,CAAiBJ,KAAK,CAACJ,aAAvB,CAAb;;AACA,UAAIJ,CAAC,CAACW,QAAF,IAAc,CAAlB,EAAqB;AACjBX,QAAAA,CAAC,CAACa,UAAF,GAAe9D,gBAAgB,CAACb,CAAC,CAACsE,KAAK,CAACJ,aAAP,CAAF,CAA/B;AACAJ,QAAAA,CAAC,CAACc,OAAF,GAAYvB,IAAI,CAACwB,UAAL,EAAZ;;AACA,YAAIP,KAAK,CAACN,IAAN,KAAe1D,aAAa,CAAC6D,IAAjC,EAAuC;AACnCd,UAAAA,IAAI,CAACyB,eAAL,CAAqBhB,CAArB;AACH,SAFD,MAEO,IAAIQ,KAAK,CAACN,IAAN,KAAexD,cAAnB,EAAmC;AACtC6C,UAAAA,IAAI,CAAC0B,SAAL,CAAejB,CAAf;AACH,SAFM,MAEA;AACHT,UAAAA,IAAI,CAAC2B,YAAL,CAAkBlB,CAAlB;AACH;AACJ;AACJ;AACJ,GApBiG,CAAlG;AAqBH,CAzCD;;AA0CA,IAAImB,aAAa,GAAG,UAASC,KAAT,EAAgB;AAChC,MAAI,WAAWA,KAAf,EAAsB;AAClB,WAAO,EAAP;AACH;;AACD,SAAOhE,SAAS,CAACgE,KAAD,CAAT,GAAmBA,KAAK,GAAG,IAA3B,GAAkCA,KAAzC;AACH,CALD;;AAMA,IAAIC,YAAY,GAAG,UAASC,IAAT,EAAeC,MAAf,EAAuBH,KAAvB,EAA8B;AAC7CE,EAAAA,IAAI,CAACE,KAAL,CAAWJ,KAAX,GAAmBE,IAAI,CAACE,KAAL,CAAWC,QAAX,GAAsB,WAAWF,MAAM,CAACH,KAAlB,GAA0B,EAA1B,GAA+BA,KAAxE;AACH,CAFD;;AAGA,IAAIM,cAAc,GAAG,UAASC,OAAT,EAAkBC,UAAlB,EAA8B;AAC/C,MAAI,CAACD,OAAD,IAAY,CAACC,UAAjB,EAA6B;AACzB;AACH;;AACD,MAAIC,aAAa,GAAGF,OAAO,CAACG,UAA5B;AACA,MAAIC,aAAa,GAAGH,UAAU,CAACE,UAA/B;AACA,MAAIE,CAAJ;;AACA,OAAKA,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGH,aAAa,CAACnB,MAA9B,EAAsCsB,CAAC,EAAvC,EAA2C;AACvC,QAAIvF,IAAI,GAAGoF,aAAa,CAACG,CAAD,CAAb,CAAiBC,QAA5B;;AACA,QAAI,CAACL,UAAU,CAACM,YAAX,CAAwBzF,IAAxB,CAAL,EAAoC;AAChCkF,MAAAA,OAAO,CAACQ,eAAR,CAAwB1F,IAAxB;AACH;AACJ;;AACD,OAAKuF,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGD,aAAa,CAACrB,MAA9B,EAAsCsB,CAAC,EAAvC,EAA2C;AACvCL,IAAAA,OAAO,CAACS,YAAR,CAAqBL,aAAa,CAACC,CAAD,CAAb,CAAiBC,QAAtC,EAAgDF,aAAa,CAACC,CAAD,CAAb,CAAiBK,SAAjE;AACH;AACJ,CAhBD;;AAiBA,OAAO,IAAIC,WAAW,GAAG7E,OAAO,CAAC8E,IAAR,CAAaC,OAAb,CAAqB7E,gBAArB,EAAuC6E,OAAvC,CAA+C;AACpEC,EAAAA,wBAAwB,EAAE,YAAW;AACjC,QAAIC,gBAAgB,GAAG,KAAKC,MAAL,CAAY,WAAZ,CAAvB;AACA,QAAIC,kBAAkB,GAAG,KAAKD,MAAL,CAAY,qBAAZ,CAAzB;AACA,QAAIzD,OAAO,GAAG1B,MAAM,CAAC,EAAD,EAAKkF,gBAAL,EAAuB;AACvCG,MAAAA,SAAS,EAAE,MAD4B;AAEvCC,MAAAA,aAAa,EAAE,KAFwB;AAGvCC,MAAAA,WAAW,EAAE;AAH0B,KAAvB,CAApB;;AAKA,QAAI,KAAK,CAAL,KAAWH,kBAAf,EAAmC;AAC/BA,MAAAA,kBAAkB,GAAG,IAArB;AACH;;AACD,QAAI,WAAWA,kBAAf,EAAmC;AAC/B,aAAO1D,OAAO,CAAC8D,SAAf;AACA,aAAO9D,OAAO,CAAC+D,qBAAf;AACH,KAHD,MAGO;AACH/D,MAAAA,OAAO,CAAC8D,SAAR,GAAoB,CAAC,CAACJ,kBAAtB;AACA1D,MAAAA,OAAO,CAAC+D,qBAAR,GAAgC,CAACL,kBAAjC;AACH;;AACD,WAAO1D,OAAP;AACH,GApBmE;AAqBpEgE,EAAAA,WAAW,EAAE,UAASC,KAAT,EAAgBC,UAAhB,EAA4B;AACrC,QAAIA,UAAU,CAACC,OAAf,EAAwB;AACpB,WAAKC,aAAL,CAAmBH,KAAnB,EAA0BC,UAA1B;AACH;AACJ,GAzBmE;AA0BpEG,EAAAA,WAAW,EAAE,UAASrE,OAAT,EAAkB;AAC3B,QAAIqC,MAAM,GAAGrC,OAAO,CAACqC,MAArB;AACA,QAAIiC,SAAS,GAAGjC,MAAM,CAACiC,SAAP,IAAoBlG,mBAAmB,CAAC,KAAKqF,MAAL,CAAY,YAAZ,CAAD,CAAvD;AACA,QAAIrB,IAAI,GAAGnF,UAAU,CAACsH,aAAX,CAAyB,IAAzB,CAAX;AACAnC,IAAAA,IAAI,CAACE,KAAL,CAAWkC,SAAX,GAAuBF,SAAvB;AACA,QAAIL,KAAK,GAAGjH,CAAC,CAACoF,IAAD,CAAb;;AACA,QAAI,WAAWpC,OAAO,CAACmE,OAAnB,IAA8B9B,MAAM,CAACoC,QAArC,IAAiD,CAACpC,MAAM,CAACrB,IAA7D,EAAmE;AAC/D,UAAI,KAAK0D,SAAL,CAAejB,MAAf,CAAsB,mBAAtB,CAAJ,EAAgD;AAC5C,aAAKkB,OAAL,CAAa,aAAb,EAA4BtC,MAAM,CAACoC,QAAnC,EAA6CR,KAA7C;AACH;AACJ;;AACD,QAAI5B,MAAM,CAACuC,QAAX,EAAqB;AACjBX,MAAAA,KAAK,CAACY,QAAN,CAAexC,MAAM,CAACuC,QAAtB;AACH;;AACD,QAAI,aAAavC,MAAM,CAACyC,OAAxB,EAAiC;AAC7Bb,MAAAA,KAAK,CAACY,QAAN,CAAexC,MAAM,CAACuC,QAAtB;AACAX,MAAAA,KAAK,CAACY,QAAN,CAAe,KAAKE,eAAL,CAAqBhG,iBAArB,CAAf;AACH;;AACD,QAAIsD,MAAM,CAAC2C,OAAP,GAAiB,CAArB,EAAwB;AACpBf,MAAAA,KAAK,CAACgB,IAAN,CAAW,SAAX,EAAsB5C,MAAM,CAAC2C,OAA7B;AACH,KAFD,MAEO,IAAI,CAAC3C,MAAM,CAAC6C,MAAR,IAAkB,WAAW7C,MAAM,CAAC8C,YAApC,IAAoD,KAAK1B,MAAL,CAAY,iBAAZ,CAAxD,EAAwF;AAC3F,UAAIpB,MAAM,CAACH,KAAP,IAAgBG,MAAM,CAAC+C,QAA3B,EAAqC;AACjChD,QAAAA,IAAI,CAACE,KAAL,CAAW8C,QAAX,GAAsBnD,aAAa,CAACI,MAAM,CAAC+C,QAAP,IAAmB/C,MAAM,CAACH,KAA3B,CAAnC;AACH;;AACD,UAAIG,MAAM,CAACH,KAAX,EAAkB;AACdC,QAAAA,YAAY,CAACC,IAAD,EAAOC,MAAP,EAAeJ,aAAa,CAACI,MAAM,CAACH,KAAR,CAA5B,CAAZ;AACH;AACJ;;AACD,WAAO+B,KAAP;AACH,GAvDmE;AAwDpEoB,EAAAA,UAAU,EAAE,UAASC,SAAT,EAAoBC,OAApB,EAA6B;AACrCA,IAAAA,OAAO,GAAGA,OAAO,IAAI,IAArB;AACA,QAAIC,QAAQ,GAAGxI,CAAC,CAAC,IAAIyI,MAAJ,CAAWF,OAAX,EAAoB,GAApB,CAAD,CAAD,CAA4BV,QAA5B,CAAqCzF,SAArC,CAAf;AACA,SAAKuF,OAAL,CAAa,MAAb,EAAqB,KAArB,EAA4Ba,QAA5B;AACA,WAAOA,QAAP;AACH,GA7DmE;AA8DpEE,EAAAA,SAAS,EAAE,UAASC,GAAT,EAAc;AACrB,WAAOA,GAAG,IAAIA,GAAG,CAACC,SAAJ,GAAgB,CAAhB,KAAsB,CAApC;AACH,GAhEmE;AAiEpEC,EAAAA,YAAY,EAAE,UAASjE,OAAT,EAAkBkE,QAAlB,EAA4B;AACtC,QAAIzF,IAAI,GAAG,IAAX;AACA,QAAIC,MAAM,GAAGtD,CAAC,CAAC,SAAD,CAAD,CAAa6H,QAAb,CAAsBxE,IAAI,CAAC0E,eAAL,CAAqB9F,WAArB,CAAtB,EAAyD4F,QAAzD,CAAkExE,IAAI,CAAC0E,eAAL,CAAqB7F,iBAArB,CAAlE,CAAb;;AACA,QAAI0C,OAAO,IAAI,CAACkE,QAAhB,EAA0B;AACtBxF,MAAAA,MAAM,CAACJ,MAAP,CAAcG,IAAI,CAAC0F,eAAL,CAAqBnE,OAArB,CAAd;;AACA,UAAIlE,OAAO,CAACsI,MAAZ,EAAoB;AAChB1F,QAAAA,MAAM,CAACJ,MAAP,CAAclD,CAAC,CAAC,SAAD,CAAD,CAAakD,MAAb,CAAoB,MAApB,CAAd;AACH;;AACDG,MAAAA,IAAI,CAACsE,OAAL,CAAa,MAAb,EAAqB,cAArB,EAAqCrE,MAArC;AACH,KAND,MAMO;AACHD,MAAAA,IAAI,CAACsE,OAAL,CAAa,QAAb,EAAuB,IAAvB,EAA6BrE,MAA7B;AACH;;AACD,SAAKqE,OAAL,CAAa,MAAb,EAAqB,cAArB,EAAqC3H,CAAC,CAAC,SAAD,CAAD,CAAaiJ,QAAb,CAAsB3F,MAAtB,CAArC;;AACA,QAAIwF,QAAJ,EAAc;AACV,aAAOxF,MAAP;AACH;;AACD,QAAI5C,OAAO,CAACwI,OAAZ,EAAqB;AACjB/I,MAAAA,YAAY,CAAC0D,EAAb,CAAgBP,MAAhB,EAAwB,WAAxB,EAAqC,IAArC,EAA4C,UAASQ,CAAT,EAAY;AACpD,YAAIA,CAAC,CAACqF,OAAN,EAAe;AACXrF,UAAAA,CAAC,CAACsF,cAAF;AACH;AACJ,OAJD;AAKH;;AACD,QAAI/F,IAAI,CAACoD,MAAL,CAAY,iBAAZ,CAAJ,EAAoC;AAChCtG,MAAAA,YAAY,CAAC0D,EAAb,CAAgBP,MAAhB,EAAwB,WAAxB,EAAqC,cAArC,EAAqD,KAAKe,YAAL,CAAmB,UAASgF,IAAT,EAAe;AACnF,YAAIvF,CAAC,GAAGuF,IAAI,CAAC/E,KAAb;AACA,YAAIkE,QAAQ,GAAGxI,CAAC,CAAC8D,CAAC,CAACG,MAAH,CAAhB;AACA,YAAIgD,KAAK,GAAGjH,CAAC,CAAC8D,CAAC,CAACI,aAAH,CAAb;AACA,YAAIoF,IAAI,GAAGrC,KAAK,CAACsC,MAAN,EAAX;;AACA,YAAIC,cAAc,GAAGnG,IAAI,CAACoG,kBAAL,CAAwBC,iBAAxB,EAArB;;AACA,YAAIC,UAAU,GAAGL,IAAI,CAAClJ,IAAL,CAAU,SAAV,CAAjB;AACA,YAAIwJ,WAAW,GAAG3C,KAAK,CAAC4C,KAAN,EAAlB;AACA,YAAIC,WAAW,GAAGH,UAAU,IAAIA,UAAU,CAACI,KAAzB,IAAkCJ,UAAU,CAACI,KAAX,CAAiBH,WAAjB,CAApD;AACA,YAAIvE,MAAM,GAAGyE,WAAW,GAAGA,WAAW,CAACzE,MAAf,GAAwBmE,cAAc,CAACI,WAAD,CAA9D;AACA,YAAII,WAAW,GAAGV,IAAI,CAACW,QAAL,CAAc,eAAd,CAAlB;AACA,YAAIC,SAAS,GAAGZ,IAAI,CAACW,QAAL,CAAc,aAAd,CAAhB;AACA,YAAIE,iBAAiB,GAAGb,IAAI,CAACW,QAAL,CAAc1H,gBAAd,CAAxB;AACA,YAAI6H,UAAU,GAAGd,IAAI,CAACW,QAAL,CAAc5H,eAAd,CAAjB;AACA,YAAIgI,WAAW,GAAGf,IAAI,CAACW,QAAL,CAAc5G,IAAI,CAAC0E,eAAL,CAAqBvF,gBAArB,CAAd,CAAlB;AACA,YAAI8H,qBAAqB,GAAGJ,SAAS,KAAK,CAAC7E,MAAD,IAAWA,MAAM,CAACkF,YAAvB,CAArC;AACA,YAAIC,aAAa,GAAGN,SAAS,IAAIJ,WAAb,KAA6BH,UAAU,CAACc,SAAX,IAAwBX,WAAW,CAACW,SAApC,KAAkD,SAASpF,MAAT,IAAmB,KAAK,CAAL,KAAWA,MAA9B,GAAuC,KAAK,CAA5C,GAAgDA,MAAM,CAACqF,gBAAzG,CAA7B,CAApB;AACA,YAAIC,uBAAuB,GAAGX,WAAW,KAAK,CAAC3E,MAAD,IAAWA,MAAM,CAACuF,kBAAvB,CAAzC;AACA,YAAIC,uBAAuB,GAAGT,UAAU,KAAK,CAAC/E,MAAD,IAAWA,MAAM,CAACyF,UAAP,IAAqBzF,MAAM,CAAC0F,iBAA5C,CAAxC;AACA,YAAIC,cAAc,GAAG,CAACb,iBAAD,IAAsB,CAACE,WAAvB,IAAsC,CAACG,aAAvC,IAAwD,CAACF,qBAAzD,IAAkF,CAACK,uBAAnF,IAA8G,CAACE,uBAApI;;AACA,YAAIG,cAAJ,EAAoB;AAChB,cAAIxC,QAAQ,CAACpI,IAAT,CAAcwC,iBAAd,CAAJ,EAAsC;AAClC4F,YAAAA,QAAQ,CAACyC,UAAT,CAAoB,OAApB;AACAzC,YAAAA,QAAQ,CAACpI,IAAT,CAAcwC,iBAAd,EAAiC,KAAjC;AACH;;AACD,cAAIsI,UAAU,GAAG1C,QAAQ,CAAC,CAAD,CAAR,CAAY2C,WAAZ,GAA0B3C,QAAQ,CAAC,CAAD,CAAR,CAAY4C,WAAvD;;AACA,cAAIF,UAAU,GAAG,CAAb,IAAkB,CAACjK,SAAS,CAACuH,QAAQ,CAACP,IAAT,CAAc,OAAd,CAAD,CAAhC,EAA0D;AACtDO,YAAAA,QAAQ,CAACP,IAAT,CAAc,OAAd,EAAuBO,QAAQ,CAAC6C,IAAT,EAAvB;AACA7C,YAAAA,QAAQ,CAACpI,IAAT,CAAcwC,iBAAd,EAAiC,IAAjC;AACH;AACJ;AACJ,OA/BoD,CAArD;AAgCH;;AACD,QAAI0I,UAAU,GAAG,UAAShH,KAAT,EAAgB;AAC7B,UAAI2C,KAAK,GAAGjH,CAAC,CAACsE,KAAK,CAACJ,aAAP,CAAb;AACA,UAAIqH,iBAAiB,GAAGvL,CAAC,CAACsE,KAAK,CAACL,MAAP,CAAD,CAAgBM,OAAhB,CAAwB,MAAM1B,6BAA9B,CAAxB;AACA,UAAIyG,IAAI,GAAGrC,KAAK,CAACsC,MAAN,EAAX;AACA,UAAII,UAAU,GAAGL,IAAI,CAAClJ,IAAL,CAAU,SAAV,CAAjB;AACA,UAAI4C,OAAO,GAAG2G,UAAU,IAAIA,UAAU,CAACI,KAAzB,IAAkCJ,UAAU,CAACI,KAAX,CAAiB9C,KAAK,CAAC4C,KAAN,EAAjB,CAAhD;;AACA,UAAI,CAAC5C,KAAK,CAAC1C,OAAN,CAAc,OAAd,EAAuBiH,EAAvB,CAA0BlH,KAAK,CAACmH,cAAhC,CAAL,EAAsD;AAClD;AACH;;AACD,UAAIC,aAAa,GAAGpK,MAAM,CAAC,EAAD,EAAK0B,OAAL,EAAc;AACpC2I,QAAAA,WAAW,EAAE9K,gBAAgB,CAACoG,KAAD,CADO;AAEpC3C,QAAAA,KAAK,EAAEA,KAF6B;AAGpCsH,QAAAA,SAAS,EAAEtH,KAAK,CAACN;AAHmB,OAAd,CAA1B;AAKA0H,MAAAA,aAAa,CAACjH,QAAd,GAAyBpB,IAAI,CAACqB,WAAL,CAAiB4E,IAAjB,CAAzB;;AACA,UAAIiC,iBAAiB,CAAC/G,MAAtB,EAA8B;AAC1B,YAAIqH,eAAe,GAAGN,iBAAiB,CAACnL,IAAlB,CAAuB,cAAvB,CAAtB;;AACA,YAAIyL,eAAe,CAACxG,MAApB,EAA4B;AACxBqG,UAAAA,aAAa,CAACrG,MAAd,GAAuBwG,eAAe,CAACxG,MAAvC;AACAqG,UAAAA,aAAa,CAAC9B,WAAd,GAA4BvG,IAAI,CAACoG,kBAAL,CAAwBqC,eAAxB,CAAwCJ,aAAa,CAACrG,MAAd,CAAqBwE,KAA7D,CAA5B;AACH;AACJ;;AACD,aAAO6B,aAAP;AACH,KAvBD;;AAwBAvL,IAAAA,YAAY,CAAC0D,EAAb,CAAgBP,MAAhB,EAAwB,WAAxB,EAAqC,cAArC,EAAsD,UAASQ,CAAT,EAAY;AAC9D,UAAId,OAAO,GAAGsI,UAAU,CAACxH,CAAD,CAAxB;AACAd,MAAAA,OAAO,IAAIK,IAAI,CAAC0I,aAAL,CAAmB,oBAAnB,EAAyC/I,OAAzC,CAAX;AACH,KAHD;AAIA7C,IAAAA,YAAY,CAAC0D,EAAb,CAAgBP,MAAhB,EAAwB,UAAxB,EAAoC,cAApC,EAAqD,UAASQ,CAAT,EAAY;AAC7D,UAAId,OAAO,GAAGsI,UAAU,CAACxH,CAAD,CAAxB;AACAd,MAAAA,OAAO,IAAIK,IAAI,CAAC0I,aAAL,CAAmB,oBAAnB,EAAyC/I,OAAzC,CAAX;AACH,KAHD;AAIA7C,IAAAA,YAAY,CAAC0D,EAAb,CAAgBP,MAAhB,EAAwB9C,cAAxB,EAAwC,cAAxC,EAAyD,UAASsD,CAAT,EAAY;AACjE,UAAId,OAAO,GAAGsI,UAAU,CAACxH,CAAD,CAAxB;AACAd,MAAAA,OAAO,IAAIK,IAAI,CAAC0I,aAAL,CAAmB,aAAnB,EAAkC/I,OAAlC,CAAX;AACH,KAHD;AAIA7C,IAAAA,YAAY,CAAC0D,EAAb,CAAgBP,MAAhB,EAAwB7C,aAAxB,EAAuC,cAAvC,EAAwD,UAASqD,CAAT,EAAY;AAChE,UAAId,OAAO,GAAGsI,UAAU,CAACxH,CAAD,CAAxB;AACAd,MAAAA,OAAO,IAAIK,IAAI,CAAC0I,aAAL,CAAmB,gBAAnB,EAAqC/I,OAArC,CAAX;AACH,KAHD;AAIAI,IAAAA,oBAAoB,CAACC,IAAD,EAAOC,MAAP,CAApB;AACA,WAAOA,MAAP;AACH,GApKmE;AAqKpEwB,EAAAA,eAAe,EAAEnE,IArKmD;AAsKpEoE,EAAAA,SAAS,EAAEpE,IAtKyD;AAuKpEqE,EAAAA,YAAY,EAAErE,IAvKsD;AAwKpEoI,EAAAA,eAAe,EAAE,UAASnE,OAAT,EAAkB;AAC/B,QAAIoH,eAAe,GAAGhM,CAAC,CAAC,YAAD,CAAvB;;AACA,SAAK,IAAI8F,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGlB,OAAO,CAACJ,MAA5B,EAAoCsB,CAAC,EAArC,EAAyC;AACrC,UAAIkC,OAAO,GAAGpD,OAAO,CAACkB,CAAD,CAAP,CAAWkC,OAAX,IAAsB,CAApC;;AACA,WAAK,IAAIiE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGjE,OAApB,EAA6BiE,CAAC,EAA9B,EAAkC;AAC9BD,QAAAA,eAAe,CAAC9I,MAAhB,CAAuB,KAAKgJ,UAAL,CAAgBtH,OAAO,CAACkB,CAAD,CAAvB,CAAvB;AACH;AACJ;;AACD,WAAOkG,eAAP;AACH,GAjLmE;AAkLpEE,EAAAA,UAAU,EAAE,UAAS7G,MAAT,EAAiB;AACzB,QAAIH,KAAK,GAAGG,MAAM,CAAC8C,YAAP,IAAuB9C,MAAM,CAACH,KAA1C;;AACA,QAAI,qBAAqBA,KAAzB,EAAgC;AAC5BA,MAAAA,KAAK,GAAGvC,oBAAR;AACH;;AACD,QAAIwJ,GAAG,GAAGnM,CAAC,CAAC,OAAD,CAAX;AACAY,IAAAA,QAAQ,CAACuL,GAAD,EAAMjH,KAAN,CAAR;AACA,WAAOiH,GAAP;AACH,GA1LmE;AA2LpEC,EAAAA,sBAAsB,EAAE,UAASC,MAAT,EAAiB;AACrC,QAAIC,gBAAgB,GAAG,KAAKC,iBAA5B;AACA,QAAIC,aAAa,GAAGF,gBAAgB,CAACG,MAAjB,CAAwBC,QAAQ,IAAI,CAACA,QAAQ,CAACC,KAA9C,CAApB;AACA,QAAIC,cAAc,GAAGN,gBAAgB,CAACG,MAAjB,CAAwBC,QAAQ,IAAIA,QAAQ,CAACC,KAA7C,CAArB;AACA,SAAKJ,iBAAL,GAAyB,EAAzB;;AACA,SAAKM,2BAAL,CAAiCL,aAAjC,EAAgD,KAAhD,EAAuDH,MAAvD;;AACA,SAAKS,gCAAL,CAAsCF,cAAtC;AACH,GAlMmE;AAmMpEE,EAAAA,gCAAgC,EAAE,UAASC,SAAT,EAAoB;AAClD,QAAI1J,IAAI,GAAG,IAAX;;AACA,QAAI0J,SAAS,CAACvI,MAAd,EAAsB;AAClBtE,MAAAA,SAAS,GAAG0D,UAAZ,CAAwB,YAAW;AAC/BP,QAAAA,IAAI,CAACwJ,2BAAL,CAAiCE,SAAjC,EAA4C,IAA5C;AACH,OAFD;AAGH;AACJ,GA1MmE;AA2MpEF,EAAAA,2BAA2B,EAAE,UAASE,SAAT,EAAoBC,OAApB,EAA6BX,MAA7B,EAAqC;AAC9D,QAAIY,IAAI,GAAG,IAAIC,IAAJ,EAAX;;AACA,WAAOH,SAAS,CAACvI,MAAjB,EAAyB;AACrB,UAAI2I,kBAAkB,GAAGJ,SAAS,CAACK,KAAV,EAAzB;AACA,UAAIpK,OAAO,GAAGmK,kBAAkB,CAACnK,OAAjC;AACA,UAAIqK,GAAG,GAAGpN,UAAU,CAACqN,WAAX,EAAV;;AACA,UAAI,CAACN,OAAD,IAAYhN,CAAC,CAACgD,OAAO,CAACC,SAAT,CAAD,CAAqBsB,OAArB,CAA6B8I,GAA7B,EAAkC7I,MAAlD,EAA0D;AACtD,YAAI6H,MAAJ,EAAY;AACRrJ,UAAAA,OAAO,CAACqJ,MAAR,GAAiBA,MAAjB;AACH;;AACDc,QAAAA,kBAAkB,CAACT,QAAnB,CAA4B3J,MAA5B,CAAmCC,OAAnC;AACH;;AACD,UAAIgK,OAAO,IAAI,IAAIE,IAAJ,KAAWD,IAAX,GAAkB,EAAjC,EAAqC;AACjC,aAAKH,gCAAL,CAAsCC,SAAtC;;AACA;AACH;AACJ;;AACD,QAAI,CAACA,SAAS,CAACvI,MAAX,IAAqB,KAAK+H,iBAAL,CAAuB/H,MAAhD,EAAwD;AACpD,WAAK4H,sBAAL;AACH;AACJ,GA/NmE;AAgOpEmB,EAAAA,gBAAgB,EAAE,UAASb,QAAT,EAAmB;AACjC,QAAIc,iBAAJ;;AACA,QAAId,QAAQ,IAAIA,QAAQ,CAAC3J,MAArB,IAA+B,CAACjC,UAAU,CAAC4L,QAAD,CAA9C,EAA0D;AACtDc,MAAAA,iBAAiB,GAAG;AAChBC,QAAAA,8BAA8B,EAAEf,QAAQ,CAACe,8BADzB;AAEhB1K,QAAAA,MAAM,EAAE,UAASC,OAAT,EAAkB;AACtB0J,UAAAA,QAAQ,CAAC3J,MAAT,CAAgBC,OAAO,CAACC,SAAxB,EAAmCD,OAAO,CAAC0K,KAA3C,EAAkD1K,OAAO,CAACqJ,MAA1D;AACArJ,UAAAA,OAAO,CAAC2K,QAAR,IAAoB3K,OAAO,CAAC2K,QAAR,CAAiBC,OAAjB,EAApB;AACH;AALe,OAApB;AAOH,KARD,MAQO,IAAI7M,UAAU,CAAC2L,QAAD,CAAd,EAA0B;AAC7Bc,MAAAA,iBAAiB,GAAG;AAChBzK,QAAAA,MAAM,EAAE,UAASC,OAAT,EAAkB;AACtB,cAAI6K,gBAAgB,GAAGnB,QAAQ,CAAC7L,gBAAgB,CAACmC,OAAO,CAACC,SAAT,CAAjB,EAAsCD,OAAO,CAAC0K,KAA9C,EAAqD1K,OAAO,CAACqJ,MAA7D,CAA/B;;AACA,cAAIwB,gBAAgB,KAAKA,gBAAgB,CAACC,QAAjB,IAA6BhN,UAAU,CAAC+M,gBAAD,CAA5C,CAApB,EAAqF;AACjF7K,YAAAA,OAAO,CAACC,SAAR,CAAkBC,MAAlB,CAAyB2K,gBAAzB;AACH;;AACD7K,UAAAA,OAAO,CAAC2K,QAAR,IAAoB3K,OAAO,CAAC2K,QAAR,CAAiBC,OAAjB,EAApB;AACH;AAPe,OAApB;AASH,KAVM,MAUA;AACH,UAAIG,UAAU,GAAG/M,QAAQ,CAAC0L,QAAD,CAAR,GAAqBA,QAArB,GAAgC1M,CAAC,CAAC0M,QAAD,CAAD,CAAYzE,IAAZ,CAAiB,IAAjB,CAAjD;;AACA,UAAI,CAAC8F,UAAL,EAAiB;AACbP,QAAAA,iBAAiB,GAAG,KAAKQ,WAAL,CAAiBtB,QAAjB,CAApB;AACH,OAFD,MAEO;AACH,YAAI,CAAC,KAAKuB,eAAL,CAAqBF,UAArB,CAAL,EAAuC;AACnC,eAAKE,eAAL,CAAqBF,UAArB,IAAmC,KAAKC,WAAL,CAAiBtB,QAAjB,CAAnC;AACH;;AACDc,QAAAA,iBAAiB,GAAG,KAAKS,eAAL,CAAqBF,UAArB,CAApB;AACH;AACJ;;AACD,WAAOP,iBAAP;AACH,GAhQmE;AAiQpEU,EAAAA,cAAc,EAAE,UAASjL,SAAT,EAAoByJ,QAApB,EAA8B1J,OAA9B,EAAuCyK,8BAAvC,EAAuEpB,MAAvE,EAA+E;AAC3F,QAAImB,iBAAiB,GAAG,KAAKD,gBAAL,CAAsBb,QAAtB,EAAgC1J,OAAhC,CAAxB;;AACA,QAAIqC,MAAM,GAAGrC,OAAO,CAACqC,MAArB;AACA,QAAI6E,SAAS,GAAG,WAAWlH,OAAO,CAACmE,OAAnC;AACA,QAAIgH,gBAAgB,GAAG,IAAIxM,QAAJ,EAAvB;AACA,QAAIyM,eAAe,GAAG;AAClBnL,MAAAA,SAAS,EAAEA,SADO;AAElByK,MAAAA,KAAK,EAAE1K,OAFW;AAGlB2K,MAAAA,QAAQ,EAAEQ,gBAHQ;AAIlBE,MAAAA,UAAU,EAAE,MAAM;AACdF,QAAAA,gBAAgB,CAACP,OAAjB;AACH;AANiB,KAAtB;;AAQA,QAAIJ,iBAAJ,EAAuB;AACnBxK,MAAAA,OAAO,CAAC0E,SAAR,GAAoB,KAAKA,SAAzB;AACA,UAAIiF,KAAK,GAAGtH,MAAM,KAAKA,MAAM,CAACiJ,WAAP,IAAsBpE,SAAtB,IAAmC,KAAKzD,MAAL,CAAY,aAAZ,MAA+B,UAAUpB,MAAM,CAACiJ,WAAjB,KAAiCjJ,MAAM,CAACyC,OAAP,IAAkBzC,MAAM,CAACqF,gBAA1D,KAA+ER,SAA/E,IAA4F,aAAalH,OAAO,CAACmE,OAAhJ,CAAxC,CAAlB;;AACA,UAAI,CAACqG,iBAAiB,CAACC,8BAAlB,IAAoDA,8BAArD,KAAwF,CAACd,KAA7F,EAAoG;AAChGa,QAAAA,iBAAiB,CAACzK,MAAlB,CAAyBqL,eAAzB;AACH,OAFD,MAEO;AACH,aAAK7B,iBAAL,CAAuBgC,IAAvB,CAA4B;AACxB7B,UAAAA,QAAQ,EAAEc,iBADc;AAExBxK,UAAAA,OAAO,EAAEoL,eAFe;AAGxBzB,UAAAA,KAAK,EAAEA;AAHiB,SAA5B;AAKH;;AACD,UAAIN,MAAJ,EAAY;AACRA,QAAAA,MAAM,CAACmC,iBAAP,GAA2BnC,MAAM,CAACmC,iBAAP,IAA4B,EAAvD;AACAnC,QAAAA,MAAM,CAACmC,iBAAP,CAAyBD,IAAzB,CAA8BJ,gBAA9B;AACH;AACJ,KAhBD,MAgBO;AACHA,MAAAA,gBAAgB,CAACM,MAAjB;AACH;;AACD,WAAON,gBAAgB,CAACO,OAAjB,EAAP;AACH,GAlSmE;AAmSpEC,EAAAA,UAAU,EAAE,UAASC,YAAT,EAAuB;AAC/B,WAAO5O,CAAC,CAAC4O,YAAD,CAAD,CAAgBC,QAAhB,CAAyB,OAAzB,EAAkCC,GAAlC,CAAsC,YAAtC,EAAoDA,GAApD,CAAwD,YAAxD,CAAP;AACH,GArSmE;AAsSpEC,EAAAA,YAAY,EAAE,UAASC,aAAT,EAAwB;AAClC,QAAIC,gBAAJ;;AACA,QAAIC,cAAc,GAAG,CAAC,CAAC,KAAKzI,MAAL,GAAc0I,WAArC;AACA,WAAOD,cAAc,IAAI,CAAC,EAAE,UAAUD,gBAAgB,GAAG,KAAKN,UAAL,CAAgBK,aAAhB,CAA7B,KAAgE,KAAK,CAAL,KAAWC,gBAA3E,IAA+FA,gBAAgB,CAACxC,MAAjB,CAAwB,MAAMrK,SAA9B,EAAyCoC,MAA1I,CAA1B;AACH,GA1SmE;AA2SpE4K,EAAAA,cAAc,EAAE,UAAS9L,MAAT,EAAiBgG,IAAjB,EAAuB+F,YAAvB,EAAqC;AACjD,QAAIL,aAAa,GAAGK,YAAY,GAAG/L,MAAM,IAAI,KAAKgM,aAAlB,GAAkC,KAAKA,aAAL,IAAsBhM,MAAxF;;AACA,QAAIiM,WAAW,GAAG,KAAKR,YAAL,CAAkBC,aAAlB,CAAlB;;AACA,QAAIO,WAAJ,EAAiB;AACb,UAAIC,MAAM,GAAGxP,CAAC,CAAC,SAAD,CAAD,CAAa6H,QAAb,CAAsByB,IAAI,CAACrB,IAAL,CAAU,OAAV,CAAtB,CAAb;AACA,WAAKN,OAAL,CAAa,MAAb,EAAqB,cAArB,EAAqC6H,MAArC;AACA,aAAOA,MAAM,CAACtM,MAAP,CAAcoG,IAAd,CAAP;AACH;;AACD,WAAOA,IAAP;AACH,GApTmE;AAqTpEmG,EAAAA,UAAU,EAAE,UAASnM,MAAT,EAAiBgG,IAAjB,EAAuBoG,cAAvB,EAAuC;AAC/CA,IAAAA,cAAc,GAAGA,cAAc,IAAI5M,qBAAnC;AACA4M,IAAAA,cAAc,CAAC3M,MAAf,CAAsB;AAClBI,MAAAA,OAAO,EAAEmG,IADS;AAElBrG,MAAAA,SAAS,EAAEK;AAFO,KAAtB;AAIH,GA3TmE;AA4TpEqM,EAAAA,WAAW,EAAE,YAAW;AACpB,QAAIC,UAAU,GAAG,KAAKC,WAAtB;;AACA,QAAID,UAAU,IAAI,CAAlB,EAAqB;AACjB,WAAKC,WAAL,GAAmB,CAAnB;AACA,WAAKC,QAAL,CAAc;AACVC,QAAAA,IAAI,EAAEH;AADI,OAAd;AAGH;AACJ,GApUmE;AAqUpEI,EAAAA,WAAW,EAAE,UAASlM,CAAT,EAAY;AACrB,QAAImM,KAAK,GAAG,KAAKxK,OAAL,GAAe8D,MAAf,EAAZ;;AACA,QAAI,CAAC0G,KAAD,IAAUA,KAAK,CAAC1G,MAAN,GAAe/E,MAA7B,EAAqC;AACjC,WAAK4H,sBAAL,CAA4BtI,CAA5B;AACH;AACJ,GA1UmE;AA2UpEoM,EAAAA,YAAY,EAAE,UAASlN,OAAT,EAAkB;AAC5BA,IAAAA,OAAO,GAAGA,OAAO,IAAI,EAArB;AACAA,IAAAA,OAAO,CAAC4B,OAAR,GAAkB,KAAK6E,kBAAL,CAAwBC,iBAAxB,EAAlB;AACA,QAAIyG,UAAU,GAAGnN,OAAO,CAACqJ,MAAR,IAAkBrJ,OAAO,CAACqJ,MAAR,CAAe8D,UAAlD;;AACA,QAAI7M,MAAM,GAAG,KAAKuF,YAAL,CAAkB7F,OAAO,CAAC4B,OAA1B,EAAmC,aAAauL,UAAb,IAA2B,cAAcA,UAAzC,IAAuD,aAAaA,UAAvG,CAAb;;AACA,SAAKC,WAAL,CAAiB9M,MAAjB,EAAyBN,OAAzB;;AACA,WAAOM,MAAP;AACH,GAlVmE;AAmVpE8M,EAAAA,WAAW,EAAE,UAAS9M,MAAT,EAAiBN,OAAjB,EAA0B;AACnC,QAAIqN,IAAI,GAAG,KAAKC,QAAL,CAActN,OAAO,CAACqJ,MAAtB,CAAX;;AACA,QAAIkE,aAAa,GAAGvN,OAAO,CAACqJ,MAAR,IAAkBrJ,OAAO,CAACqJ,MAAR,CAAekE,aAAjC,IAAkD,EAAtE;AACA,QAAIC,WAAW,GAAGxN,OAAO,CAACqJ,MAAR,IAAkBrJ,OAAO,CAACqJ,MAAR,CAAemE,WAAjC,IAAgD,EAAlE;;AACA,SAAK,IAAI1K,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGuK,IAAI,CAAC7L,MAAzB,EAAiCsB,CAAC,EAAlC,EAAsC;AAClC,WAAK2K,UAAL,CAAgBnN,MAAhB,EAAwBhC,MAAM,CAAC;AAC3BqH,QAAAA,GAAG,EAAE0H,IAAI,CAACvK,CAAD,CADkB;AAE3ByK,QAAAA,aAAa,EAAEA,aAAa,CAACzK,CAAD,CAFD;AAG3BqK,QAAAA,UAAU,EAAEK,WAAW,CAAC1K,CAAD;AAHI,OAAD,EAI3B9C,OAJ2B,CAA9B;AAKH;AACJ,GA9VmE;AA+VpEyN,EAAAA,UAAU,EAAE,UAASnN,MAAT,EAAiBN,OAAjB,EAA0B;AAClC,QAAI,CAACA,OAAO,CAACuN,aAAb,EAA4B;AACxBvN,MAAAA,OAAO,CAAC2F,GAAR,CAAYoB,KAAZ,GAAoB,EAApB;AACH;;AACD,QAAIT,IAAI,GAAG,KAAKjB,UAAL,CAAgBrF,OAAO,CAAC2F,GAAxB,CAAX;;AACA,QAAI+H,WAAW,GAAG,KAAKtB,cAAL,CAAoB9L,MAApB,EAA4BgG,IAA5B,CAAlB;;AACA,QAAI,aAAatG,OAAO,CAACmN,UAAzB,EAAqC;AACjC,WAAKQ,YAAL,CAAkBrH,IAAlB,EAAwBtG,OAAxB;AACH;;AACD,SAAKyM,UAAL,CAAgBnM,MAAhB,EAAwBoN,WAAxB;;AACA,QAAI/G,UAAU,GAAGrI,MAAM,CAAC;AACpBsD,MAAAA,OAAO,EAAE5B,OAAO,CAAC4B;AADG,KAAD,EAEpB5B,OAAO,CAAC2F,GAFY,CAAvB;;AAGA,SAAKiI,eAAL,CAAqBjH,UAArB,EAAiC3G,OAAO,CAAC2F,GAAzC;;AACA,SAAKkI,YAAL,CAAkBH,WAAlB,EAA+B/G,UAA/B,EAA2C3G,OAAO,CAAC2F,GAAnD;AACH,GA9WmE;AA+WpEmI,EAAAA,eAAe,EAAE,UAASlH,WAAT,EAAsB2G,aAAtB,EAAqC;AAClD,WAAO,CAACA,aAAD,IAAkBA,aAAa,CAACQ,OAAd,CAAsBnH,WAAtB,KAAsC,CAA/D;AACH,GAjXmE;AAkXpE+G,EAAAA,YAAY,EAAE,UAASrH,IAAT,EAAetG,OAAf,EAAwB;AAClC,QAAI4G,WAAW,GAAG,CAAlB;AACA,QAAIjB,GAAG,GAAG3F,OAAO,CAAC2F,GAAlB;AACA,QAAI/D,OAAO,GAAG5B,OAAO,CAAC4B,OAAtB;;AACA,SAAK,IAAIkB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGlB,OAAO,CAACJ,MAA5B,EAAoCsB,CAAC,EAArC,EAAyC;AACrC,UAAI,KAAKgL,eAAL,CAAqBhL,CAArB,EAAwB9C,OAAO,CAACuN,aAAhC,CAAJ,EAAoD;AAChD,aAAKS,WAAL,CAAiB1H,IAAjB,EAAuBhI,MAAM,CAAC;AAC1B+D,UAAAA,MAAM,EAAET,OAAO,CAACkB,CAAD,CADW;AAE1B8D,UAAAA,WAAW,EAAEA,WAFa;AAG1BqH,UAAAA,KAAK,EAAEtI,GAAG,CAACuI,MAAJ,IAAcvI,GAAG,CAACuI,MAAJ,CAAWtH,WAAX,CAHK;AAI1BuH,UAAAA,QAAQ,EAAExI,GAAG,CAACyI,SAAJ,IAAiBzI,GAAG,CAACyI,SAAJ,CAAcxH,WAAd;AAJD,SAAD,EAK1B5G,OAL0B,CAA7B;AAMH;;AACD,UAAI4B,OAAO,CAACkB,CAAD,CAAP,CAAWkC,OAAX,GAAqB,CAAzB,EAA4B;AACxB4B,QAAAA,WAAW,IAAIhF,OAAO,CAACkB,CAAD,CAAP,CAAWkC,OAA1B;AACH,OAFD,MAEO;AACH4B,QAAAA,WAAW;AACd;AACJ;AACJ,GArYmE;AAsYpEyH,EAAAA,YAAY,EAAE,UAASC,WAAT,EAAsBC,cAAtB,EAAsChB,aAAtC,EAAqD;AAC/D,QAAIiB,MAAM,GAAGF,WAAW,CAACzC,QAAZ,EAAb;AACA,QAAI4C,SAAS,GAAGF,cAAc,CAAC1C,QAAf,EAAhB;AACA,QAAI6C,gBAAgB,GAAG,KAAKjL,MAAL,CAAY,kBAAZ,CAAvB;AACA,QAAIkL,gBAAgB,GAAG,KAAK5J,eAAL,CAAqBrF,4BAArB,CAAvB;AACA6N,IAAAA,aAAa,CAACqB,OAAd,CAAuB,UAAShI,WAAT,EAAsBC,KAAtB,EAA6B;AAChD,UAAI5C,KAAK,GAAGuK,MAAM,CAACK,EAAP,CAAUjI,WAAV,CAAZ;AACA,UAAIkI,QAAQ,GAAGL,SAAS,CAACI,EAAV,CAAahI,KAAb,CAAf;AACA5C,MAAAA,KAAK,CAAC8K,WAAN,CAAkBD,QAAlB;;AACA,UAAIJ,gBAAgB,IAAI,CAACI,QAAQ,CAAC7H,QAAT,CAAkB,mBAAlB,CAAzB,EAAiE;AAC7D6H,QAAAA,QAAQ,CAACjK,QAAT,CAAkB8J,gBAAlB;AACH;AACJ,KAPD;AAQAnM,IAAAA,cAAc,CAAC8L,WAAW,CAACU,GAAZ,CAAgB,CAAhB,CAAD,EAAqBT,cAAc,CAACS,GAAf,CAAmB,CAAnB,CAArB,CAAd;AACH,GApZmE;AAqZpEC,EAAAA,sBAAsB,EAAE,UAAShL,KAAT,EAAgB6C,WAAhB,EAA6B;AACjD,QAAI,gBAAgBA,WAAW,CAAC3C,OAAhC,EAAyC;AACrC,WAAKQ,OAAL,CAAa,MAAb,EAAqB,UAArB,EAAiCV,KAAjC;;AACA,UAAIiL,iBAAiB,GAAG,KAAKzI,kBAAL,CAAwB0I,oBAAxB,EAAxB;;AACA,UAAIC,YAAY,GAAGtI,WAAW,CAACF,WAAZ,GAA0BsI,iBAA1B,GAA8C,CAAjE;AACA,WAAKvK,OAAL,CAAa,UAAb,EAAyByK,YAAzB,EAAuCnL,KAAvC;AACH;AACJ,GA5ZmE;AA6ZpE+J,EAAAA,WAAW,EAAE,UAAS1H,IAAT,EAAetG,OAAf,EAAwB;AACjC,QAAI8G,WAAW,GAAG,KAAKuI,eAAL,CAAqBrP,OAArB,CAAlB;;AACA,QAAIA,OAAO,CAACuN,aAAZ,EAA2B;AACvB,UAAIvN,OAAO,CAAC2F,GAAR,CAAYoB,KAAhB,EAAuB;AACnB,YAAIuI,SAAS,GAAGtP,OAAO,CAAC2F,GAAR,CAAYoB,KAAZ,CAAkBwI,SAAlB,CAA4BnN,IAAI,IAAIA,IAAI,CAACwE,WAAL,KAAqBE,WAAW,CAACF,WAArE,CAAhB;AACA5G,QAAAA,OAAO,CAAC2F,GAAR,CAAYoB,KAAZ,CAAkBuI,SAAlB,IAA+BxI,WAA/B;AACH;AACJ,KALD,MAKO;AACH9G,MAAAA,OAAO,CAAC2F,GAAR,CAAYoB,KAAZ,CAAkBwE,IAAlB,CAAuBzE,WAAvB;AACH;;AACD,QAAI7C,KAAK,GAAG,KAAKI,WAAL,CAAiByC,WAAjB,CAAZ;;AACA,SAAKmI,sBAAL,CAA4BhL,KAA5B,EAAmC6C,WAAnC;;AACA,SAAK0I,kBAAL,CAAwBvL,KAAxB,EAA+B6C,WAA/B,EAA4C9G,OAA5C;;AACAsG,IAAAA,IAAI,CAAC0I,GAAL,CAAS,CAAT,EAAYS,WAAZ,CAAwBxL,KAAK,CAAC+K,GAAN,CAAU,CAAV,CAAxB;AACA,WAAO/K,KAAP;AACH,GA5amE;AA6apEuL,EAAAA,kBAAkB,EAAE,UAASvL,KAAT,EAAgBjE,OAAhB,EAAyB0P,aAAzB,EAAwC;AACxD,QAAIhG,QAAQ,GAAG,KAAKiG,gBAAL,CAAsB3P,OAAtB,CAAf;;AACAtB,IAAAA,IAAI,CAAC,CAACgL,QAAD,IAAa,KAAKwB,cAAL,CAAoBjH,KAApB,EAA2ByF,QAA3B,EAAqC1J,OAArC,EAA8C,KAAK,CAAnD,EAAsD0P,aAAa,CAACrG,MAApE,CAAd,CAAJ,CAA+FuG,IAA/F,CAAoG,MAAM;AACtG,WAAK5L,WAAL,CAAiBC,KAAjB,EAAwBjE,OAAxB;AACH,KAFD;AAGH,GAlbmE;AAmbpE2P,EAAAA,gBAAgB,EAAE,YAAW,CAAE,CAnbqC;AAobpErC,EAAAA,QAAQ,EAAE,YAAW;AACjB,WAAO,EAAP;AACH,GAtbmE;AAubpE+B,EAAAA,eAAe,EAAE,UAASrP,OAAT,EAAkB;AAC/B,QAAI8G,WAAW,GAAG;AACdzE,MAAAA,MAAM,EAAErC,OAAO,CAACqC,MADF;AAEduE,MAAAA,WAAW,EAAE5G,OAAO,CAAC4G,WAFP;AAGdzC,MAAAA,OAAO,EAAEnE,OAAO,CAAC2F,GAAR,CAAYxB,OAHP;AAId0L,MAAAA,QAAQ,EAAE,KAAKnK,SAAL,CAAe1F,OAAO,CAAC2F,GAAvB;AAJI,KAAlB;;AAMA,SAAKiI,eAAL,CAAqB9G,WAArB;;AACA,WAAOA,WAAP;AACH,GAhcmE;AAicpE8G,EAAAA,eAAe,EAAE,UAAS5N,OAAT,EAAkB8P,MAAlB,EAA0B;AACvC,QAAI,CAAC,KAAKrM,MAAL,CAAY,oBAAZ,CAAL,EAAwC;AACpC;AACH;;AACD,QAAIsM,QAAQ,GAAG,EAAf;AACAD,IAAAA,MAAM,GAAGA,MAAM,IAAI9P,OAAnB;;AACA8P,IAAAA,MAAM,CAACE,KAAP,GAAeF,MAAM,CAACE,KAAP,IAAgB,UAASC,MAAT,EAAiBC,eAAjB,EAAkCC,aAAlC,EAAiD;AAC5E,UAAIhC,QAAQ,GAAG8B,MAAM,CAACH,MAAM,CAAC1S,IAAR,CAArB;;AACA,UAAIgT,OAAO,GAAG,UAASzK,GAAT,EAAc;AACxB,YAAIA,GAAG,IAAIwK,aAAX,EAA0B;AACtBA,UAAAA,aAAa,CAACxK,GAAD,CAAb;AACH;;AACD,YAAI0K,QAAQ,GAAGJ,MAAM,CAACH,MAAM,CAAC1S,IAAR,CAArB;;AACA,YAAIkT,IAAI,CAACC,SAAL,CAAepC,QAAf,MAA6BmC,IAAI,CAACC,SAAL,CAAeF,QAAf,CAAjC,EAA2D;AACvD,cAAI1K,GAAJ,EAAS;AACLuK,YAAAA,eAAe,CAACG,QAAD,CAAf;AACH;;AACDlC,UAAAA,QAAQ,GAAGkC,QAAX;AACH;AACJ,OAXD;;AAYAN,MAAAA,QAAQ,CAACxE,IAAT,CAAc6E,OAAd;AACA,aAAO,YAAW;AACd,YAAIvJ,KAAK,GAAGkJ,QAAQ,CAAChC,OAAT,CAAiBqC,OAAjB,CAAZ;;AACA,YAAIvJ,KAAK,IAAI,CAAb,EAAgB;AACZkJ,UAAAA,QAAQ,CAACS,MAAT,CAAgB3J,KAAhB,EAAuB,CAAvB;AACH;AACJ,OALD;AAMH,KArBD;;AAsBAiJ,IAAAA,MAAM,CAACW,MAAP,GAAgBX,MAAM,CAACW,MAAP,IAAiB,UAAS9K,GAAT,EAAc+K,OAAd,EAAuB;AACpD,UAAI/K,GAAJ,EAAS;AACL,aAAKvI,IAAL,GAAY4C,OAAO,CAAC5C,IAAR,GAAeuI,GAAG,CAACvI,IAA/B;AACA,aAAKqE,QAAL,GAAgBzB,OAAO,CAACyB,QAAR,GAAmBkE,GAAG,CAAClE,QAAvC;AACA,aAAKmE,SAAL,GAAiB5F,OAAO,CAAC4F,SAAR,GAAoBD,GAAG,CAACC,SAAzC;AACA,aAAK+K,UAAL,GAAkB3Q,OAAO,CAAC2Q,UAAR,GAAqBhL,GAAG,CAACgL,UAA3C;;AACA,YAAI3Q,OAAO,CAAC2F,GAAR,IAAe,CAAC+K,OAApB,EAA6B;AACzB1Q,UAAAA,OAAO,CAAC2F,GAAR,GAAcA,GAAd;AACH;AACJ;;AACDoK,MAAAA,QAAQ,CAACnB,OAAT,CAAkB,UAASwB,OAAT,EAAkB;AAChCA,QAAAA,OAAO,CAACzK,GAAD,CAAP;AACH,OAFD;AAGH,KAbD;;AAcA,QAAImK,MAAM,KAAK9P,OAAf,EAAwB;AACpBA,MAAAA,OAAO,CAACgQ,KAAR,GAAgBF,MAAM,CAACE,KAAP,CAAaY,IAAb,CAAkBd,MAAlB,CAAhB;AACH;;AACD,WAAO9P,OAAP;AACH,GA/emE;AAgfpEoE,EAAAA,aAAa,EAAE,UAAShC,IAAT,EAAepC,OAAf,EAAwB;AACnCA,IAAAA,OAAO,CAAC2I,WAAR,GAAsB9K,gBAAgB,CAACb,CAAC,CAACoF,IAAD,CAAF,CAAtC;AACA,SAAK2G,aAAL,CAAmB,gBAAnB,EAAqC/I,OAArC;AACH,GAnfmE;AAofpE6N,EAAAA,YAAY,EAAE,UAASvH,IAAT,EAAetG,OAAf,EAAwB;AAClC3C,IAAAA,WAAW,CAACiJ,IAAI,CAAC0I,GAAL,CAAS,CAAT,CAAD,EAAc,SAAd,EAAyBhP,OAAzB,CAAX;AACAA,IAAAA,OAAO,CAAC2B,UAAR,GAAqB9D,gBAAgB,CAACyI,IAAD,CAArC;AACA,SAAKyC,aAAL,CAAmB,eAAnB,EAAoC/I,OAApC;AACH,GAxfmE;AAyfpE6Q,EAAAA,oBAAoB,EAAE,UAAS/P,CAAT,EAAY;AAC9B,QAAIgQ,WAAW,GAAGhQ,CAAC,CAACgQ,WAApB;;AACA,QAAItS,aAAa,CAACuS,YAAd,CAA2BD,WAA3B,EAAwC,CAAC,OAAD,EAAU,cAAV,CAAxC,CAAJ,EAAwE;AACpE,UAAItK,cAAc,GAAG,KAAKC,kBAAL,CAAwBC,iBAAxB,EAArB;;AACA,UAAIsK,MAAM,GAAG3S,aAAa,CAAC4S,GAAd,CAAkBzK,cAAlB,EAAmC,UAASnE,MAAT,EAAiB;AAC7D,YAAIH,KAAK,GAAGG,MAAM,CAAC8C,YAAP,IAAuB9C,MAAM,CAACH,KAA1C;AACA,eAAOjE,SAAS,CAACiE,KAAD,CAAT,GAAmBA,KAAnB,GAA2B,MAAlC;AACH,OAHY,CAAb;AAIA,WAAKgP,eAAL,CAAqB;AACjBF,QAAAA,MAAM,EAAEA,MADS;AAEjBF,QAAAA,WAAW,EAAEA;AAFI,OAArB;AAIA;AACH;;AACD,QAAI,CAAC,KAAKK,aAAV,EAAyB;AACrB,WAAKpR,MAAL;AACH;AACJ,GA1gBmE;AA2gBpEqR,EAAAA,YAAY,EAAE,UAASnN,KAAT,EAAgB;AAC1B,QAAIqL,SAAS,GAAGrL,KAAK,CAACzC,MAAN,GAAeyC,KAAK,CAAC,CAAD,CAAL,CAASqL,SAAxB,GAAoC,CAAC,CAArD;AACA,WAAOA,SAAP;AACH,GA9gBmE;AA+gBpE+B,EAAAA,gBAAgB,EAAE,YAAW;AACzB,WAAO,KAAK/E,aAAL,IAAsBtP,CAAC,EAA9B;AACH,GAjhBmE;AAkhBpEsU,EAAAA,eAAe,EAAE,YAAW;AACxB,WAAO,KAAKhF,aAAZ;AACH,GAphBmE;AAqhBpEiF,EAAAA,eAAe,EAAE,UAAS3F,YAAT,EAAuB;AACpC,SAAKU,aAAL,GAAqBV,YAArB;AACH,GAvhBmE;AAwhBpE4F,EAAAA,aAAa,EAAE,UAASnL,IAAT,EAAe;AAC1B,SAAKoL,QAAL,CAAcpL,IAAd;;AACA,YAAQA,IAAI,CAAC9I,IAAb;AACI,WAAK,iBAAL;AACA,WAAK,gBAAL;AACA,WAAK,eAAL;AACA,WAAK,oBAAL;AACI,aAAKmU,WAAL,CAAiB,IAAjB,EAAuB,IAAvB;;AACArL,QAAAA,IAAI,CAACsL,OAAL,GAAe,IAAf;AANR;AAQH,GAliBmE;AAmiBpEC,EAAAA,IAAI,EAAE,YAAW;AACb,QAAIvR,IAAI,GAAG,IAAX;AACAA,IAAAA,IAAI,CAACwM,WAAL,GAAmB,CAAC,CAApB;AACAxM,IAAAA,IAAI,CAACoG,kBAAL,GAA0BpG,IAAI,CAACwR,aAAL,CAAmB,SAAnB,CAA1B;AACAxR,IAAAA,IAAI,CAACyR,eAAL,GAAuBzR,IAAI,CAACwR,aAAL,CAAmB,MAAnB,CAAvB;AACAxR,IAAAA,IAAI,CAACkJ,iBAAL,GAAyB,EAAzB;AACAlJ,IAAAA,IAAI,CAAC4K,eAAL,GAAuB,EAAvB;AACA5K,IAAAA,IAAI,CAACgB,YAAL,CAAkB,aAAlB;AACAhB,IAAAA,IAAI,CAACgB,YAAL,CAAkB,YAAlB;AACAhB,IAAAA,IAAI,CAACgB,YAAL,CAAkB,gBAAlB;AACAhB,IAAAA,IAAI,CAACgB,YAAL,CAAkB,eAAlB;AACAhB,IAAAA,IAAI,CAACgB,YAAL,CAAkB,oBAAlB,EAAwC;AACpC0Q,MAAAA,iBAAiB,EAAE,CAAC,UAAD,EAAa,UAAb;AADiB,KAAxC;AAGA1R,IAAAA,IAAI,CAACgB,YAAL,CAAkB,gBAAlB,EAAoC;AAChC0Q,MAAAA,iBAAiB,EAAE,CAAC,UAAD,EAAa,UAAb,CADa;AAEhCC,MAAAA,QAAQ,EAAE;AAFsB,KAApC;AAIA3R,IAAAA,IAAI,CAACgB,YAAL,CAAkB,eAAlB,EAAmC;AAC/B0Q,MAAAA,iBAAiB,EAAE,CAAC,UAAD,EAAa,UAAb,CADY;AAE/BC,MAAAA,QAAQ,EAAE,WAFqB;AAG/BC,MAAAA,YAAY,EAAE,UAASnR,CAAT,EAAY;AACtBT,QAAAA,IAAI,CAAC6R,iBAAL,CAAuBpR,CAAvB;AACH;AAL8B,KAAnC;;AAOAT,IAAAA,IAAI,CAACoG,kBAAL,CAAwB0L,cAAxB,CAAuCC,GAAvC,CAA2C/R,IAAI,CAACwQ,oBAAL,CAA0BD,IAA1B,CAA+BvQ,IAA/B,CAA3C;;AACAA,IAAAA,IAAI,CAACyR,eAAL,IAAwBzR,IAAI,CAACyR,eAAL,CAAqBO,OAArB,CAA6BD,GAA7B,CAAiC/R,IAAI,CAACiS,kBAAL,CAAwB1B,IAAxB,CAA6BvQ,IAA7B,CAAjC,CAAxB;AACH,GA9jBmE;AA+jBpE6R,EAAAA,iBAAiB,EAAEvU,IA/jBiD;AAgkBpE2U,EAAAA,kBAAkB,EAAE,YAAW,CAAE,CAhkBmC;AAikBpEC,EAAAA,aAAa,EAAE,YAAW;AACtB,WAAO,CAAC,eAAD,CAAP;AACH,GAnkBmE;AAokBpEC,EAAAA,yBAAyB,EAAE,YAAW;AAClC,QAAI5F,UAAU,GAAG,KAAKC,WAAtB;;AACA,QAAID,UAAU,IAAI,CAAlB,EAAqB;AACjB,WAAKC,WAAL,GAAmB,CAAnB;AACA,WAAKC,QAAL,CAAc;AACVC,QAAAA,IAAI,EAAEH;AADI,OAAd;AAGH;AACJ,GA5kBmE;AA6kBpEE,EAAAA,QAAQ,EAAE,UAAS2F,GAAT,EAAc;AACpB,QAAIjN,QAAQ,GAAG,KAAK/C,OAAL,EAAf;AACA,QAAIiQ,gBAAgB,GAAGlN,QAAQ,IAAIA,QAAQ,CAACqG,QAAT,CAAkB,MAAM,KAAK9G,eAAL,CAAqBlG,sBAArB,CAAxB,EAAsEiN,GAAtE,CAA0E,MAAM,KAAK/G,eAAL,CAAqB5F,mBAArB,CAAhF,CAAnC;;AACA,QAAIlB,SAAS,CAACwU,GAAD,CAAT,IAAkBxU,SAAS,CAACwU,GAAG,CAAC1F,IAAL,CAA3B,IAAyC,KAAKF,WAAL,KAAqB4F,GAAG,CAAC1F,IAAtE,EAA4E;AACxE,WAAKF,WAAL,GAAmB4F,GAAG,CAAC1F,IAAvB;AACA2F,MAAAA,gBAAgB,IAAIA,gBAAgB,CAAC9F,UAAjB,CAA4B6F,GAAG,CAAC1F,IAAhC,CAApB;AACH;AACJ,GAplBmE;AAqlBpE4F,EAAAA,2BAA2B,EAAE,UAASrS,MAAT,EAAiB;AAC1C,QAAIoS,gBAAgB,GAAG1V,CAAC,CAAC,OAAD,CAAxB;AACA,QAAI8G,SAAS,GAAG,KAAKL,MAAL,CAAY,qBAAZ,CAAhB;;AACA,QAAI,UAAUK,SAAV,IAAuB,WAAWA,SAAX,IAAwB,CAAClF,eAApD,EAAqE;AACjE8T,MAAAA,gBAAgB,CAAC7N,QAAjB,CAA0B,KAAKE,eAAL,CAAqBjG,0BAArB,CAA1B;AACH;;AACD3B,IAAAA,YAAY,CAAC0D,EAAb,CAAgB6R,gBAAhB,EAAkC,QAAlC,EAA4C,MAAM;AAC9C,UAAI9F,UAAU,GAAG8F,gBAAgB,CAAC9F,UAAjB,EAAjB;;AACA,UAAIA,UAAU,KAAK,KAAKC,WAAxB,EAAqC;AACjC,aAAK+F,aAAL,CAAmBC,IAAnB,CAAwB;AACpB9F,UAAAA,IAAI,EAAEH;AADc,SAAxB,EAEG,KAAKrP,IAFR;AAGH;AACJ,KAPD;AAQAmV,IAAAA,gBAAgB,CAAC7N,QAAjB,CAA0B,KAAKE,eAAL,CAAqB/F,aAArB,CAA1B,EAA+D6F,QAA/D,CAAwE,KAAKE,eAAL,CAAqBlG,sBAArB,CAAxE,EAAsHqB,MAAtH,CAA6HI,MAA7H,EAAqI2F,QAArI,CAA8I,KAAKxD,OAAL,EAA9I;AACA,SAAKkC,OAAL,CAAa,MAAb,EAAqB,cAArB,EAAqC+N,gBAArC;AACA,WAAOA,gBAAP;AACH,GAtmBmE;AAumBpEI,EAAAA,cAAc,EAAE,UAASC,gBAAT,EAA2B;AACvC,SAAKxB,eAAL,CAAqBwB,gBAArB;;AACA,SAAKJ,2BAAL,CAAiCI,gBAAjC;AACH,GA1mBmE;AA2mBpEC,EAAAA,mBAAmB,EAAErV,IA3mB+C;AA4mBpEsV,EAAAA,UAAU,EAAE,UAASC,aAAT,EAAwB;AAChC,QAAIC,MAAM,GAAG,EAAb;AACA,QAAIjR,KAAJ;;AACA,QAAIgR,aAAJ,EAAmB;AACf7U,MAAAA,aAAa,CAAC+U,IAAd,CAAmBF,aAAnB,EAAmC,UAASrM,KAAT,EAAgBwM,IAAhB,EAAsB;AACrDnR,QAAAA,KAAK,GAAGmR,IAAI,CAACC,WAAb;;AACA,YAAID,IAAI,CAACE,qBAAT,EAAgC;AAC5B,cAAIC,UAAU,GAAGrV,eAAe,CAACkV,IAAD,CAAhC;;AACA,cAAIG,UAAU,CAACtR,KAAX,GAAmBA,KAAK,GAAG,CAA/B,EAAkC;AAC9BA,YAAAA,KAAK,GAAGsR,UAAU,CAACtR,KAAnB;AACH;AACJ;;AACDiR,QAAAA,MAAM,CAAC5H,IAAP,CAAYrJ,KAAZ;AACH,OATD;AAUH;;AACD,WAAOiR,MAAP;AACH,GA5nBmE;AA6nBpEM,EAAAA,eAAe,EAAE,UAASzH,aAAT,EAAwB;AACrC,QAAImH,MAAM,GAAG,EAAb;AACA,QAAIO,KAAJ;AACA,QAAIlF,MAAJ;AACA,KAAC,KAAK/K,MAAL,CAAY,oBAAZ,KAAqC9F,IAAtC;AACAqO,IAAAA,aAAa,GAAGA,aAAa,IAAI,KAAKsF,eAAL,EAAjC;;AACA,QAAItF,aAAJ,EAAmB;AACf0H,MAAAA,KAAK,GAAG1H,aAAa,CAACH,QAAd,CAAuB,uBAAvB,EAAgDA,QAAhD,EAAR;;AACA,WAAK,IAAI/I,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG4Q,KAAK,CAAClS,MAA1B,EAAkCsB,CAAC,EAAnC,EAAuC;AACnC,YAAIwD,IAAI,GAAGoN,KAAK,CAAC7E,EAAN,CAAS/L,CAAT,CAAX;AACA,YAAI6Q,YAAY,GAAG,WAAWrN,IAAI,CAAC0I,GAAL,CAAS,CAAT,EAAY1M,KAAZ,CAAkBsR,OAA7B,IAAwC,CAACtN,IAAI,CAACW,QAAL,CAAc,oBAAd,CAA5D;;AACA,YAAI,CAACX,IAAI,CAACkC,EAAL,CAAQ,MAAMnJ,eAAd,CAAD,IAAmC,CAACiH,IAAI,CAACkC,EAAL,CAAQ,MAAMjJ,gBAAd,CAApC,IAAuE,CAAC+G,IAAI,CAACkC,EAAL,CAAQ,MAAM/I,eAAd,CAAxE,IAA0GkU,YAA9G,EAA4H;AACxHnF,UAAAA,MAAM,GAAGlI,IAAI,CAACuF,QAAL,CAAc,IAAd,CAAT;AACA;AACH;AACJ;;AACDsH,MAAAA,MAAM,GAAG,KAAKF,UAAL,CAAgBzE,MAAhB,CAAT;AACH;;AACD,WAAO2E,MAAP;AACH,GAhpBmE;AAipBpEU,EAAAA,qBAAqB,EAAE,UAASjN,WAAT,EAAsBnF,QAAtB,EAAgC;AACnD,WAAOmF,WAAP;AACH,GAnpBmE;AAopBpEsK,EAAAA,eAAe,EAAE,UAAS4C,IAAT,EAAe;AAC5B,QAAI;AACA9C,MAAAA,MAAM,EAAEA,MADR;AAEAhF,MAAAA,aAAa,EAAEA,aAFf;AAGApK,MAAAA,OAAO,EAAEA,OAHT;AAIAmS,MAAAA,KAAK,EAAEA;AAJP,QAKAD,IALJ;AAMA,QAAIE,KAAJ;AACA,QAAI9R,KAAJ;AACA,QAAIkD,QAAJ;AACA,QAAIwB,WAAJ;AACA,QAAIqN,eAAe,GAAG,KAAKxQ,MAAL,CAAY,iBAAZ,CAAtB;AACAuI,IAAAA,aAAa,GAAGA,aAAa,IAAI,KAAKsF,eAAL,EAAjC;;AACA,QAAItF,aAAa,IAAIA,aAAa,CAACxK,MAA/B,IAAyCwP,MAA7C,EAAqD;AACjDpK,MAAAA,WAAW,GAAG,CAAd;AACAoN,MAAAA,KAAK,GAAGhI,aAAa,CAACH,QAAd,CAAuB,UAAvB,EAAmCA,QAAnC,CAA4C,KAA5C,CAAR;AACAjO,MAAAA,QAAQ,CAACoW,KAAD,EAAQ,MAAR,CAAR;AACApS,MAAAA,OAAO,GAAGA,OAAO,IAAI,KAAKC,UAAL,CAAgB,IAAhB,EAAsBmK,aAAtB,CAArB;;AACA,WAAK,IAAIlJ,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGlB,OAAO,CAACJ,MAA5B,EAAoCsB,CAAC,EAArC,EAAyC;AACrC,YAAImR,eAAe,IAAI,CAACF,KAAxB,EAA+B;AAC3B7R,UAAAA,KAAK,GAAGN,OAAO,CAACkB,CAAD,CAAP,CAAWZ,KAAnB;;AACA,cAAIA,KAAK,IAAI,CAACN,OAAO,CAACkB,CAAD,CAAP,CAAWgC,OAAzB,EAAkC;AAC9B5C,YAAAA,KAAK,GAAGN,OAAO,CAACkB,CAAD,CAAP,CAAWqC,YAAX,IAA2BjD,KAAnC;AACAA,YAAAA,KAAK,GAAGD,aAAa,CAACC,KAAD,CAArB;AACAkD,YAAAA,QAAQ,GAAGnD,aAAa,CAACL,OAAO,CAACkB,CAAD,CAAP,CAAWsC,QAAX,IAAuBlD,KAAxB,CAAxB;AACA,gBAAIwR,KAAK,GAAGA,KAAK,IAAI1H,aAAa,CAACH,QAAd,GAAyBA,QAAzB,CAAkC,SAAlC,EAA6CC,GAA7C,CAAiD,MAAMvM,gBAAvD,CAArB;;AACA,iBAAK,IAAIkC,QAAQ,GAAG,CAApB,EAAuBA,QAAQ,GAAGiS,KAAK,CAAClS,MAAxC,EAAgDC,QAAQ,EAAxD,EAA4D;AACxD,kBAAIkE,GAAG,GAAG+N,KAAK,CAACjS,QAAD,CAAf;AACA,kBAAIW,IAAI,GAAG,KAAK,CAAhB;AACA,kBAAI8R,YAAY,GAAG,KAAKL,qBAAL,CAA2B/Q,CAA3B,EAA8BrB,QAA9B,CAAnB;;AACA,kBAAIkE,GAAG,CAACwO,SAAJ,CAAcC,QAAd,CAAuB/U,eAAvB,CAAJ,EAA6C;AACzC+C,gBAAAA,IAAI,GAAGuD,GAAG,CAAC0O,aAAJ,CAAkB,qBAAqB5O,MAArB,CAA4ByO,YAAY,GAAG,CAA3C,EAA8C,UAA9C,EAA0DzO,MAA1D,CAAiEnG,gBAAjE,EAAmF,GAAnF,CAAlB,CAAP;AACH,eAFD,MAEO;AACH8C,gBAAAA,IAAI,GAAGuD,GAAG,CAACoB,KAAJ,CAAUmN,YAAV,CAAP;AACH;;AACD,kBAAI9R,IAAJ,EAAU;AACND,gBAAAA,YAAY,CAACC,IAAD,EAAOR,OAAO,CAACkB,CAAD,CAAd,EAAmBZ,KAAnB,CAAZ;AACAE,gBAAAA,IAAI,CAACE,KAAL,CAAW8C,QAAX,GAAsBA,QAAtB;AACH;AACJ;AACJ;AACJ;;AACD,YAAIxD,OAAO,CAACkB,CAAD,CAAP,CAAWkC,OAAf,EAAwB;AACpB4B,UAAAA,WAAW,IAAIhF,OAAO,CAACkB,CAAD,CAAP,CAAWkC,OAA1B;AACA;AACH;;AACD9C,QAAAA,KAAK,GAAG8O,MAAM,CAACpK,WAAD,CAAd;;AACA,YAAI,qBAAqB1E,KAAzB,EAAgC;AAC5BA,UAAAA,KAAK,GAAGvC,oBAAR;AACH;;AACD,YAAI,aAAa,OAAOuC,KAAxB,EAA+B;AAC3BA,UAAAA,KAAK,GAAGA,KAAK,CAACoS,OAAN,CAAc,CAAd,IAAmB,IAA3B;AACH;;AACD1W,QAAAA,QAAQ,CAACoW,KAAK,CAACnF,EAAN,CAASjI,WAAT,CAAD,EAAwB3I,SAAS,CAACiE,KAAD,CAAT,GAAmBA,KAAnB,GAA2B,MAAnD,CAAR;AACA0E,QAAAA,WAAW;AACd;AACJ;AACJ,GA7sBmE;AA8sBpE2N,EAAAA,eAAe,EAAE,UAAS9S,QAAT,EAAmB;AAChC,WAAO,KAAK+S,oBAAL,CAA0B/S,QAA1B,CAAP;AACH,GAhtBmE;AAitBpE+S,EAAAA,oBAAoB,EAAE,UAAS/S,QAAT,EAAmB;AACrC,QAAI6E,IAAI,GAAG,KAAKmO,eAAL,GAAuB5F,EAAvB,CAA0BpN,QAA1B,CAAX;;AACA,WAAO6E,IAAI,CAACuF,QAAL,EAAP;AACH,GAptBmE;AAqtBpE6I,EAAAA,eAAe,EAAE,UAASjT,QAAT,EAAmBkT,gBAAnB,EAAqC;AAClD,QAAI1Q,KAAJ;AACA,QAAIuK,MAAM,GAAG,KAAK+F,eAAL,CAAqB9S,QAArB,CAAb;;AACA,QAAImT,kBAAkB,GAAG,KAAKC,sBAAL,CAA4BrG,MAA5B,EAAoC/M,QAApC,EAA8CkT,gBAA9C,CAAzB;;AACA,QAAInG,MAAM,CAAChN,MAAP,IAAiBoT,kBAAkB,IAAI,CAA3C,EAA8C;AAC1C3Q,MAAAA,KAAK,GAAGuK,MAAM,CAACK,EAAP,CAAU+F,kBAAV,CAAR;AACH;;AACD,QAAI3Q,KAAK,IAAIA,KAAK,CAACzC,MAAnB,EAA2B;AACvB,aAAOyC,KAAP;AACH;AACJ,GA/tBmE;AAguBpE6Q,EAAAA,cAAc,EAAE,UAASrT,QAAT,EAAmB;AAC/B,QAAIpB,IAAI,GAAG,IAAX;AACA,QAAIiO,WAAW,GAAGtR,CAAC,EAAnB;AACA,QAAI+X,cAAc,GAAG1U,IAAI,CAACgR,gBAAL,EAArB;AACAhT,IAAAA,aAAa,CAAC+U,IAAd,CAAmB2B,cAAnB,EAAoC,UAASC,CAAT,EAAYpJ,YAAZ,EAA0B;AAC1D0C,MAAAA,WAAW,GAAGA,WAAW,CAAC8D,GAAZ,CAAgB/R,IAAI,CAACoU,eAAL,CAAqBzX,CAAC,CAAC4O,YAAD,CAAtB,EAAsCiD,EAAtC,CAAyCpN,QAAzC,CAAhB,CAAd;AACH,KAFD;;AAGA,QAAI6M,WAAW,CAAC9M,MAAhB,EAAwB;AACpB,aAAO8M,WAAP;AACH;AACJ,GA1uBmE;AA2uBpE2G,EAAAA,cAAc,EAAE,UAASxT,QAAT,EAAmBkT,gBAAnB,EAAqC;AACjD,WAAO9W,gBAAgB,CAAC,KAAK6W,eAAL,CAAqBjT,QAArB,EAA+BkT,gBAA/B,CAAD,CAAvB;AACH,GA7uBmE;AA8uBpEO,EAAAA,aAAa,EAAE,UAASzT,QAAT,EAAmB;AAC9B,QAAIiS,KAAK,GAAG,KAAKoB,cAAL,CAAoBrT,QAApB,CAAZ;;AACA,QAAI0T,QAAQ,GAAG,EAAf;;AACA,QAAIzB,KAAK,IAAI,CAAC7V,gBAAgB,CAAC6V,KAAD,CAAhB,CAAwB1E,GAAtC,EAA2C;AACvC,WAAK,IAAIlM,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG4Q,KAAK,CAAClS,MAA1B,EAAkCsB,CAAC,EAAnC,EAAuC;AACnCqS,QAAAA,QAAQ,CAAC5J,IAAT,CAAcmI,KAAK,CAAC5Q,CAAD,CAAnB;AACH;AACJ,KAJD,MAIO;AACHqS,MAAAA,QAAQ,GAAGzB,KAAX;AACH;;AACD,WAAOyB,QAAP;AACH,GAzvBmE;AA0vBpEN,EAAAA,sBAAsB,EAAE,UAASrG,MAAT,EAAiB/M,QAAjB,EAA2BkT,gBAA3B,EAA6C;AACjE,QAAI3W,QAAQ,CAAC2W,gBAAD,CAAZ,EAAgC;AAC5B,UAAI/N,WAAW,GAAG,KAAKH,kBAAL,CAAwB2O,YAAxB,CAAqCT,gBAArC,EAAuD,OAAvD,CAAlB;;AACA,aAAO,KAAKlO,kBAAL,CAAwBqC,eAAxB,CAAwClC,WAAxC,CAAP;AACH;;AACD,WAAO+N,gBAAP;AACH,GAhwBmE;AAiwBpEU,EAAAA,iBAAiB,EAAE,YAAW,CAAE,CAjwBoC;AAkwBpExT,EAAAA,UAAU,EAAE,UAASJ,QAAT,EAAmB;AAC3B,WAAO,KAAKgF,kBAAL,CAAwBC,iBAAxB,CAA0CjF,QAA1C,CAAP;AACH,GApwBmE;AAqwBpE6T,EAAAA,OAAO,EAAE,UAASC,YAAT,EAAuBlI,IAAvB,EAA6B;AAClC,QAAIqG,KAAK,GAAGrG,IAAI,IAAI,KAAKoH,eAAL,EAApB;;AACA,QAAIjG,MAAJ;;AACA,QAAIkF,KAAK,CAAClS,MAAN,GAAe,CAAf,IAAoB+T,YAAY,CAAC9T,QAAb,IAAyB,CAAjD,EAAoD;AAChD,UAAI,cAAc,KAAKgC,MAAL,CAAY,gBAAZ,CAAd,IAA+C,cAAc,KAAKA,MAAL,CAAY,4BAAZ,CAAjE,EAA4G;AACxG8R,QAAAA,YAAY,CAAC9T,QAAb,GAAwB8T,YAAY,CAAC9T,QAAb,GAAwBiS,KAAK,CAAClS,MAA9B,GAAuC+T,YAAY,CAAC9T,QAApD,GAA+DiS,KAAK,CAAClS,MAAN,GAAe,CAAtG;AACH;;AACDgN,MAAAA,MAAM,GAAG,KAAK+F,eAAL,CAAqBgB,YAAY,CAAC9T,QAAlC,CAAT;;AACA,UAAI+M,MAAM,IAAIA,MAAM,CAAChN,MAAP,GAAgB,CAA9B,EAAiC;AAC7B,eAAOgN,MAAM,CAACK,EAAP,CAAUL,MAAM,CAAChN,MAAP,GAAgB+T,YAAY,CAAC3O,WAA7B,GAA2C2O,YAAY,CAAC3O,WAAxD,GAAsE4H,MAAM,CAAChN,MAAP,GAAgB,CAAhG,CAAP;AACH;AACJ;AACJ,GAjxBmE;AAkxBpEgU,EAAAA,YAAY,EAAE,YAAW;AACrB,QAAI5J,YAAY,GAAG,KAAK0F,eAAL,EAAnB;;AACA,QAAI1F,YAAY,IAAI,MAAMA,YAAY,CAACpK,MAAvC,EAA+C;AAC3C,aAAOoK,YAAY,CAAC,CAAD,CAAZ,CAAgByB,IAAhB,CAAqB7L,MAA5B;AACH;;AACD,WAAO,CAAP;AACH,GAxxBmE;AAyxBpEiU,EAAAA,mBAAmB,EAAE,UAAS7J,YAAT,EAAuB;AACxCA,IAAAA,YAAY,GAAGA,YAAY,IAAI,KAAK0F,eAAL,EAA/B;;AACA,QAAI1F,YAAJ,EAAkB;AACd,UAAIM,cAAc,GAAG,KAAKzI,MAAL,GAAc0I,WAAd,IAA6B,KAAK1I,MAAL,CAAY,iBAAZ,CAAlD;AACA,UAAIiS,OAAO,GAAGxJ,cAAc,IAAIN,YAAY,CAAC+J,IAAb,CAAkB,aAAavW,SAA/B,CAAhC;AACA,aAAOsW,OAAO,IAAIA,OAAO,CAAClU,MAAnB,GAA4BkU,OAA5B,GAAsC9J,YAAY,CAAC+J,IAAb,CAAkB,gBAAgBvW,SAAhB,GAA4B,OAA5B,GAAsCA,SAAxD,CAA7C;AACH;;AACD,WAAOpC,CAAC,EAAR;AACH,GAjyBmE;AAkyBpEyX,EAAAA,eAAe,EAAE,UAAS7I,YAAT,EAAuB;AACpC,WAAO,KAAK6J,mBAAL,CAAyB7J,YAAzB,CAAP;AACH,GApyBmE;AAqyBpElK,EAAAA,WAAW,EAAE,UAAS4E,IAAT,EAAe;AACxB,WAAO,KAAKmO,eAAL,GAAuB5N,KAAvB,CAA6BP,IAA7B,CAAP;AACH,GAvyBmE;AAwyBpEnI,EAAAA,eAAe,EAAE,YAAW,CAAE,CAxyBsC;AAyyBpEyX,EAAAA,OAAO,EAAE,YAAW,CAAE,CAzyB8C;AA0yBpEC,EAAAA,kBAAkB,EAAE,UAAS3T,KAAT,EAAgB;AAChC,QAAIsD,QAAQ,GAAG,KAAK/C,OAAL,EAAf;AACA,QAAIqT,UAAU,GAAG,KAAKrS,MAAL,CAAY,YAAZ,CAAjB;AACA+B,IAAAA,QAAQ,IAAIA,QAAQ,CAACuQ,GAAT,CAAa;AACrBC,MAAAA,WAAW,EAAEF,UAAU,GAAG5T,KAAH,GAAW,EADb;AAErB+T,MAAAA,YAAY,EAAE,CAACH,UAAD,GAAc5T,KAAd,GAAsB;AAFf,KAAb,CAAZ;AAIH,GAjzBmE;AAkzBpEgU,EAAAA,kBAAkB,EAAE,UAASC,YAAT,EAAuB;AACvC,QAAI3Q,QAAQ,GAAG,KAAK/C,OAAL,EAAf;AACA,QAAIuJ,aAAa,GAAG,KAAKM,aAAzB;;AACA,QAAI9G,QAAQ,IAAIwG,aAAhB,EAA+B;AAC3B,aAAOmK,YAAY,GAAGvZ,aAAa,CAACoP,aAAD,CAAb,GAA+BnP,QAAQ,CAAC2I,QAAD,CAAvC,GAAoD,CAAvD,GAA2D1I,cAAc,CAACkP,aAAD,CAAd,GAAgCjP,SAAS,CAACyI,QAAD,CAAzC,GAAsD,CAApI;AACH;;AACD,WAAO,KAAP;AACH;AAzzBmE,CAA/C,CAAlB","sourcesContent":["/**\r\n * DevExtreme (esm/ui/grid_core/ui.grid_core.columns_view.js)\r\n * Version: 22.1.6\r\n * Build date: Tue Oct 18 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport {\r\n    getOuterWidth,\r\n    getWidth,\r\n    getOuterHeight,\r\n    getHeight\r\n} from \"../../core/utils/size\";\r\nimport $ from \"../../core/renderer\";\r\nimport domAdapter from \"../../core/dom_adapter\";\r\nimport {\r\n    getWindow\r\n} from \"../../core/utils/window\";\r\nimport eventsEngine from \"../../events/core/events_engine\";\r\nimport {\r\n    data as elementData\r\n} from \"../../core/element_data\";\r\nimport pointerEvents from \"../../events/pointer\";\r\nimport {\r\n    name as clickEventName\r\n} from \"../../events/click\";\r\nimport {\r\n    name as dblclickEvent\r\n} from \"../../events/double_click\";\r\nimport browser from \"../../core/utils/browser\";\r\nimport {\r\n    noop\r\n} from \"../../core/utils/common\";\r\nimport {\r\n    setWidth\r\n} from \"../../core/utils/style\";\r\nimport {\r\n    getPublicElement\r\n} from \"../../core/element\";\r\nimport {\r\n    isRenderer,\r\n    isFunction,\r\n    isString,\r\n    isDefined,\r\n    isNumeric\r\n} from \"../../core/utils/type\";\r\nimport {\r\n    getBoundingRect,\r\n    getDefaultAlignment\r\n} from \"../../core/utils/position\";\r\nimport * as iteratorUtils from \"../../core/utils/iterator\";\r\nimport {\r\n    extend\r\n} from \"../../core/utils/extend\";\r\nimport modules from \"./ui.grid_core.modules\";\r\nimport gridCoreUtils from \"./ui.grid_core.utils\";\r\nimport columnStateMixin from \"./ui.grid_core.column_state_mixin\";\r\nimport {\r\n    when,\r\n    Deferred\r\n} from \"../../core/utils/deferred\";\r\nimport {\r\n    nativeScrolling\r\n} from \"../../core/utils/support\";\r\nvar SCROLL_CONTAINER_CLASS = \"scroll-container\";\r\nvar SCROLLABLE_SIMULATED_CLASS = \"scrollable-simulated\";\r\nvar GROUP_SPACE_CLASS = \"group-space\";\r\nvar CONTENT_CLASS = \"content\";\r\nvar TABLE_CLASS = \"table\";\r\nvar TABLE_FIXED_CLASS = \"table-fixed\";\r\nvar CONTENT_FIXED_CLASS = \"content-fixed\";\r\nvar ROW_CLASS = \"dx-row\";\r\nvar GROUP_ROW_CLASS = \"dx-group-row\";\r\nvar GROUP_CELL_CLASS = \"dx-group-cell\";\r\nvar DETAIL_ROW_CLASS = \"dx-master-detail-row\";\r\nvar FILTER_ROW_CLASS = \"filter-row\";\r\nvar ERROR_ROW_CLASS = \"dx-error-row\";\r\nvar CELL_UPDATED_ANIMATION_CLASS = \"cell-updated-animation\";\r\nvar HIDDEN_COLUMNS_WIDTH = \"0.0001px\";\r\nvar CELL_HINT_VISIBLE = \"dxCellHintVisible\";\r\nvar FORM_FIELD_ITEM_CONTENT_CLASS = \"dx-field-item-content\";\r\nvar appendElementTemplate = {\r\n    render: function(options) {\r\n        options.container.append(options.content)\r\n    }\r\n};\r\nvar subscribeToRowEvents = function(that, $table) {\r\n    var touchTarget;\r\n    var touchCurrentTarget;\r\n    var timeoutId;\r\n\r\n    function clearTouchTargets(timeout) {\r\n        return setTimeout((function() {\r\n            touchTarget = touchCurrentTarget = null\r\n        }), timeout)\r\n    }\r\n    eventsEngine.on($table, \"touchstart touchend\", \".dx-row\", (function(e) {\r\n        clearTimeout(timeoutId);\r\n        if (\"touchstart\" === e.type) {\r\n            touchTarget = e.target;\r\n            touchCurrentTarget = e.currentTarget;\r\n            timeoutId = clearTouchTargets(1e3)\r\n        } else {\r\n            timeoutId = clearTouchTargets()\r\n        }\r\n    }));\r\n    eventsEngine.on($table, [clickEventName, dblclickEvent, pointerEvents.down].join(\" \"), \".dx-row\", that.createAction((function(e) {\r\n        var event = e.event;\r\n        if (touchTarget) {\r\n            event.target = touchTarget;\r\n            event.currentTarget = touchCurrentTarget\r\n        }\r\n        if (!$(event.target).closest(\"a\").length) {\r\n            e.rowIndex = that.getRowIndex(event.currentTarget);\r\n            if (e.rowIndex >= 0) {\r\n                e.rowElement = getPublicElement($(event.currentTarget));\r\n                e.columns = that.getColumns();\r\n                if (event.type === pointerEvents.down) {\r\n                    that._rowPointerDown(e)\r\n                } else if (event.type === clickEventName) {\r\n                    that._rowClick(e)\r\n                } else {\r\n                    that._rowDblClick(e)\r\n                }\r\n            }\r\n        }\r\n    })))\r\n};\r\nvar getWidthStyle = function(width) {\r\n    if (\"auto\" === width) {\r\n        return \"\"\r\n    }\r\n    return isNumeric(width) ? width + \"px\" : width\r\n};\r\nvar setCellWidth = function(cell, column, width) {\r\n    cell.style.width = cell.style.maxWidth = \"auto\" === column.width ? \"\" : width\r\n};\r\nvar copyAttributes = function(element, newElement) {\r\n    if (!element || !newElement) {\r\n        return\r\n    }\r\n    var oldAttributes = element.attributes;\r\n    var newAttributes = newElement.attributes;\r\n    var i;\r\n    for (i = 0; i < oldAttributes.length; i++) {\r\n        var name = oldAttributes[i].nodeName;\r\n        if (!newElement.hasAttribute(name)) {\r\n            element.removeAttribute(name)\r\n        }\r\n    }\r\n    for (i = 0; i < newAttributes.length; i++) {\r\n        element.setAttribute(newAttributes[i].nodeName, newAttributes[i].nodeValue)\r\n    }\r\n};\r\nexport var ColumnsView = modules.View.inherit(columnStateMixin).inherit({\r\n    _createScrollableOptions: function() {\r\n        var scrollingOptions = this.option(\"scrolling\");\r\n        var useNativeScrolling = this.option(\"scrolling.useNative\");\r\n        var options = extend({}, scrollingOptions, {\r\n            direction: \"both\",\r\n            bounceEnabled: false,\r\n            useKeyboard: false\r\n        });\r\n        if (void 0 === useNativeScrolling) {\r\n            useNativeScrolling = true\r\n        }\r\n        if (\"auto\" === useNativeScrolling) {\r\n            delete options.useNative;\r\n            delete options.useSimulatedScrollbar\r\n        } else {\r\n            options.useNative = !!useNativeScrolling;\r\n            options.useSimulatedScrollbar = !useNativeScrolling\r\n        }\r\n        return options\r\n    },\r\n    _updateCell: function($cell, parameters) {\r\n        if (parameters.rowType) {\r\n            this._cellPrepared($cell, parameters)\r\n        }\r\n    },\r\n    _createCell: function(options) {\r\n        var column = options.column;\r\n        var alignment = column.alignment || getDefaultAlignment(this.option(\"rtlEnabled\"));\r\n        var cell = domAdapter.createElement(\"td\");\r\n        cell.style.textAlign = alignment;\r\n        var $cell = $(cell);\r\n        if (\"data\" === options.rowType && column.headerId && !column.type) {\r\n            if (this.component.option(\"showColumnHeaders\")) {\r\n                this.setAria(\"describedby\", column.headerId, $cell)\r\n            }\r\n        }\r\n        if (column.cssClass) {\r\n            $cell.addClass(column.cssClass)\r\n        }\r\n        if (\"expand\" === column.command) {\r\n            $cell.addClass(column.cssClass);\r\n            $cell.addClass(this.addWidgetPrefix(GROUP_SPACE_CLASS))\r\n        }\r\n        if (column.colspan > 1) {\r\n            $cell.attr(\"colSpan\", column.colspan)\r\n        } else if (!column.isBand && \"auto\" !== column.visibleWidth && this.option(\"columnAutoWidth\")) {\r\n            if (column.width || column.minWidth) {\r\n                cell.style.minWidth = getWidthStyle(column.minWidth || column.width)\r\n            }\r\n            if (column.width) {\r\n                setCellWidth(cell, column, getWidthStyle(column.width))\r\n            }\r\n        }\r\n        return $cell\r\n    },\r\n    _createRow: function(rowObject, tagName) {\r\n        tagName = tagName || \"tr\";\r\n        var $element = $(\"<\".concat(tagName, \">\")).addClass(ROW_CLASS);\r\n        this.setAria(\"role\", \"row\", $element);\r\n        return $element\r\n    },\r\n    _isAltRow: function(row) {\r\n        return row && row.dataIndex % 2 === 1\r\n    },\r\n    _createTable: function(columns, isAppend) {\r\n        var that = this;\r\n        var $table = $(\"<table>\").addClass(that.addWidgetPrefix(TABLE_CLASS)).addClass(that.addWidgetPrefix(TABLE_FIXED_CLASS));\r\n        if (columns && !isAppend) {\r\n            $table.append(that._createColGroup(columns));\r\n            if (browser.safari) {\r\n                $table.append($(\"<thead>\").append(\"<tr>\"))\r\n            }\r\n            that.setAria(\"role\", \"presentation\", $table)\r\n        } else {\r\n            that.setAria(\"hidden\", true, $table)\r\n        }\r\n        this.setAria(\"role\", \"presentation\", $(\"<tbody>\").appendTo($table));\r\n        if (isAppend) {\r\n            return $table\r\n        }\r\n        if (browser.mozilla) {\r\n            eventsEngine.on($table, \"mousedown\", \"td\", (function(e) {\r\n                if (e.ctrlKey) {\r\n                    e.preventDefault()\r\n                }\r\n            }))\r\n        }\r\n        if (that.option(\"cellHintEnabled\")) {\r\n            eventsEngine.on($table, \"mousemove\", \".dx-row > td\", this.createAction((function(args) {\r\n                var e = args.event;\r\n                var $element = $(e.target);\r\n                var $cell = $(e.currentTarget);\r\n                var $row = $cell.parent();\r\n                var visibleColumns = that._columnsController.getVisibleColumns();\r\n                var rowOptions = $row.data(\"options\");\r\n                var columnIndex = $cell.index();\r\n                var cellOptions = rowOptions && rowOptions.cells && rowOptions.cells[columnIndex];\r\n                var column = cellOptions ? cellOptions.column : visibleColumns[columnIndex];\r\n                var isHeaderRow = $row.hasClass(\"dx-header-row\");\r\n                var isDataRow = $row.hasClass(\"dx-data-row\");\r\n                var isMasterDetailRow = $row.hasClass(DETAIL_ROW_CLASS);\r\n                var isGroupRow = $row.hasClass(GROUP_ROW_CLASS);\r\n                var isFilterRow = $row.hasClass(that.addWidgetPrefix(FILTER_ROW_CLASS));\r\n                var isDataRowWithTemplate = isDataRow && (!column || column.cellTemplate);\r\n                var isEditorShown = isDataRow && cellOptions && (rowOptions.isEditing || cellOptions.isEditing || (null === column || void 0 === column ? void 0 : column.showEditorAlways));\r\n                var isHeaderRowWithTemplate = isHeaderRow && (!column || column.headerCellTemplate);\r\n                var isGroupCellWithTemplate = isGroupRow && (!column || column.groupIndex && column.groupCellTemplate);\r\n                var shouldShowHint = !isMasterDetailRow && !isFilterRow && !isEditorShown && !isDataRowWithTemplate && !isHeaderRowWithTemplate && !isGroupCellWithTemplate;\r\n                if (shouldShowHint) {\r\n                    if ($element.data(CELL_HINT_VISIBLE)) {\r\n                        $element.removeAttr(\"title\");\r\n                        $element.data(CELL_HINT_VISIBLE, false)\r\n                    }\r\n                    var difference = $element[0].scrollWidth - $element[0].clientWidth;\r\n                    if (difference > 0 && !isDefined($element.attr(\"title\"))) {\r\n                        $element.attr(\"title\", $element.text());\r\n                        $element.data(CELL_HINT_VISIBLE, true)\r\n                    }\r\n                }\r\n            })))\r\n        }\r\n        var getOptions = function(event) {\r\n            var $cell = $(event.currentTarget);\r\n            var $fieldItemContent = $(event.target).closest(\".\" + FORM_FIELD_ITEM_CONTENT_CLASS);\r\n            var $row = $cell.parent();\r\n            var rowOptions = $row.data(\"options\");\r\n            var options = rowOptions && rowOptions.cells && rowOptions.cells[$cell.index()];\r\n            if (!$cell.closest(\"table\").is(event.delegateTarget)) {\r\n                return\r\n            }\r\n            var resultOptions = extend({}, options, {\r\n                cellElement: getPublicElement($cell),\r\n                event: event,\r\n                eventType: event.type\r\n            });\r\n            resultOptions.rowIndex = that.getRowIndex($row);\r\n            if ($fieldItemContent.length) {\r\n                var formItemOptions = $fieldItemContent.data(\"dx-form-item\");\r\n                if (formItemOptions.column) {\r\n                    resultOptions.column = formItemOptions.column;\r\n                    resultOptions.columnIndex = that._columnsController.getVisibleIndex(resultOptions.column.index)\r\n                }\r\n            }\r\n            return resultOptions\r\n        };\r\n        eventsEngine.on($table, \"mouseover\", \".dx-row > td\", (function(e) {\r\n            var options = getOptions(e);\r\n            options && that.executeAction(\"onCellHoverChanged\", options)\r\n        }));\r\n        eventsEngine.on($table, \"mouseout\", \".dx-row > td\", (function(e) {\r\n            var options = getOptions(e);\r\n            options && that.executeAction(\"onCellHoverChanged\", options)\r\n        }));\r\n        eventsEngine.on($table, clickEventName, \".dx-row > td\", (function(e) {\r\n            var options = getOptions(e);\r\n            options && that.executeAction(\"onCellClick\", options)\r\n        }));\r\n        eventsEngine.on($table, dblclickEvent, \".dx-row > td\", (function(e) {\r\n            var options = getOptions(e);\r\n            options && that.executeAction(\"onCellDblClick\", options)\r\n        }));\r\n        subscribeToRowEvents(that, $table);\r\n        return $table\r\n    },\r\n    _rowPointerDown: noop,\r\n    _rowClick: noop,\r\n    _rowDblClick: noop,\r\n    _createColGroup: function(columns) {\r\n        var colgroupElement = $(\"<colgroup>\");\r\n        for (var i = 0; i < columns.length; i++) {\r\n            var colspan = columns[i].colspan || 1;\r\n            for (var j = 0; j < colspan; j++) {\r\n                colgroupElement.append(this._createCol(columns[i]))\r\n            }\r\n        }\r\n        return colgroupElement\r\n    },\r\n    _createCol: function(column) {\r\n        var width = column.visibleWidth || column.width;\r\n        if (\"adaptiveHidden\" === width) {\r\n            width = HIDDEN_COLUMNS_WIDTH\r\n        }\r\n        var col = $(\"<col>\");\r\n        setWidth(col, width);\r\n        return col\r\n    },\r\n    renderDelayedTemplates: function(change) {\r\n        var delayedTemplates = this._delayedTemplates;\r\n        var syncTemplates = delayedTemplates.filter(template => !template.async);\r\n        var asyncTemplates = delayedTemplates.filter(template => template.async);\r\n        this._delayedTemplates = [];\r\n        this._renderDelayedTemplatesCore(syncTemplates, false, change);\r\n        this._renderDelayedTemplatesCoreAsync(asyncTemplates)\r\n    },\r\n    _renderDelayedTemplatesCoreAsync: function(templates) {\r\n        var that = this;\r\n        if (templates.length) {\r\n            getWindow().setTimeout((function() {\r\n                that._renderDelayedTemplatesCore(templates, true)\r\n            }))\r\n        }\r\n    },\r\n    _renderDelayedTemplatesCore: function(templates, isAsync, change) {\r\n        var date = new Date;\r\n        while (templates.length) {\r\n            var templateParameters = templates.shift();\r\n            var options = templateParameters.options;\r\n            var doc = domAdapter.getDocument();\r\n            if (!isAsync || $(options.container).closest(doc).length) {\r\n                if (change) {\r\n                    options.change = change\r\n                }\r\n                templateParameters.template.render(options)\r\n            }\r\n            if (isAsync && new Date - date > 30) {\r\n                this._renderDelayedTemplatesCoreAsync(templates);\r\n                break\r\n            }\r\n        }\r\n        if (!templates.length && this._delayedTemplates.length) {\r\n            this.renderDelayedTemplates()\r\n        }\r\n    },\r\n    _processTemplate: function(template) {\r\n        var renderingTemplate;\r\n        if (template && template.render && !isRenderer(template)) {\r\n            renderingTemplate = {\r\n                allowRenderToDetachedContainer: template.allowRenderToDetachedContainer,\r\n                render: function(options) {\r\n                    template.render(options.container, options.model, options.change);\r\n                    options.deferred && options.deferred.resolve()\r\n                }\r\n            }\r\n        } else if (isFunction(template)) {\r\n            renderingTemplate = {\r\n                render: function(options) {\r\n                    var renderedTemplate = template(getPublicElement(options.container), options.model, options.change);\r\n                    if (renderedTemplate && (renderedTemplate.nodeType || isRenderer(renderedTemplate))) {\r\n                        options.container.append(renderedTemplate)\r\n                    }\r\n                    options.deferred && options.deferred.resolve()\r\n                }\r\n            }\r\n        } else {\r\n            var templateID = isString(template) ? template : $(template).attr(\"id\");\r\n            if (!templateID) {\r\n                renderingTemplate = this.getTemplate(template)\r\n            } else {\r\n                if (!this._templatesCache[templateID]) {\r\n                    this._templatesCache[templateID] = this.getTemplate(template)\r\n                }\r\n                renderingTemplate = this._templatesCache[templateID]\r\n            }\r\n        }\r\n        return renderingTemplate\r\n    },\r\n    renderTemplate: function(container, template, options, allowRenderToDetachedContainer, change) {\r\n        var renderingTemplate = this._processTemplate(template, options);\r\n        var column = options.column;\r\n        var isDataRow = \"data\" === options.rowType;\r\n        var templateDeferred = new Deferred;\r\n        var templateOptions = {\r\n            container: container,\r\n            model: options,\r\n            deferred: templateDeferred,\r\n            onRendered: () => {\r\n                templateDeferred.resolve()\r\n            }\r\n        };\r\n        if (renderingTemplate) {\r\n            options.component = this.component;\r\n            var async = column && (column.renderAsync && isDataRow || this.option(\"renderAsync\") && (false !== column.renderAsync && (column.command || column.showEditorAlways) && isDataRow || \"filter\" === options.rowType));\r\n            if ((renderingTemplate.allowRenderToDetachedContainer || allowRenderToDetachedContainer) && !async) {\r\n                renderingTemplate.render(templateOptions)\r\n            } else {\r\n                this._delayedTemplates.push({\r\n                    template: renderingTemplate,\r\n                    options: templateOptions,\r\n                    async: async\r\n                })\r\n            }\r\n            if (change) {\r\n                change.templateDeferreds = change.templateDeferreds || [];\r\n                change.templateDeferreds.push(templateDeferred)\r\n            }\r\n        } else {\r\n            templateDeferred.reject()\r\n        }\r\n        return templateDeferred.promise()\r\n    },\r\n    _getBodies: function(tableElement) {\r\n        return $(tableElement).children(\"tbody\").not(\".dx-header\").not(\".dx-footer\")\r\n    },\r\n    _needWrapRow: function($tableElement) {\r\n        var _this$_getBodies;\r\n        var hasRowTemplate = !!this.option().rowTemplate;\r\n        return hasRowTemplate && !!(null !== (_this$_getBodies = this._getBodies($tableElement)) && void 0 !== _this$_getBodies && _this$_getBodies.filter(\".\" + ROW_CLASS).length)\r\n    },\r\n    _wrapRowIfNeed: function($table, $row, isRefreshing) {\r\n        var $tableElement = isRefreshing ? $table || this._tableElement : this._tableElement || $table;\r\n        var needWrapRow = this._needWrapRow($tableElement);\r\n        if (needWrapRow) {\r\n            var $tbody = $(\"<tbody>\").addClass($row.attr(\"class\"));\r\n            this.setAria(\"role\", \"presentation\", $tbody);\r\n            return $tbody.append($row)\r\n        }\r\n        return $row\r\n    },\r\n    _appendRow: function($table, $row, appendTemplate) {\r\n        appendTemplate = appendTemplate || appendElementTemplate;\r\n        appendTemplate.render({\r\n            content: $row,\r\n            container: $table\r\n        })\r\n    },\r\n    _resizeCore: function() {\r\n        var scrollLeft = this._scrollLeft;\r\n        if (scrollLeft >= 0) {\r\n            this._scrollLeft = 0;\r\n            this.scrollTo({\r\n                left: scrollLeft\r\n            })\r\n        }\r\n    },\r\n    _renderCore: function(e) {\r\n        var $root = this.element().parent();\r\n        if (!$root || $root.parent().length) {\r\n            this.renderDelayedTemplates(e)\r\n        }\r\n    },\r\n    _renderTable: function(options) {\r\n        options = options || {};\r\n        options.columns = this._columnsController.getVisibleColumns();\r\n        var changeType = options.change && options.change.changeType;\r\n        var $table = this._createTable(options.columns, \"append\" === changeType || \"prepend\" === changeType || \"update\" === changeType);\r\n        this._renderRows($table, options);\r\n        return $table\r\n    },\r\n    _renderRows: function($table, options) {\r\n        var rows = this._getRows(options.change);\r\n        var columnIndices = options.change && options.change.columnIndices || [];\r\n        var changeTypes = options.change && options.change.changeTypes || [];\r\n        for (var i = 0; i < rows.length; i++) {\r\n            this._renderRow($table, extend({\r\n                row: rows[i],\r\n                columnIndices: columnIndices[i],\r\n                changeType: changeTypes[i]\r\n            }, options))\r\n        }\r\n    },\r\n    _renderRow: function($table, options) {\r\n        if (!options.columnIndices) {\r\n            options.row.cells = []\r\n        }\r\n        var $row = this._createRow(options.row);\r\n        var $wrappedRow = this._wrapRowIfNeed($table, $row);\r\n        if (\"remove\" !== options.changeType) {\r\n            this._renderCells($row, options)\r\n        }\r\n        this._appendRow($table, $wrappedRow);\r\n        var rowOptions = extend({\r\n            columns: options.columns\r\n        }, options.row);\r\n        this._addWatchMethod(rowOptions, options.row);\r\n        this._rowPrepared($wrappedRow, rowOptions, options.row)\r\n    },\r\n    _needRenderCell: function(columnIndex, columnIndices) {\r\n        return !columnIndices || columnIndices.indexOf(columnIndex) >= 0\r\n    },\r\n    _renderCells: function($row, options) {\r\n        var columnIndex = 0;\r\n        var row = options.row;\r\n        var columns = options.columns;\r\n        for (var i = 0; i < columns.length; i++) {\r\n            if (this._needRenderCell(i, options.columnIndices)) {\r\n                this._renderCell($row, extend({\r\n                    column: columns[i],\r\n                    columnIndex: columnIndex,\r\n                    value: row.values && row.values[columnIndex],\r\n                    oldValue: row.oldValues && row.oldValues[columnIndex]\r\n                }, options))\r\n            }\r\n            if (columns[i].colspan > 1) {\r\n                columnIndex += columns[i].colspan\r\n            } else {\r\n                columnIndex++\r\n            }\r\n        }\r\n    },\r\n    _updateCells: function($rowElement, $newRowElement, columnIndices) {\r\n        var $cells = $rowElement.children();\r\n        var $newCells = $newRowElement.children();\r\n        var highlightChanges = this.option(\"highlightChanges\");\r\n        var cellUpdatedClass = this.addWidgetPrefix(CELL_UPDATED_ANIMATION_CLASS);\r\n        columnIndices.forEach((function(columnIndex, index) {\r\n            var $cell = $cells.eq(columnIndex);\r\n            var $newCell = $newCells.eq(index);\r\n            $cell.replaceWith($newCell);\r\n            if (highlightChanges && !$newCell.hasClass(\"dx-command-expand\")) {\r\n                $newCell.addClass(cellUpdatedClass)\r\n            }\r\n        }));\r\n        copyAttributes($rowElement.get(0), $newRowElement.get(0))\r\n    },\r\n    _setCellAriaAttributes: function($cell, cellOptions) {\r\n        if (\"freeSpace\" !== cellOptions.rowType) {\r\n            this.setAria(\"role\", \"gridcell\", $cell);\r\n            var columnIndexOffset = this._columnsController.getColumnIndexOffset();\r\n            var ariaColIndex = cellOptions.columnIndex + columnIndexOffset + 1;\r\n            this.setAria(\"colindex\", ariaColIndex, $cell)\r\n        }\r\n    },\r\n    _renderCell: function($row, options) {\r\n        var cellOptions = this._getCellOptions(options);\r\n        if (options.columnIndices) {\r\n            if (options.row.cells) {\r\n                var cellIndex = options.row.cells.findIndex(cell => cell.columnIndex === cellOptions.columnIndex);\r\n                options.row.cells[cellIndex] = cellOptions\r\n            }\r\n        } else {\r\n            options.row.cells.push(cellOptions)\r\n        }\r\n        var $cell = this._createCell(cellOptions);\r\n        this._setCellAriaAttributes($cell, cellOptions);\r\n        this._renderCellContent($cell, cellOptions, options);\r\n        $row.get(0).appendChild($cell.get(0));\r\n        return $cell\r\n    },\r\n    _renderCellContent: function($cell, options, renderOptions) {\r\n        var template = this._getCellTemplate(options);\r\n        when(!template || this.renderTemplate($cell, template, options, void 0, renderOptions.change)).done(() => {\r\n            this._updateCell($cell, options)\r\n        })\r\n    },\r\n    _getCellTemplate: function() {},\r\n    _getRows: function() {\r\n        return []\r\n    },\r\n    _getCellOptions: function(options) {\r\n        var cellOptions = {\r\n            column: options.column,\r\n            columnIndex: options.columnIndex,\r\n            rowType: options.row.rowType,\r\n            isAltRow: this._isAltRow(options.row)\r\n        };\r\n        this._addWatchMethod(cellOptions);\r\n        return cellOptions\r\n    },\r\n    _addWatchMethod: function(options, source) {\r\n        if (!this.option(\"repaintChangesOnly\")) {\r\n            return\r\n        }\r\n        var watchers = [];\r\n        source = source || options;\r\n        source.watch = source.watch || function(getter, updateValueFunc, updateRowFunc) {\r\n            var oldValue = getter(source.data);\r\n            var watcher = function(row) {\r\n                if (row && updateRowFunc) {\r\n                    updateRowFunc(row)\r\n                }\r\n                var newValue = getter(source.data);\r\n                if (JSON.stringify(oldValue) !== JSON.stringify(newValue)) {\r\n                    if (row) {\r\n                        updateValueFunc(newValue)\r\n                    }\r\n                    oldValue = newValue\r\n                }\r\n            };\r\n            watchers.push(watcher);\r\n            return function() {\r\n                var index = watchers.indexOf(watcher);\r\n                if (index >= 0) {\r\n                    watchers.splice(index, 1)\r\n                }\r\n            }\r\n        };\r\n        source.update = source.update || function(row, keepRow) {\r\n            if (row) {\r\n                this.data = options.data = row.data;\r\n                this.rowIndex = options.rowIndex = row.rowIndex;\r\n                this.dataIndex = options.dataIndex = row.dataIndex;\r\n                this.isExpanded = options.isExpanded = row.isExpanded;\r\n                if (options.row && !keepRow) {\r\n                    options.row = row\r\n                }\r\n            }\r\n            watchers.forEach((function(watcher) {\r\n                watcher(row)\r\n            }))\r\n        };\r\n        if (source !== options) {\r\n            options.watch = source.watch.bind(source)\r\n        }\r\n        return options\r\n    },\r\n    _cellPrepared: function(cell, options) {\r\n        options.cellElement = getPublicElement($(cell));\r\n        this.executeAction(\"onCellPrepared\", options)\r\n    },\r\n    _rowPrepared: function($row, options) {\r\n        elementData($row.get(0), \"options\", options);\r\n        options.rowElement = getPublicElement($row);\r\n        this.executeAction(\"onRowPrepared\", options)\r\n    },\r\n    _columnOptionChanged: function(e) {\r\n        var optionNames = e.optionNames;\r\n        if (gridCoreUtils.checkChanges(optionNames, [\"width\", \"visibleWidth\"])) {\r\n            var visibleColumns = this._columnsController.getVisibleColumns();\r\n            var widths = iteratorUtils.map(visibleColumns, (function(column) {\r\n                var width = column.visibleWidth || column.width;\r\n                return isDefined(width) ? width : \"auto\"\r\n            }));\r\n            this.setColumnWidths({\r\n                widths: widths,\r\n                optionNames: optionNames\r\n            });\r\n            return\r\n        }\r\n        if (!this._requireReady) {\r\n            this.render()\r\n        }\r\n    },\r\n    getCellIndex: function($cell) {\r\n        var cellIndex = $cell.length ? $cell[0].cellIndex : -1;\r\n        return cellIndex\r\n    },\r\n    getTableElements: function() {\r\n        return this._tableElement || $()\r\n    },\r\n    getTableElement: function() {\r\n        return this._tableElement\r\n    },\r\n    setTableElement: function(tableElement) {\r\n        this._tableElement = tableElement\r\n    },\r\n    optionChanged: function(args) {\r\n        this.callBase(args);\r\n        switch (args.name) {\r\n            case \"cellHintEnabled\":\r\n            case \"onCellPrepared\":\r\n            case \"onRowPrepared\":\r\n            case \"onCellHoverChanged\":\r\n                this._invalidate(true, true);\r\n                args.handled = true\r\n        }\r\n    },\r\n    init: function() {\r\n        var that = this;\r\n        that._scrollLeft = -1;\r\n        that._columnsController = that.getController(\"columns\");\r\n        that._dataController = that.getController(\"data\");\r\n        that._delayedTemplates = [];\r\n        that._templatesCache = {};\r\n        that.createAction(\"onCellClick\");\r\n        that.createAction(\"onRowClick\");\r\n        that.createAction(\"onCellDblClick\");\r\n        that.createAction(\"onRowDblClick\");\r\n        that.createAction(\"onCellHoverChanged\", {\r\n            excludeValidators: [\"disabled\", \"readOnly\"]\r\n        });\r\n        that.createAction(\"onCellPrepared\", {\r\n            excludeValidators: [\"disabled\", \"readOnly\"],\r\n            category: \"rendering\"\r\n        });\r\n        that.createAction(\"onRowPrepared\", {\r\n            excludeValidators: [\"disabled\", \"readOnly\"],\r\n            category: \"rendering\",\r\n            afterExecute: function(e) {\r\n                that._afterRowPrepared(e)\r\n            }\r\n        });\r\n        that._columnsController.columnsChanged.add(that._columnOptionChanged.bind(that));\r\n        that._dataController && that._dataController.changed.add(that._handleDataChanged.bind(that))\r\n    },\r\n    _afterRowPrepared: noop,\r\n    _handleDataChanged: function() {},\r\n    callbackNames: function() {\r\n        return [\"scrollChanged\"]\r\n    },\r\n    _updateScrollLeftPosition: function() {\r\n        var scrollLeft = this._scrollLeft;\r\n        if (scrollLeft >= 0) {\r\n            this._scrollLeft = 0;\r\n            this.scrollTo({\r\n                left: scrollLeft\r\n            })\r\n        }\r\n    },\r\n    scrollTo: function(pos) {\r\n        var $element = this.element();\r\n        var $scrollContainer = $element && $element.children(\".\" + this.addWidgetPrefix(SCROLL_CONTAINER_CLASS)).not(\".\" + this.addWidgetPrefix(CONTENT_FIXED_CLASS));\r\n        if (isDefined(pos) && isDefined(pos.left) && this._scrollLeft !== pos.left) {\r\n            this._scrollLeft = pos.left;\r\n            $scrollContainer && $scrollContainer.scrollLeft(pos.left)\r\n        }\r\n    },\r\n    _wrapTableInScrollContainer: function($table) {\r\n        var $scrollContainer = $(\"<div>\");\r\n        var useNative = this.option(\"scrolling.useNative\");\r\n        if (false === useNative || \"auto\" === useNative && !nativeScrolling) {\r\n            $scrollContainer.addClass(this.addWidgetPrefix(SCROLLABLE_SIMULATED_CLASS))\r\n        }\r\n        eventsEngine.on($scrollContainer, \"scroll\", () => {\r\n            var scrollLeft = $scrollContainer.scrollLeft();\r\n            if (scrollLeft !== this._scrollLeft) {\r\n                this.scrollChanged.fire({\r\n                    left: scrollLeft\r\n                }, this.name)\r\n            }\r\n        });\r\n        $scrollContainer.addClass(this.addWidgetPrefix(CONTENT_CLASS)).addClass(this.addWidgetPrefix(SCROLL_CONTAINER_CLASS)).append($table).appendTo(this.element());\r\n        this.setAria(\"role\", \"presentation\", $scrollContainer);\r\n        return $scrollContainer\r\n    },\r\n    _updateContent: function($newTableElement) {\r\n        this.setTableElement($newTableElement);\r\n        this._wrapTableInScrollContainer($newTableElement)\r\n    },\r\n    _findContentElement: noop,\r\n    _getWidths: function($cellElements) {\r\n        var result = [];\r\n        var width;\r\n        if ($cellElements) {\r\n            iteratorUtils.each($cellElements, (function(index, item) {\r\n                width = item.offsetWidth;\r\n                if (item.getBoundingClientRect) {\r\n                    var clientRect = getBoundingRect(item);\r\n                    if (clientRect.width > width - 1) {\r\n                        width = clientRect.width\r\n                    }\r\n                }\r\n                result.push(width)\r\n            }))\r\n        }\r\n        return result\r\n    },\r\n    getColumnWidths: function($tableElement) {\r\n        var result = [];\r\n        var $rows;\r\n        var $cells;\r\n        (this.option(\"forceApplyBindings\") || noop)();\r\n        $tableElement = $tableElement || this.getTableElement();\r\n        if ($tableElement) {\r\n            $rows = $tableElement.children(\"tbody:not(.dx-header)\").children();\r\n            for (var i = 0; i < $rows.length; i++) {\r\n                var $row = $rows.eq(i);\r\n                var isRowVisible = \"none\" !== $row.get(0).style.display && !$row.hasClass(\"dx-state-invisible\");\r\n                if (!$row.is(\".\" + GROUP_ROW_CLASS) && !$row.is(\".\" + DETAIL_ROW_CLASS) && !$row.is(\".\" + ERROR_ROW_CLASS) && isRowVisible) {\r\n                    $cells = $row.children(\"td\");\r\n                    break\r\n                }\r\n            }\r\n            result = this._getWidths($cells)\r\n        }\r\n        return result\r\n    },\r\n    getVisibleColumnIndex: function(columnIndex, rowIndex) {\r\n        return columnIndex\r\n    },\r\n    setColumnWidths: function(_ref) {\r\n        var {\r\n            widths: widths,\r\n            $tableElement: $tableElement,\r\n            columns: columns,\r\n            fixed: fixed\r\n        } = _ref;\r\n        var $cols;\r\n        var width;\r\n        var minWidth;\r\n        var columnIndex;\r\n        var columnAutoWidth = this.option(\"columnAutoWidth\");\r\n        $tableElement = $tableElement || this.getTableElement();\r\n        if ($tableElement && $tableElement.length && widths) {\r\n            columnIndex = 0;\r\n            $cols = $tableElement.children(\"colgroup\").children(\"col\");\r\n            setWidth($cols, \"auto\");\r\n            columns = columns || this.getColumns(null, $tableElement);\r\n            for (var i = 0; i < columns.length; i++) {\r\n                if (columnAutoWidth && !fixed) {\r\n                    width = columns[i].width;\r\n                    if (width && !columns[i].command) {\r\n                        width = columns[i].visibleWidth || width;\r\n                        width = getWidthStyle(width);\r\n                        minWidth = getWidthStyle(columns[i].minWidth || width);\r\n                        var $rows = $rows || $tableElement.children().children(\".dx-row\").not(\".\" + DETAIL_ROW_CLASS);\r\n                        for (var rowIndex = 0; rowIndex < $rows.length; rowIndex++) {\r\n                            var row = $rows[rowIndex];\r\n                            var cell = void 0;\r\n                            var visibleIndex = this.getVisibleColumnIndex(i, rowIndex);\r\n                            if (row.classList.contains(GROUP_ROW_CLASS)) {\r\n                                cell = row.querySelector(\"td[aria-colindex='\".concat(visibleIndex + 1, \"']:not(.\").concat(GROUP_CELL_CLASS, \")\"))\r\n                            } else {\r\n                                cell = row.cells[visibleIndex]\r\n                            }\r\n                            if (cell) {\r\n                                setCellWidth(cell, columns[i], width);\r\n                                cell.style.minWidth = minWidth\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                if (columns[i].colspan) {\r\n                    columnIndex += columns[i].colspan;\r\n                    continue\r\n                }\r\n                width = widths[columnIndex];\r\n                if (\"adaptiveHidden\" === width) {\r\n                    width = HIDDEN_COLUMNS_WIDTH\r\n                }\r\n                if (\"number\" === typeof width) {\r\n                    width = width.toFixed(3) + \"px\"\r\n                }\r\n                setWidth($cols.eq(columnIndex), isDefined(width) ? width : \"auto\");\r\n                columnIndex++\r\n            }\r\n        }\r\n    },\r\n    getCellElements: function(rowIndex) {\r\n        return this._getCellElementsCore(rowIndex)\r\n    },\r\n    _getCellElementsCore: function(rowIndex) {\r\n        var $row = this._getRowElements().eq(rowIndex);\r\n        return $row.children()\r\n    },\r\n    _getCellElement: function(rowIndex, columnIdentifier) {\r\n        var $cell;\r\n        var $cells = this.getCellElements(rowIndex);\r\n        var columnVisibleIndex = this._getVisibleColumnIndex($cells, rowIndex, columnIdentifier);\r\n        if ($cells.length && columnVisibleIndex >= 0) {\r\n            $cell = $cells.eq(columnVisibleIndex)\r\n        }\r\n        if ($cell && $cell.length) {\r\n            return $cell\r\n        }\r\n    },\r\n    _getRowElement: function(rowIndex) {\r\n        var that = this;\r\n        var $rowElement = $();\r\n        var $tableElements = that.getTableElements();\r\n        iteratorUtils.each($tableElements, (function(_, tableElement) {\r\n            $rowElement = $rowElement.add(that._getRowElements($(tableElement)).eq(rowIndex))\r\n        }));\r\n        if ($rowElement.length) {\r\n            return $rowElement\r\n        }\r\n    },\r\n    getCellElement: function(rowIndex, columnIdentifier) {\r\n        return getPublicElement(this._getCellElement(rowIndex, columnIdentifier))\r\n    },\r\n    getRowElement: function(rowIndex) {\r\n        var $rows = this._getRowElement(rowIndex);\r\n        var elements = [];\r\n        if ($rows && !getPublicElement($rows).get) {\r\n            for (var i = 0; i < $rows.length; i++) {\r\n                elements.push($rows[i])\r\n            }\r\n        } else {\r\n            elements = $rows\r\n        }\r\n        return elements\r\n    },\r\n    _getVisibleColumnIndex: function($cells, rowIndex, columnIdentifier) {\r\n        if (isString(columnIdentifier)) {\r\n            var columnIndex = this._columnsController.columnOption(columnIdentifier, \"index\");\r\n            return this._columnsController.getVisibleIndex(columnIndex)\r\n        }\r\n        return columnIdentifier\r\n    },\r\n    getColumnElements: function() {},\r\n    getColumns: function(rowIndex) {\r\n        return this._columnsController.getVisibleColumns(rowIndex)\r\n    },\r\n    getCell: function(cellPosition, rows) {\r\n        var $rows = rows || this._getRowElements();\r\n        var $cells;\r\n        if ($rows.length > 0 && cellPosition.rowIndex >= 0) {\r\n            if (\"virtual\" !== this.option(\"scrolling.mode\") && \"virtual\" !== this.option(\"scrolling.rowRenderingMode\")) {\r\n                cellPosition.rowIndex = cellPosition.rowIndex < $rows.length ? cellPosition.rowIndex : $rows.length - 1\r\n            }\r\n            $cells = this.getCellElements(cellPosition.rowIndex);\r\n            if ($cells && $cells.length > 0) {\r\n                return $cells.eq($cells.length > cellPosition.columnIndex ? cellPosition.columnIndex : $cells.length - 1)\r\n            }\r\n        }\r\n    },\r\n    getRowsCount: function() {\r\n        var tableElement = this.getTableElement();\r\n        if (tableElement && 1 === tableElement.length) {\r\n            return tableElement[0].rows.length\r\n        }\r\n        return 0\r\n    },\r\n    _getRowElementsCore: function(tableElement) {\r\n        tableElement = tableElement || this.getTableElement();\r\n        if (tableElement) {\r\n            var hasRowTemplate = this.option().rowTemplate || this.option(\"dataRowTemplate\");\r\n            var tBodies = hasRowTemplate && tableElement.find(\"> tbody.\" + ROW_CLASS);\r\n            return tBodies && tBodies.length ? tBodies : tableElement.find(\"> tbody > .\" + ROW_CLASS + \", > .\" + ROW_CLASS)\r\n        }\r\n        return $()\r\n    },\r\n    _getRowElements: function(tableElement) {\r\n        return this._getRowElementsCore(tableElement)\r\n    },\r\n    getRowIndex: function($row) {\r\n        return this._getRowElements().index($row)\r\n    },\r\n    getBoundingRect: function() {},\r\n    getName: function() {},\r\n    setScrollerSpacing: function(width) {\r\n        var $element = this.element();\r\n        var rtlEnabled = this.option(\"rtlEnabled\");\r\n        $element && $element.css({\r\n            paddingLeft: rtlEnabled ? width : \"\",\r\n            paddingRight: !rtlEnabled ? width : \"\"\r\n        })\r\n    },\r\n    isScrollbarVisible: function(isHorizontal) {\r\n        var $element = this.element();\r\n        var $tableElement = this._tableElement;\r\n        if ($element && $tableElement) {\r\n            return isHorizontal ? getOuterWidth($tableElement) - getWidth($element) > 0 : getOuterHeight($tableElement) - getHeight($element) > 0\r\n        }\r\n        return false\r\n    }\r\n});\r\n"]},"metadata":{},"sourceType":"module"}