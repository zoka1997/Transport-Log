{"ast":null,"code":"/*!\n * devextreme-react\n * Version: 22.1.6\n * Build date: Tue Oct 18 2022\n *\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\n *\n * This software may be modified and distributed under the terms\n * of the MIT license. See the LICENSE file in the root of the project for details.\n *\n * https://github.com/DevExpress/devextreme-react\n */\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createDxTemplate = void 0;\n\nvar React = require(\"react\");\n\nvar helpers_1 = require(\"./helpers\");\n\nvar template_wrapper_1 = require(\"./template-wrapper\");\n\nvar component_base_1 = require(\"./component-base\");\n\nvar events = require(\"devextreme/events\");\n\nfunction unwrapElement(element) {\n  return element.get ? element.get(0) : element;\n}\n\nfunction createDxTemplate(createContentProvider, templatesStore, keyFn) {\n  var renderedTemplates = new helpers_1.DoubleKeyMap();\n  return {\n    render: function (data) {\n      var container = unwrapElement(data.container);\n      var key = {\n        key1: data.model,\n        key2: container\n      };\n      var prevTemplateId = renderedTemplates.get(key);\n      var templateId;\n\n      var onRemoved = function () {\n        templatesStore.setDeferredRemove(templateId, true);\n        renderedTemplates.delete(key);\n      };\n\n      var _subscribeOnContainerRemoval = function () {\n        if (container.nodeType === Node.ELEMENT_NODE) {\n          events.one(container, component_base_1.DX_REMOVE_EVENT, onRemoved);\n        }\n      };\n\n      var _unsubscribeOnContainerRemoval = function () {\n        if (container.nodeType === Node.ELEMENT_NODE) {\n          events.off(container, component_base_1.DX_REMOVE_EVENT, onRemoved);\n        }\n      };\n\n      if (prevTemplateId) {\n        templateId = prevTemplateId;\n      } else {\n        templateId = keyFn ? keyFn(data.model) : \"__template_\" + helpers_1.generateID();\n\n        if (data.model !== undefined) {\n          renderedTemplates.set(key, templateId);\n        }\n      }\n\n      _subscribeOnContainerRemoval();\n\n      templatesStore.add(templateId, function () {\n        var props = {\n          data: data.model,\n          index: data.index\n        };\n        var contentProvider = createContentProvider();\n        return React.createElement(template_wrapper_1.TemplateWrapper, {\n          content: contentProvider(props),\n          container: container,\n          onRemoved: onRemoved,\n          onDidMount: function () {\n            var _a;\n\n            _unsubscribeOnContainerRemoval();\n\n            templatesStore.setDeferredRemove(templateId, false);\n            (_a = data.onRendered) === null || _a === void 0 ? void 0 : _a.call(data);\n          },\n          key: templateId\n        });\n      });\n      return container;\n    }\n  };\n}\n\nexports.createDxTemplate = createDxTemplate;","map":{"version":3,"sources":["C:/Users/Zoran/source/repos/TransportApp/TransportLog-basic/node_modules/devextreme-react/core/dx-template.js"],"names":["Object","defineProperty","exports","value","createDxTemplate","React","require","helpers_1","template_wrapper_1","component_base_1","events","unwrapElement","element","get","createContentProvider","templatesStore","keyFn","renderedTemplates","DoubleKeyMap","render","data","container","key","key1","model","key2","prevTemplateId","templateId","onRemoved","setDeferredRemove","delete","_subscribeOnContainerRemoval","nodeType","Node","ELEMENT_NODE","one","DX_REMOVE_EVENT","_unsubscribeOnContainerRemoval","off","generateID","undefined","set","add","props","index","contentProvider","createElement","TemplateWrapper","content","onDidMount","_a","onRendered","call"],"mappings":"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","sourcesContent":["/*!\n * devextreme-react\n * Version: 22.1.6\n * Build date: Tue Oct 18 2022\n *\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\n *\n * This software may be modified and distributed under the terms\n * of the MIT license. See the LICENSE file in the root of the project for details.\n *\n * https://github.com/DevExpress/devextreme-react\n */\n\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createDxTemplate = void 0;\nvar React = require(\"react\");\nvar helpers_1 = require(\"./helpers\");\nvar template_wrapper_1 = require(\"./template-wrapper\");\nvar component_base_1 = require(\"./component-base\");\nvar events = require(\"devextreme/events\");\nfunction unwrapElement(element) {\n    return element.get ? element.get(0) : element;\n}\nfunction createDxTemplate(createContentProvider, templatesStore, keyFn) {\n    var renderedTemplates = new helpers_1.DoubleKeyMap();\n    return {\n        render: function (data) {\n            var container = unwrapElement(data.container);\n            var key = { key1: data.model, key2: container };\n            var prevTemplateId = renderedTemplates.get(key);\n            var templateId;\n            var onRemoved = function () {\n                templatesStore.setDeferredRemove(templateId, true);\n                renderedTemplates.delete(key);\n            };\n            var _subscribeOnContainerRemoval = function () {\n                if (container.nodeType === Node.ELEMENT_NODE) {\n                    events.one(container, component_base_1.DX_REMOVE_EVENT, onRemoved);\n                }\n            };\n            var _unsubscribeOnContainerRemoval = function () {\n                if (container.nodeType === Node.ELEMENT_NODE) {\n                    events.off(container, component_base_1.DX_REMOVE_EVENT, onRemoved);\n                }\n            };\n            if (prevTemplateId) {\n                templateId = prevTemplateId;\n            }\n            else {\n                templateId = keyFn ? keyFn(data.model) : \"__template_\" + helpers_1.generateID();\n                if (data.model !== undefined) {\n                    renderedTemplates.set(key, templateId);\n                }\n            }\n            _subscribeOnContainerRemoval();\n            templatesStore.add(templateId, function () {\n                var props = {\n                    data: data.model,\n                    index: data.index,\n                };\n                var contentProvider = createContentProvider();\n                return React.createElement(template_wrapper_1.TemplateWrapper, {\n                    content: contentProvider(props),\n                    container: container,\n                    onRemoved: onRemoved,\n                    onDidMount: function () {\n                        var _a;\n                        _unsubscribeOnContainerRemoval();\n                        templatesStore.setDeferredRemove(templateId, false);\n                        (_a = data.onRendered) === null || _a === void 0 ? void 0 : _a.call(data);\n                    },\n                    key: templateId,\n                });\n            });\n            return container;\n        },\n    };\n}\nexports.createDxTemplate = createDxTemplate;\n"]},"metadata":{},"sourceType":"script"}