{"ast":null,"code":"/**\r\n * DevExtreme (esm/ui/grid_core/ui.grid_core.utils.js)\r\n * Version: 22.1.6\r\n * Build date: Tue Oct 18 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport { getHeight } from \"../../core/utils/size\";\nimport $ from \"../../core/renderer\";\nimport { isDefined, isFunction, isString } from \"../../core/utils/type\";\nimport { when, Deferred } from \"../../core/utils/deferred\";\nimport sharedFiltering from \"../shared/filtering\";\nimport { format } from \"../../core/utils/string\";\nimport { each } from \"../../core/utils/iterator\";\nimport { extend } from \"../../core/utils/extend\";\nimport { getBoundingRect } from \"../../core/utils/position\";\nimport { toComparable } from \"../../core/utils/data\";\nimport { equalByValue } from \"../../core/utils/common\";\nimport LoadPanel from \"../load_panel\";\nimport { normalizeSortingInfo as normalizeSortingInfoUtility } from \"../../data/utils\";\nimport formatHelper from \"../../format_helper\";\nimport { getWindow } from \"../../core/utils/window\";\nimport eventsEngine from \"../../events/core/events_engine\";\nimport { DataSource } from \"../../data/data_source/data_source\";\nimport ArrayStore from \"../../data/array_store\";\nimport { normalizeDataSourceOptions } from \"../../data/data_source/utils\";\nimport variableWrapper from \"../../core/utils/variable_wrapper\";\nvar DATAGRID_SELECTION_DISABLED_CLASS = \"dx-selection-disabled\";\nvar DATAGRID_GROUP_OPENED_CLASS = \"dx-datagrid-group-opened\";\nvar DATAGRID_GROUP_CLOSED_CLASS = \"dx-datagrid-group-closed\";\nvar DATAGRID_EXPAND_CLASS = \"dx-datagrid-expand\";\nvar NO_DATA_CLASS = \"nodata\";\nvar SCROLLING_MODE_INFINITE = \"infinite\";\nvar SCROLLING_MODE_VIRTUAL = \"virtual\";\nvar LEGACY_SCROLLING_MODE = \"scrolling.legacyMode\";\nvar SCROLLING_MODE_OPTION = \"scrolling.mode\";\nvar ROW_RENDERING_MODE_OPTION = \"scrolling.rowRenderingMode\";\nvar DATE_INTERVAL_SELECTORS = {\n  year: function (value) {\n    return value && value.getFullYear();\n  },\n  month: function (value) {\n    return value && value.getMonth() + 1;\n  },\n  day: function (value) {\n    return value && value.getDate();\n  },\n  quarter: function (value) {\n    return value && Math.floor(value.getMonth() / 3) + 1;\n  },\n  hour: function (value) {\n    return value && value.getHours();\n  },\n  minute: function (value) {\n    return value && value.getMinutes();\n  },\n  second: function (value) {\n    return value && value.getSeconds();\n  }\n};\n\nvar getIntervalSelector = function () {\n  var data = arguments[1];\n  var value = this.calculateCellValue(data);\n\n  if (!isDefined(value)) {\n    return null;\n  } else if (isDateType(this.dataType)) {\n    var nameIntervalSelector = arguments[0];\n    return DATE_INTERVAL_SELECTORS[nameIntervalSelector](value);\n  } else if (\"number\" === this.dataType) {\n    var groupInterval = arguments[0];\n    return Math.floor(Number(value) / groupInterval) * groupInterval;\n  }\n};\n\nvar equalSelectors = function (selector1, selector2) {\n  if (isFunction(selector1) && isFunction(selector2)) {\n    if (selector1.originalCallback && selector2.originalCallback) {\n      return selector1.originalCallback === selector2.originalCallback && selector1.columnIndex === selector2.columnIndex;\n    }\n  }\n\n  return selector1 === selector2;\n};\n\nfunction isDateType(dataType) {\n  return \"date\" === dataType || \"datetime\" === dataType;\n}\n\nvar setEmptyText = function ($container) {\n  $container.get(0).textContent = \"\\xa0\";\n};\n\nvar normalizeSortingInfo = function (sort) {\n  sort = sort || [];\n  var result = normalizeSortingInfoUtility(sort);\n\n  for (var i = 0; i < sort.length; i++) {\n    if (sort && sort[i] && void 0 !== sort[i].isExpanded) {\n      result[i].isExpanded = sort[i].isExpanded;\n    }\n\n    if (sort && sort[i] && void 0 !== sort[i].groupInterval) {\n      result[i].groupInterval = sort[i].groupInterval;\n    }\n  }\n\n  return result;\n};\n\nvar formatValue = function (value, options) {\n  var valueText = formatHelper.format(value, options.format) || value && value.toString() || \"\";\n  var formatObject = {\n    value: value,\n    valueText: options.getDisplayFormat ? options.getDisplayFormat(valueText) : valueText,\n    target: options.target || \"row\",\n    groupInterval: options.groupInterval\n  };\n  return options.customizeText ? options.customizeText.call(options, formatObject) : formatObject.valueText;\n};\n\nvar getSummaryText = function (summaryItem, summaryTexts) {\n  var displayFormat = summaryItem.displayFormat || summaryItem.columnCaption && summaryTexts[summaryItem.summaryType + \"OtherColumn\"] || summaryTexts[summaryItem.summaryType];\n  return formatValue(summaryItem.value, {\n    format: summaryItem.valueFormat,\n    getDisplayFormat: function (valueText) {\n      return displayFormat ? format(displayFormat, valueText, summaryItem.columnCaption) : valueText;\n    },\n    customizeText: summaryItem.customizeText\n  });\n};\n\nvar getWidgetInstance = function ($element) {\n  var editorData = $element.data && $element.data();\n  var dxComponents = editorData && editorData.dxComponents;\n  var widgetName = dxComponents && dxComponents[0];\n  return widgetName && editorData[widgetName];\n};\n\nvar equalFilterParameters = function equalFilterParameters(filter1, filter2) {\n  if (Array.isArray(filter1) && Array.isArray(filter2)) {\n    if (filter1.length !== filter2.length) {\n      return false;\n    } else {\n      for (var i = 0; i < filter1.length; i++) {\n        if (!equalFilterParameters(filter1[i], filter2[i])) {\n          return false;\n        }\n      }\n    }\n\n    return true;\n  } else if (isFunction(filter1) && filter1.columnIndex >= 0 && isFunction(filter2) && filter2.columnIndex >= 0) {\n    return filter1.columnIndex === filter2.columnIndex && toComparable(filter1.filterValue) === toComparable(filter2.filterValue);\n  } else {\n    return toComparable(filter1) == toComparable(filter2);\n  }\n};\n\nfunction normalizeGroupingLoadOptions(group) {\n  if (!Array.isArray(group)) {\n    group = [group];\n  }\n\n  return group.map((item, i) => {\n    if (isString(item)) {\n      return {\n        selector: item,\n        isExpanded: i < group.length - 1\n      };\n    }\n\n    return item;\n  });\n}\n\nexport default {\n  renderNoDataText: function ($element) {\n    $element = $element || this.element();\n\n    if (!$element) {\n      return;\n    }\n\n    var noDataClass = this.addWidgetPrefix(NO_DATA_CLASS);\n    var noDataElement = $element.find(\".\" + noDataClass).last();\n\n    var isVisible = this._dataController.isEmpty();\n\n    var isLoading = this._dataController.isLoading();\n\n    if (!noDataElement.length) {\n      noDataElement = $(\"<span>\").addClass(noDataClass).appendTo($element);\n    }\n\n    if (isVisible && !isLoading) {\n      noDataElement.removeClass(\"dx-hidden\").text(this._getNoDataText());\n    } else {\n      noDataElement.addClass(\"dx-hidden\");\n    }\n  },\n  renderLoadPanel: function ($element, $container, isLocalStore) {\n    var loadPanelOptions;\n    this._loadPanel && this._loadPanel.$element().remove();\n    loadPanelOptions = this.option(\"loadPanel\");\n\n    if (loadPanelOptions && (\"auto\" === loadPanelOptions.enabled ? !isLocalStore : loadPanelOptions.enabled)) {\n      loadPanelOptions = extend({\n        shading: false,\n        message: loadPanelOptions.text,\n        container: $container\n      }, loadPanelOptions);\n      this._loadPanel = this._createComponent($(\"<div>\").appendTo($container), LoadPanel, loadPanelOptions);\n    } else {\n      this._loadPanel = null;\n    }\n  },\n\n  calculateLoadPanelPosition($element) {\n    var $window = $(getWindow());\n\n    if (getHeight($element) > getHeight($window)) {\n      return {\n        of: $window,\n        boundary: $element,\n        collision: \"fit\"\n      };\n    }\n\n    return {\n      of: $element\n    };\n  },\n\n  getIndexByKey: function (key, items, keyName) {\n    var index = -1;\n\n    if (void 0 !== key && Array.isArray(items)) {\n      keyName = arguments.length <= 2 ? \"key\" : keyName;\n\n      for (var i = 0; i < items.length; i++) {\n        var item = isDefined(keyName) ? items[i][keyName] : items[i];\n\n        if (equalByValue(key, item)) {\n          index = i;\n          break;\n        }\n      }\n    }\n\n    return index;\n  },\n  combineFilters: function (filters, operation) {\n    var resultFilter = [];\n    operation = operation || \"and\";\n\n    for (var i = 0; i < filters.length; i++) {\n      var _filters$i;\n\n      if (!filters[i]) {\n        continue;\n      }\n\n      if (1 === (null === (_filters$i = filters[i]) || void 0 === _filters$i ? void 0 : _filters$i.length) && \"!\" === filters[i][0]) {\n        if (\"and\" === operation) {\n          return [\"!\"];\n        } else if (\"or\" === operation) {\n          continue;\n        }\n      }\n\n      if (resultFilter.length) {\n        resultFilter.push(operation);\n      }\n\n      resultFilter.push(filters[i]);\n    }\n\n    if (1 === resultFilter.length) {\n      resultFilter = resultFilter[0];\n    }\n\n    if (resultFilter.length) {\n      return resultFilter;\n    }\n  },\n  checkChanges: function (changes, changeNames) {\n    var changesWithChangeNamesCount = 0;\n\n    for (var i = 0; i < changeNames.length; i++) {\n      if (changes[changeNames[i]]) {\n        changesWithChangeNamesCount++;\n      }\n    }\n\n    return changes.length && changes.length === changesWithChangeNamesCount;\n  },\n  equalFilterParameters: equalFilterParameters,\n  proxyMethod: function (instance, methodName, defaultResult) {\n    if (!instance[methodName]) {\n      instance[methodName] = function () {\n        var dataSource = this._dataSource;\n        return dataSource ? dataSource[methodName].apply(dataSource, arguments) : defaultResult;\n      };\n    }\n  },\n  formatValue: formatValue,\n  getFormatOptionsByColumn: function (column, target) {\n    return {\n      format: column.format,\n      getDisplayFormat: column.getDisplayFormat,\n      customizeText: column.customizeText,\n      target: target,\n      trueText: column.trueText,\n      falseText: column.falseText\n    };\n  },\n  getDisplayValue: function (column, value, data, rowType) {\n    if (column.displayValueMap && void 0 !== column.displayValueMap[value]) {\n      return column.displayValueMap[value];\n    } else if (column.calculateDisplayValue && data && \"group\" !== rowType) {\n      return column.calculateDisplayValue(data);\n    } else if (column.lookup && !(\"group\" === rowType && (column.calculateGroupValue || column.calculateDisplayValue))) {\n      return column.lookup.calculateCellValue(value);\n    }\n\n    return value;\n  },\n  getGroupRowSummaryText: function (summaryItems, summaryTexts) {\n    var result = \"(\";\n\n    for (var i = 0; i < summaryItems.length; i++) {\n      var summaryItem = summaryItems[i];\n      result += (i > 0 ? \", \" : \"\") + getSummaryText(summaryItem, summaryTexts);\n    }\n\n    return result + \")\";\n  },\n  getSummaryText: getSummaryText,\n  normalizeSortingInfo: normalizeSortingInfo,\n  getFormatByDataType: function (dataType) {\n    switch (dataType) {\n      case \"date\":\n        return \"shortDate\";\n\n      case \"datetime\":\n        return \"shortDateShortTime\";\n    }\n  },\n  getHeaderFilterGroupParameters: function (column, remoteGrouping) {\n    var result = [];\n    var dataField = column.dataField || column.name;\n    var groupInterval = sharedFiltering.getGroupInterval(column);\n\n    if (groupInterval) {\n      each(groupInterval, function (index, interval) {\n        result.push(remoteGrouping ? {\n          selector: dataField,\n          groupInterval: interval,\n          isExpanded: index < groupInterval.length - 1\n        } : getIntervalSelector.bind(column, interval));\n      });\n      return result;\n    }\n\n    if (remoteGrouping) {\n      result = [{\n        selector: dataField,\n        isExpanded: false\n      }];\n    } else {\n      result = function (data) {\n        var result = column.calculateCellValue(data);\n\n        if (void 0 === result || \"\" === result) {\n          result = null;\n        }\n\n        return result;\n      };\n\n      if (column.sortingMethod) {\n        result = [{\n          selector: result,\n          compare: column.sortingMethod.bind(column)\n        }];\n      }\n    }\n\n    return result;\n  },\n\n  equalSortParameters(sortParameters1, sortParameters2, ignoreIsExpanded) {\n    sortParameters1 = normalizeSortingInfo(sortParameters1);\n    sortParameters2 = normalizeSortingInfo(sortParameters2);\n\n    if (Array.isArray(sortParameters1) && Array.isArray(sortParameters2)) {\n      if (sortParameters1.length !== sortParameters2.length) {\n        return false;\n      } else {\n        for (var i = 0; i < sortParameters1.length; i++) {\n          if (!equalSelectors(sortParameters1[i].selector, sortParameters2[i].selector) || sortParameters1[i].desc !== sortParameters2[i].desc || sortParameters1[i].groupInterval !== sortParameters2[i].groupInterval || !ignoreIsExpanded && Boolean(sortParameters1[i].isExpanded) !== Boolean(sortParameters2[i].isExpanded)) {\n            return false;\n          }\n        }\n      }\n\n      return true;\n    } else {\n      return (!sortParameters1 || !sortParameters1.length) === (!sortParameters2 || !sortParameters2.length);\n    }\n  },\n\n  getPointsByColumns: function (items, pointCreated, isVertical, startColumnIndex) {\n    var cellsLength = items.length;\n    var notCreatePoint = false;\n    var item;\n    var offset;\n    var columnIndex = startColumnIndex || 0;\n    var result = [];\n    var rtlEnabled;\n\n    for (var i = 0; i <= cellsLength; i++) {\n      if (i < cellsLength) {\n        item = items.eq(i);\n        offset = item.offset();\n        rtlEnabled = \"rtl\" === item.css(\"direction\");\n      }\n\n      var point = {\n        index: columnIndex,\n        x: offset ? offset.left + (!isVertical && rtlEnabled ^ i === cellsLength ? getBoundingRect(item[0]).width : 0) : 0,\n        y: offset ? offset.top + (isVertical && i === cellsLength ? getBoundingRect(item[0]).height : 0) : 0,\n        columnIndex: columnIndex\n      };\n\n      if (!isVertical && i > 0) {\n        var prevItemOffset = items.eq(i - 1).offset();\n\n        if (prevItemOffset.top < point.y) {\n          point.y = prevItemOffset.top;\n        }\n      }\n\n      if (pointCreated) {\n        notCreatePoint = pointCreated(point);\n      }\n\n      if (!notCreatePoint) {\n        result.push(point);\n      }\n\n      columnIndex++;\n    }\n\n    return result;\n  },\n  getExpandCellTemplate: function () {\n    return {\n      allowRenderToDetachedContainer: true,\n      render: function (container, options) {\n        var $container = $(container);\n\n        if (isDefined(options.value) && !(options.data && options.data.isContinuation) && !options.row.isNewRow) {\n          var rowsView = options.component.getView(\"rowsView\");\n          $container.addClass(DATAGRID_EXPAND_CLASS).addClass(DATAGRID_SELECTION_DISABLED_CLASS);\n          $(\"<div>\").addClass(options.value ? DATAGRID_GROUP_OPENED_CLASS : DATAGRID_GROUP_CLOSED_CLASS).appendTo($container);\n          rowsView.setAria(\"label\", options.value ? rowsView.localize(\"dxDataGrid-ariaCollapse\") : rowsView.localize(\"dxDataGrid-ariaExpand\"), $container);\n        } else {\n          setEmptyText($container);\n        }\n      }\n    };\n  },\n  setEmptyText: setEmptyText,\n  isDateType: isDateType,\n  getSelectionRange: function (focusedElement) {\n    try {\n      if (focusedElement) {\n        return {\n          selectionStart: focusedElement.selectionStart,\n          selectionEnd: focusedElement.selectionEnd\n        };\n      }\n    } catch (e) {}\n\n    return {};\n  },\n  setSelectionRange: function (focusedElement, selectionRange) {\n    try {\n      if (focusedElement && focusedElement.setSelectionRange) {\n        focusedElement.setSelectionRange(selectionRange.selectionStart, selectionRange.selectionEnd);\n      }\n    } catch (e) {}\n  },\n  focusAndSelectElement: function (component, $element) {\n    var isFocused = $element.is(\":focus\");\n    eventsEngine.trigger($element, \"focus\");\n    var isSelectTextOnEditingStart = component.option(\"editing.selectTextOnEditStart\");\n    var element = $element.get(0);\n\n    if (!isFocused && isSelectTextOnEditingStart && $element.is(\".dx-texteditor-input\") && !$element.is(\"[readonly]\")) {\n      var editor = getWidgetInstance($element.closest(\".dx-texteditor\"));\n      when(editor && editor._loadItemDeferred).done(function () {\n        element.select();\n      });\n    }\n  },\n  getWidgetInstance: getWidgetInstance,\n  getLastResizableColumnIndex: function (columns, resultWidths) {\n    var hasResizableColumns = columns.some(column => column && !column.command && !column.fixed && false !== column.allowResizing);\n    var lastColumnIndex;\n\n    for (lastColumnIndex = columns.length - 1; columns[lastColumnIndex]; lastColumnIndex--) {\n      var column = columns[lastColumnIndex];\n      var width = resultWidths && resultWidths[lastColumnIndex];\n      var allowResizing = !hasResizableColumns || false !== column.allowResizing;\n\n      if (!column.command && !column.fixed && \"adaptiveHidden\" !== width && allowResizing) {\n        break;\n      }\n    }\n\n    return lastColumnIndex;\n  },\n  isElementInCurrentGrid: function (controller, $element) {\n    if ($element && $element.length) {\n      var $grid = $element.closest(\".\" + controller.getWidgetContainerClass()).parent();\n      return $grid.is(controller.component.$element());\n    }\n\n    return false;\n  },\n  isVirtualRowRendering: function (that) {\n    var rowRenderingMode = that.option(ROW_RENDERING_MODE_OPTION);\n    var isVirtualMode = that.option(SCROLLING_MODE_OPTION) === SCROLLING_MODE_VIRTUAL;\n    var isAppendMode = that.option(SCROLLING_MODE_OPTION) === SCROLLING_MODE_INFINITE;\n\n    if (false === that.option(LEGACY_SCROLLING_MODE) && (isVirtualMode || isAppendMode)) {\n      return true;\n    }\n\n    return rowRenderingMode === SCROLLING_MODE_VIRTUAL;\n  },\n  getPixelRatio: function (window) {\n    return window.devicePixelRatio || 1;\n  },\n\n  getContentHeightLimit(browser) {\n    if (browser.mozilla) {\n      return 8e6;\n    }\n\n    return 15e6 / this.getPixelRatio(getWindow());\n  },\n\n  normalizeLookupDataSource(lookup) {\n    var lookupDataSourceOptions;\n\n    if (lookup.items) {\n      lookupDataSourceOptions = lookup.items;\n    } else {\n      lookupDataSourceOptions = lookup.dataSource;\n\n      if (isFunction(lookupDataSourceOptions) && !variableWrapper.isWrapped(lookupDataSourceOptions)) {\n        lookupDataSourceOptions = lookupDataSourceOptions({});\n      }\n    }\n\n    return normalizeDataSourceOptions(lookupDataSourceOptions);\n  },\n\n  getWrappedLookupDataSource(column, dataSource, filter) {\n    var lookupDataSourceOptions = this.normalizeLookupDataSource(column.lookup);\n\n    if (column.calculateCellValue !== column.defaultCalculateCellValue) {\n      return lookupDataSourceOptions;\n    }\n\n    var hasGroupPaging = dataSource.remoteOperations().groupPaging;\n    var hasLookupOptimization = column.displayField && isString(column.displayField);\n    var cachedUniqueRelevantItems;\n\n    var lookupDataSource = _extends({}, lookupDataSourceOptions, {\n      load: loadOptions => {\n        var d = new Deferred();\n        (loadOptions => {\n          var group = normalizeGroupingLoadOptions(hasLookupOptimization ? [column.dataField, column.displayField] : column.dataField);\n          var d = new Deferred();\n\n          if (!hasGroupPaging && cachedUniqueRelevantItems) {\n            d.resolve(cachedUniqueRelevantItems);\n          } else {\n            dataSource.load({\n              filter: filter,\n              group: group,\n              take: hasGroupPaging ? loadOptions.take : void 0,\n              skip: hasGroupPaging ? loadOptions.skip : void 0\n            }).done(items => {\n              cachedUniqueRelevantItems = items;\n              d.resolve(items);\n            }).fail(d.fail);\n          }\n\n          return d;\n        })(loadOptions).done(items => {\n          if (0 === items.length) {\n            d.resolve([]);\n          }\n\n          var newDataSource;\n\n          if (hasLookupOptimization) {\n            var lookupItems = items.map(item => {\n              var _column$displayValueM;\n\n              return {\n                [column.lookup.valueExpr]: item.key,\n                [column.lookup.displayExpr]: null !== (_column$displayValueM = column.displayValueMap[item.key]) && void 0 !== _column$displayValueM ? _column$displayValueM : item.items[0].key\n              };\n            });\n            newDataSource = new DataSource(_extends({}, lookupDataSourceOptions, loadOptions, {\n              store: new ArrayStore({\n                data: lookupItems,\n                key: column.lookup.valueExpr\n              })\n            }));\n          } else {\n            var _filter = this.combineFilters(items.flatMap(data => data.key).map(key => [column.lookup.valueExpr, key]), \"or\");\n\n            newDataSource = new DataSource(_extends({}, lookupDataSourceOptions, loadOptions, {\n              filter: this.combineFilters([_filter, loadOptions.filter], \"and\")\n            }));\n          }\n\n          if (!hasGroupPaging) {\n            newDataSource.on(\"customizeStoreLoadOptions\", e => {\n              e.storeLoadOptions.take = loadOptions.take;\n              e.storeLoadOptions.skip = loadOptions.skip;\n            });\n          }\n\n          newDataSource.load().done(d.resolve).fail(d.fail);\n        }).fail(d.fail);\n        return d;\n      },\n      key: column.lookup.valueExpr,\n\n      byKey(key) {\n        var d = Deferred();\n        this.load({\n          filter: [column.lookup.valueExpr, \"=\", key]\n        }).done(arr => {\n          d.resolve(arr[0]);\n        });\n        return d.promise();\n      }\n\n    });\n\n    return lookupDataSource;\n  }\n\n};","map":{"version":3,"sources":["C:/Users/Zoran/source/repos/TransportApp/TransportLog-basic/node_modules/devextreme/esm/ui/grid_core/ui.grid_core.utils.js"],"names":["_extends","getHeight","$","isDefined","isFunction","isString","when","Deferred","sharedFiltering","format","each","extend","getBoundingRect","toComparable","equalByValue","LoadPanel","normalizeSortingInfo","normalizeSortingInfoUtility","formatHelper","getWindow","eventsEngine","DataSource","ArrayStore","normalizeDataSourceOptions","variableWrapper","DATAGRID_SELECTION_DISABLED_CLASS","DATAGRID_GROUP_OPENED_CLASS","DATAGRID_GROUP_CLOSED_CLASS","DATAGRID_EXPAND_CLASS","NO_DATA_CLASS","SCROLLING_MODE_INFINITE","SCROLLING_MODE_VIRTUAL","LEGACY_SCROLLING_MODE","SCROLLING_MODE_OPTION","ROW_RENDERING_MODE_OPTION","DATE_INTERVAL_SELECTORS","year","value","getFullYear","month","getMonth","day","getDate","quarter","Math","floor","hour","getHours","minute","getMinutes","second","getSeconds","getIntervalSelector","data","arguments","calculateCellValue","isDateType","dataType","nameIntervalSelector","groupInterval","Number","equalSelectors","selector1","selector2","originalCallback","columnIndex","setEmptyText","$container","get","textContent","sort","result","i","length","isExpanded","formatValue","options","valueText","toString","formatObject","getDisplayFormat","target","customizeText","call","getSummaryText","summaryItem","summaryTexts","displayFormat","columnCaption","summaryType","valueFormat","getWidgetInstance","$element","editorData","dxComponents","widgetName","equalFilterParameters","filter1","filter2","Array","isArray","filterValue","normalizeGroupingLoadOptions","group","map","item","selector","renderNoDataText","element","noDataClass","addWidgetPrefix","noDataElement","find","last","isVisible","_dataController","isEmpty","isLoading","addClass","appendTo","removeClass","text","_getNoDataText","renderLoadPanel","isLocalStore","loadPanelOptions","_loadPanel","remove","option","enabled","shading","message","container","_createComponent","calculateLoadPanelPosition","$window","of","boundary","collision","getIndexByKey","key","items","keyName","index","combineFilters","filters","operation","resultFilter","_filters$i","push","checkChanges","changes","changeNames","changesWithChangeNamesCount","proxyMethod","instance","methodName","defaultResult","dataSource","_dataSource","apply","getFormatOptionsByColumn","column","trueText","falseText","getDisplayValue","rowType","displayValueMap","calculateDisplayValue","lookup","calculateGroupValue","getGroupRowSummaryText","summaryItems","getFormatByDataType","getHeaderFilterGroupParameters","remoteGrouping","dataField","name","getGroupInterval","interval","bind","sortingMethod","compare","equalSortParameters","sortParameters1","sortParameters2","ignoreIsExpanded","desc","Boolean","getPointsByColumns","pointCreated","isVertical","startColumnIndex","cellsLength","notCreatePoint","offset","rtlEnabled","eq","css","point","x","left","width","y","top","height","prevItemOffset","getExpandCellTemplate","allowRenderToDetachedContainer","render","isContinuation","row","isNewRow","rowsView","component","getView","setAria","localize","getSelectionRange","focusedElement","selectionStart","selectionEnd","e","setSelectionRange","selectionRange","focusAndSelectElement","isFocused","is","trigger","isSelectTextOnEditingStart","editor","closest","_loadItemDeferred","done","select","getLastResizableColumnIndex","columns","resultWidths","hasResizableColumns","some","command","fixed","allowResizing","lastColumnIndex","isElementInCurrentGrid","controller","$grid","getWidgetContainerClass","parent","isVirtualRowRendering","that","rowRenderingMode","isVirtualMode","isAppendMode","getPixelRatio","window","devicePixelRatio","getContentHeightLimit","browser","mozilla","normalizeLookupDataSource","lookupDataSourceOptions","isWrapped","getWrappedLookupDataSource","filter","defaultCalculateCellValue","hasGroupPaging","remoteOperations","groupPaging","hasLookupOptimization","displayField","cachedUniqueRelevantItems","lookupDataSource","load","loadOptions","d","resolve","take","skip","fail","newDataSource","lookupItems","_column$displayValueM","valueExpr","displayExpr","store","_filter","flatMap","on","storeLoadOptions","byKey","arr","promise"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (esm/ui/grid_core/ui.grid_core.utils.js)\r\n * Version: 22.1.6\r\n * Build date: Tue Oct 18 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\r\nimport {\r\n    getHeight\r\n} from \"../../core/utils/size\";\r\nimport $ from \"../../core/renderer\";\r\nimport {\r\n    isDefined,\r\n    isFunction,\r\n    isString\r\n} from \"../../core/utils/type\";\r\nimport {\r\n    when,\r\n    Deferred\r\n} from \"../../core/utils/deferred\";\r\nimport sharedFiltering from \"../shared/filtering\";\r\nimport {\r\n    format\r\n} from \"../../core/utils/string\";\r\nimport {\r\n    each\r\n} from \"../../core/utils/iterator\";\r\nimport {\r\n    extend\r\n} from \"../../core/utils/extend\";\r\nimport {\r\n    getBoundingRect\r\n} from \"../../core/utils/position\";\r\nimport {\r\n    toComparable\r\n} from \"../../core/utils/data\";\r\nimport {\r\n    equalByValue\r\n} from \"../../core/utils/common\";\r\nimport LoadPanel from \"../load_panel\";\r\nimport {\r\n    normalizeSortingInfo as normalizeSortingInfoUtility\r\n} from \"../../data/utils\";\r\nimport formatHelper from \"../../format_helper\";\r\nimport {\r\n    getWindow\r\n} from \"../../core/utils/window\";\r\nimport eventsEngine from \"../../events/core/events_engine\";\r\nimport {\r\n    DataSource\r\n} from \"../../data/data_source/data_source\";\r\nimport ArrayStore from \"../../data/array_store\";\r\nimport {\r\n    normalizeDataSourceOptions\r\n} from \"../../data/data_source/utils\";\r\nimport variableWrapper from \"../../core/utils/variable_wrapper\";\r\nvar DATAGRID_SELECTION_DISABLED_CLASS = \"dx-selection-disabled\";\r\nvar DATAGRID_GROUP_OPENED_CLASS = \"dx-datagrid-group-opened\";\r\nvar DATAGRID_GROUP_CLOSED_CLASS = \"dx-datagrid-group-closed\";\r\nvar DATAGRID_EXPAND_CLASS = \"dx-datagrid-expand\";\r\nvar NO_DATA_CLASS = \"nodata\";\r\nvar SCROLLING_MODE_INFINITE = \"infinite\";\r\nvar SCROLLING_MODE_VIRTUAL = \"virtual\";\r\nvar LEGACY_SCROLLING_MODE = \"scrolling.legacyMode\";\r\nvar SCROLLING_MODE_OPTION = \"scrolling.mode\";\r\nvar ROW_RENDERING_MODE_OPTION = \"scrolling.rowRenderingMode\";\r\nvar DATE_INTERVAL_SELECTORS = {\r\n    year: function(value) {\r\n        return value && value.getFullYear()\r\n    },\r\n    month: function(value) {\r\n        return value && value.getMonth() + 1\r\n    },\r\n    day: function(value) {\r\n        return value && value.getDate()\r\n    },\r\n    quarter: function(value) {\r\n        return value && Math.floor(value.getMonth() / 3) + 1\r\n    },\r\n    hour: function(value) {\r\n        return value && value.getHours()\r\n    },\r\n    minute: function(value) {\r\n        return value && value.getMinutes()\r\n    },\r\n    second: function(value) {\r\n        return value && value.getSeconds()\r\n    }\r\n};\r\nvar getIntervalSelector = function() {\r\n    var data = arguments[1];\r\n    var value = this.calculateCellValue(data);\r\n    if (!isDefined(value)) {\r\n        return null\r\n    } else if (isDateType(this.dataType)) {\r\n        var nameIntervalSelector = arguments[0];\r\n        return DATE_INTERVAL_SELECTORS[nameIntervalSelector](value)\r\n    } else if (\"number\" === this.dataType) {\r\n        var groupInterval = arguments[0];\r\n        return Math.floor(Number(value) / groupInterval) * groupInterval\r\n    }\r\n};\r\nvar equalSelectors = function(selector1, selector2) {\r\n    if (isFunction(selector1) && isFunction(selector2)) {\r\n        if (selector1.originalCallback && selector2.originalCallback) {\r\n            return selector1.originalCallback === selector2.originalCallback && selector1.columnIndex === selector2.columnIndex\r\n        }\r\n    }\r\n    return selector1 === selector2\r\n};\r\n\r\nfunction isDateType(dataType) {\r\n    return \"date\" === dataType || \"datetime\" === dataType\r\n}\r\nvar setEmptyText = function($container) {\r\n    $container.get(0).textContent = \"\\xa0\"\r\n};\r\nvar normalizeSortingInfo = function(sort) {\r\n    sort = sort || [];\r\n    var result = normalizeSortingInfoUtility(sort);\r\n    for (var i = 0; i < sort.length; i++) {\r\n        if (sort && sort[i] && void 0 !== sort[i].isExpanded) {\r\n            result[i].isExpanded = sort[i].isExpanded\r\n        }\r\n        if (sort && sort[i] && void 0 !== sort[i].groupInterval) {\r\n            result[i].groupInterval = sort[i].groupInterval\r\n        }\r\n    }\r\n    return result\r\n};\r\nvar formatValue = function(value, options) {\r\n    var valueText = formatHelper.format(value, options.format) || value && value.toString() || \"\";\r\n    var formatObject = {\r\n        value: value,\r\n        valueText: options.getDisplayFormat ? options.getDisplayFormat(valueText) : valueText,\r\n        target: options.target || \"row\",\r\n        groupInterval: options.groupInterval\r\n    };\r\n    return options.customizeText ? options.customizeText.call(options, formatObject) : formatObject.valueText\r\n};\r\nvar getSummaryText = function(summaryItem, summaryTexts) {\r\n    var displayFormat = summaryItem.displayFormat || summaryItem.columnCaption && summaryTexts[summaryItem.summaryType + \"OtherColumn\"] || summaryTexts[summaryItem.summaryType];\r\n    return formatValue(summaryItem.value, {\r\n        format: summaryItem.valueFormat,\r\n        getDisplayFormat: function(valueText) {\r\n            return displayFormat ? format(displayFormat, valueText, summaryItem.columnCaption) : valueText\r\n        },\r\n        customizeText: summaryItem.customizeText\r\n    })\r\n};\r\nvar getWidgetInstance = function($element) {\r\n    var editorData = $element.data && $element.data();\r\n    var dxComponents = editorData && editorData.dxComponents;\r\n    var widgetName = dxComponents && dxComponents[0];\r\n    return widgetName && editorData[widgetName]\r\n};\r\nvar equalFilterParameters = function equalFilterParameters(filter1, filter2) {\r\n    if (Array.isArray(filter1) && Array.isArray(filter2)) {\r\n        if (filter1.length !== filter2.length) {\r\n            return false\r\n        } else {\r\n            for (var i = 0; i < filter1.length; i++) {\r\n                if (!equalFilterParameters(filter1[i], filter2[i])) {\r\n                    return false\r\n                }\r\n            }\r\n        }\r\n        return true\r\n    } else if (isFunction(filter1) && filter1.columnIndex >= 0 && isFunction(filter2) && filter2.columnIndex >= 0) {\r\n        return filter1.columnIndex === filter2.columnIndex && toComparable(filter1.filterValue) === toComparable(filter2.filterValue)\r\n    } else {\r\n        return toComparable(filter1) == toComparable(filter2)\r\n    }\r\n};\r\n\r\nfunction normalizeGroupingLoadOptions(group) {\r\n    if (!Array.isArray(group)) {\r\n        group = [group]\r\n    }\r\n    return group.map((item, i) => {\r\n        if (isString(item)) {\r\n            return {\r\n                selector: item,\r\n                isExpanded: i < group.length - 1\r\n            }\r\n        }\r\n        return item\r\n    })\r\n}\r\nexport default {\r\n    renderNoDataText: function($element) {\r\n        $element = $element || this.element();\r\n        if (!$element) {\r\n            return\r\n        }\r\n        var noDataClass = this.addWidgetPrefix(NO_DATA_CLASS);\r\n        var noDataElement = $element.find(\".\" + noDataClass).last();\r\n        var isVisible = this._dataController.isEmpty();\r\n        var isLoading = this._dataController.isLoading();\r\n        if (!noDataElement.length) {\r\n            noDataElement = $(\"<span>\").addClass(noDataClass).appendTo($element)\r\n        }\r\n        if (isVisible && !isLoading) {\r\n            noDataElement.removeClass(\"dx-hidden\").text(this._getNoDataText())\r\n        } else {\r\n            noDataElement.addClass(\"dx-hidden\")\r\n        }\r\n    },\r\n    renderLoadPanel: function($element, $container, isLocalStore) {\r\n        var loadPanelOptions;\r\n        this._loadPanel && this._loadPanel.$element().remove();\r\n        loadPanelOptions = this.option(\"loadPanel\");\r\n        if (loadPanelOptions && (\"auto\" === loadPanelOptions.enabled ? !isLocalStore : loadPanelOptions.enabled)) {\r\n            loadPanelOptions = extend({\r\n                shading: false,\r\n                message: loadPanelOptions.text,\r\n                container: $container\r\n            }, loadPanelOptions);\r\n            this._loadPanel = this._createComponent($(\"<div>\").appendTo($container), LoadPanel, loadPanelOptions)\r\n        } else {\r\n            this._loadPanel = null\r\n        }\r\n    },\r\n    calculateLoadPanelPosition($element) {\r\n        var $window = $(getWindow());\r\n        if (getHeight($element) > getHeight($window)) {\r\n            return {\r\n                of: $window,\r\n                boundary: $element,\r\n                collision: \"fit\"\r\n            }\r\n        }\r\n        return {\r\n            of: $element\r\n        }\r\n    },\r\n    getIndexByKey: function(key, items, keyName) {\r\n        var index = -1;\r\n        if (void 0 !== key && Array.isArray(items)) {\r\n            keyName = arguments.length <= 2 ? \"key\" : keyName;\r\n            for (var i = 0; i < items.length; i++) {\r\n                var item = isDefined(keyName) ? items[i][keyName] : items[i];\r\n                if (equalByValue(key, item)) {\r\n                    index = i;\r\n                    break\r\n                }\r\n            }\r\n        }\r\n        return index\r\n    },\r\n    combineFilters: function(filters, operation) {\r\n        var resultFilter = [];\r\n        operation = operation || \"and\";\r\n        for (var i = 0; i < filters.length; i++) {\r\n            var _filters$i;\r\n            if (!filters[i]) {\r\n                continue\r\n            }\r\n            if (1 === (null === (_filters$i = filters[i]) || void 0 === _filters$i ? void 0 : _filters$i.length) && \"!\" === filters[i][0]) {\r\n                if (\"and\" === operation) {\r\n                    return [\"!\"]\r\n                } else if (\"or\" === operation) {\r\n                    continue\r\n                }\r\n            }\r\n            if (resultFilter.length) {\r\n                resultFilter.push(operation)\r\n            }\r\n            resultFilter.push(filters[i])\r\n        }\r\n        if (1 === resultFilter.length) {\r\n            resultFilter = resultFilter[0]\r\n        }\r\n        if (resultFilter.length) {\r\n            return resultFilter\r\n        }\r\n    },\r\n    checkChanges: function(changes, changeNames) {\r\n        var changesWithChangeNamesCount = 0;\r\n        for (var i = 0; i < changeNames.length; i++) {\r\n            if (changes[changeNames[i]]) {\r\n                changesWithChangeNamesCount++\r\n            }\r\n        }\r\n        return changes.length && changes.length === changesWithChangeNamesCount\r\n    },\r\n    equalFilterParameters: equalFilterParameters,\r\n    proxyMethod: function(instance, methodName, defaultResult) {\r\n        if (!instance[methodName]) {\r\n            instance[methodName] = function() {\r\n                var dataSource = this._dataSource;\r\n                return dataSource ? dataSource[methodName].apply(dataSource, arguments) : defaultResult\r\n            }\r\n        }\r\n    },\r\n    formatValue: formatValue,\r\n    getFormatOptionsByColumn: function(column, target) {\r\n        return {\r\n            format: column.format,\r\n            getDisplayFormat: column.getDisplayFormat,\r\n            customizeText: column.customizeText,\r\n            target: target,\r\n            trueText: column.trueText,\r\n            falseText: column.falseText\r\n        }\r\n    },\r\n    getDisplayValue: function(column, value, data, rowType) {\r\n        if (column.displayValueMap && void 0 !== column.displayValueMap[value]) {\r\n            return column.displayValueMap[value]\r\n        } else if (column.calculateDisplayValue && data && \"group\" !== rowType) {\r\n            return column.calculateDisplayValue(data)\r\n        } else if (column.lookup && !(\"group\" === rowType && (column.calculateGroupValue || column.calculateDisplayValue))) {\r\n            return column.lookup.calculateCellValue(value)\r\n        }\r\n        return value\r\n    },\r\n    getGroupRowSummaryText: function(summaryItems, summaryTexts) {\r\n        var result = \"(\";\r\n        for (var i = 0; i < summaryItems.length; i++) {\r\n            var summaryItem = summaryItems[i];\r\n            result += (i > 0 ? \", \" : \"\") + getSummaryText(summaryItem, summaryTexts)\r\n        }\r\n        return result + \")\"\r\n    },\r\n    getSummaryText: getSummaryText,\r\n    normalizeSortingInfo: normalizeSortingInfo,\r\n    getFormatByDataType: function(dataType) {\r\n        switch (dataType) {\r\n            case \"date\":\r\n                return \"shortDate\";\r\n            case \"datetime\":\r\n                return \"shortDateShortTime\"\r\n        }\r\n    },\r\n    getHeaderFilterGroupParameters: function(column, remoteGrouping) {\r\n        var result = [];\r\n        var dataField = column.dataField || column.name;\r\n        var groupInterval = sharedFiltering.getGroupInterval(column);\r\n        if (groupInterval) {\r\n            each(groupInterval, (function(index, interval) {\r\n                result.push(remoteGrouping ? {\r\n                    selector: dataField,\r\n                    groupInterval: interval,\r\n                    isExpanded: index < groupInterval.length - 1\r\n                } : getIntervalSelector.bind(column, interval))\r\n            }));\r\n            return result\r\n        }\r\n        if (remoteGrouping) {\r\n            result = [{\r\n                selector: dataField,\r\n                isExpanded: false\r\n            }]\r\n        } else {\r\n            result = function(data) {\r\n                var result = column.calculateCellValue(data);\r\n                if (void 0 === result || \"\" === result) {\r\n                    result = null\r\n                }\r\n                return result\r\n            };\r\n            if (column.sortingMethod) {\r\n                result = [{\r\n                    selector: result,\r\n                    compare: column.sortingMethod.bind(column)\r\n                }]\r\n            }\r\n        }\r\n        return result\r\n    },\r\n    equalSortParameters(sortParameters1, sortParameters2, ignoreIsExpanded) {\r\n        sortParameters1 = normalizeSortingInfo(sortParameters1);\r\n        sortParameters2 = normalizeSortingInfo(sortParameters2);\r\n        if (Array.isArray(sortParameters1) && Array.isArray(sortParameters2)) {\r\n            if (sortParameters1.length !== sortParameters2.length) {\r\n                return false\r\n            } else {\r\n                for (var i = 0; i < sortParameters1.length; i++) {\r\n                    if (!equalSelectors(sortParameters1[i].selector, sortParameters2[i].selector) || sortParameters1[i].desc !== sortParameters2[i].desc || sortParameters1[i].groupInterval !== sortParameters2[i].groupInterval || !ignoreIsExpanded && Boolean(sortParameters1[i].isExpanded) !== Boolean(sortParameters2[i].isExpanded)) {\r\n                        return false\r\n                    }\r\n                }\r\n            }\r\n            return true\r\n        } else {\r\n            return (!sortParameters1 || !sortParameters1.length) === (!sortParameters2 || !sortParameters2.length)\r\n        }\r\n    },\r\n    getPointsByColumns: function(items, pointCreated, isVertical, startColumnIndex) {\r\n        var cellsLength = items.length;\r\n        var notCreatePoint = false;\r\n        var item;\r\n        var offset;\r\n        var columnIndex = startColumnIndex || 0;\r\n        var result = [];\r\n        var rtlEnabled;\r\n        for (var i = 0; i <= cellsLength; i++) {\r\n            if (i < cellsLength) {\r\n                item = items.eq(i);\r\n                offset = item.offset();\r\n                rtlEnabled = \"rtl\" === item.css(\"direction\")\r\n            }\r\n            var point = {\r\n                index: columnIndex,\r\n                x: offset ? offset.left + (!isVertical && rtlEnabled ^ i === cellsLength ? getBoundingRect(item[0]).width : 0) : 0,\r\n                y: offset ? offset.top + (isVertical && i === cellsLength ? getBoundingRect(item[0]).height : 0) : 0,\r\n                columnIndex: columnIndex\r\n            };\r\n            if (!isVertical && i > 0) {\r\n                var prevItemOffset = items.eq(i - 1).offset();\r\n                if (prevItemOffset.top < point.y) {\r\n                    point.y = prevItemOffset.top\r\n                }\r\n            }\r\n            if (pointCreated) {\r\n                notCreatePoint = pointCreated(point)\r\n            }\r\n            if (!notCreatePoint) {\r\n                result.push(point)\r\n            }\r\n            columnIndex++\r\n        }\r\n        return result\r\n    },\r\n    getExpandCellTemplate: function() {\r\n        return {\r\n            allowRenderToDetachedContainer: true,\r\n            render: function(container, options) {\r\n                var $container = $(container);\r\n                if (isDefined(options.value) && !(options.data && options.data.isContinuation) && !options.row.isNewRow) {\r\n                    var rowsView = options.component.getView(\"rowsView\");\r\n                    $container.addClass(DATAGRID_EXPAND_CLASS).addClass(DATAGRID_SELECTION_DISABLED_CLASS);\r\n                    $(\"<div>\").addClass(options.value ? DATAGRID_GROUP_OPENED_CLASS : DATAGRID_GROUP_CLOSED_CLASS).appendTo($container);\r\n                    rowsView.setAria(\"label\", options.value ? rowsView.localize(\"dxDataGrid-ariaCollapse\") : rowsView.localize(\"dxDataGrid-ariaExpand\"), $container)\r\n                } else {\r\n                    setEmptyText($container)\r\n                }\r\n            }\r\n        }\r\n    },\r\n    setEmptyText: setEmptyText,\r\n    isDateType: isDateType,\r\n    getSelectionRange: function(focusedElement) {\r\n        try {\r\n            if (focusedElement) {\r\n                return {\r\n                    selectionStart: focusedElement.selectionStart,\r\n                    selectionEnd: focusedElement.selectionEnd\r\n                }\r\n            }\r\n        } catch (e) {}\r\n        return {}\r\n    },\r\n    setSelectionRange: function(focusedElement, selectionRange) {\r\n        try {\r\n            if (focusedElement && focusedElement.setSelectionRange) {\r\n                focusedElement.setSelectionRange(selectionRange.selectionStart, selectionRange.selectionEnd)\r\n            }\r\n        } catch (e) {}\r\n    },\r\n    focusAndSelectElement: function(component, $element) {\r\n        var isFocused = $element.is(\":focus\");\r\n        eventsEngine.trigger($element, \"focus\");\r\n        var isSelectTextOnEditingStart = component.option(\"editing.selectTextOnEditStart\");\r\n        var element = $element.get(0);\r\n        if (!isFocused && isSelectTextOnEditingStart && $element.is(\".dx-texteditor-input\") && !$element.is(\"[readonly]\")) {\r\n            var editor = getWidgetInstance($element.closest(\".dx-texteditor\"));\r\n            when(editor && editor._loadItemDeferred).done((function() {\r\n                element.select()\r\n            }))\r\n        }\r\n    },\r\n    getWidgetInstance: getWidgetInstance,\r\n    getLastResizableColumnIndex: function(columns, resultWidths) {\r\n        var hasResizableColumns = columns.some(column => column && !column.command && !column.fixed && false !== column.allowResizing);\r\n        var lastColumnIndex;\r\n        for (lastColumnIndex = columns.length - 1; columns[lastColumnIndex]; lastColumnIndex--) {\r\n            var column = columns[lastColumnIndex];\r\n            var width = resultWidths && resultWidths[lastColumnIndex];\r\n            var allowResizing = !hasResizableColumns || false !== column.allowResizing;\r\n            if (!column.command && !column.fixed && \"adaptiveHidden\" !== width && allowResizing) {\r\n                break\r\n            }\r\n        }\r\n        return lastColumnIndex\r\n    },\r\n    isElementInCurrentGrid: function(controller, $element) {\r\n        if ($element && $element.length) {\r\n            var $grid = $element.closest(\".\" + controller.getWidgetContainerClass()).parent();\r\n            return $grid.is(controller.component.$element())\r\n        }\r\n        return false\r\n    },\r\n    isVirtualRowRendering: function(that) {\r\n        var rowRenderingMode = that.option(ROW_RENDERING_MODE_OPTION);\r\n        var isVirtualMode = that.option(SCROLLING_MODE_OPTION) === SCROLLING_MODE_VIRTUAL;\r\n        var isAppendMode = that.option(SCROLLING_MODE_OPTION) === SCROLLING_MODE_INFINITE;\r\n        if (false === that.option(LEGACY_SCROLLING_MODE) && (isVirtualMode || isAppendMode)) {\r\n            return true\r\n        }\r\n        return rowRenderingMode === SCROLLING_MODE_VIRTUAL\r\n    },\r\n    getPixelRatio: function(window) {\r\n        return window.devicePixelRatio || 1\r\n    },\r\n    getContentHeightLimit(browser) {\r\n        if (browser.mozilla) {\r\n            return 8e6\r\n        }\r\n        return 15e6 / this.getPixelRatio(getWindow())\r\n    },\r\n    normalizeLookupDataSource(lookup) {\r\n        var lookupDataSourceOptions;\r\n        if (lookup.items) {\r\n            lookupDataSourceOptions = lookup.items\r\n        } else {\r\n            lookupDataSourceOptions = lookup.dataSource;\r\n            if (isFunction(lookupDataSourceOptions) && !variableWrapper.isWrapped(lookupDataSourceOptions)) {\r\n                lookupDataSourceOptions = lookupDataSourceOptions({})\r\n            }\r\n        }\r\n        return normalizeDataSourceOptions(lookupDataSourceOptions)\r\n    },\r\n    getWrappedLookupDataSource(column, dataSource, filter) {\r\n        var lookupDataSourceOptions = this.normalizeLookupDataSource(column.lookup);\r\n        if (column.calculateCellValue !== column.defaultCalculateCellValue) {\r\n            return lookupDataSourceOptions\r\n        }\r\n        var hasGroupPaging = dataSource.remoteOperations().groupPaging;\r\n        var hasLookupOptimization = column.displayField && isString(column.displayField);\r\n        var cachedUniqueRelevantItems;\r\n        var lookupDataSource = _extends({}, lookupDataSourceOptions, {\r\n            load: loadOptions => {\r\n                var d = new Deferred;\r\n                (loadOptions => {\r\n                    var group = normalizeGroupingLoadOptions(hasLookupOptimization ? [column.dataField, column.displayField] : column.dataField);\r\n                    var d = new Deferred;\r\n                    if (!hasGroupPaging && cachedUniqueRelevantItems) {\r\n                        d.resolve(cachedUniqueRelevantItems)\r\n                    } else {\r\n                        dataSource.load({\r\n                            filter: filter,\r\n                            group: group,\r\n                            take: hasGroupPaging ? loadOptions.take : void 0,\r\n                            skip: hasGroupPaging ? loadOptions.skip : void 0\r\n                        }).done(items => {\r\n                            cachedUniqueRelevantItems = items;\r\n                            d.resolve(items)\r\n                        }).fail(d.fail)\r\n                    }\r\n                    return d\r\n                })(loadOptions).done(items => {\r\n                    if (0 === items.length) {\r\n                        d.resolve([])\r\n                    }\r\n                    var newDataSource;\r\n                    if (hasLookupOptimization) {\r\n                        var lookupItems = items.map(item => {\r\n                            var _column$displayValueM;\r\n                            return {\r\n                                [column.lookup.valueExpr]: item.key,\r\n                                [column.lookup.displayExpr]: null !== (_column$displayValueM = column.displayValueMap[item.key]) && void 0 !== _column$displayValueM ? _column$displayValueM : item.items[0].key\r\n                            }\r\n                        });\r\n                        newDataSource = new DataSource(_extends({}, lookupDataSourceOptions, loadOptions, {\r\n                            store: new ArrayStore({\r\n                                data: lookupItems,\r\n                                key: column.lookup.valueExpr\r\n                            })\r\n                        }))\r\n                    } else {\r\n                        var _filter = this.combineFilters(items.flatMap(data => data.key).map(key => [column.lookup.valueExpr, key]), \"or\");\r\n                        newDataSource = new DataSource(_extends({}, lookupDataSourceOptions, loadOptions, {\r\n                            filter: this.combineFilters([_filter, loadOptions.filter], \"and\")\r\n                        }))\r\n                    }\r\n                    if (!hasGroupPaging) {\r\n                        newDataSource.on(\"customizeStoreLoadOptions\", e => {\r\n                            e.storeLoadOptions.take = loadOptions.take;\r\n                            e.storeLoadOptions.skip = loadOptions.skip\r\n                        })\r\n                    }\r\n                    newDataSource.load().done(d.resolve).fail(d.fail)\r\n                }).fail(d.fail);\r\n                return d\r\n            },\r\n            key: column.lookup.valueExpr,\r\n            byKey(key) {\r\n                var d = Deferred();\r\n                this.load({\r\n                    filter: [column.lookup.valueExpr, \"=\", key]\r\n                }).done(arr => {\r\n                    d.resolve(arr[0])\r\n                });\r\n                return d.promise()\r\n            }\r\n        });\r\n        return lookupDataSource\r\n    }\r\n};\r\n"]},"metadata":{},"sourceType":"module"}