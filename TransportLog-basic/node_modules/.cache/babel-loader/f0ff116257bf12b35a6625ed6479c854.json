{"ast":null,"code":"/**\r\n * DevExtreme (esm/renovation/component_wrapper/common/component.js)\r\n * Version: 22.1.6\r\n * Build date: Tue Oct 18 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport { createRef } from \"inferno\";\nimport KeyboardProcessor from \"../../../events/core/keyboard_processor\";\nimport renderer from \"../../../core/inferno_renderer\";\nimport $ from \"../../../core/renderer\";\nimport domAdapter from \"../../../core/dom_adapter\";\nimport DOMComponent from \"../../../core/dom_component\";\nimport { extend } from \"../../../core/utils/extend\";\nimport { getPublicElement } from \"../../../core/element\";\nimport { isDefined, isRenderer, isString } from \"../../../core/utils/type\";\nimport { TemplateWrapper } from \"./template_wrapper\";\nimport { updatePropsImmutable } from \"../utils/update_props_immutable\";\n\nvar setDefaultOptionValue = (options, defaultValueGetter) => name => {\n  if (Object.prototype.hasOwnProperty.call(options, name) && void 0 === options[name]) {\n    options[name] = defaultValueGetter(name);\n  }\n};\n\nexport default class ComponentWrapper extends DOMComponent {\n  constructor(element, options) {\n    super(element, options);\n    this._shouldRaiseContentReady = false;\n    this.validateKeyDownHandler();\n  }\n\n  get _propsInfo() {\n    return {\n      allowNull: [],\n      twoWay: [],\n      elements: [],\n      templates: [],\n      props: []\n    };\n  }\n\n  validateKeyDownHandler() {\n    var supportedKeyNames = this.getSupportedKeyNames();\n    var hasComponentDefaultKeyHandlers = supportedKeyNames.length > 0;\n    var hasComponentKeyDownMethod = \"function\" === typeof this._viewComponent.prototype.keyDown;\n\n    if (hasComponentDefaultKeyHandlers && !hasComponentKeyDownMethod) {\n      throw Error(\"Component's declaration must have 'keyDown' method.\");\n    }\n  }\n\n  get viewRef() {\n    var _this$_viewRef;\n\n    return null === (_this$_viewRef = this._viewRef) || void 0 === _this$_viewRef ? void 0 : _this$_viewRef.current;\n  }\n\n  _checkContentReadyOption(fullName) {\n    var contentReadyOptions = this._getContentReadyOptions().reduce((options, name) => {\n      options[name] = true;\n      return options;\n    }, {});\n\n    this._checkContentReadyOption = optionName => !!contentReadyOptions[optionName];\n\n    return this._checkContentReadyOption(fullName);\n  }\n\n  _getContentReadyOptions() {\n    return [\"rtlEnabled\"];\n  }\n\n  _fireContentReady() {\n    this._actionsMap.onContentReady({});\n  }\n\n  _getDefaultOptions() {\n    return extend(true, super._getDefaultOptions(), this._viewComponent.defaultProps, this._propsInfo.twoWay.reduce((options, _ref) => {\n      var [name, defaultName, eventName] = _ref;\n      return _extends({}, options, {\n        [name]: this._viewComponent.defaultProps[defaultName],\n        [eventName]: value => this.option(name, value)\n      });\n    }, {}), this._propsInfo.templates.reduce((options, name) => _extends({}, options, {\n      [name]: null\n    }), {}));\n  }\n\n  _getUnwrappedOption() {\n    var unwrappedProps = {};\n    Object.keys(this.option()).forEach(key => {\n      unwrappedProps[key] = this.option(key);\n    });\n    return unwrappedProps;\n  }\n\n  _initializeComponent() {\n    var _this$_templateManage;\n\n    super._initializeComponent();\n\n    null === (_this$_templateManage = this._templateManager) || void 0 === _this$_templateManage ? void 0 : _this$_templateManage.addDefaultTemplates(this.getDefaultTemplates());\n\n    var optionProxy = this._getUnwrappedOption();\n\n    this._props = this._optionsWithDefaultTemplates(optionProxy);\n\n    this._propsInfo.templates.forEach(template => {\n      this._componentTemplates[template] = this._createTemplateComponent(this._props[template]);\n    });\n\n    Object.keys(this._getActionConfigsFull()).forEach(name => this._addAction(name));\n    this._viewRef = createRef();\n    this.defaultKeyHandlers = this._createDefaultKeyHandlers();\n  }\n\n  _initMarkup() {\n    var props = this.getProps();\n\n    this._renderWrapper(props);\n  }\n\n  _renderWrapper(props) {\n    var containerNode = this.$element()[0];\n\n    if (!this._isNodeReplaced) {\n      renderer.onPreRender();\n    }\n\n    renderer.render(this._viewComponent, props, containerNode, this._isNodeReplaced);\n\n    if (!this._isNodeReplaced) {\n      this._isNodeReplaced = true;\n      renderer.onAfterRender();\n      this._shouldRaiseContentReady = true;\n    }\n\n    if (this._shouldRaiseContentReady) {\n      this._fireContentReady();\n\n      this._shouldRaiseContentReady = false;\n    }\n  }\n\n  _silent(name, value) {\n    this._options.silent(name, value);\n  }\n\n  _render() {}\n\n  _removeWidget() {\n    renderer.remove(this.$element()[0]);\n  }\n\n  _dispose() {\n    this._removeWidget();\n\n    super._dispose();\n  }\n\n  get elementAttr() {\n    var element = this.$element()[0];\n\n    if (!this._elementAttr) {\n      var {\n        attributes: attributes\n      } = element;\n      var attrs = Array.from(attributes).filter(attr => {\n        var _attributes$attr$name;\n\n        return !this._propsInfo.templates.includes(attr.name) && (null === (_attributes$attr$name = attributes[attr.name]) || void 0 === _attributes$attr$name ? void 0 : _attributes$attr$name.specified);\n      }).reduce((result, _ref2) => {\n        var {\n          name: name,\n          value: value\n        } = _ref2;\n        var updatedAttributes = result;\n        var isDomAttr = (name in element);\n        updatedAttributes[name] = \"\" === value && isDomAttr ? element[name] : value;\n        return updatedAttributes;\n      }, {});\n      this._elementAttr = attrs;\n      this._storedClasses = element.getAttribute(\"class\") || \"\";\n    }\n\n    var elemStyle = element.style;\n    var style = {};\n\n    for (var i = 0; i < elemStyle.length; i += 1) {\n      style[elemStyle[i]] = elemStyle.getPropertyValue(elemStyle[i]);\n    }\n\n    this._elementAttr.style = style;\n    this._elementAttr.class = this._storedClasses;\n    return this._elementAttr;\n  }\n\n  _getAdditionalActionConfigs() {\n    return {\n      onContentReady: {\n        excludeValidators: [\"disabled\", \"readOnly\"]\n      }\n    };\n  }\n\n  _getAdditionalProps() {\n    return [];\n  }\n\n  _patchOptionValues(options) {\n    var {\n      allowNull: allowNull,\n      elements: elements,\n      props: props,\n      twoWay: twoWay\n    } = this._propsInfo;\n    var defaultWidgetPropsKeys = Object.keys(this._viewComponent.defaultProps);\n\n    var defaultOptions = this._getDefaultOptions();\n\n    var {\n      children: children,\n      onKeyboardHandled: onKeyboardHandled,\n      ref: ref\n    } = options;\n    var onKeyDown = onKeyboardHandled ? (_, event_options) => {\n      onKeyboardHandled(event_options);\n    } : void 0;\n    var widgetProps = {\n      ref: ref,\n      children: children,\n      onKeyDown: onKeyDown\n    };\n    [...props, ...this._getAdditionalProps()].forEach(propName => {\n      if (Object.prototype.hasOwnProperty.call(options, propName)) {\n        widgetProps[propName] = options[propName];\n      }\n    });\n    allowNull.forEach(setDefaultOptionValue(widgetProps, () => null));\n    defaultWidgetPropsKeys.forEach(setDefaultOptionValue(widgetProps, name => defaultOptions[name]));\n    twoWay.forEach(_ref3 => {\n      var [name, defaultName] = _ref3;\n      setDefaultOptionValue(widgetProps, () => defaultOptions[defaultName])(name);\n    });\n    elements.forEach(name => {\n      if (name in widgetProps) {\n        var value = widgetProps[name];\n\n        if (isRenderer(value)) {\n          widgetProps[name] = this._patchElementParam(value);\n        }\n      }\n    });\n    return widgetProps;\n  }\n\n  getSupportedKeyNames() {\n    return [];\n  }\n\n  prepareStyleProp(props) {\n    if (\"string\" === typeof props.style) {\n      return _extends({}, props, {\n        style: {},\n        cssText: props.style\n      });\n    }\n\n    return props;\n  }\n\n  getProps() {\n    var _this$elementAttr$cla, _elementAttr$class;\n\n    var {\n      elementAttr: elementAttr\n    } = this.option();\n\n    var options = this._patchOptionValues(_extends({}, this._props, {\n      ref: this._viewRef,\n      children: this._extractDefaultSlot(),\n      aria: this._aria\n    }));\n\n    this._propsInfo.templates.forEach(template => {\n      options[template] = this._componentTemplates[template];\n    });\n\n    return this.prepareStyleProp(_extends({}, options, this.elementAttr, elementAttr, {\n      className: [...(null !== (_this$elementAttr$cla = this.elementAttr.class) && void 0 !== _this$elementAttr$cla ? _this$elementAttr$cla : \"\").split(\" \"), ...(null !== (_elementAttr$class = null === elementAttr || void 0 === elementAttr ? void 0 : elementAttr.class) && void 0 !== _elementAttr$class ? _elementAttr$class : \"\").split(\" \")].filter((c, i, a) => c && a.indexOf(c) === i).join(\" \").trim(),\n      class: \"\"\n    }, this._actionsMap));\n  }\n\n  _getActionConfigs() {\n    return {};\n  }\n\n  _getActionConfigsFull() {\n    return _extends({}, this._getActionConfigs(), this._getAdditionalActionConfigs());\n  }\n\n  getDefaultTemplates() {\n    var defaultTemplates = Object.values(this._templatesInfo);\n    var result = {};\n    defaultTemplates.forEach(template => {\n      result[template] = \"dx-renovation-template-mock\";\n    });\n    return result;\n  }\n\n  get _templatesInfo() {\n    return {};\n  }\n\n  _optionsWithDefaultTemplates(options) {\n    var templateOptions = Object.entries(this._templatesInfo).reduce((result, _ref4) => {\n      var _options$templateName;\n\n      var [templateName, templateValue] = _ref4;\n      return _extends({}, result, {\n        [templateName]: null !== (_options$templateName = options[templateName]) && void 0 !== _options$templateName ? _options$templateName : templateValue\n      });\n    }, {});\n    return _extends({}, options, templateOptions);\n  }\n\n  _init() {\n    super._init();\n\n    this.customKeyHandlers = {};\n    this._actionsMap = {};\n    this._aria = {};\n    this._componentTemplates = {};\n  }\n\n  _createDefaultKeyHandlers() {\n    var result = {};\n    var keys = this.getSupportedKeyNames();\n    keys.forEach(key => {\n      result[key] = e => this.viewRef.keyDown(KeyboardProcessor.createKeyDownOptions(e));\n    });\n    return result;\n  }\n\n  _addAction(event, actionToAdd) {\n    var action = actionToAdd;\n\n    if (!action) {\n      var actionByOption = this._createActionByOption(event, this._getActionConfigsFull()[event]);\n\n      action = actArgs => {\n        Object.keys(actArgs).forEach(name => {\n          if (isDefined(actArgs[name]) && domAdapter.isNode(actArgs[name])) {\n            actArgs[name] = getPublicElement($(actArgs[name]));\n          }\n        });\n        return actionByOption(actArgs);\n      };\n    }\n\n    this._actionsMap[event] = action;\n  }\n\n  _optionChanged(option) {\n    var {\n      fullName: fullName,\n      name: name,\n      previousValue: previousValue,\n      value: value\n    } = option;\n    updatePropsImmutable(this._props, this.option(), name, fullName);\n\n    if (this._propsInfo.templates.includes(name) && value !== previousValue) {\n      this._componentTemplates[name] = this._createTemplateComponent(value);\n    }\n\n    if (name && this._getActionConfigsFull()[name]) {\n      this._addAction(name);\n    }\n\n    this._shouldRaiseContentReady = this._shouldRaiseContentReady || this._checkContentReadyOption(fullName);\n\n    super._optionChanged(option);\n\n    this._invalidate();\n  }\n\n  _extractDefaultSlot() {\n    if (this.option(\"_hasAnonymousTemplateContent\")) {\n      return renderer.createElement(TemplateWrapper, {\n        template: this._getTemplate(this._templateManager.anonymousTemplateName),\n        transclude: true,\n        renovated: true\n      });\n    }\n\n    return null;\n  }\n\n  _createTemplateComponent(templateOption) {\n    if (!templateOption) {\n      return;\n    }\n\n    var template = this._getTemplate(templateOption);\n\n    if (isString(template) && \"dx-renovation-template-mock\" === template) {\n      return;\n    }\n\n    return model => renderer.createElement(TemplateWrapper, {\n      template: template,\n      model: model\n    });\n  }\n\n  _wrapKeyDownHandler(initialHandler) {\n    return options => {\n      var {\n        keyName: keyName,\n        originalEvent: originalEvent,\n        which: which\n      } = options;\n      var keys = this.customKeyHandlers;\n      var func = keys[keyName] || keys[which];\n\n      if (void 0 !== func) {\n        var handler = func.bind(this);\n        var result = handler(originalEvent, options);\n\n        if (!result) {\n          originalEvent.cancel = true;\n          return originalEvent;\n        }\n      }\n\n      return null === initialHandler || void 0 === initialHandler ? void 0 : initialHandler(originalEvent, options);\n    };\n  }\n\n  _toPublicElement(element) {\n    return getPublicElement($(element));\n  }\n\n  _patchElementParam(value) {\n    try {\n      var result = $(value);\n      var element = null === result || void 0 === result ? void 0 : result.get(0);\n      return null !== element && void 0 !== element && element.nodeType ? element : value;\n    } catch (error) {\n      return value;\n    }\n  }\n\n  repaint() {\n    this._isNodeReplaced = false;\n    this._shouldRaiseContentReady = true;\n\n    this._removeWidget();\n\n    this._refresh();\n  }\n\n  _supportedKeys() {\n    return _extends({}, this.defaultKeyHandlers, this.customKeyHandlers);\n  }\n\n  registerKeyHandler(key, handler) {\n    this.customKeyHandlers[key] = handler;\n  }\n\n  setAria(name, value) {\n    this._aria[name] = value;\n\n    this._initMarkup();\n  }\n\n}\nComponentWrapper.IS_RENOVATED_WIDGET = false;\nComponentWrapper.IS_RENOVATED_WIDGET = true;","map":{"version":3,"sources":["C:/Users/Zoran/source/repos/TransportApp/TransportLog-basic/node_modules/devextreme/esm/renovation/component_wrapper/common/component.js"],"names":["_extends","createRef","KeyboardProcessor","renderer","$","domAdapter","DOMComponent","extend","getPublicElement","isDefined","isRenderer","isString","TemplateWrapper","updatePropsImmutable","setDefaultOptionValue","options","defaultValueGetter","name","Object","prototype","hasOwnProperty","call","ComponentWrapper","constructor","element","_shouldRaiseContentReady","validateKeyDownHandler","_propsInfo","allowNull","twoWay","elements","templates","props","supportedKeyNames","getSupportedKeyNames","hasComponentDefaultKeyHandlers","length","hasComponentKeyDownMethod","_viewComponent","keyDown","Error","viewRef","_this$_viewRef","_viewRef","current","_checkContentReadyOption","fullName","contentReadyOptions","_getContentReadyOptions","reduce","optionName","_fireContentReady","_actionsMap","onContentReady","_getDefaultOptions","defaultProps","_ref","defaultName","eventName","value","option","_getUnwrappedOption","unwrappedProps","keys","forEach","key","_initializeComponent","_this$_templateManage","_templateManager","addDefaultTemplates","getDefaultTemplates","optionProxy","_props","_optionsWithDefaultTemplates","template","_componentTemplates","_createTemplateComponent","_getActionConfigsFull","_addAction","defaultKeyHandlers","_createDefaultKeyHandlers","_initMarkup","getProps","_renderWrapper","containerNode","$element","_isNodeReplaced","onPreRender","render","onAfterRender","_silent","_options","silent","_render","_removeWidget","remove","_dispose","elementAttr","_elementAttr","attributes","attrs","Array","from","filter","attr","_attributes$attr$name","includes","specified","result","_ref2","updatedAttributes","isDomAttr","_storedClasses","getAttribute","elemStyle","style","i","getPropertyValue","class","_getAdditionalActionConfigs","excludeValidators","_getAdditionalProps","_patchOptionValues","defaultWidgetPropsKeys","defaultOptions","children","onKeyboardHandled","ref","onKeyDown","_","event_options","widgetProps","propName","_ref3","_patchElementParam","prepareStyleProp","cssText","_this$elementAttr$cla","_elementAttr$class","_extractDefaultSlot","aria","_aria","className","split","c","a","indexOf","join","trim","_getActionConfigs","defaultTemplates","values","_templatesInfo","templateOptions","entries","_ref4","_options$templateName","templateName","templateValue","_init","customKeyHandlers","e","createKeyDownOptions","event","actionToAdd","action","actionByOption","_createActionByOption","actArgs","isNode","_optionChanged","previousValue","_invalidate","createElement","_getTemplate","anonymousTemplateName","transclude","renovated","templateOption","model","_wrapKeyDownHandler","initialHandler","keyName","originalEvent","which","func","handler","bind","cancel","_toPublicElement","get","nodeType","error","repaint","_refresh","_supportedKeys","registerKeyHandler","setAria","IS_RENOVATED_WIDGET"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (esm/renovation/component_wrapper/common/component.js)\r\n * Version: 22.1.6\r\n * Build date: Tue Oct 18 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\r\nimport {\r\n    createRef\r\n} from \"inferno\";\r\nimport KeyboardProcessor from \"../../../events/core/keyboard_processor\";\r\nimport renderer from \"../../../core/inferno_renderer\";\r\nimport $ from \"../../../core/renderer\";\r\nimport domAdapter from \"../../../core/dom_adapter\";\r\nimport DOMComponent from \"../../../core/dom_component\";\r\nimport {\r\n    extend\r\n} from \"../../../core/utils/extend\";\r\nimport {\r\n    getPublicElement\r\n} from \"../../../core/element\";\r\nimport {\r\n    isDefined,\r\n    isRenderer,\r\n    isString\r\n} from \"../../../core/utils/type\";\r\nimport {\r\n    TemplateWrapper\r\n} from \"./template_wrapper\";\r\nimport {\r\n    updatePropsImmutable\r\n} from \"../utils/update_props_immutable\";\r\nvar setDefaultOptionValue = (options, defaultValueGetter) => name => {\r\n    if (Object.prototype.hasOwnProperty.call(options, name) && void 0 === options[name]) {\r\n        options[name] = defaultValueGetter(name)\r\n    }\r\n};\r\nexport default class ComponentWrapper extends DOMComponent {\r\n    constructor(element, options) {\r\n        super(element, options);\r\n        this._shouldRaiseContentReady = false;\r\n        this.validateKeyDownHandler()\r\n    }\r\n    get _propsInfo() {\r\n        return {\r\n            allowNull: [],\r\n            twoWay: [],\r\n            elements: [],\r\n            templates: [],\r\n            props: []\r\n        }\r\n    }\r\n    validateKeyDownHandler() {\r\n        var supportedKeyNames = this.getSupportedKeyNames();\r\n        var hasComponentDefaultKeyHandlers = supportedKeyNames.length > 0;\r\n        var hasComponentKeyDownMethod = \"function\" === typeof this._viewComponent.prototype.keyDown;\r\n        if (hasComponentDefaultKeyHandlers && !hasComponentKeyDownMethod) {\r\n            throw Error(\"Component's declaration must have 'keyDown' method.\")\r\n        }\r\n    }\r\n    get viewRef() {\r\n        var _this$_viewRef;\r\n        return null === (_this$_viewRef = this._viewRef) || void 0 === _this$_viewRef ? void 0 : _this$_viewRef.current\r\n    }\r\n    _checkContentReadyOption(fullName) {\r\n        var contentReadyOptions = this._getContentReadyOptions().reduce((options, name) => {\r\n            options[name] = true;\r\n            return options\r\n        }, {});\r\n        this._checkContentReadyOption = optionName => !!contentReadyOptions[optionName];\r\n        return this._checkContentReadyOption(fullName)\r\n    }\r\n    _getContentReadyOptions() {\r\n        return [\"rtlEnabled\"]\r\n    }\r\n    _fireContentReady() {\r\n        this._actionsMap.onContentReady({})\r\n    }\r\n    _getDefaultOptions() {\r\n        return extend(true, super._getDefaultOptions(), this._viewComponent.defaultProps, this._propsInfo.twoWay.reduce((options, _ref) => {\r\n            var [name, defaultName, eventName] = _ref;\r\n            return _extends({}, options, {\r\n                [name]: this._viewComponent.defaultProps[defaultName],\r\n                [eventName]: value => this.option(name, value)\r\n            })\r\n        }, {}), this._propsInfo.templates.reduce((options, name) => _extends({}, options, {\r\n            [name]: null\r\n        }), {}))\r\n    }\r\n    _getUnwrappedOption() {\r\n        var unwrappedProps = {};\r\n        Object.keys(this.option()).forEach(key => {\r\n            unwrappedProps[key] = this.option(key)\r\n        });\r\n        return unwrappedProps\r\n    }\r\n    _initializeComponent() {\r\n        var _this$_templateManage;\r\n        super._initializeComponent();\r\n        null === (_this$_templateManage = this._templateManager) || void 0 === _this$_templateManage ? void 0 : _this$_templateManage.addDefaultTemplates(this.getDefaultTemplates());\r\n        var optionProxy = this._getUnwrappedOption();\r\n        this._props = this._optionsWithDefaultTemplates(optionProxy);\r\n        this._propsInfo.templates.forEach(template => {\r\n            this._componentTemplates[template] = this._createTemplateComponent(this._props[template])\r\n        });\r\n        Object.keys(this._getActionConfigsFull()).forEach(name => this._addAction(name));\r\n        this._viewRef = createRef();\r\n        this.defaultKeyHandlers = this._createDefaultKeyHandlers()\r\n    }\r\n    _initMarkup() {\r\n        var props = this.getProps();\r\n        this._renderWrapper(props)\r\n    }\r\n    _renderWrapper(props) {\r\n        var containerNode = this.$element()[0];\r\n        if (!this._isNodeReplaced) {\r\n            renderer.onPreRender()\r\n        }\r\n        renderer.render(this._viewComponent, props, containerNode, this._isNodeReplaced);\r\n        if (!this._isNodeReplaced) {\r\n            this._isNodeReplaced = true;\r\n            renderer.onAfterRender();\r\n            this._shouldRaiseContentReady = true\r\n        }\r\n        if (this._shouldRaiseContentReady) {\r\n            this._fireContentReady();\r\n            this._shouldRaiseContentReady = false\r\n        }\r\n    }\r\n    _silent(name, value) {\r\n        this._options.silent(name, value)\r\n    }\r\n    _render() {}\r\n    _removeWidget() {\r\n        renderer.remove(this.$element()[0])\r\n    }\r\n    _dispose() {\r\n        this._removeWidget();\r\n        super._dispose()\r\n    }\r\n    get elementAttr() {\r\n        var element = this.$element()[0];\r\n        if (!this._elementAttr) {\r\n            var {\r\n                attributes: attributes\r\n            } = element;\r\n            var attrs = Array.from(attributes).filter(attr => {\r\n                var _attributes$attr$name;\r\n                return !this._propsInfo.templates.includes(attr.name) && (null === (_attributes$attr$name = attributes[attr.name]) || void 0 === _attributes$attr$name ? void 0 : _attributes$attr$name.specified)\r\n            }).reduce((result, _ref2) => {\r\n                var {\r\n                    name: name,\r\n                    value: value\r\n                } = _ref2;\r\n                var updatedAttributes = result;\r\n                var isDomAttr = name in element;\r\n                updatedAttributes[name] = \"\" === value && isDomAttr ? element[name] : value;\r\n                return updatedAttributes\r\n            }, {});\r\n            this._elementAttr = attrs;\r\n            this._storedClasses = element.getAttribute(\"class\") || \"\"\r\n        }\r\n        var elemStyle = element.style;\r\n        var style = {};\r\n        for (var i = 0; i < elemStyle.length; i += 1) {\r\n            style[elemStyle[i]] = elemStyle.getPropertyValue(elemStyle[i])\r\n        }\r\n        this._elementAttr.style = style;\r\n        this._elementAttr.class = this._storedClasses;\r\n        return this._elementAttr\r\n    }\r\n    _getAdditionalActionConfigs() {\r\n        return {\r\n            onContentReady: {\r\n                excludeValidators: [\"disabled\", \"readOnly\"]\r\n            }\r\n        }\r\n    }\r\n    _getAdditionalProps() {\r\n        return []\r\n    }\r\n    _patchOptionValues(options) {\r\n        var {\r\n            allowNull: allowNull,\r\n            elements: elements,\r\n            props: props,\r\n            twoWay: twoWay\r\n        } = this._propsInfo;\r\n        var defaultWidgetPropsKeys = Object.keys(this._viewComponent.defaultProps);\r\n        var defaultOptions = this._getDefaultOptions();\r\n        var {\r\n            children: children,\r\n            onKeyboardHandled: onKeyboardHandled,\r\n            ref: ref\r\n        } = options;\r\n        var onKeyDown = onKeyboardHandled ? (_, event_options) => {\r\n            onKeyboardHandled(event_options)\r\n        } : void 0;\r\n        var widgetProps = {\r\n            ref: ref,\r\n            children: children,\r\n            onKeyDown: onKeyDown\r\n        };\r\n        [...props, ...this._getAdditionalProps()].forEach(propName => {\r\n            if (Object.prototype.hasOwnProperty.call(options, propName)) {\r\n                widgetProps[propName] = options[propName]\r\n            }\r\n        });\r\n        allowNull.forEach(setDefaultOptionValue(widgetProps, () => null));\r\n        defaultWidgetPropsKeys.forEach(setDefaultOptionValue(widgetProps, name => defaultOptions[name]));\r\n        twoWay.forEach(_ref3 => {\r\n            var [name, defaultName] = _ref3;\r\n            setDefaultOptionValue(widgetProps, () => defaultOptions[defaultName])(name)\r\n        });\r\n        elements.forEach(name => {\r\n            if (name in widgetProps) {\r\n                var value = widgetProps[name];\r\n                if (isRenderer(value)) {\r\n                    widgetProps[name] = this._patchElementParam(value)\r\n                }\r\n            }\r\n        });\r\n        return widgetProps\r\n    }\r\n    getSupportedKeyNames() {\r\n        return []\r\n    }\r\n    prepareStyleProp(props) {\r\n        if (\"string\" === typeof props.style) {\r\n            return _extends({}, props, {\r\n                style: {},\r\n                cssText: props.style\r\n            })\r\n        }\r\n        return props\r\n    }\r\n    getProps() {\r\n        var _this$elementAttr$cla, _elementAttr$class;\r\n        var {\r\n            elementAttr: elementAttr\r\n        } = this.option();\r\n        var options = this._patchOptionValues(_extends({}, this._props, {\r\n            ref: this._viewRef,\r\n            children: this._extractDefaultSlot(),\r\n            aria: this._aria\r\n        }));\r\n        this._propsInfo.templates.forEach(template => {\r\n            options[template] = this._componentTemplates[template]\r\n        });\r\n        return this.prepareStyleProp(_extends({}, options, this.elementAttr, elementAttr, {\r\n            className: [...(null !== (_this$elementAttr$cla = this.elementAttr.class) && void 0 !== _this$elementAttr$cla ? _this$elementAttr$cla : \"\").split(\" \"), ...(null !== (_elementAttr$class = null === elementAttr || void 0 === elementAttr ? void 0 : elementAttr.class) && void 0 !== _elementAttr$class ? _elementAttr$class : \"\").split(\" \")].filter((c, i, a) => c && a.indexOf(c) === i).join(\" \").trim(),\r\n            class: \"\"\r\n        }, this._actionsMap))\r\n    }\r\n    _getActionConfigs() {\r\n        return {}\r\n    }\r\n    _getActionConfigsFull() {\r\n        return _extends({}, this._getActionConfigs(), this._getAdditionalActionConfigs())\r\n    }\r\n    getDefaultTemplates() {\r\n        var defaultTemplates = Object.values(this._templatesInfo);\r\n        var result = {};\r\n        defaultTemplates.forEach(template => {\r\n            result[template] = \"dx-renovation-template-mock\"\r\n        });\r\n        return result\r\n    }\r\n    get _templatesInfo() {\r\n        return {}\r\n    }\r\n    _optionsWithDefaultTemplates(options) {\r\n        var templateOptions = Object.entries(this._templatesInfo).reduce((result, _ref4) => {\r\n            var _options$templateName;\r\n            var [templateName, templateValue] = _ref4;\r\n            return _extends({}, result, {\r\n                [templateName]: null !== (_options$templateName = options[templateName]) && void 0 !== _options$templateName ? _options$templateName : templateValue\r\n            })\r\n        }, {});\r\n        return _extends({}, options, templateOptions)\r\n    }\r\n    _init() {\r\n        super._init();\r\n        this.customKeyHandlers = {};\r\n        this._actionsMap = {};\r\n        this._aria = {};\r\n        this._componentTemplates = {}\r\n    }\r\n    _createDefaultKeyHandlers() {\r\n        var result = {};\r\n        var keys = this.getSupportedKeyNames();\r\n        keys.forEach(key => {\r\n            result[key] = e => this.viewRef.keyDown(KeyboardProcessor.createKeyDownOptions(e))\r\n        });\r\n        return result\r\n    }\r\n    _addAction(event, actionToAdd) {\r\n        var action = actionToAdd;\r\n        if (!action) {\r\n            var actionByOption = this._createActionByOption(event, this._getActionConfigsFull()[event]);\r\n            action = actArgs => {\r\n                Object.keys(actArgs).forEach(name => {\r\n                    if (isDefined(actArgs[name]) && domAdapter.isNode(actArgs[name])) {\r\n                        actArgs[name] = getPublicElement($(actArgs[name]))\r\n                    }\r\n                });\r\n                return actionByOption(actArgs)\r\n            }\r\n        }\r\n        this._actionsMap[event] = action\r\n    }\r\n    _optionChanged(option) {\r\n        var {\r\n            fullName: fullName,\r\n            name: name,\r\n            previousValue: previousValue,\r\n            value: value\r\n        } = option;\r\n        updatePropsImmutable(this._props, this.option(), name, fullName);\r\n        if (this._propsInfo.templates.includes(name) && value !== previousValue) {\r\n            this._componentTemplates[name] = this._createTemplateComponent(value)\r\n        }\r\n        if (name && this._getActionConfigsFull()[name]) {\r\n            this._addAction(name)\r\n        }\r\n        this._shouldRaiseContentReady = this._shouldRaiseContentReady || this._checkContentReadyOption(fullName);\r\n        super._optionChanged(option);\r\n        this._invalidate()\r\n    }\r\n    _extractDefaultSlot() {\r\n        if (this.option(\"_hasAnonymousTemplateContent\")) {\r\n            return renderer.createElement(TemplateWrapper, {\r\n                template: this._getTemplate(this._templateManager.anonymousTemplateName),\r\n                transclude: true,\r\n                renovated: true\r\n            })\r\n        }\r\n        return null\r\n    }\r\n    _createTemplateComponent(templateOption) {\r\n        if (!templateOption) {\r\n            return\r\n        }\r\n        var template = this._getTemplate(templateOption);\r\n        if (isString(template) && \"dx-renovation-template-mock\" === template) {\r\n            return\r\n        }\r\n        return model => renderer.createElement(TemplateWrapper, {\r\n            template: template,\r\n            model: model\r\n        })\r\n    }\r\n    _wrapKeyDownHandler(initialHandler) {\r\n        return options => {\r\n            var {\r\n                keyName: keyName,\r\n                originalEvent: originalEvent,\r\n                which: which\r\n            } = options;\r\n            var keys = this.customKeyHandlers;\r\n            var func = keys[keyName] || keys[which];\r\n            if (void 0 !== func) {\r\n                var handler = func.bind(this);\r\n                var result = handler(originalEvent, options);\r\n                if (!result) {\r\n                    originalEvent.cancel = true;\r\n                    return originalEvent\r\n                }\r\n            }\r\n            return null === initialHandler || void 0 === initialHandler ? void 0 : initialHandler(originalEvent, options)\r\n        }\r\n    }\r\n    _toPublicElement(element) {\r\n        return getPublicElement($(element))\r\n    }\r\n    _patchElementParam(value) {\r\n        try {\r\n            var result = $(value);\r\n            var element = null === result || void 0 === result ? void 0 : result.get(0);\r\n            return null !== element && void 0 !== element && element.nodeType ? element : value\r\n        } catch (error) {\r\n            return value\r\n        }\r\n    }\r\n    repaint() {\r\n        this._isNodeReplaced = false;\r\n        this._shouldRaiseContentReady = true;\r\n        this._removeWidget();\r\n        this._refresh()\r\n    }\r\n    _supportedKeys() {\r\n        return _extends({}, this.defaultKeyHandlers, this.customKeyHandlers)\r\n    }\r\n    registerKeyHandler(key, handler) {\r\n        this.customKeyHandlers[key] = handler\r\n    }\r\n    setAria(name, value) {\r\n        this._aria[name] = value;\r\n        this._initMarkup()\r\n    }\r\n}\r\nComponentWrapper.IS_RENOVATED_WIDGET = false;\r\nComponentWrapper.IS_RENOVATED_WIDGET = true;\r\n"]},"metadata":{},"sourceType":"module"}