{"ast":null,"code":"/**\r\n * DevExtreme (esm/renovation/ui/scheduler/timeZoneCalculator/utils.js)\r\n * Version: 22.1.6\r\n * Build date: Tue Oct 18 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport { isDefined } from \"../../../../core/utils/type\";\nimport dateUtils from \"../../../../core/utils/date\";\nimport { PathTimeZoneConversion } from \"./types\";\nvar MS_IN_MINUTE = 6e4;\nvar MS_IN_HOUR = 60 * MS_IN_MINUTE;\nexport class TimeZoneCalculator {\n  constructor(options) {\n    this.options = options;\n  }\n\n  createDate(sourceDate, info) {\n    var date = new Date(sourceDate);\n\n    switch (info.path) {\n      case PathTimeZoneConversion.fromSourceToAppointment:\n        return this.getConvertedDate(date, info.appointmentTimeZone, true, false);\n\n      case PathTimeZoneConversion.fromAppointmentToSource:\n        return this.getConvertedDate(date, info.appointmentTimeZone, true, true);\n\n      case PathTimeZoneConversion.fromSourceToGrid:\n        return this.getConvertedDate(date, info.appointmentTimeZone, false, false);\n\n      case PathTimeZoneConversion.fromGridToSource:\n        return this.getConvertedDate(date, info.appointmentTimeZone, false, true);\n\n      default:\n        throw new Error(\"not specified pathTimeZoneConversion\");\n    }\n  }\n\n  getOffsets(date, appointmentTimezone) {\n    var clientOffset = -this.getClientOffset(date) / dateUtils.dateToMilliseconds(\"hour\");\n    var commonOffset = this.getCommonOffset(date);\n    var appointmentOffset = this.getAppointmentOffset(date, appointmentTimezone);\n    return {\n      client: clientOffset,\n      common: !isDefined(commonOffset) ? clientOffset : commonOffset,\n      appointment: \"number\" !== typeof appointmentOffset ? clientOffset : appointmentOffset\n    };\n  }\n\n  getConvertedDateByOffsets(date, clientOffset, targetOffset, isBack) {\n    var direction = isBack ? -1 : 1;\n    var resultDate = new Date(date);\n    resultDate.setMinutes(resultDate.getMinutes() - direction * (60 * clientOffset));\n    resultDate.setMinutes(resultDate.getMinutes() + direction * (60 * targetOffset));\n    return new Date(resultDate);\n  }\n\n  getOriginStartDateOffsetInMs(date, timezone, isUTCDate) {\n    var offsetInHours = this.getOffsetInHours(date, timezone, isUTCDate);\n    return offsetInHours * MS_IN_HOUR;\n  }\n\n  getOffsetInHours(date, timezone, isUTCDate) {\n    var {\n      appointment: appointment,\n      client: client,\n      common: common\n    } = this.getOffsets(date, timezone);\n\n    if (!!timezone && isUTCDate) {\n      return appointment - client;\n    }\n\n    if (!!timezone && !isUTCDate) {\n      return appointment - common;\n    }\n\n    if (!timezone && isUTCDate) {\n      return common - client;\n    }\n\n    return 0;\n  }\n\n  getClientOffset(date) {\n    return this.options.getClientOffset(date);\n  }\n\n  getCommonOffset(date) {\n    return this.options.tryGetCommonOffset(date);\n  }\n\n  getAppointmentOffset(date, appointmentTimezone) {\n    return this.options.tryGetAppointmentOffset(date, appointmentTimezone);\n  }\n\n  getConvertedDate(date, appointmentTimezone, useAppointmentTimeZone, isBack) {\n    var newDate = new Date(date.getTime());\n    var offsets = this.getOffsets(newDate, appointmentTimezone);\n\n    if (useAppointmentTimeZone && !!appointmentTimezone) {\n      return this.getConvertedDateByOffsets(date, offsets.client, offsets.appointment, isBack);\n    }\n\n    return this.getConvertedDateByOffsets(date, offsets.client, offsets.common, isBack);\n  }\n\n}","map":{"version":3,"sources":["C:/Users/Zoran/source/repos/TransportApp/TransportLog-basic/node_modules/devextreme/esm/renovation/ui/scheduler/timeZoneCalculator/utils.js"],"names":["isDefined","dateUtils","PathTimeZoneConversion","MS_IN_MINUTE","MS_IN_HOUR","TimeZoneCalculator","constructor","options","createDate","sourceDate","info","date","Date","path","fromSourceToAppointment","getConvertedDate","appointmentTimeZone","fromAppointmentToSource","fromSourceToGrid","fromGridToSource","Error","getOffsets","appointmentTimezone","clientOffset","getClientOffset","dateToMilliseconds","commonOffset","getCommonOffset","appointmentOffset","getAppointmentOffset","client","common","appointment","getConvertedDateByOffsets","targetOffset","isBack","direction","resultDate","setMinutes","getMinutes","getOriginStartDateOffsetInMs","timezone","isUTCDate","offsetInHours","getOffsetInHours","tryGetCommonOffset","tryGetAppointmentOffset","useAppointmentTimeZone","newDate","getTime","offsets"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (esm/renovation/ui/scheduler/timeZoneCalculator/utils.js)\r\n * Version: 22.1.6\r\n * Build date: Tue Oct 18 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport {\r\n    isDefined\r\n} from \"../../../../core/utils/type\";\r\nimport dateUtils from \"../../../../core/utils/date\";\r\nimport {\r\n    PathTimeZoneConversion\r\n} from \"./types\";\r\nvar MS_IN_MINUTE = 6e4;\r\nvar MS_IN_HOUR = 60 * MS_IN_MINUTE;\r\nexport class TimeZoneCalculator {\r\n    constructor(options) {\r\n        this.options = options\r\n    }\r\n    createDate(sourceDate, info) {\r\n        var date = new Date(sourceDate);\r\n        switch (info.path) {\r\n            case PathTimeZoneConversion.fromSourceToAppointment:\r\n                return this.getConvertedDate(date, info.appointmentTimeZone, true, false);\r\n            case PathTimeZoneConversion.fromAppointmentToSource:\r\n                return this.getConvertedDate(date, info.appointmentTimeZone, true, true);\r\n            case PathTimeZoneConversion.fromSourceToGrid:\r\n                return this.getConvertedDate(date, info.appointmentTimeZone, false, false);\r\n            case PathTimeZoneConversion.fromGridToSource:\r\n                return this.getConvertedDate(date, info.appointmentTimeZone, false, true);\r\n            default:\r\n                throw new Error(\"not specified pathTimeZoneConversion\")\r\n        }\r\n    }\r\n    getOffsets(date, appointmentTimezone) {\r\n        var clientOffset = -this.getClientOffset(date) / dateUtils.dateToMilliseconds(\"hour\");\r\n        var commonOffset = this.getCommonOffset(date);\r\n        var appointmentOffset = this.getAppointmentOffset(date, appointmentTimezone);\r\n        return {\r\n            client: clientOffset,\r\n            common: !isDefined(commonOffset) ? clientOffset : commonOffset,\r\n            appointment: \"number\" !== typeof appointmentOffset ? clientOffset : appointmentOffset\r\n        }\r\n    }\r\n    getConvertedDateByOffsets(date, clientOffset, targetOffset, isBack) {\r\n        var direction = isBack ? -1 : 1;\r\n        var resultDate = new Date(date);\r\n        resultDate.setMinutes(resultDate.getMinutes() - direction * (60 * clientOffset));\r\n        resultDate.setMinutes(resultDate.getMinutes() + direction * (60 * targetOffset));\r\n        return new Date(resultDate)\r\n    }\r\n    getOriginStartDateOffsetInMs(date, timezone, isUTCDate) {\r\n        var offsetInHours = this.getOffsetInHours(date, timezone, isUTCDate);\r\n        return offsetInHours * MS_IN_HOUR\r\n    }\r\n    getOffsetInHours(date, timezone, isUTCDate) {\r\n        var {\r\n            appointment: appointment,\r\n            client: client,\r\n            common: common\r\n        } = this.getOffsets(date, timezone);\r\n        if (!!timezone && isUTCDate) {\r\n            return appointment - client\r\n        }\r\n        if (!!timezone && !isUTCDate) {\r\n            return appointment - common\r\n        }\r\n        if (!timezone && isUTCDate) {\r\n            return common - client\r\n        }\r\n        return 0\r\n    }\r\n    getClientOffset(date) {\r\n        return this.options.getClientOffset(date)\r\n    }\r\n    getCommonOffset(date) {\r\n        return this.options.tryGetCommonOffset(date)\r\n    }\r\n    getAppointmentOffset(date, appointmentTimezone) {\r\n        return this.options.tryGetAppointmentOffset(date, appointmentTimezone)\r\n    }\r\n    getConvertedDate(date, appointmentTimezone, useAppointmentTimeZone, isBack) {\r\n        var newDate = new Date(date.getTime());\r\n        var offsets = this.getOffsets(newDate, appointmentTimezone);\r\n        if (useAppointmentTimeZone && !!appointmentTimezone) {\r\n            return this.getConvertedDateByOffsets(date, offsets.client, offsets.appointment, isBack)\r\n        }\r\n        return this.getConvertedDateByOffsets(date, offsets.client, offsets.common, isBack)\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}