{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\n\nimport { EventHandler, formatUnit, createElement, addClass, closest, prepend, append, extend } from '@syncfusion/ej2-base';\nimport { ViewBase } from './view-base';\nimport { YearEvent } from '../event-renderer/year';\nimport * as util from '../base/util';\nimport * as event from '../base/constant';\nimport * as cls from '../base/css-constant';\n/**\n * year view\n */\n\nvar Year =\n/** @class */\nfunction (_super) {\n  __extends(Year, _super);\n\n  function Year(parent) {\n    var _this = _super.call(this, parent) || this;\n\n    _this.viewClass = 'e-year-view';\n    _this.isInverseTableSelect = false;\n    _this.yearEventModule = null;\n    return _this;\n  }\n\n  Year.prototype.getModuleName = function () {\n    return 'year';\n  };\n\n  Year.prototype.renderLayout = function (className) {\n    if (this.parent.resourceBase) {\n      this.parent.resourceBase.generateResourceLevels([{\n        renderDates: this.parent.activeView.renderDates\n      }]);\n    }\n\n    this.setPanel(createElement('div', {\n      className: cls.TABLE_WRAP_CLASS\n    }));\n    var viewTypeClass = this.parent.activeViewOptions.orientation === 'Horizontal' ? 'e-horizontal' : 'e-vertical';\n    addClass([this.element], [this.viewClass, viewTypeClass, className]);\n    this.renderPanel(className);\n\n    if (this.parent.activeViewOptions.allowVirtualScrolling) {\n      addClass([this.element], [cls.VIRTUAL_SCROLL_CLASS]);\n    }\n\n    var calendarTable = this.createTableLayout(cls.OUTER_TABLE_CLASS);\n    this.element.appendChild(calendarTable);\n    this.element.querySelector('table').setAttribute('role', 'presentation');\n    var calendarTBody = calendarTable.querySelector('tbody');\n    this.rowCount = this.getRowColumnCount('row');\n    this.columnCount = this.getRowColumnCount('column');\n    this.renderHeader(calendarTBody);\n    this.renderContent(calendarTBody);\n\n    if (this.parent.currentView !== 'Year' && this.parent.uiStateValues.isGroupAdaptive) {\n      this.generateColumnLevels();\n      this.renderResourceMobileLayout();\n    }\n\n    EventHandler.add(this.element.querySelector('.' + cls.CONTENT_WRAP_CLASS), 'scroll', this.onContentScroll, this);\n    this.parent.notify(event.contentReady, {});\n  }; // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  Year.prototype.renderHeader = function (headerWrapper) {};\n\n  Year.prototype.renderContent = function (content) {\n    var tr = createElement('tr');\n    content.appendChild(tr);\n    var td = createElement('td');\n    tr.appendChild(td);\n    this.element.querySelector('tbody').appendChild(tr);\n    var contentWrapper = createElement('div', {\n      className: cls.CONTENT_WRAP_CLASS\n    });\n    td.appendChild(contentWrapper);\n    var calendarTable = this.createTableLayout('e-calendar-table');\n    contentWrapper.appendChild(calendarTable);\n    var cTr = createElement('tr');\n    calendarTable.querySelector('tbody').appendChild(cTr);\n    var cTd = createElement('td');\n    cTr.appendChild(cTd);\n    var calendarWrapper = createElement('div', {\n      className: 'e-calendar-wrapper'\n    });\n    cTd.appendChild(calendarWrapper);\n    var months = this.getMonths();\n\n    for (var _i = 0, months_1 = months; _i < months_1.length; _i++) {\n      var month = months_1[_i];\n      var currentMonth = new Date(this.parent.selectedDate.getFullYear(), month, 1);\n      var calendarElement = createElement('div', {\n        className: 'e-month-calendar e-calendar',\n        attrs: {\n          'data-role': 'calendar'\n        }\n      });\n      calendarElement.appendChild(this.renderCalendarHeader(currentMonth));\n      calendarElement.appendChild(this.renderCalendarContent(currentMonth));\n      calendarWrapper.appendChild(calendarElement);\n    }\n  };\n\n  Year.prototype.renderCalendarHeader = function (currentDate) {\n    var headerWrapper = createElement('div', {\n      className: 'e-header e-month'\n    });\n    var headerContent = createElement('div', {\n      className: 'e-day e-title'\n    });\n\n    if (this.parent.monthHeaderTemplate) {\n      var args = {\n        date: currentDate,\n        type: 'monthHeader'\n      };\n      this.renderTemplates(this.parent.getMonthHeaderTemplate(), args, 'monthHeaderTemplate', this.parent.activeViewOptions.monthHeaderTemplateName, headerContent);\n    } else {\n      headerContent.innerHTML = this.getMonthName(currentDate);\n    }\n\n    headerWrapper.appendChild(headerContent);\n    this.parent.trigger(event.renderCell, {\n      elementType: 'headerCells',\n      element: headerContent,\n      date: currentDate\n    });\n    return headerWrapper;\n  };\n\n  Year.prototype.renderCalendarContent = function (currentDate) {\n    var dateCollection = this.getMonthDates(currentDate);\n    var contentWrapper = createElement('div', {\n      className: 'e-content e-month'\n    });\n    var contentTable = this.createTableLayout('e-calendar-table ' + cls.CONTENT_TABLE_CLASS);\n    contentWrapper.appendChild(contentTable);\n    this.setAriaAttributes(contentTable);\n    var thead = createElement('thead', {\n      className: 'e-week-header'\n    });\n    var tr = createElement('tr');\n    var currentWeek = util.getWeekFirstDate(util.firstDateOfMonth(currentDate), this.parent.firstDayOfWeek);\n\n    if (this.parent.activeViewOptions.showWeekNumber) {\n      tr.appendChild(createElement('th'));\n    }\n\n    for (var i = 0; i < util.WEEK_LENGTH; i++) {\n      if (this.parent.dayHeaderTemplate) {\n        var th = createElement('th');\n        var args = {\n          date: currentWeek,\n          type: 'dayHeader'\n        };\n        this.renderTemplates(this.parent.getDayHeaderTemplate(), args, 'dayHeaderTemplate', this.parent.activeViewOptions.dayHeaderTemplateName, th);\n        tr.appendChild(th);\n      } else {\n        tr.appendChild(createElement('th', {\n          innerHTML: this.parent.getDayNames('narrow')[currentWeek.getDay()]\n        }));\n      }\n\n      currentWeek = new Date(currentWeek.getTime() + util.MS_PER_DAY);\n    }\n\n    thead.appendChild(tr);\n    prepend([thead], contentTable);\n    var tbody = contentTable.querySelector('tbody');\n\n    while (dateCollection.length > 0) {\n      var weekDates = dateCollection.splice(0, util.WEEK_LENGTH);\n      var tr_1 = createElement('tr');\n\n      if (this.parent.activeViewOptions.showWeekNumber) {\n        var weekNumber = this.parent.getWeekNumberContent(weekDates);\n        var td = createElement('td', {\n          className: 'e-week-number',\n          attrs: {\n            'title': this.parent.localeObj.getConstant('week') + ' ' + weekNumber\n          },\n          innerHTML: weekNumber\n        });\n        tr_1.appendChild(td);\n        this.parent.trigger(event.renderCell, {\n          elementType: 'weekNumberCells',\n          element: td\n        });\n      }\n\n      for (var _i = 0, weekDates_1 = weekDates; _i < weekDates_1.length; _i++) {\n        var date = weekDates_1[_i];\n        var td = createElement('td', {\n          className: 'e-cell ' + cls.WORK_CELLS_CLASS,\n          attrs: {\n            'aria-selected': 'false',\n            'data-date': date.getTime().toString()\n          }\n        });\n\n        if (this.parent.activeViewOptions.cellHeaderTemplate) {\n          var args = {\n            date: date,\n            type: 'monthCells'\n          };\n          this.renderTemplates(this.parent.getCellHeaderTemplate(), args, 'cellHeaderTemplate', this.parent.activeViewOptions.cellHeaderTemplateName, td);\n        } else {\n          var span = createElement('span', {\n            className: 'e-day',\n            innerHTML: this.parent.globalize.formatDate(date, {\n              skeleton: 'd',\n              calendar: this.parent.getCalendarMode()\n            }),\n            attrs: {\n              title: this.parent.globalize.formatDate(date, {\n                type: 'date',\n                skeleton: 'full'\n              })\n            }\n          });\n          td.appendChild(span);\n        }\n\n        if (this.parent.activeViewOptions.cellTemplate) {\n          var args = {\n            date: date,\n            type: 'monthCells'\n          };\n          this.renderTemplates(this.parent.getCellTemplate(), args, 'cellTemplate', this.parent.activeViewOptions.cellTemplateName, td);\n        }\n\n        var classList = [];\n\n        if (currentDate.getMonth() !== date.getMonth()) {\n          classList.push(cls.OTHERMONTH_CLASS);\n        }\n\n        if (this.isCurrentDate(date) && currentDate.getMonth() === date.getMonth()) {\n          classList = classList.concat(['e-today', 'e-selected']);\n        }\n\n        if (classList.length > 0) {\n          addClass([td], classList);\n        }\n\n        tr_1.appendChild(td);\n        EventHandler.add(td, 'click', this.onCellClick, this);\n\n        if (!this.parent.isAdaptive) {\n          EventHandler.add(td, 'dblclick', this.parent.workCellAction.cellDblClick, this.parent.workCellAction);\n        }\n\n        this.parent.trigger(event.renderCell, {\n          elementType: 'workCells',\n          element: td,\n          date: date\n        });\n      }\n\n      tbody.appendChild(tr_1);\n    }\n\n    return contentWrapper;\n  };\n\n  Year.prototype.createTableColGroup = function (count) {\n    var colGroupEle = createElement('colgroup');\n\n    for (var i = 0; i < count; i++) {\n      colGroupEle.appendChild(createElement('col'));\n    }\n\n    return colGroupEle;\n  };\n\n  Year.prototype.getMonthName = function (date) {\n    var month = this.parent.globalize.formatDate(date, {\n      format: this.parent.activeViewOptions.dateFormat || 'MMMM y',\n      calendar: this.parent.getCalendarMode()\n    });\n    return util.capitalizeFirstWord(month, 'multiple');\n  };\n\n  Year.prototype.generateColumnLevels = function () {\n    var colLevels = [];\n    var level = this.getDateSlots([this.parent.selectedDate], this.parent.activeViewOptions.workDays);\n\n    if (this.parent.activeViewOptions.group.resources.length > 0) {\n      colLevels = this.parent.resourceBase.generateResourceLevels(level);\n\n      if (this.parent.uiStateValues.isGroupAdaptive) {\n        var resourceLevel = this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];\n        colLevels = [this.getDateSlots([this.parent.selectedDate], resourceLevel.workDays)];\n      }\n    } else {\n      colLevels.push(level);\n    }\n\n    colLevels.pop();\n    this.colLevels = colLevels;\n    return colLevels;\n  }; // eslint-disable-next-line max-len\n\n\n  Year.prototype.getDateSlots = function (renderDates, workDays, startHour, endHour) {\n    if (startHour === void 0) {\n      startHour = this.parent.workHours.start;\n    }\n\n    if (endHour === void 0) {\n      endHour = this.parent.workHours.end;\n    }\n\n    var dateCol = [{\n      date: renderDates[0],\n      type: 'dateHeader',\n      className: [cls.HEADER_CELLS_CLASS],\n      colSpan: 1,\n      workDays: workDays,\n      startHour: new Date(+this.parent.globalize.parseDate(startHour, {\n        skeleton: 'Hm'\n      })),\n      endHour: new Date(+this.parent.globalize.parseDate(endHour, {\n        skeleton: 'Hm'\n      }))\n    }];\n    return dateCol;\n  };\n\n  Year.prototype.getMonthDates = function (date) {\n    var startDate = util.getWeekFirstDate(util.firstDateOfMonth(date), this.parent.firstDayOfWeek);\n    var endDate = util.addDays(new Date(+startDate), 6 * util.WEEK_LENGTH);\n    var dateCollection = [];\n\n    for (var start = startDate; start.getTime() < endDate.getTime(); start = util.addDays(start, 1)) {\n      dateCollection.push(util.resetTime(new Date(start)));\n    }\n\n    return dateCollection;\n  };\n\n  Year.prototype.getRowColumnCount = function (type) {\n    var months = this.getMonths();\n    var year = this.parent.selectedDate.getFullYear();\n    var monthDaysCount = [];\n\n    for (var _i = 0, months_2 = months; _i < months_2.length; _i++) {\n      var month = months_2[_i];\n      monthDaysCount.push(new Date(year, month, 1).getDay() + new Date(year, month + 1, 0).getDate());\n    }\n\n    var maxCount = Math.max.apply(Math, monthDaysCount);\n    var count;\n\n    if (type === 'row') {\n      count = this.parent.activeViewOptions.orientation === 'Horizontal' ? months.length : maxCount;\n    } else {\n      count = this.parent.activeViewOptions.orientation === 'Horizontal' ? maxCount : months.length;\n    }\n\n    return count;\n  };\n\n  Year.prototype.isCurrentDate = function (date) {\n    return util.resetTime(new Date()).getTime() === util.resetTime(new Date(date.getTime())).getTime();\n  };\n\n  Year.prototype.getMonths = function () {\n    var _this = this; // eslint-disable-next-line prefer-spread\n\n\n    return Array.apply(null, {\n      length: this.parent.activeViewOptions.monthsCount\n    }).map(function (value, index) {\n      return _this.parent.firstMonthOfYear + index;\n    });\n  };\n\n  Year.prototype.renderTemplates = function (fn, args, tName, vName, ele) {\n    var templateId = this.parent.element.id + '_' + vName + tName;\n    var template = [].slice.call(fn(args, this.parent, tName, templateId, false));\n    append(template, ele);\n  };\n\n  Year.prototype.onCellClick = function (e) {\n    var target = closest(e.target, '.' + cls.WORK_CELLS_CLASS);\n    var startDate = this.parent.getDateFromElement(target);\n    this.parent.activeCellsData = this.parent.getCellDetails(target);\n    var isPrevious = startDate.getTime() < this.getStartDate().getTime();\n\n    if (isPrevious || startDate.getTime() > this.getEndDate().getTime()) {\n      this.parent.changeDate(this.parent.activeView.getNextPreviousDate(isPrevious ? 'previous' : 'next'), e);\n      var activeDate = this.parent.activeCellsData.startTime.getTime();\n      var inRange = activeDate >= this.getStartDate().getTime() && activeDate <= this.getEndDate().getTime();\n      var dateAttr = inRange ? activeDate : (isPrevious ? this.getEndDate() : this.getStartDate()).getTime();\n      var selectedCell = this.parent.element.querySelector(':not(.' + cls.OTHERMONTH_CLASS + ')[data-date=\"' + dateAttr + '\"]');\n      this.parent.selectCell(selectedCell);\n      this.parent.activeCellsData = this.parent.getCellDetails(selectedCell);\n    } else {\n      var endDate = util.addDays(new Date(startDate.getTime()), 1);\n      var filteredEvents = this.parent.eventBase.filterEvents(startDate, endDate);\n      var moreEventArgs = {\n        date: startDate,\n        event: filteredEvents,\n        element: e.target\n      };\n\n      if (target.classList.contains(cls.OTHERMONTH_CLASS)) {\n        target = this.parent.element.querySelector(':not(.' + cls.OTHERMONTH_CLASS + ')[data-date=\"' + target.getAttribute('data-date') + '\"]');\n      }\n\n      this.parent.activeCellsData = this.parent.getCellDetails(target);\n      var args = extend(this.parent.activeCellsData, {\n        cancel: false,\n        event: e,\n        name: 'cellClick'\n      });\n      this.parent.trigger(event.cellClick, args);\n      this.parent.quickPopup.moreEventClick(moreEventArgs, endDate);\n    }\n  };\n\n  Year.prototype.onContentScroll = function (e) {\n    var target = e.target;\n    var headerWrapper = this.getDatesHeaderElement();\n    this.parent.notify(event.virtualScroll, e);\n\n    if (headerWrapper) {\n      headerWrapper.firstElementChild.scrollLeft = target.scrollLeft;\n    }\n\n    var scrollTopSelector = \".\" + cls.MONTH_HEADER_WRAPPER + \",.\" + cls.RESOURCE_COLUMN_WRAP_CLASS;\n    var scrollTopElement = this.element.querySelector(scrollTopSelector);\n\n    if (scrollTopElement) {\n      scrollTopElement.scrollTop = target.scrollTop;\n    }\n\n    if (!this.parent.isAdaptive) {\n      this.parent.uiStateValues.top = e.target.scrollTop;\n    }\n\n    this.parent.uiStateValues.left = e.target.scrollLeft;\n    this.setPersistence();\n  };\n\n  Year.prototype.onScrollUiUpdate = function (args) {\n    var height = this.parent.element.offsetHeight - this.getHeaderBarHeight();\n    var headerWrapper = this.element.querySelector('.' + cls.DATE_HEADER_CONTAINER_CLASS);\n\n    if (headerWrapper) {\n      height -= headerWrapper.offsetHeight;\n    }\n\n    var contentWrapper = this.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n\n    if (contentWrapper) {\n      contentWrapper.style.height = formatUnit(height);\n    }\n\n    if (!this.parent.isAdaptive && headerWrapper) {\n      var scrollBarWidth = util.getScrollBarWidth();\n\n      if (contentWrapper.offsetWidth - contentWrapper.clientWidth > 0) {\n        headerWrapper.firstElementChild.style[args.cssProperties.border] = scrollBarWidth > 0 ? '1px' : '0px';\n        headerWrapper.style[args.cssProperties.padding] = scrollBarWidth > 0 ? scrollBarWidth - 1 + 'px' : '0px';\n      } else {\n        headerWrapper.firstElementChild.style[args.cssProperties.border] = '';\n        headerWrapper.style[args.cssProperties.padding] = '';\n      }\n    }\n\n    this.setColWidth(this.getContentAreaElement());\n    var leftPanelSelector = \".\" + cls.MONTH_HEADER_WRAPPER + \",.\" + cls.RESOURCE_COLUMN_WRAP_CLASS;\n    var leftPanelElement = this.element.querySelector(leftPanelSelector);\n\n    if (leftPanelElement) {\n      var isYScroll = contentWrapper.scrollWidth > contentWrapper.clientWidth;\n      leftPanelElement.style.height = formatUnit(height - (isYScroll ? 17 : 0));\n    }\n\n    if (!args.isPreventScrollUpdate) {\n      if (this.parent.uiStateValues.isInitial) {\n        this.parent.uiStateValues.isInitial = false;\n      } else {\n        if (leftPanelElement) {\n          leftPanelElement.scrollTop = this.parent.uiStateValues.top;\n        }\n\n        contentWrapper.scrollTop = this.parent.uiStateValues.top;\n        contentWrapper.scrollLeft = this.parent.uiStateValues.left;\n      }\n    }\n\n    this.retainScrollPosition();\n  };\n\n  Year.prototype.getStartDate = function () {\n    return new Date(this.parent.selectedDate.getFullYear(), this.parent.firstMonthOfYear % 12, 1);\n  };\n\n  Year.prototype.getEndDate = function () {\n    return util.addDays(util.addMonths(this.getStartDate(), this.parent.monthsCount), -1);\n  };\n\n  Year.prototype.startDate = function () {\n    return this.parent.currentView === 'Year' ? util.getWeekFirstDate(this.getStartDate(), this.parent.firstDayOfWeek) : this.getStartDate();\n  };\n\n  Year.prototype.endDate = function () {\n    return this.parent.currentView === 'Year' ? util.addDays(util.getWeekLastDate(this.getEndDate(), this.parent.firstDayOfWeek), 1) : util.addDays(this.getEndDate(), 1);\n  };\n\n  Year.prototype.getEndDateFromStartDate = function (start) {\n    var date = new Date(start.getTime());\n\n    if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n      date = util.lastDateOfMonth(date);\n    }\n\n    return util.addDays(new Date(date.getTime()), 1);\n  };\n\n  Year.prototype.getNextPreviousDate = function (type) {\n    return util.addYears(this.parent.selectedDate, type === 'next' ? 1 : -1);\n  };\n\n  Year.prototype.getDateRangeText = function () {\n    var startDate = this.getStartDate();\n    var endDate = this.getEndDate();\n\n    if (startDate.getFullYear() !== endDate.getFullYear()) {\n      return this.parent.globalize.formatDate(startDate, {\n        skeleton: 'yMMM'\n      }) + ' - ' + this.parent.globalize.formatDate(endDate, {\n        skeleton: 'yMMM'\n      });\n    } else {\n      return this.parent.globalize.formatDate(this.parent.selectedDate, {\n        skeleton: 'y'\n      });\n    }\n  };\n\n  Year.prototype.addEventListener = function () {\n    this.parent.on(event.scrollUiUpdate, this.onScrollUiUpdate, this);\n    this.parent.on(event.dataReady, this.onDataReady, this);\n  };\n\n  Year.prototype.removeEventListener = function () {\n    if (this.parent) {\n      this.parent.off(event.scrollUiUpdate, this.onScrollUiUpdate);\n      this.parent.off(event.dataReady, this.onDataReady);\n    }\n  };\n\n  Year.prototype.onDataReady = function (args) {\n    this.yearEventModule = new YearEvent(this.parent);\n    this.yearEventModule.renderAppointments();\n    this.parent.notify(event.eventsLoaded, args);\n  };\n\n  Year.prototype.scrollToDate = function (scrollDate) {\n    var date = +new Date(util.resetTime(scrollDate));\n    var element = this.element.querySelector('.' + cls.WORK_CELLS_CLASS + ':not(.' + cls.OTHERMONTH_CLASS + ')[data-date=\"' + date + '\"]');\n\n    if (element) {\n      element = closest(element, '.e-month-calendar');\n      this.getContentAreaElement().scrollTop = element.offsetTop;\n    }\n  };\n\n  Year.prototype.destroy = function () {\n    if (!this.parent || this.parent && this.parent.isDestroyed) {\n      return;\n    }\n\n    if (this.element) {\n      var contentScroll = this.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n\n      if (contentScroll) {\n        EventHandler.remove(contentScroll, 'scroll', this.onContentScroll);\n      }\n\n      if (this.yearEventModule) {\n        this.yearEventModule.destroy();\n        this.yearEventModule = null;\n      }\n\n      if (this.parent.resourceBase) {\n        this.parent.resourceBase.destroy();\n      }\n\n      _super.prototype.destroy.call(this);\n    }\n  };\n\n  return Year;\n}(ViewBase);\n\nexport { Year };","map":{"version":3,"sources":["C:/Users/Zoran/source/repos/TransportApp/TransportLog-basic/node_modules/@syncfusion/ej2-schedule/src/schedule/renderer/year.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","EventHandler","formatUnit","createElement","addClass","closest","prepend","append","extend","ViewBase","YearEvent","util","event","cls","Year","_super","parent","_this","call","viewClass","isInverseTableSelect","yearEventModule","getModuleName","renderLayout","className","resourceBase","generateResourceLevels","renderDates","activeView","setPanel","TABLE_WRAP_CLASS","viewTypeClass","activeViewOptions","orientation","element","renderPanel","allowVirtualScrolling","VIRTUAL_SCROLL_CLASS","calendarTable","createTableLayout","OUTER_TABLE_CLASS","appendChild","querySelector","setAttribute","calendarTBody","rowCount","getRowColumnCount","columnCount","renderHeader","renderContent","currentView","uiStateValues","isGroupAdaptive","generateColumnLevels","renderResourceMobileLayout","add","CONTENT_WRAP_CLASS","onContentScroll","notify","contentReady","headerWrapper","content","tr","td","contentWrapper","cTr","cTd","calendarWrapper","months","getMonths","_i","months_1","length","month","currentMonth","Date","selectedDate","getFullYear","calendarElement","attrs","renderCalendarHeader","renderCalendarContent","currentDate","headerContent","monthHeaderTemplate","args","date","type","renderTemplates","getMonthHeaderTemplate","monthHeaderTemplateName","innerHTML","getMonthName","trigger","renderCell","elementType","dateCollection","getMonthDates","contentTable","CONTENT_TABLE_CLASS","setAriaAttributes","thead","currentWeek","getWeekFirstDate","firstDateOfMonth","firstDayOfWeek","showWeekNumber","i","WEEK_LENGTH","dayHeaderTemplate","th","getDayHeaderTemplate","dayHeaderTemplateName","getDayNames","getDay","getTime","MS_PER_DAY","tbody","weekDates","splice","tr_1","weekNumber","getWeekNumberContent","localeObj","getConstant","weekDates_1","WORK_CELLS_CLASS","toString","cellHeaderTemplate","getCellHeaderTemplate","cellHeaderTemplateName","span","globalize","formatDate","skeleton","calendar","getCalendarMode","title","cellTemplate","getCellTemplate","cellTemplateName","classList","getMonth","push","OTHERMONTH_CLASS","isCurrentDate","concat","onCellClick","isAdaptive","workCellAction","cellDblClick","createTableColGroup","count","colGroupEle","format","dateFormat","capitalizeFirstWord","colLevels","level","getDateSlots","workDays","group","resources","resourceLevel","lastResourceLevel","groupIndex","pop","startHour","endHour","workHours","start","end","dateCol","HEADER_CELLS_CLASS","colSpan","parseDate","startDate","endDate","addDays","resetTime","year","monthDaysCount","months_2","getDate","maxCount","Math","max","apply","monthsCount","map","value","index","firstMonthOfYear","fn","tName","vName","ele","templateId","id","template","slice","e","target","getDateFromElement","activeCellsData","getCellDetails","isPrevious","getStartDate","getEndDate","changeDate","getNextPreviousDate","activeDate","startTime","inRange","dateAttr","selectedCell","selectCell","filteredEvents","eventBase","filterEvents","moreEventArgs","contains","getAttribute","cancel","name","cellClick","quickPopup","moreEventClick","getDatesHeaderElement","virtualScroll","firstElementChild","scrollLeft","scrollTopSelector","MONTH_HEADER_WRAPPER","RESOURCE_COLUMN_WRAP_CLASS","scrollTopElement","scrollTop","top","left","setPersistence","onScrollUiUpdate","height","offsetHeight","getHeaderBarHeight","DATE_HEADER_CONTAINER_CLASS","style","scrollBarWidth","getScrollBarWidth","offsetWidth","clientWidth","cssProperties","border","padding","setColWidth","getContentAreaElement","leftPanelSelector","leftPanelElement","isYScroll","scrollWidth","isPreventScrollUpdate","isInitial","retainScrollPosition","addMonths","getWeekLastDate","getEndDateFromStartDate","lastDateOfMonth","addYears","getDateRangeText","addEventListener","on","scrollUiUpdate","dataReady","onDataReady","removeEventListener","off","renderAppointments","eventsLoaded","scrollToDate","scrollDate","offsetTop","destroy","isDestroyed","contentScroll","remove"],"mappings":"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","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { EventHandler, formatUnit, createElement, addClass, closest, prepend, append, extend } from '@syncfusion/ej2-base';\nimport { ViewBase } from './view-base';\nimport { YearEvent } from '../event-renderer/year';\nimport * as util from '../base/util';\nimport * as event from '../base/constant';\nimport * as cls from '../base/css-constant';\n/**\n * year view\n */\nvar Year = /** @class */ (function (_super) {\n    __extends(Year, _super);\n    function Year(parent) {\n        var _this = _super.call(this, parent) || this;\n        _this.viewClass = 'e-year-view';\n        _this.isInverseTableSelect = false;\n        _this.yearEventModule = null;\n        return _this;\n    }\n    Year.prototype.getModuleName = function () {\n        return 'year';\n    };\n    Year.prototype.renderLayout = function (className) {\n        if (this.parent.resourceBase) {\n            this.parent.resourceBase.generateResourceLevels([{ renderDates: this.parent.activeView.renderDates }]);\n        }\n        this.setPanel(createElement('div', { className: cls.TABLE_WRAP_CLASS }));\n        var viewTypeClass = this.parent.activeViewOptions.orientation === 'Horizontal' ? 'e-horizontal' : 'e-vertical';\n        addClass([this.element], [this.viewClass, viewTypeClass, className]);\n        this.renderPanel(className);\n        if (this.parent.activeViewOptions.allowVirtualScrolling) {\n            addClass([this.element], [cls.VIRTUAL_SCROLL_CLASS]);\n        }\n        var calendarTable = this.createTableLayout(cls.OUTER_TABLE_CLASS);\n        this.element.appendChild(calendarTable);\n        this.element.querySelector('table').setAttribute('role', 'presentation');\n        var calendarTBody = calendarTable.querySelector('tbody');\n        this.rowCount = this.getRowColumnCount('row');\n        this.columnCount = this.getRowColumnCount('column');\n        this.renderHeader(calendarTBody);\n        this.renderContent(calendarTBody);\n        if (this.parent.currentView !== 'Year' && this.parent.uiStateValues.isGroupAdaptive) {\n            this.generateColumnLevels();\n            this.renderResourceMobileLayout();\n        }\n        EventHandler.add(this.element.querySelector('.' + cls.CONTENT_WRAP_CLASS), 'scroll', this.onContentScroll, this);\n        this.parent.notify(event.contentReady, {});\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    Year.prototype.renderHeader = function (headerWrapper) { };\n    Year.prototype.renderContent = function (content) {\n        var tr = createElement('tr');\n        content.appendChild(tr);\n        var td = createElement('td');\n        tr.appendChild(td);\n        this.element.querySelector('tbody').appendChild(tr);\n        var contentWrapper = createElement('div', { className: cls.CONTENT_WRAP_CLASS });\n        td.appendChild(contentWrapper);\n        var calendarTable = this.createTableLayout('e-calendar-table');\n        contentWrapper.appendChild(calendarTable);\n        var cTr = createElement('tr');\n        calendarTable.querySelector('tbody').appendChild(cTr);\n        var cTd = createElement('td');\n        cTr.appendChild(cTd);\n        var calendarWrapper = createElement('div', { className: 'e-calendar-wrapper' });\n        cTd.appendChild(calendarWrapper);\n        var months = this.getMonths();\n        for (var _i = 0, months_1 = months; _i < months_1.length; _i++) {\n            var month = months_1[_i];\n            var currentMonth = new Date(this.parent.selectedDate.getFullYear(), month, 1);\n            var calendarElement = createElement('div', {\n                className: 'e-month-calendar e-calendar',\n                attrs: { 'data-role': 'calendar' }\n            });\n            calendarElement.appendChild(this.renderCalendarHeader(currentMonth));\n            calendarElement.appendChild(this.renderCalendarContent(currentMonth));\n            calendarWrapper.appendChild(calendarElement);\n        }\n    };\n    Year.prototype.renderCalendarHeader = function (currentDate) {\n        var headerWrapper = createElement('div', { className: 'e-header e-month' });\n        var headerContent = createElement('div', { className: 'e-day e-title' });\n        if (this.parent.monthHeaderTemplate) {\n            var args = { date: currentDate, type: 'monthHeader' };\n            this.renderTemplates(this.parent.getMonthHeaderTemplate(), args, 'monthHeaderTemplate', this.parent.activeViewOptions.monthHeaderTemplateName, headerContent);\n        }\n        else {\n            headerContent.innerHTML = this.getMonthName(currentDate);\n        }\n        headerWrapper.appendChild(headerContent);\n        this.parent.trigger(event.renderCell, { elementType: 'headerCells', element: headerContent, date: currentDate });\n        return headerWrapper;\n    };\n    Year.prototype.renderCalendarContent = function (currentDate) {\n        var dateCollection = this.getMonthDates(currentDate);\n        var contentWrapper = createElement('div', { className: 'e-content e-month' });\n        var contentTable = this.createTableLayout('e-calendar-table ' + cls.CONTENT_TABLE_CLASS);\n        contentWrapper.appendChild(contentTable);\n        this.setAriaAttributes(contentTable);\n        var thead = createElement('thead', { className: 'e-week-header' });\n        var tr = createElement('tr');\n        var currentWeek = util.getWeekFirstDate(util.firstDateOfMonth(currentDate), this.parent.firstDayOfWeek);\n        if (this.parent.activeViewOptions.showWeekNumber) {\n            tr.appendChild(createElement('th'));\n        }\n        for (var i = 0; i < util.WEEK_LENGTH; i++) {\n            if (this.parent.dayHeaderTemplate) {\n                var th = createElement('th');\n                var args = { date: currentWeek, type: 'dayHeader' };\n                this.renderTemplates(this.parent.getDayHeaderTemplate(), args, 'dayHeaderTemplate', this.parent.activeViewOptions.dayHeaderTemplateName, th);\n                tr.appendChild(th);\n            }\n            else {\n                tr.appendChild(createElement('th', { innerHTML: this.parent.getDayNames('narrow')[currentWeek.getDay()] }));\n            }\n            currentWeek = new Date(currentWeek.getTime() + util.MS_PER_DAY);\n        }\n        thead.appendChild(tr);\n        prepend([thead], contentTable);\n        var tbody = contentTable.querySelector('tbody');\n        while (dateCollection.length > 0) {\n            var weekDates = dateCollection.splice(0, util.WEEK_LENGTH);\n            var tr_1 = createElement('tr');\n            if (this.parent.activeViewOptions.showWeekNumber) {\n                var weekNumber = this.parent.getWeekNumberContent(weekDates);\n                var td = createElement('td', {\n                    className: 'e-week-number',\n                    attrs: { 'title': this.parent.localeObj.getConstant('week') + ' ' + weekNumber },\n                    innerHTML: weekNumber\n                });\n                tr_1.appendChild(td);\n                this.parent.trigger(event.renderCell, { elementType: 'weekNumberCells', element: td });\n            }\n            for (var _i = 0, weekDates_1 = weekDates; _i < weekDates_1.length; _i++) {\n                var date = weekDates_1[_i];\n                var td = createElement('td', {\n                    className: 'e-cell ' + cls.WORK_CELLS_CLASS,\n                    attrs: { 'aria-selected': 'false', 'data-date': date.getTime().toString() }\n                });\n                if (this.parent.activeViewOptions.cellHeaderTemplate) {\n                    var args = { date: date, type: 'monthCells' };\n                    this.renderTemplates(this.parent.getCellHeaderTemplate(), args, 'cellHeaderTemplate', this.parent.activeViewOptions.cellHeaderTemplateName, td);\n                }\n                else {\n                    var span = createElement('span', {\n                        className: 'e-day', innerHTML: this.parent.globalize.formatDate(date, { skeleton: 'd', calendar: this.parent.getCalendarMode() }),\n                        attrs: { title: this.parent.globalize.formatDate(date, { type: 'date', skeleton: 'full' }) }\n                    });\n                    td.appendChild(span);\n                }\n                if (this.parent.activeViewOptions.cellTemplate) {\n                    var args = { date: date, type: 'monthCells' };\n                    this.renderTemplates(this.parent.getCellTemplate(), args, 'cellTemplate', this.parent.activeViewOptions.cellTemplateName, td);\n                }\n                var classList = [];\n                if (currentDate.getMonth() !== date.getMonth()) {\n                    classList.push(cls.OTHERMONTH_CLASS);\n                }\n                if (this.isCurrentDate(date) && currentDate.getMonth() === date.getMonth()) {\n                    classList = classList.concat(['e-today', 'e-selected']);\n                }\n                if (classList.length > 0) {\n                    addClass([td], classList);\n                }\n                tr_1.appendChild(td);\n                EventHandler.add(td, 'click', this.onCellClick, this);\n                if (!this.parent.isAdaptive) {\n                    EventHandler.add(td, 'dblclick', this.parent.workCellAction.cellDblClick, this.parent.workCellAction);\n                }\n                this.parent.trigger(event.renderCell, { elementType: 'workCells', element: td, date: date });\n            }\n            tbody.appendChild(tr_1);\n        }\n        return contentWrapper;\n    };\n    Year.prototype.createTableColGroup = function (count) {\n        var colGroupEle = createElement('colgroup');\n        for (var i = 0; i < count; i++) {\n            colGroupEle.appendChild(createElement('col'));\n        }\n        return colGroupEle;\n    };\n    Year.prototype.getMonthName = function (date) {\n        var month = this.parent.globalize.formatDate(date, {\n            format: this.parent.activeViewOptions.dateFormat || 'MMMM y',\n            calendar: this.parent.getCalendarMode()\n        });\n        return util.capitalizeFirstWord(month, 'multiple');\n    };\n    Year.prototype.generateColumnLevels = function () {\n        var colLevels = [];\n        var level = this.getDateSlots([this.parent.selectedDate], this.parent.activeViewOptions.workDays);\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            colLevels = this.parent.resourceBase.generateResourceLevels(level);\n            if (this.parent.uiStateValues.isGroupAdaptive) {\n                var resourceLevel = this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];\n                colLevels = [this.getDateSlots([this.parent.selectedDate], resourceLevel.workDays)];\n            }\n        }\n        else {\n            colLevels.push(level);\n        }\n        colLevels.pop();\n        this.colLevels = colLevels;\n        return colLevels;\n    };\n    // eslint-disable-next-line max-len\n    Year.prototype.getDateSlots = function (renderDates, workDays, startHour, endHour) {\n        if (startHour === void 0) { startHour = this.parent.workHours.start; }\n        if (endHour === void 0) { endHour = this.parent.workHours.end; }\n        var dateCol = [{\n                date: renderDates[0], type: 'dateHeader', className: [cls.HEADER_CELLS_CLASS], colSpan: 1, workDays: workDays,\n                startHour: new Date(+this.parent.globalize.parseDate(startHour, { skeleton: 'Hm' })),\n                endHour: new Date(+this.parent.globalize.parseDate(endHour, { skeleton: 'Hm' }))\n            }];\n        return dateCol;\n    };\n    Year.prototype.getMonthDates = function (date) {\n        var startDate = util.getWeekFirstDate(util.firstDateOfMonth(date), this.parent.firstDayOfWeek);\n        var endDate = util.addDays(new Date(+startDate), (6 * util.WEEK_LENGTH));\n        var dateCollection = [];\n        for (var start = startDate; start.getTime() < endDate.getTime(); start = util.addDays(start, 1)) {\n            dateCollection.push(util.resetTime(new Date(start)));\n        }\n        return dateCollection;\n    };\n    Year.prototype.getRowColumnCount = function (type) {\n        var months = this.getMonths();\n        var year = this.parent.selectedDate.getFullYear();\n        var monthDaysCount = [];\n        for (var _i = 0, months_2 = months; _i < months_2.length; _i++) {\n            var month = months_2[_i];\n            monthDaysCount.push(new Date(year, month, 1).getDay() + new Date(year, month + 1, 0).getDate());\n        }\n        var maxCount = Math.max.apply(Math, monthDaysCount);\n        var count;\n        if (type === 'row') {\n            count = this.parent.activeViewOptions.orientation === 'Horizontal' ? months.length : maxCount;\n        }\n        else {\n            count = this.parent.activeViewOptions.orientation === 'Horizontal' ? maxCount : months.length;\n        }\n        return count;\n    };\n    Year.prototype.isCurrentDate = function (date) {\n        return util.resetTime(new Date()).getTime() === util.resetTime(new Date(date.getTime())).getTime();\n    };\n    Year.prototype.getMonths = function () {\n        var _this = this;\n        // eslint-disable-next-line prefer-spread\n        return Array.apply(null, { length: this.parent.activeViewOptions.monthsCount }).map(function (value, index) {\n            return _this.parent.firstMonthOfYear + index;\n        });\n    };\n    Year.prototype.renderTemplates = function (fn, args, tName, vName, ele) {\n        var templateId = this.parent.element.id + '_' + vName + tName;\n        var template = [].slice.call(fn(args, this.parent, tName, templateId, false));\n        append(template, ele);\n    };\n    Year.prototype.onCellClick = function (e) {\n        var target = closest(e.target, '.' + cls.WORK_CELLS_CLASS);\n        var startDate = this.parent.getDateFromElement(target);\n        this.parent.activeCellsData = this.parent.getCellDetails(target);\n        var isPrevious = startDate.getTime() < this.getStartDate().getTime();\n        if (isPrevious || startDate.getTime() > this.getEndDate().getTime()) {\n            this.parent.changeDate(this.parent.activeView.getNextPreviousDate(isPrevious ? 'previous' : 'next'), e);\n            var activeDate = this.parent.activeCellsData.startTime.getTime();\n            var inRange = activeDate >= this.getStartDate().getTime() && activeDate <= this.getEndDate().getTime();\n            var dateAttr = inRange ? activeDate : (isPrevious ? this.getEndDate() : this.getStartDate()).getTime();\n            var selectedCell = this.parent.element.querySelector(':not(.' + cls.OTHERMONTH_CLASS + ')[data-date=\"' + dateAttr + '\"]');\n            this.parent.selectCell(selectedCell);\n            this.parent.activeCellsData = this.parent.getCellDetails(selectedCell);\n        }\n        else {\n            var endDate = util.addDays(new Date(startDate.getTime()), 1);\n            var filteredEvents = this.parent.eventBase.filterEvents(startDate, endDate);\n            var moreEventArgs = { date: startDate, event: filteredEvents, element: e.target };\n            if (target.classList.contains(cls.OTHERMONTH_CLASS)) {\n                target = this.parent.element.querySelector(':not(.' + cls.OTHERMONTH_CLASS + ')[data-date=\"' + target.getAttribute('data-date') + '\"]');\n            }\n            this.parent.activeCellsData = this.parent.getCellDetails(target);\n            var args = extend(this.parent.activeCellsData, { cancel: false, event: e, name: 'cellClick' });\n            this.parent.trigger(event.cellClick, args);\n            this.parent.quickPopup.moreEventClick(moreEventArgs, endDate);\n        }\n    };\n    Year.prototype.onContentScroll = function (e) {\n        var target = e.target;\n        var headerWrapper = this.getDatesHeaderElement();\n        this.parent.notify(event.virtualScroll, e);\n        if (headerWrapper) {\n            headerWrapper.firstElementChild.scrollLeft = target.scrollLeft;\n        }\n        var scrollTopSelector = \".\" + cls.MONTH_HEADER_WRAPPER + \",.\" + cls.RESOURCE_COLUMN_WRAP_CLASS;\n        var scrollTopElement = this.element.querySelector(scrollTopSelector);\n        if (scrollTopElement) {\n            scrollTopElement.scrollTop = target.scrollTop;\n        }\n        if (!this.parent.isAdaptive) {\n            this.parent.uiStateValues.top = e.target.scrollTop;\n        }\n        this.parent.uiStateValues.left = e.target.scrollLeft;\n        this.setPersistence();\n    };\n    Year.prototype.onScrollUiUpdate = function (args) {\n        var height = this.parent.element.offsetHeight - this.getHeaderBarHeight();\n        var headerWrapper = this.element.querySelector('.' + cls.DATE_HEADER_CONTAINER_CLASS);\n        if (headerWrapper) {\n            height -= headerWrapper.offsetHeight;\n        }\n        var contentWrapper = this.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n        if (contentWrapper) {\n            contentWrapper.style.height = formatUnit(height);\n        }\n        if (!this.parent.isAdaptive && headerWrapper) {\n            var scrollBarWidth = util.getScrollBarWidth();\n            if (contentWrapper.offsetWidth - contentWrapper.clientWidth > 0) {\n                headerWrapper.firstElementChild.style[args.cssProperties.border] = scrollBarWidth > 0 ? '1px' : '0px';\n                headerWrapper.style[args.cssProperties.padding] = scrollBarWidth > 0 ? scrollBarWidth - 1 + 'px' : '0px';\n            }\n            else {\n                headerWrapper.firstElementChild.style[args.cssProperties.border] = '';\n                headerWrapper.style[args.cssProperties.padding] = '';\n            }\n        }\n        this.setColWidth(this.getContentAreaElement());\n        var leftPanelSelector = \".\" + cls.MONTH_HEADER_WRAPPER + \",.\" + cls.RESOURCE_COLUMN_WRAP_CLASS;\n        var leftPanelElement = this.element.querySelector(leftPanelSelector);\n        if (leftPanelElement) {\n            var isYScroll = contentWrapper.scrollWidth > contentWrapper.clientWidth;\n            leftPanelElement.style.height = formatUnit(height - (isYScroll ? 17 : 0));\n        }\n        if (!args.isPreventScrollUpdate) {\n            if (this.parent.uiStateValues.isInitial) {\n                this.parent.uiStateValues.isInitial = false;\n            }\n            else {\n                if (leftPanelElement) {\n                    leftPanelElement.scrollTop = this.parent.uiStateValues.top;\n                }\n                contentWrapper.scrollTop = this.parent.uiStateValues.top;\n                contentWrapper.scrollLeft = this.parent.uiStateValues.left;\n            }\n        }\n        this.retainScrollPosition();\n    };\n    Year.prototype.getStartDate = function () {\n        return new Date(this.parent.selectedDate.getFullYear(), this.parent.firstMonthOfYear % 12, 1);\n    };\n    Year.prototype.getEndDate = function () {\n        return util.addDays(util.addMonths(this.getStartDate(), this.parent.monthsCount), -1);\n    };\n    Year.prototype.startDate = function () {\n        return this.parent.currentView === 'Year' ? util.getWeekFirstDate(this.getStartDate(), this.parent.firstDayOfWeek) : this.getStartDate();\n    };\n    Year.prototype.endDate = function () {\n        return this.parent.currentView === 'Year' ? util.addDays(util.getWeekLastDate(this.getEndDate(), this.parent.firstDayOfWeek), 1) :\n            util.addDays(this.getEndDate(), 1);\n    };\n    Year.prototype.getEndDateFromStartDate = function (start) {\n        var date = new Date(start.getTime());\n        if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n            date = util.lastDateOfMonth(date);\n        }\n        return util.addDays(new Date(date.getTime()), 1);\n    };\n    Year.prototype.getNextPreviousDate = function (type) {\n        return util.addYears(this.parent.selectedDate, ((type === 'next') ? 1 : -1));\n    };\n    Year.prototype.getDateRangeText = function () {\n        var startDate = this.getStartDate();\n        var endDate = this.getEndDate();\n        if (startDate.getFullYear() !== endDate.getFullYear()) {\n            return this.parent.globalize.formatDate(startDate, { skeleton: 'yMMM' }) + ' - ' + this.parent.globalize.formatDate(endDate, { skeleton: 'yMMM' });\n        }\n        else {\n            return this.parent.globalize.formatDate(this.parent.selectedDate, { skeleton: 'y' });\n        }\n    };\n    Year.prototype.addEventListener = function () {\n        this.parent.on(event.scrollUiUpdate, this.onScrollUiUpdate, this);\n        this.parent.on(event.dataReady, this.onDataReady, this);\n    };\n    Year.prototype.removeEventListener = function () {\n        if (this.parent) {\n            this.parent.off(event.scrollUiUpdate, this.onScrollUiUpdate);\n            this.parent.off(event.dataReady, this.onDataReady);\n        }\n    };\n    Year.prototype.onDataReady = function (args) {\n        this.yearEventModule = new YearEvent(this.parent);\n        this.yearEventModule.renderAppointments();\n        this.parent.notify(event.eventsLoaded, args);\n    };\n    Year.prototype.scrollToDate = function (scrollDate) {\n        var date = +new Date(util.resetTime(scrollDate));\n        var element = this.element.querySelector('.' + cls.WORK_CELLS_CLASS + ':not(.' + cls.OTHERMONTH_CLASS + ')[data-date=\"' + date + '\"]');\n        if (element) {\n            element = closest(element, '.e-month-calendar');\n            this.getContentAreaElement().scrollTop = element.offsetTop;\n        }\n    };\n    Year.prototype.destroy = function () {\n        if (!this.parent || this.parent && this.parent.isDestroyed) {\n            return;\n        }\n        if (this.element) {\n            var contentScroll = this.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n            if (contentScroll) {\n                EventHandler.remove(contentScroll, 'scroll', this.onContentScroll);\n            }\n            if (this.yearEventModule) {\n                this.yearEventModule.destroy();\n                this.yearEventModule = null;\n            }\n            if (this.parent.resourceBase) {\n                this.parent.resourceBase.destroy();\n            }\n            _super.prototype.destroy.call(this);\n        }\n    };\n    return Year;\n}(ViewBase));\nexport { Year };\n"]},"metadata":{},"sourceType":"module"}